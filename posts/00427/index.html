<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>GGPlot2 Part2 | Data Science with R</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://r.datascience.eu.org/posts/00427/">
<link rel="icon" href="../../files/favicon.ico" sizes="16x16">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Krishnakanth Allika">
<link rel="prev" href="../00426/" title="GGPlot2 Part1" type="text/html">
<link rel="next" href="../00428/" title="Hierarchical Clustering" type="text/html">
<meta property="og:site_name" content="Data Science with R">
<meta property="og:title" content="GGPlot2 Part2">
<meta property="og:url" content="https://r.datascience.eu.org/posts/00427/">
<meta property="og:description" content="library(swirl)
swirl()

| Welcome to swirl! Please sign in. If you've been here before, use the same name as
| you did then. If you are new, call yourself something unique.
What shall I call you? Kris">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2020-05-08T21:20:55+05:30">
<meta property="article:tag" content="GGPlot2">
<meta property="article:tag" content="ggplot()">
<meta property="article:tag" content="R">
<meta property="article:tag" content="swirl">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-expand-md static-top mb-4
navbar-dark bg-dark
"><div class="container">
<!-- This keeps the margins nice -->
        <a class="navbar-brand" href="https://r.datascience.eu.org/">

            <span id="blog-title">Data Science with R</span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bs-navbar">
            <ul class="navbar-nav mr-auto">
<li class="nav-item">
<a href="../../toc/" class="nav-link">Table of Contents</a>
                </li>
<li class="nav-item">
<a href="../../categories/" class="nav-link">Categories</a>
                </li>
<li class="nav-item">
<a href="../../tags/" class="nav-link">Tags</a>
                </li>
<li class="nav-item">
<a href="https://www.datascience.eu.org" class="nav-link">Main site</a>

                
            </li>
</ul>
<!-- DuckDuckGo custom search --><form method="get" id="search" action="https://duckduckgo.com/" class="navbar-form pull-left">
<input type="hidden" name="sites" value="https://r.datascience.eu.org/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" name="q" maxlength="255" placeholder="Search…" class="span2" style="margin-top: 4px;"><input type="submit" value="DuckDuckGo Search" style="visibility: hidden;">
</form>
<!-- End of custom search -->


            <ul class="navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">GGPlot2 Part2</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    Krishnakanth Allika
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2020-05-08T21:20:55+05:30" itemprop="datePublished" title="2020-05-08 21:20">2020-05-08 21:20</time></a>
            </p>
                <p class="commentline">
        
<a href="%7Blink%7D" onclick="this.href='/posts/00427/'; this.target='_self';"><span class="IDCommentsReplace" style="display:none">cache/posts/00427_GGPlot2 Part2.html</span>
<script>
var idcomments_acct = '7fae5836cfdd49cac599cac5b95695d1';
var idcomments_post_id = "cache/posts/00427_GGPlot2 Part2.html";
var idcomments_post_url = "/posts/00427/";
</script><script src="https://www.intensedebate.com/js/genericLinkWrapperV2.js"></script></a>


            

        </p>
</div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote>
<p>library(swirl)<br>
swirl()</p>
</blockquote>
<p>| Welcome to swirl! Please sign in. If you've been here before, use the same name as<br>
| you did then. If you are new, call yourself something unique.</p>
<p>What shall I call you? Krishnakanth Allika</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Exploratory Data Analysis<br>
2: Take me to the swirl course repository!</p>
<p>Selection: 1</p>
<p>| Please choose a lesson, or type 0 to return to course menu.</p>

<pre><code> 1: Principles of Analytic Graphs   2: Exploratory Graphs             
 3: Graphics Devices in R           4: Plotting Systems               
 5: Base Plotting System            6: Lattice Plotting System        
 7: Working with Colors             8: GGPlot2 Part1                  
 9: GGPlot2 Part2                  10: GGPlot2 Extras                 
11: Hierarchical Clustering        12: K Means Clustering             
13: Dimension Reduction            14: Clustering Example             
15: CaseStudy</code></pre>
<p>Selection: 9</p>
<p>| Attempting to load lesson dependencies...</p>
<p>| Package ‘ggplot2’ loaded correctly!</p>
<p>|                                                                              |   0%</p>
<p>| GGPlot2_Part2. (Slides for this and other Data Science courses may be found at github<br>
| <a href="https://github.com/DataScienceSpecialization/courses/">https://github.com/DataScienceSpecialization/courses/</a>. If you care to use them, they<br>
| must be downloaded as a zip file and viewed locally. This lesson corresponds to<br>
| 04_ExploratoryAnalysis/ggplot2.)</p>
<p>...</p>
<p>|==                                                                            |   2%<br>
| In a previous lesson we showed you the vast capabilities of qplot, the basic<br>
| workhorse function of the ggplot2 package. In this lesson we'll focus on some<br>
| fundamental components of the package. These underlie qplot which uses default values<br>
| when it calls them. If you understand these building blocks, you will be better able<br>
| to customize your plots. We'll use the second workhorse function in the package,<br>
| ggplot, as well as other graphing functions.</p>
<p>...</p>
<p>|===                                                                           |   4%<br>
| Do you remember what the gg of ggplot2 stands for?</p>
<p>1: grammar of graphics<br>
2: good grief<br>
3: great graphics<br>
4: goto graphics</p>
<p>Selection: 1</p>
<p>| That's the answer I was looking for.</p>
<p>|=====                                                                         |   6%<br>
| A "grammar" of graphics means that ggplot2 contains building blocks with which you<br>
| can create your own graphical objects. What are these basic components of ggplot2<br>
| plots? There are 7 of them.</p>
<p>...</p>
<p>|======                                                                        |   8%<br>
| Obviously, there's a DATA FRAME which contains the data you're trying to plot. Then<br>
| the AESTHETIC MAPPINGS determine how data are mapped to color, size, etc. The GEOMS<br>
| (geometric objects) are what you see in the plot (points, lines, shapes) and FACETS<br>
| are the panels used in conditional plots. You've used these or seen them used in the<br>
| first ggplot2 (qplot) lesson.</p>
<p>...</p>
<p>|========                                                                      |  10%<br>
| There are 3 more. STATS are statistical transformations such as binning, quantiles,<br>
| and smoothing which ggplot2 applies to the data. SCALES show what coding an aesthetic<br>
| map uses (for example, male = red, female = blue). Finally, the plots are depicted on<br>
| a COORDINATE SYSTEM. When you use qplot these were taken care of for you.</p>
<p>...</p>
<p>|==========                                                                    |  12%<br>
| Do you remember what the "artist's palette" model means in the context of plotting?</p>
<p>1: we draw pictures<br>
2: we mix paints<br>
3: plots are built up in layers<br>
4: things get messy</p>
<p>Selection: 3</p>
<p>| You nailed it! Good job!</p>
<p>|===========                                                                   |  15%<br>
| As in the base plotting system (and in contrast to the lattice system), when building<br>
| plots with ggplot2, the plots are built up in layers, maybe in several steps. You can<br>
| plot the data, then overlay a summary (for instance, a regression line or smoother)<br>
| and then add any metadata and annotations you need.</p>
<p>...</p>
<p>|=============                                                                 |  17%<br>
| We'll keep using the mpg data that comes with the ggplot2 package. Recall the<br>
| versatility of qplot. Just as a refresher, call qplot now with 5 arguments. The first<br>
| 3 deal with data - displ, hwy, and data=mpg. The fourth is geom set equal to the<br>
| concatenation of the two strings, "point" and "smooth". The fifth is facets set equal<br>
| to the formula .~drv. Try this now.</p>
<blockquote>
<p>qplot(displ,hwy,data=mpg,geom=c("point","smooth"),facets=.~drv)<br><code>geom_smooth()</code> using method = 'loess' and formula 'y ~ x'</p>
</blockquote>
<p><img src="../../images/r0041060.png" alt="image" title="image"></p>
<p>| You got it!</p>
<p>|===============                                                               |  19%<br>
| We see a 3 facet plot, one for each drive type (4, f, and r). Now we'll see how<br>
| ggplot works. We'll build up a similar plot using the basic components of the<br>
| package. We'll do this in a series of steps.</p>
<p>...</p>
<p>|================                                                              |  21%<br>
| First we'll create a variable g by assigning to it the output of a call to ggplot<br>
| with 2 arguments. The first is mpg (our dataset) and the second will tell ggplot what<br>
| we want to plot, in this case, displ and hwy. These are what we want our aesthetics<br>
| to represent so we enclose these as two arguments to the function aes. Try this now.</p>
<blockquote>
<p>g&lt;-ggplot(mpg,aes(displ,hwy))</p>
</blockquote>
<p>| You are quite good my friend!</p>
<p>|==================                                                            |  23%<br>
| Notice that nothing happened? As in the lattice system, ggplot created a graphical<br>
| object which we assigned to the variable g.</p>
<p>...</p>
<p>|====================                                                          |  25%<br>
| Run the R command summary with g as its argument to see what g contains.</p>
<blockquote>
<p>summary(g)</p>

<pre><code>data: manufacturer, model, displ, year, cyl, trans, drv, cty, hwy, fl, class  
  [234x11]  
mapping:  x = ~displ, y = ~hwy  
faceting: &lt;ggproto object: Class FacetNull, Facet, gg&gt;  
    compute_layout: function  
    draw_back: function  
    draw_front: function  
    draw_labels: function  
    draw_panels: function  
    finish_data: function  
    init_scales: function  
    map_data: function  
    params: list  
    setup_data: function  
    setup_params: function  
    shrink: TRUE  
    train_scales: function  
    vars: function  
    super:  &lt;ggproto object: Class FacetNull, Facet, gg&gt;</code></pre>
<p>| You are quite good my friend!</p>
</blockquote>
<p>|=====================                                                         |  27%<br>
| So g contains the mpg data with all its named components in a 234 by 11 matrix. It<br>
| also contains a mapping, x (displ) and y (hwy) which you specified, and no faceting.</p>
<p>...</p>
<p>|=======================                                                       |  29%<br>
| Note that if you tried to print g with the expressions g or print(g) you'd get an<br>
| error! Even though it's a great package, ggplot doesn't know how to display the data<br>
| yet since you didn't specify how you wanted to see it. Now type g+geom_point() and<br>
| see what happens.</p>
<blockquote>
<p>g+geom_point()</p>
</blockquote>
<p><img src="../../images/r0041070.png" alt="image" title="image"></p>
<p>| You are quite good my friend!</p>
<p>|========================                                                      |  31%<br>
| By calling the function geom_point you added a layer. By not assigning the expression<br>
| to a variable you displayed a plot. Notice that you didn't have to pass any arguments<br>
| to the function geom_point. That's because the object g has all the data stored in<br>
| it. (Remember you saw that when you ran summary on g before.) Now use the expression<br>
| you just typed (g + geom_point()) and add to it another layer, a call to<br>
| geom_smooth(). Notice the red message R gives you.</p>
<blockquote>
<p>g+geom_point()+geom_smooth()<br><code>geom_smooth()</code> using method = 'loess' and formula 'y ~ x'</p>
</blockquote>
<p><img src="../../images/r0041080.png" alt="image" title="image"></p>
<p>| You got it!</p>
<p>|==========================                                                    |  33%<br>
| The gray shadow around the blue line is the confidence band. See how wide it is at<br>
| the right? Let's try a different smoothing function. Use the up arrow to recover the<br>
| expression you just typed, and instead of calling geom_smooth with no arguments, call<br>
| it with the argument method set equal to the string "lm".</p>
<blockquote>
<p>g+geom_point()+geom_smooth(method="lm")<br><code>geom_smooth()</code> using formula 'y ~ x'</p>
</blockquote>
<p><img src="../../images/r0041090.png" alt="image" title="image"></p>
<p>| Excellent work!</p>
<p>|============================                                                  |  35%<br>
| By changing the smoothing function to "lm" (linear model) ggplot2 generated a<br>
| regression line through the data. Now recall the expression you just used and add to<br>
| it another call, this time to the function facet_grid. Use the formula . ~ drv as it<br>
| argument. Note that this is the same type of formula used in the calls to qplot.</p>
<blockquote>
<p>g+geom_point()+geom_smooth(method="lm")+facet_grid(.~drv)<br><code>geom_smooth()</code> using formula 'y ~ x'</p>
</blockquote>
<p><img src="../../images/r0041100.png" alt="image" title="image"></p>
<p>| Your dedication is inspiring!</p>
<p>|=============================                                                 |  38%<br>
| Notice how each panel is labeled with the appropriate factor. All the data associated<br>
| with 4-wheel drive cars is in the leftmost panel, front-wheel drive data is shown in<br>
| the middle panel, and rear-wheel drive data in the rightmost. Notice that this is<br>
| similar to the plot you created at the start of the lesson using qplot. (We used a<br>
| different smoothing function than previously.)</p>
<p>...</p>
<p>|===============================                                               |  40%<br>
| So far you've just used the default labels that ggplot provides. You can add your own<br>
| annotation using functions such as xlab(), ylab(), and ggtitle(). In addition, the<br>
| function labs() is more general and can be used to label either or both axes as well<br>
| as provide a title. Now recall the expression you just typed and add a call to the<br>
| function ggtitle with the argument "Swirl Rules!".</p>
<blockquote>
<p>g+geom_point()+geom_smooth(method="lm")+facet_grid(.~drv)+ggtitle("Swirl Rules!")<br><code>geom_smooth()</code> using formula 'y ~ x'</p>
</blockquote>
<p><img src="../../images/r0041110.png" alt="image" title="image"></p>
<p>| You are doing so well!</p>
<p>|================================                                              |  42%<br>
| Now that you've seen the basics we'll talk about customizing. Each of the “geom”<br>
| functions (e.g., _point and _smooth) has options to modify it. Also, the function<br>
| theme() can be used to modify aspects of the entire plot, e.g. the position of the<br>
| legend. Two standard appearance themes are included in ggplot. These are theme_gray()<br>
| which is the default theme (gray background with white grid lines) and theme_bw()<br>
| which is a plainer (black and white) color scheme.</p>
<p>...</p>
<p>|==================================                                            |  44%<br>
| Let's practice modifying aesthetics now. We'll use the graphic object g that we<br>
| already filled with mpg data and add a call to the function geom_point, but this time<br>
| we'll give geom_point 3 arguments. Set the argument color equal to "pink", the<br>
| argument size to 4, and the argument alpha to 1/2. Notice that all the arguments are<br>
| set equal to constants.</p>
<blockquote>
<p>g+geom_point(color="pink",size=4,alpha=0.5)</p>
</blockquote>
<p><img src="../../images/r0041120.png" alt="image" title="image"></p>
<p>| You are doing so well!</p>
<p>|====================================                                          |  46%<br>
| Notice the different shades of pink? That's the result of the alpha aesthetic which<br>
| you set to 1/2. This aesthetic tells ggplot how transparent the points should be.<br>
| Darker circles indicate values hit by multiple data points.</p>
<p>...</p>
<p>|=====================================                                         |  48%<br>
| Now we'll modify the aesthetics so that color indicates which drv type each point<br>
| represents. Again, use g and add to it a call to the function geom_point with 3<br>
| arguments. The first is size set equal to 4, the second is alpha equal to 1/2. The<br>
| third is a call to the function aes with the argument color set equal to drv. Note<br>
| that you MUST use the function aes since the color of the points is data dependent<br>
| and not a constant as it was in the previous example.</p>
<blockquote>
<p>g+geom_point(size=4,alpha=0.5,aes(color=drv))</p>
</blockquote>
<p><img src="../../images/r0041130.png" alt="image" title="image"></p>
<p>| That's a job well done!</p>
<p>|=======================================                                       |  50%<br>
| Notice the helpful legend on the right decoding the relationship between color and<br>
| drv.</p>
<p>...</p>
<p>|=========================================                                     |  52%<br>
| Now we'll practice modifying labels. Again, we'll use g and add to it calls to 3<br>
| functions. First, add a call to geom_point with an argument making the color<br>
| dependent on the drv type (as we did in the previous example). Second, add a call to<br>
| the function labs with the argument title set equal to "Swirl Rules!". Finally, add a<br>
| call to labs with 2 arguments, one setting x equal to "Displacement" and the other<br>
| setting y equal to "Hwy Mileage".</p>
<blockquote>
<p>g+geom_point(aes(color=drv))+labs(title="Swirl Rules!")+labs(x="Displacement",y="Hwy Mileage")</p>
</blockquote>
<p><img src="../../images/r0041140.png" alt="image" title="image"></p>
<p>| You are amazing!</p>
<p>|==========================================                                    |  54%<br>
| Note that you could have combined the two calls to the function labs in the previous<br>
| example. Now we'll practice customizing the geom_smooth calls. Use g and add to it a<br>
| call to geom_point setting the color to drv type (remember to use the call to the aes<br>
| function), size set to 2 and alpha to 1/2. Then add a call to geom_smooth with 4<br>
| arguments. Set size equal to 4, linetype to 3, method to "lm", and se to FALSE.</p>
<blockquote>
<p>g+geom_point(aes(color=drv),size=2,alpha=0.5)+geom_smooth(size=4,linetype=3,method="lm",se=FALSE)<br><code>geom_smooth()</code> using formula 'y ~ x'</p>
</blockquote>
<p><img src="../../images/r0041150.png" alt="image" title="image"></p>
<p>| Perseverance, that's the answer.</p>
<p>|============================================                                  |  56%<br>
| What did these arguments do? The method specified a linear regression (note the<br>
| negative slope indicating that the bigger the displacement the lower the gas<br>
| mileage), the linetype specified that it should be dashed (not continuous), the size<br>
| made the dashes big, and the se flag told ggplot to turn off the gray shadows<br>
| indicating standard errors (confidence intervals).</p>
<p>...</p>
<p>|=============================================                                 |  58%<br>
| Finally, let's do a simple plot using the black and white theme, theme_bw. Specify g<br>
| and add a call to the function geom_point with the argument setting the color to the<br>
| drv type. Then add a call to the function theme_bw with the argument base_family set<br>
| equal to "Times". See if you notice the difference.</p>
<blockquote>
<p>g+geom_point(aes(color=drv))+theme_bw(base_family = "Times")<br>
There were 13 warnings (use warnings() to see them)</p>
</blockquote>
<p><img src="../../images/r0041160.png" alt="image" title="image"></p>
<p>| Nice work!</p>
<p>|===============================================                               |  60%<br>
| No more gray background! Also, if you have good eyesight, you'll notice that the font<br>
| in the labels changed.</p>
<p>...</p>
<p>|=================================================                             |  62%<br>
| One final note before we go through a more complicated, layered ggplot example, and<br>
| this concerns the limits of the axes. We're pointing this out to emphasize a subtle<br>
| difference between ggplot and the base plotting function plot.</p>
<p>...</p>
<p>|==================================================                            |  65%<br>
| We've created some random x and y data, called myx and myy, components of a dataframe<br>
| called testdat. These represent 100 random normal points, except halfway through, we<br>
| made one of the points be an outlier. That is, we set its y-value to be out of range<br>
| of the other points. Use the base plotting function plot to create a line plot of<br>
| this data. Call it with 4 arguments - myx, myy, type="l", and ylim=c(-3,3). The<br>
| type="l" tells plot you want to display the data as a line instead of as a<br>
| scatterplot.</p>
<p>warning messages from top-level task callback 'mini'<br>
There were 40 warnings (use warnings() to see them)</p>
<blockquote>
<p>play()</p>
</blockquote>
<p>| Entering play mode. Experiment as you please, then type nxt() when you are ready to<br>
| resume the lesson.</p>
<blockquote>
<p>g+geom_point(aes(color=drv))+theme_dark()</p>
</blockquote>
<p><img src="../../images/r0041170.png" alt="image" title="image"></p>
<blockquote>
<p>g+geom_point(aes(color=drv))+theme_minimal()</p>
</blockquote>
<p><img src="../../images/r0041180.png" alt="image" title="image"></p>
<blockquote>
<p>g+geom_point(aes(color=drv))+theme_grey()</p>
</blockquote>
<p><img src="../../images/r0041190.png" alt="image" title="image"></p>
<blockquote>
<p>nxt()</p>
</blockquote>
<p>| Resuming lesson...</p>
<p>| We've created some random x and y data, called myx and myy, components of a dataframe<br>
| called testdat. These represent 100 random normal points, except halfway through, we<br>
| made one of the points be an outlier. That is, we set its y-value to be out of range<br>
| of the other points. Use the base plotting function plot to create a line plot of<br>
| this data. Call it with 4 arguments - myx, myy, type="l", and ylim=c(-3,3). The<br>
| type="l" tells plot you want to display the data as a line instead of as a<br>
| scatterplot.</p>
<blockquote>
<p>plot(myx,myy,type="l",ylim=c(-3,3))</p>
</blockquote>
<p><img src="../../images/r0041200.png" alt="image" title="image"></p>
<p>| You got it!</p>
<p>|====================================================                          |  67%<br>
| Notice how plot plotted the points in the (-3,3) range for y-values. The outlier at<br>
| (50,100) is NOT shown on the line plot. Now we'll plot the same data with ggplot.<br>
| Recall that the name of the dataframe is testdat. Create the graphical object g with<br>
| a call to ggplot with 2 arguments, testdat (the data) and a call to aes with 2<br>
| arguments, x set equal to myx, and y set equal to myy.</p>
<blockquote>
<p>g&lt;-ggplot(data=testdat,aes(x=myx,y=myy))</p>
</blockquote>
<p>| You got it!</p>
<p>|======================================================                        |  69%<br>
| Now add a call to geom_line with 0 arguments to g.</p>
<blockquote>
<p>g+geom_line()</p>
</blockquote>
<p><img src="../../images/r0041210.png" alt="image" title="image"></p>
<p>| You got it right!</p>
<p>|=======================================================                       |  71%<br>
| Notice how ggplot DID display the outlier point at (50,100). As a result the rest of<br>
| the data is smashed down so you don't get to see what the bulk of it looks like. The<br>
| single outlier probably isn't important enough to dominate the graph. How do we get<br>
| ggplot to behave more like plot in a situation like this?</p>
<p>...</p>
<p>|=========================================================                     |  73%<br>
| Let's take a guess that in addition to adding geom_line() to g we also just have to<br>
| add ylim(-3,3) to it as we did with the call to plot. Try this now to see what<br>
| happens.</p>
<blockquote>
<p>g+geom_line()+ylim(-3,3)</p>
</blockquote>
<p><img src="../../images/r0041220.png" alt="image" title="image"></p>
<p>| Perseverance, that's the answer.</p>
<p>|==========================================================                    |  75%<br>
| Notice that by doing this, ggplot simply ignored the outlier point at (50,100).<br>
| There's a break in the line which isn't very noticeable. Now recall that at the<br>
| beginning of the lesson we mentioned 7 components of a ggplot plot, one of which was<br>
| a coordinate system. This is a situation where using a coordinate system would be<br>
| helpful. Instead of adding ylim(-3,3) to the expression g+geom_line(), add a call to<br>
| the function coord_cartesian with the argument ylim set equal to c(-3,3).</p>
<blockquote>
<p>g+geom_line()+coord_cartesian(ylim=c(-3,3))</p>
</blockquote>
<p><img src="../../images/r0041230.png" alt="image" title="image"></p>
<p>| You are really on a roll!</p>
<p>|============================================================                  |  77%<br>
| See the difference? This looks more like the plot produced by the base plot function.<br>
| The outlier y value at x=50 is not shown, but the plot indicates that it is larger<br>
| than 3.</p>
<p>...</p>
<p>|==============================================================                |  79%<br>
| We'll close with a more complicated example to show you the full power of ggplot and<br>
| the entire ggplot2 package. We'll continue to work with the mpg dataset.</p>
<p>...</p>
<p>|===============================================================               |  81%<br>
| Start by creating the graphical object g by assigning to it a call to ggplot with 2<br>
| arguments. The first is the dataset and the second is a call to the function aes.<br>
| This call will have 3 arguments, x set equal to displ, y set equal to hwy, and color<br>
| set equal to factor(year). This last will allow us to distinguish between the two<br>
| manufacturing years (1999 and 2008) in our data.</p>
<blockquote>
<p>g&lt;-ggplot(data=mpg,aes(x=displ,y=hwy,color=factor(year)))</p>
</blockquote>
<p>| All that practice is paying off!</p>
<p>|=================================================================             |  83%<br>
| Uh oh! Nothing happened. Does g exist? Of course, it just isn't visible yet since you<br>
| didn't add a layer.</p>
<p>...</p>
<p>|===================================================================           |  85%<br>
| If you typed g at the command line, what would happen?</p>
<p>1: a scatterplot would appear with 2 colors of points<br>
2: I would have to try this to answer the question<br>
3: R would return an error in red</p>
<p>Selection: 3</p>
<p>| You got it!</p>
<p>|====================================================================          |  88%<br>
| We'll build the plot up step by step. First add to g a call to the function<br>
| geom_point with 0 arguments.</p>
<blockquote>
<p>g+geom_point()</p>
</blockquote>
<p><img src="../../images/r0041240.png" alt="image" title="image"></p>
<p>| You nailed it! Good job!</p>
<p>|======================================================================        |  90%<br>
| A simple, yet comfortingly familiar scatterplot appears. Let's make our display a 2<br>
| dimensional multi-panel plot. Recall your last command (with the up arrow) and add to<br>
| it a call the function facet_grid. Give it 2 arguments. The first is the formula<br>
| drv~cyl, and the second is the argument margins set equal to TRUE. Try this now.</p>
<blockquote>
<p>g+geom_point()+facet_grid(drv~cyl,margins=TRUE)</p>
</blockquote>
<p><img src="../../images/r0041250.png" alt="image" title="image"></p>
<p>| Keep up the great work!</p>
<p>|========================================================================      |  92%<br>
| A 4 by 5 plot, huh? The margins argument tells ggplot to display the marginal totals<br>
| over each row and column, so instead of seeing 3 rows (the number of drv factors) and<br>
| 4 columns (the number of cyl factors) we see a 4 by 5 display. Note that the panel in<br>
| position (4,5) is a tiny version of the scatterplot of the entire dataset.</p>
<p>...</p>
<p>|=========================================================================     |  94%<br>
| Now add to your last command (or retype it if you like to type) a call to geom_smooth<br>
| with 4 arguments. These are method set to "lm", se set to FALSE, size set to 2, and<br>
| color set to "black".</p>
<blockquote>
<p>g+geom_point()+facet_grid(drv~cyl,margins=TRUE)+geom_smooth(method="lm",se=FALSE,size=2,color="black")<br><code>geom_smooth()</code> using formula 'y ~ x'</p>
</blockquote>
<p><img src="../../images/r0041260.png" alt="image" title="image"></p>
<p>| Keep up the great work!</p>
<p>|===========================================================================   |  96%<br>
| Angry Birds? Finally, add to your last command (or retype it if you like to type) a<br>
| call to the function labs with 3 arguments. These are x set to "Displacement", y set<br>
| to "Highway Mileage", and title set to "Swirl Rules!".</p>
<blockquote>
<p>g+geom_point()+facet_grid(drv~cyl,margins=TRUE)+geom_smooth(method="lm",se=FALSE,size=2,color="black")+labs(x="Displacement",y="Highway Mileage",title="Swirl Rules!")<br><code>geom_smooth()</code> using formula 'y ~ x'</p>
</blockquote>
<p><img src="../../images/r0041270.png" alt="image" title="image"></p>
<p>| Keep working like that and you'll get there!</p>
<p>|============================================================================  |  98%<br>
| You could have done these labels with separate calls to labs but we thought you'd be<br>
| sick of this by now. Anyway, congrats! You've concluded part 2 of ggplot2. We hope<br>
| you got enough mileage out of the lesson. If you like ggplot2 you can do some extras<br>
| with the extra lesson.</p>
<p>...</p>
<p>|==============================================================================| 100%<br>
| Would you like to receive credit for completing this course on Coursera.org?</p>
<p>1: Yes<br>
2: No</p>
<p>Selection: 1<br>
What is your email address? xxxxxx@xxxxxxxxxxxx<br>
What is your assignment token? xXxXxxXXxXxxXXXx<br>
Grade submission succeeded!</p>
<p>| You got it right!</p>
<p>| You've reached the end of this lesson! Returning to the main menu...</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Exploratory Data Analysis<br>
2: Take me to the swirl course repository!</p>
<p>Selection: 0</p>
<p>| Leaving swirl now. Type swirl() to resume.</p>
<blockquote>
<p>g+geom_point()+facet_grid(drv~cyl,margins=TRUE)+geom_smooth(method="lm",se=FALSE,size=2,color="black")+labs(x="Displacement",y="Highway Mileage",title="Swirl Rules!")+theme(plot.title = element_text(hjust = 0.5))<br><code>geom_smooth()</code> using formula 'y ~ x'</p>
</blockquote>
<p><img src="../../images/r0041280.png" alt="image" title="image"></p>
<blockquote>
<p>rm(list=ls())</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Last updated 2020-05-08 21:23:15.085181 IST</em></p>

</div>
</div>
</div>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../tags/ggplot2/" rel="tag">GGPlot2</a></li>
            <li><a class="tag p-category" href="../../tags/ggplot/" rel="tag">ggplot()</a></li>
            <li><a class="tag p-category" href="../../tags/r/" rel="tag">R</a></li>
            <li><a class="tag p-category" href="../../tags/swirl/" rel="tag">swirl</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../00426/" rel="prev" title="GGPlot2 Part1">Previous post</a>
            </li>
            <li class="next">
                <a href="../00428/" rel="next" title="Hierarchical Clustering">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
        
        
<script>
var idcomments_acct = '7fae5836cfdd49cac599cac5b95695d1';
var idcomments_post_id = "cache/posts/00427_GGPlot2 Part2.html";
var idcomments_post_url = "https://r.datascience.eu.org/posts/00427/";
</script><span id="IDCommentsPostTitle" style="display:none"></span>
<script src="https://www.intensedebate.com/js/genericCommentWrapperV2.js"></script></section><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha384-3lJUsx1TJHt7BA4udB5KPnDrlkO8T6J6v/op7ui0BbCjvZ9WqV4Xm6DTP6kQ/iBH" crossorigin="anonymous"></script><script type="text/x-mathjax-config">
        MathJax.Hub.Config({tex2jax: {inlineMath: [['$latex ','$'], ['\\(','\\)']]}});
        </script></article><!--End of body content--><footer id="footer">
            Contents © 2020 Krishnakanth Allika 
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
<img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png"></a><br>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.
            
            
        </footer>
</div>
</div>


        <script src="../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-163231811-1"></script><script>  window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-163231811-1'); gtag('set', {'user_id': 'USER_ID'});</script>
</body>
</html>
