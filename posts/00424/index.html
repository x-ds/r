<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Lattice Plotting System | Data Science with R</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://r.datascience.eu.org/posts/00424/">
<link rel="icon" href="../../files/favicon.ico" sizes="16x16">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Krishnakanth Allika">
<link rel="prev" href="../00423/" title="Base Plotting System" type="text/html">
<link rel="next" href="../00425/" title="Working with Colors" type="text/html">
<meta property="og:site_name" content="Data Science with R">
<meta property="og:title" content="Lattice Plotting System">
<meta property="og:url" content="https://r.datascience.eu.org/posts/00424/">
<meta property="og:description" content='R version 4.0.0 (2020-04-24) -- "Arbor Day"
Copyright (C) 2020 The R Foundation for Statistical Computing
Platform: x86_64-w64-mingw32/x64 (64-bit)
R is free software and comes with ABSOLUTELY NO WARR'>
<meta property="og:type" content="article">
<meta property="article:published_time" content="2020-05-08T12:18:03+05:30">
<meta property="article:tag" content="lattice">
<meta property="article:tag" content="R">
<meta property="article:tag" content="swirl">
<meta property="article:tag" content="xyplot()">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-expand-md static-top mb-4
navbar-dark bg-dark
"><div class="container">
<!-- This keeps the margins nice -->
        <a class="navbar-brand" href="https://r.datascience.eu.org/">

            <span id="blog-title">Data Science with R</span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bs-navbar">
            <ul class="navbar-nav mr-auto">
<li class="nav-item">
<a href="../../toc/" class="nav-link">Table of Contents</a>
                </li>
<li class="nav-item">
<a href="../../categories/" class="nav-link">Categories</a>
                </li>
<li class="nav-item">
<a href="../../tags/" class="nav-link">Tags</a>
                </li>
<li class="nav-item">
<a href="https://www.datascience.eu.org" class="nav-link">Main site</a>

                
            </li>
</ul>
<!-- DuckDuckGo custom search --><form method="get" id="search" action="https://duckduckgo.com/" class="navbar-form pull-left">
<input type="hidden" name="sites" value="https://r.datascience.eu.org/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" name="q" maxlength="255" placeholder="Search…" class="span2" style="margin-top: 4px;"><input type="submit" value="DuckDuckGo Search" style="visibility: hidden;">
</form>
<!-- End of custom search -->


            <ul class="navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Lattice Plotting System</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    Krishnakanth Allika
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2020-05-08T12:18:03+05:30" itemprop="datePublished" title="2020-05-08 12:18">2020-05-08 12:18</time></a>
            </p>
                <p class="commentline">
        
<a href="%7Blink%7D" onclick="this.href='/posts/00424/'; this.target='_self';"><span class="IDCommentsReplace" style="display:none">cache/posts/00424_Lattice Plotting System.html</span>
<script>
var idcomments_acct = '7fae5836cfdd49cac599cac5b95695d1';
var idcomments_post_id = "cache/posts/00424_Lattice Plotting System.html";
var idcomments_post_url = "/posts/00424/";
</script><script src="https://www.intensedebate.com/js/genericLinkWrapperV2.js"></script></a>


            

        </p>
</div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>R version 4.0.0 (2020-04-24) -- "Arbor Day"<br>
Copyright (C) 2020 The R Foundation for Statistical Computing<br>
Platform: x86_64-w64-mingw32/x64 (64-bit)</p>
<p>R is free software and comes with ABSOLUTELY NO WARRANTY.<br>
You are welcome to redistribute it under certain conditions.<br>
Type 'license()' or 'licence()' for distribution details.</p>
<p>Natural language support but running in an English locale</p>
<p>R is a collaborative project with many contributors.<br>
Type 'contributors()' for more information and<br>
'citation()' on how to cite R or R packages in publications.</p>
<p>Type 'demo()' for some demos, 'help()' for on-line help, or<br>
'help.start()' for an HTML browser interface to help.<br>
Type 'q()' to quit R.</p>
<blockquote>
<p>setwd("C:/Users/kk/Downloads/edu/DataScienceJHU/DataScienceWithR/04_Exploratory_Data_Analysis/workspace")<br>
library(ggplot2)<br>
library(lattice)<br>
library(swirl)</p>
</blockquote>
<p>| Hi! Type swirl() when you are ready to begin.</p>
<blockquote>
<p>swirl()</p>
</blockquote>
<p>| Welcome to swirl! Please sign in. If you've been here before, use the same name as<br>
| you did then. If you are new, call yourself something unique.</p>
<p>What shall I call you? Krishnakanth Allika</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Exploratory Data Analysis<br>
2: Take me to the swirl course repository!</p>
<p>Selection: 1</p>
<p>| Please choose a lesson, or type 0 to return to course menu.</p>
<p>1: Principles of Analytic Graphs   2: Exploratory Graphs<br>
 3: Graphics Devices in R           4: Plotting Systems<br>
 5: Base Plotting System            6: Lattice Plotting System<br>
 7: Working with Colors             8: GGPlot2 Part1<br>
 9: GGPlot2 Part2                  10: GGPlot2 Extras<br>
11: Hierarchical Clustering        12: K Means Clustering<br>
13: Dimension Reduction            14: Clustering Example<br>
15: CaseStudy</p>
<p>Selection: 6</p>
<p>| Attempting to load lesson dependencies...</p>
<p>| Package ‘lattice’ loaded correctly!</p>
<p>| Package ‘ggplot2’ loaded correctly!</p>
<p>|                                                                             |   0%</p>
<p>| Lattice_Plotting_System. (Slides for this and other Data Science courses may be<br>
| found at github <a href="https://github.com/DataScienceSpecialization/courses/">https://github.com/DataScienceSpecialization/courses/</a>. If you care<br>
| to use them, they must be downloaded as a zip file and viewed locally. This lesson<br>
| corresponds to 04_ExploratoryAnalysis/PlottingLattice.)</p>
<p>...</p>
<p>|=                                                                            |   1%<br>
| In another lesson, we gave you an overview of the three plotting systems in R. In<br>
| this lesson we'll focus on the lattice plotting system.  As we did with the base<br>
| plotting system, we'll focus on using lattice to create graphics on the screen<br>
| device rather than another graphics device.</p>
<p>...</p>
<p>|==                                                                           |   3%<br>
| The lattice plotting system is completely separate and independent of the base<br>
| plotting system. It's an add-on package so it has to be explicitly loaded with a<br>
| call to the R function library. We've done this for you. The R Documentation tells<br>
| us that lattice "is an implementation of Trellis graphics for R. It is a powerful<br>
| and elegant high-level data visualization system with an emphasis on multivariate<br>
| data."</p>
<p>...</p>
<p>|===                                                                          |   4%<br>
| Lattice is implemented using two packages. The first is called, not surprisingly,<br>
| lattice, and it contains code for producing Trellis graphics. Some of the functions<br>
| in this package are the higher level functions which you, the user, would call.<br>
| These include xyplot, bwplot, and levelplot.</p>
<p>...</p>
<p>|=====                                                                        |   6%<br>
| If xyplot produces a scatterplot, what kind of plot does bwplot produce?</p>
<p>1: box and whisker<br>
2: big and whittle<br>
3: bad and wonderful<br>
4: black and white</p>
<p>Selection: 1</p>
<p>| That's a job well done!</p>
<p>|======                                                                       |   7%<br>
| The second package in the lattice system is grid which contains the low-level<br>
| functions upon which the lattice package is built. You, the user, seldom call<br>
| functions from the grid package directly.</p>
<p>...</p>
<p>|=======                                                                      |   9%<br>
| Unlike base plotting, the lattice system does not have a "two-phase" aspect with<br>
| separate plotting and annotation. Instead all plotting and annotation is done at<br>
| once with a single function call.</p>
<p>...</p>
<p>|========                                                                     |  10%<br>
| The lattice system, as the base does, provides several different plotting functions.<br>
| These include xyplot for creating scatterplots, bwplot for box-and-whiskers plots or<br>
| boxplots, and histogram for histograms. There are several others (stripplot,<br>
| dotplot, splom and levelplot), which we won't cover here.</p>
<p>...</p>
<p>|=========                                                                    |  12%<br>
| Lattice functions generally take a formula for their first argument, usually of the<br>
| form y ~ x. This indicates that y depends on x, so in a scatterplot y would be<br>
| plotted on the y-axis and x on the x-axis.</p>
<p>...</p>
<p>|==========                                                                   |  13%<br>
| Here's an example of typical lattice plot call, xyplot(y ~ x | f <em> g, data). The f<br>
| and g represent the optional conditioning variables. The </em> represents interaction<br>
| between them. Remember when we said that lattice is good for plotting multivariate<br>
| data? That's where these conditioning variables come into play.</p>
<p>...</p>
<p>|===========                                                                  |  15%<br>
| The second argument is the data frame or list from which the variables in the<br>
| formula should be looked up.  If no data frame or list is passed, then the parent<br>
| frame is used. If no other arguments are passed, the default values are used.</p>
<p>...</p>
<p>|=============                                                                |  16%<br>
| Recall the airquality data we've used before. We've loaded it again for you. To<br>
| remind yourself what it looks like run the R command head with airquality as an<br>
| argument to see what the data looks like.</p>
<blockquote>
<p>head(airquality)</p>

<pre><code>  Ozone Solar.R Wind Temp Month Day  
1    41     190  7.4   67     5   1  
2    36     118  8.0   72     5   2  
3    12     149 12.6   74     5   3  
4    18     313 11.5   62     5   4  
5    NA      NA 14.3   56     5   5  
6    28      NA 14.9   66     5   6</code></pre>
<p>| You got it right!</p>
</blockquote>
<p>|==============                                                               |  18%<br>
| Now try running xyplot with the formula Ozone~Wind as the first argument and the<br>
| second argument data set equal to airquality.</p>
<blockquote>
<p>xyplot(Ozone~Wind,data=airquality)</p>
</blockquote>
<p><img src="../../images/r0040730.png" alt="graph" title="graph"></p>
<p>| That's a job well done!</p>
<p>|===============                                                              |  19%<br>
| Look vaguely familiar? The dots are blue, instead of black, but lattice labeled the<br>
| axes for you. You can use some of the same graphical parameters (e.g., pch and col)<br>
| that you used in the base package in calls to lattice functions.</p>
<p>...</p>
<p>|================                                                             |  21%<br>
| Now rerun xyplot with the formula Ozone~Wind as the first argument and the second<br>
| argument data set equal to airquality (use the up arrow to save typing). This time<br>
| add the arguments col set equal to "red", pch set equal to 8, and main set equal to<br>
| "Big Apple Data".</p>
<blockquote>
<p>xyplot(Ozone ~ Wind, data = airquality, pch=8, col="red", main="Big Apple Data")</p>
</blockquote>
<p><img src="../../images/r0040740.png" alt="graph" title="graph"></p>
<p>| You are really on a roll!</p>
<p>|=================                                                            |  22%<br>
| Red snowflakes are cool, right? Now that you’ve seen the basic xyplot() and some of<br>
| its arguments, you might want to experiment more by yourself when you're done with<br>
| the lesson to discover what other arguments and colors are available. (If you can't<br>
| wait to experiment, recall that swirl has play() and nxt() functions. At a command<br>
| prompt, typing play() allows you to leave swirl temporarily so you can try different<br>
| R commands at the console. Typing nxt() when you’re done playing brings you back to<br>
| swirl and you can resume your lesson.)</p>
<p>...</p>
<p>|==================                                                           |  24%<br>
| Now you'll see how easy it is to generate a multipanel plot using a single lattice<br>
| command.</p>
<p>...</p>
<p>|====================                                                         |  25%<br>
| Run xyplot with the formula Ozone~Wind | as.factor(Month) as the first argument and<br>
| the second argument data set equal to airquality (use the up arrow to save typing).<br>
| So far, not much is different, right? Add a third argument, layout, set equal to<br>
| c(5,1).</p>
<blockquote>
<p>xyplot(Ozone~Wind|as.factor(Month),data=airquality,layout=c(5,1))</p>
</blockquote>
<p><img src="../../images/r0040750.png" alt="graph" title="graph"></p>
<p>| Great job!</p>
<p>|=====================                                                        |  27%<br>
| Note that the default color and plotting character are back. What did the<br>
| as.factor(Month) do?</p>
<p>1: Randomly divided the data into 5 panels<br>
2: Huh?<br>
3: Displayed and labeled each subplot with the month's integer<br>
4: Displayed the data by individual months</p>
<p>Selection: 3</p>
<p>| Perseverance, that's the answer.</p>
<p>|======================                                                       |  28%<br>
| Since Month is a named column of the airquality dataframe we had to tell R to treat<br>
| it as a factor. To see how this affects the plot, rerun the xyplot command you just<br>
| ran, but use Ozone ~ Wind | Month instead of Ozone ~ Wind | as.factor(Month) as the<br>
| first argument.</p>
<blockquote>
<p>xyplot(Ozone~Wind|Month,data=airquality,layout=c(5,1))</p>
</blockquote>
<p><img src="../../images/r0040760.png" alt="graph" title="graph"></p>
<p>| Keep working like that and you'll get there!</p>
<p>|=======================                                                      |  30%<br>
| Not as informative, right? The word Month in each panel really doesn't tell you much<br>
| if it doesn't identify which month it's plotting. Notice that the actual data is the<br>
| same between the two plots, though.</p>
<p>...</p>
<p>|========================                                                     |  31%<br>
| Lattice functions behave differently from base graphics functions in one critical<br>
| way. Recall that base graphics functions plot data directly to the graphics device<br>
| (e.g., screen, or file such as a PDF file). In contrast, lattice graphics functions<br>
| return an object of class trellis.</p>
<p>...</p>
<p>|=========================                                                    |  33%<br>
| The print methods for lattice functions actually do the work of plotting the data on<br>
| the graphics device. They return "plot objects" that can be stored (but it’s usually<br>
| better to just save the code and data). On the command line, trellis objects are<br>
| auto-printed so that it appears the function is plotting the data.</p>
<p>...</p>
<p>|==========================                                                   |  34%<br>
| To see this, create a variable p which is assigned the output of this simple call to<br>
| xyplot, xyplot(Ozone~Wind,data=airquality).</p>
<blockquote>
<p>p&lt;-xyplot(Ozone~Wind,data=airquality)</p>
</blockquote>
<p>| You are amazing!</p>
<p>|============================                                                 |  36%<br>
| Nothing plotted, right? But the object p is around.</p>
<p>...</p>
<p>|=============================                                                |  37%<br>
| Type p or print(p) now to see it.</p>
<blockquote>
<p>p</p>
</blockquote>
<p><img src="../../images/r0040770.png" alt="graph" title="graph"></p>
<p>| Excellent job!</p>
<p>|==============================                                               |  39%<br>
| Like magic, it appears. Now run the R command names with p as its argument.</p>
<blockquote>
<p>names(p)<br>
 [1] "formula"           "as.table"          "aspect.fill"       "legend"<br>
 [5] "panel"             "page"              "layout"            "skip"<br>
 [9] "strip"             "strip.left"        "xscale.components" "yscale.components"<br>
[13] "axis"              "xlab"              "ylab"              "xlab.default"<br>
[17] "ylab.default"      "xlab.top"          "ylab.right"        "main"<br>
[21] "sub"               "x.between"         "y.between"         "par.settings"<br>
[25] "plot.args"         "lattice.options"   "par.strip.text"    "index.cond"<br>
[29] "perm.cond"         "condlevels"        "call"              "x.scales"<br>
[33] "y.scales"          "panel.args.common" "panel.args"        "packet.sizes"<br>
[37] "x.limits"          "y.limits"          "x.used.at"         "y.used.at"<br>
[41] "x.num.limit"       "y.num.limit"       "aspect.ratio"      "prepanel.default"<br>
[45] "prepanel"</p>
</blockquote>
<p>| All that practice is paying off!</p>
<p>|===============================                                              |  40%<br>
| We see that the trellis object p has 45 named properties, the first of which is<br>
| "formula" which isn't too surprising. A lot of these properties are probably NULL in<br>
| value. We've done some behind-the-scenes work for you and created two vectors. The<br>
| first, mynames, is a character vector of the names in p. The second is a boolean<br>
| vector, myfull, which has TRUE values for nonnull entries of p. Run mynames[myfull]<br>
| to see which entries of p are not NULL.</p>
<blockquote>
<p>mynames[myfull]<br>
 [1] "formula"           "as.table"          "aspect.fill"       "panel"<br>
 [5] "skip"              "strip"             "strip.left"        "xscale.components"<br>
 [9] "yscale.components" "axis"              "xlab"              "ylab"<br>
[13] "xlab.default"      "ylab.default"      "x.between"         "y.between"<br>
[17] "index.cond"        "perm.cond"         "condlevels"        "call"<br>
[21] "x.scales"          "y.scales"          "panel.args.common" "panel.args"<br>
[25] "packet.sizes"      "x.limits"          "y.limits"          "aspect.ratio"<br>
[29] "prepanel.default"</p>
</blockquote>
<p>| That's the answer I was looking for.</p>
<p>|================================                                             |  42%<br>
| Wow! 29 nonNull values for one little plot. Note that a lot of them are like the<br>
| ones we saw in the base plotting system. Let's look at the values of some of them.<br>
| Type p[["formula"]] now.</p>
<blockquote>
<p>p[["formula"]]<br>
Ozone ~ Wind</p>
</blockquote>
<p>| You are amazing!</p>
<p>|=================================                                            |  43%<br>
| Not surprising, is it? It's a familiar formula. Now look at p's x.limits. Remember<br>
| the double square brackets and quotes.</p>
<blockquote>
<p>p[["x.limits"]]<br>
[1]  0.37 22.03</p>
</blockquote>
<p>| Keep up the great work!</p>
<p>|==================================                                           |  45%<br>
| They match the plot, right? The x values are indeed between .37 and 22.03.</p>
<p>...</p>
<p>|====================================                                         |  46%<br>
| Again, not surprising. Before we wrap up, let's talk about lattice's panel functions<br>
| which control what happens inside each panel of the plot. The ease of making<br>
| multi-panel plots makes lattice very appealing. The lattice package comes with<br>
| default panel functions, but you can customize what happens in each panel.</p>
<p>...</p>
<p>|=====================================                                        |  48%<br>
| Panel functions receive the x and y coordinates of the data points in their panel<br>
| (along with any optional arguments). To see this, we've created some data for you -<br>
| two 100-long vectors, x and y. For its first 50 values y is a function of x, for the<br>
| last 50 values, y is random. We've also defined a 100-long factor vector f which<br>
| distinguishes between the first and last 50 elements of the two vectors. Run the R<br>
| command table with f as it argument.</p>
<blockquote>
<p>table(f)</p>

<pre><code>f  
Group 1 Group 2   
     50      50</code></pre>
<p>| That's a job well done!</p>
</blockquote>
<p>|======================================                                       |  49%<br>
| The first 50 entries of f are "Group 1" and the last 50 are "Group 2". Run xyplot<br>
| with two arguments. The first is the formula y~x|f, and the second is layout set<br>
| equal to c(2,1). Note that we're not providing an explicit data argument, so xyplot<br>
| will look in the environment and see the x and y that we've generated for you.</p>
<blockquote>
<p>xyplot(y~x|f,layout=c(2,1))</p>
</blockquote>
<p><img src="../../images/r0040780.png" alt="graph" title="graph"></p>
<p>| You nailed it! Good job!</p>
<p>|=======================================                                      |  51%<br>
| To understand this a little better look at the variable v1 we've created for you.</p>
<blockquote>
<p>v1<br>
[1] -2.185287  1.101780 -2.716851  1.569850</p>
</blockquote>
<p>| You're the best!</p>
<p>|========================================                                     |  52%<br>
| The first two numbers are the range of the x values of Group 1 and the last two<br>
| numbers are the range of y values of Group 1. See how they match the values of the<br>
| left panel (Group 1) in the plot. Now look at v2 which holds the comparable numbers<br>
| for Group 2.</p>
<blockquote>
<p>v2<br>
[1] -1.6066772  2.2205197 -0.1605085  2.0341048</p>
</blockquote>
<p>| You nailed it! Good job!</p>
<p>|=========================================                                    |  54%<br>
| Again, the values match the plot. That's reassuring. We've copied some code from the<br>
| slides for you. To see it, type myedit("plot1.R"). This will open your editor and<br>
| display the R code in it.</p>
<blockquote>
<p>myedit("plot1.R")</p>
</blockquote>

<pre><code>p &lt;- xyplot(y ~ x | f, panel = function(x, y, ...) {  
  panel.xyplot(x, y, ...)  ## First call the default panel function for 'xyplot'  
  panel.abline(h = median(y), lty = 2)  ## Add a horizontal line at the median  
})  
print(p)  
invisible()</code></pre>
<p>| You are quite good my friend!</p>
<p>|===========================================                                  |  55%<br>
| How many calls to basic lattice plotting functions are there in plot1.R?</p>
<p>1: 1<br>
2: 2<br>
3: 3</p>
<p>Selection: 1</p>
<p>| You got it!</p>
<p>|============================================                                 |  57%<br>
| Note the panel function. How many formal arguments does it have?</p>
<p>1: 2<br>
2: 3<br>
3: 1</p>
<p>Selection: 1</p>
<p>| One more time. You can do it!</p>
<p>| You have to count the ... as an argument?</p>
<p>1: 1<br>
2: 3<br>
3: 2</p>
<p>Selection: 2</p>
<p>| Excellent job!</p>
<p>|=============================================                                |  58%<br>
| The panel function has 3 arguments, x, y and ... . This last stands for all other<br>
| arguments (such as graphical parameters) you might want to include. There are 2<br>
| lines in the panel function. Each invokes a panel method, the first to plot the data<br>
| in each panel (panel.xyplot), the second to draw a horizontal line in each panel<br>
| (panel.abline). Note the similarity of this last call to that of the base plotting<br>
| function of the same name.</p>
<p>...</p>
<p>|==============================================                               |  60%<br>
| We've defined a function for you, pathtofile, which takes a filename as its<br>
| argument. This makes sure R can find the file on your computer. Now run the R<br>
| command source with two arguments. The first is the call to pathtofile with the<br>
| string "plot1.R" as its argument and the second is the argument local set equal to<br>
| TRUE. This command will run the code contained in plot1.R within the swirl<br>
| environment so you can see what it does.</p>
<blockquote>
<p>source(pathtofile("plot1.R"),local=TRUE)</p>
</blockquote>
<p><img src="../../images/r0040790.png" alt="graph" title="graph"></p>
<p>| That's the answer I was looking for.</p>
<p>|===============================================                              |  61%<br>
| See how the lines appear. The plot shows two panels because...?</p>
<p>1: there are 2 calls to panel methods<br>
2: f contains 2 factors<br>
3: there are 2 variables<br>
4: lattice can handle at most 2 panels</p>
<p>Selection: 2</p>
<p>| All that hard work is paying off!</p>
<p>|================================================                             |  63%<br>
| We've copied another piece of similar code, i.e., a call to xyplot with a custom<br>
| panel function, from the slides. To see it, type myedit("plot2.R"). This will open<br>
| your editor and display the R code in it.</p>
<blockquote>
<p>myedit("plot2.R")</p>
</blockquote>

<pre><code>p2 &lt;- xyplot(y ~ x | f, panel = function(x, y, ...) {  
  panel.xyplot(x, y, ...)  ## First call default panel function  
  panel.lmline(x, y, col = 2)  ## Overlay a simple linear regression line  
})  
print(p2)  
invisible()</code></pre>
<p>| You nailed it! Good job!</p>
<p>|=================================================                            |  64%<br>
| You can see how plot2.R differs from plot1.R, right?</p>
<p>...</p>
<p>|===================================================                          |  66%<br>
| Again, run the R command source with the two arguments pathtofile("plot2.R") and<br>
| local=TRUE. This will run the code in plot2.R.</p>
<blockquote>
<p>source(pathtofile("plot2.R"),local=TRUE)</p>
</blockquote>
<p><img src="../../images/r0040800.png" alt="graph" title="graph"></p>
<p>| You are doing so well!</p>
<p>|====================================================                         |  67%<br>
| The regression lines are red because ...?</p>
<p>1: R always plots regression lines in red<br>
2: R is the first letter of the word red<br>
3: the custom panel function specified a col argument</p>
<p>Selection: 3</p>
<p>| Excellent job!</p>
<p>|=====================================================                        |  69%<br>
| Before we close we'll look at how easily lattice can handle a plot with a great many<br>
| panels. (The sky's the limit.) We've loaded some diamond data for you. It comes with<br>
| the ggplot2 package. We'll use it just to show off lattice's panel plotting<br>
| capability.</p>
<p>...</p>
<p>|======================================================                       |  70%<br>
| The data is in the data frame diamonds. Use the R command str to see what it looks<br>
| like.</p>
<blockquote>
<p>str(diamonds)</p>

<pre><code>tibble [53,940 x 10] (S3: tbl_df/tbl/data.frame)  
 $ carat  : num [1:53940] 0.23 0.21 0.23 0.29 0.31 0.24 0.24 0.26 0.22 0.23 ...  
 $ cut    : Ord.factor w/ 5 levels "Fair"&lt;"Good"&lt;..: 5 4 2 4 2 3 3 3 1 3 ...  
 $ color  : Ord.factor w/ 7 levels "D"&lt;"E"&lt;"F"&lt;"G"&lt;..: 2 2 2 6 7 7 6 5 2 5 ...  
 $ clarity: Ord.factor w/ 8 levels "I1"&lt;"SI2"&lt;"SI1"&lt;..: 2 3 5 4 2 6 7 3 4 5 ...  
 $ depth  : num [1:53940] 61.5 59.8 56.9 62.4 63.3 62.8 62.3 61.9 65.1 59.4 ...  
 $ table  : num [1:53940] 55 61 65 58 58 57 57 55 61 61 ...  
 $ price  : int [1:53940] 326 326 327 334 335 336 336 337 337 338 ...  
 $ x      : num [1:53940] 3.95 3.89 4.05 4.2 4.34 3.94 3.95 4.07 3.87 4 ...  
 $ y      : num [1:53940] 3.98 3.84 4.07 4.23 4.35 3.96 3.98 4.11 3.78 4.05 ...  
 $ z      : num [1:53940] 2.43 2.31 2.31 2.63 2.75 2.48 2.47 2.53 2.49 2.39 ...</code></pre>
<p>| Perseverance, that's the answer.</p>
</blockquote>
<p>|=======================================================                      |  72%<br>
| So the data frame contains 10 pieces of information for each of 53940 diamonds. Run<br>
| the R command table with diamonds$color as an argument.</p>
<blockquote>
<p>table(diamonds$color)</p>

<pre><code>    D     E     F     G     H     I     J   
 6775  9797  9542 11292  8304  5422  2808</code></pre>
<p>| You nailed it! Good job!</p>
</blockquote>
<p>|========================================================                     |  73%<br>
| We see 7 colors each represented by a letter. Now run the R command table with two<br>
| arguments, diamonds$color and diamonds$cut.</p>
<blockquote>
<p>table(diamonds$color,diamonds$cut)</p>

<pre><code>    Fair Good Very Good Premium Ideal  
  D  163  662      1513    1603  2834  
  E  224  933      2400    2337  3903  
  F  312  909      2164    2331  3826  
  G  314  871      2299    2924  4884  
  H  303  702      1824    2360  3115  
  I  175  522      1204    1428  2093  
  J  119  307       678     808   896</code></pre>
<p>| That's a job well done!</p>
</blockquote>
<p>|=========================================================                    |  75%<br>
| We see a 7 by 5 array with counts indicating how many diamonds in the data frame<br>
| have a particular color and cut. From the table, which is the most frequent<br>
| combination?</p>
<p>1: Ideal cut of color F.<br>
2: Ideal color of cut G<br>
3: Premium cut of color G<br>
4: Ideal cut of color G</p>
<p>Selection: 4</p>
<p>| Keep up the great work!</p>
<p>|===========================================================                  |  76%<br>
| To save you some trouble we've defined three character strings for you, labels for<br>
| the x- and y-axes and a main title. They're in the file myLabels.R, so run myedit on<br>
| this file to see them. Remember to put the file name in quotes when you call myedit.</p>
<blockquote>
<p>myedit("myLabels.R")</p>
</blockquote>

<pre><code>myxlab &lt;- "Carat"  
myylab &lt;- "Price"  
mymain &lt;- "Diamonds are Sparkly!"</code></pre>
<p>| Excellent job!</p>
<p>|============================================================                 |  78%<br>
| Now run source with pathtofile("myLabels.R") and local set equal to TRUE.</p>
<blockquote>
<p>source(pathtofile("myLabels.R"),local=TRUE)</p>
</blockquote>
<p>| All that hard work is paying off!</p>
<p>|=============================================================                |  79%<br>
| Now call xyplot with the formula price~carat | color*cut and data set equal to<br>
| diamonds. In addition, set the argument strip equal to FALSE, pch set equal to 20,<br>
| xlab to myxlab, ylab to myylab, and main to mymain. The plot may take longer than<br>
| previous plots because it is bigger.</p>
<blockquote>
<p>xyplot(price~carat|color*cut,data=diamonds,strip=FALSE,pch=20,xlab=myxlab,ylab=myylab,main=mymain)</p>
</blockquote>
<p><img src="../../images/r0040810.png" alt="graph" title="graph"></p>
<p>| Excellent work!</p>
<p>|==============================================================               |  81%<br>
| Pretty cool, right? 35 panels, one for each combination of color and cut. The dots<br>
| (pch=20) show how prices for the diamonds in each category (panel) vary depending on<br>
| carat.</p>
<p>...</p>
<p>|===============================================================              |  82%<br>
| Are colors defining the rows or columns of the plot?</p>
<p>1: columns<br>
2: rows</p>
<p>Selection: 1</p>
<p>| You got it!</p>
<p>|================================================================             |  84%<br>
| Were you curious about that argument strip? I know I was. Now rerun the xyplot<br>
| command you just ran (use the up arrow key to retrieve it), this time without the<br>
| strip argument.</p>
<blockquote>
<p>xyplot(price~carat|color*cut,data=diamonds,pch=20,xlab=myxlab,ylab=myylab,main=mymain)</p>
</blockquote>
<p><img src="../../images/r0040820.png" alt="graph" title="graph"></p>
<p>| All that hard work is paying off!</p>
<p>|==================================================================           |  85%<br>
| The plot shows that the strip argument ....</p>
<p>1: labels each panel<br>
2: removes information from the plot<br>
3: makes the plot less intelligible<br>
4: has a default value of FALSE</p>
<p>Selection: 1</p>
<p>| All that practice is paying off!</p>
<p>|===================================================================          |  87%<br>
| Review time!!!</p>
<p>...</p>
<p>|====================================================================         |  88%<br>
| True or False? Lattice plots are constructed by a series of calls to core functions.</p>
<p>1: False<br>
2: True</p>
<p>Selection: 1</p>
<p>| That's the answer I was looking for.</p>
<p>|=====================================================================        |  90%<br>
| True or False? Lattice plots are constructed with a single function call to a core<br>
| lattice function (e.g. xyplot)</p>
<p>1: False<br>
2: True</p>
<p>Selection: 2</p>
<p>| You got it!</p>
<p>|======================================================================       |  91%<br>
| True or False? Aspects like margins and spacing are automatically handled and<br>
| defaults are usually sufficient.</p>
<p>1: False<br>
2: True</p>
<p>Selection: 2</p>
<p>| That's a job well done!</p>
<p>|=======================================================================      |  93%<br>
| True or False? The lattice system is ideal for creating conditioning plots where you<br>
| examine the same kind of plot under many different conditions.</p>
<p>1: False<br>
2: True</p>
<p>Selection: 2</p>
<p>| Excellent job!</p>
<p>|========================================================================     |  94%<br>
| True or False? The lattice system, like the base plotting system, returns a trellis<br>
| plot object.</p>
<p>1: False<br>
2: True</p>
<p>Selection: 1</p>
<p>| Nice work!</p>
<p>|==========================================================================   |  96%<br>
| True or False?  Panel functions can NEVER be customized to modify what is plotted in<br>
| each of the plot panels.</p>
<p>1: True<br>
2: False</p>
<p>Selection: 2</p>
<p>| Your dedication is inspiring!</p>
<p>|===========================================================================  |  97%<br>
| True or False?  Lattice plots can display at most 20 panels in a single plot.</p>
<p>1: False<br>
2: True</p>
<p>Selection: 1</p>
<p>| You are doing so well!</p>
<p>|============================================================================ |  99%<br>
| Congrats! We hope this lesson didn't leave you climbing the trellis.</p>
<p>...</p>
<p>|=============================================================================| 100%<br>
| Would you like to receive credit for completing this course on Coursera.org?</p>
<p>1: No<br>
2: Yes</p>
<p>Selection: 2<br>
What is your email address? xxxxxx@xxxxxxxxxxxx<br>
What is your assignment token? xXxXxxXXxXxxXXXx<br>
Grade submission succeeded!</p>
<p>| Keep up the great work!</p>
<p>| You've reached the end of this lesson! Returning to the main menu...</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Exploratory Data Analysis<br>
2: Take me to the swirl course repository!</p>
<p>Selection: 0</p>
<p>| Leaving swirl now. Type swirl() to resume.</p>
<blockquote>
<p>rm(list=ls())</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Last updated 2020-05-08 12:20:33.102850 IST</em></p>

</div>
</div>
</div>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../tags/lattice/" rel="tag">lattice</a></li>
            <li><a class="tag p-category" href="../../tags/r/" rel="tag">R</a></li>
            <li><a class="tag p-category" href="../../tags/swirl/" rel="tag">swirl</a></li>
            <li><a class="tag p-category" href="../../tags/xyplot/" rel="tag">xyplot()</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../00423/" rel="prev" title="Base Plotting System">Previous post</a>
            </li>
            <li class="next">
                <a href="../00425/" rel="next" title="Working with Colors">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
        
        
<script>
var idcomments_acct = '7fae5836cfdd49cac599cac5b95695d1';
var idcomments_post_id = "cache/posts/00424_Lattice Plotting System.html";
var idcomments_post_url = "https://r.datascience.eu.org/posts/00424/";
</script><span id="IDCommentsPostTitle" style="display:none"></span>
<script src="https://www.intensedebate.com/js/genericCommentWrapperV2.js"></script></section><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha384-3lJUsx1TJHt7BA4udB5KPnDrlkO8T6J6v/op7ui0BbCjvZ9WqV4Xm6DTP6kQ/iBH" crossorigin="anonymous"></script><script type="text/x-mathjax-config">
        MathJax.Hub.Config({tex2jax: {inlineMath: [['$latex ','$'], ['\\(','\\)']]}});
        </script></article><!--End of body content--><footer id="footer">
            Contents © 2020 Krishnakanth Allika 
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
<img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png"></a><br>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.
            
            
        </footer>
</div>
</div>


        <script src="../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-163231811-1"></script><script>  window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-163231811-1'); gtag('set', {'user_id': 'USER_ID'});</script>
</body>
</html>
