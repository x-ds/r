<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>GGPlot2 Extras | Data Science with R</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://r.datascience.eu.org/posts/00428/">
<link rel="icon" href="../../files/favicon.ico" sizes="16x16">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Krishnakanth Allika">
<link rel="prev" href="../00427/" title="GGPlot2 Part2" type="text/html">
<link rel="next" href="../00429/" title="Hierarchical Clustering" type="text/html">
<meta property="og:site_name" content="Data Science with R">
<meta property="og:title" content="GGPlot2 Extras">
<meta property="og:url" content="https://r.datascience.eu.org/posts/00428/">
<meta property="og:description" content='R version 4.0.0 (2020-04-24) -- "Arbor Day"
Copyright (C) 2020 The R Foundation for Statistical Computing
Platform: x86_64-w64-mingw32/x64 (64-bit)
R is free software and comes with ABSOLUTELY NO WARR'>
<meta property="og:type" content="article">
<meta property="article:published_time" content="2020-05-09T20:00:06+05:30">
<meta property="article:tag" content="GGPlot2">
<meta property="article:tag" content="ggplot()">
<meta property="article:tag" content="qplot()">
<meta property="article:tag" content="R">
<meta property="article:tag" content="range()">
<meta property="article:tag" content="swirl">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-expand-md static-top mb-4
navbar-dark bg-dark
"><div class="container">
<!-- This keeps the margins nice -->
        <a class="navbar-brand" href="https://r.datascience.eu.org/">

            <span id="blog-title">Data Science with R</span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bs-navbar">
            <ul class="navbar-nav mr-auto">
<li class="nav-item">
<a href="../../toc/" class="nav-link">Table of Contents</a>
                </li>
<li class="nav-item">
<a href="../../categories/" class="nav-link">Categories</a>
                </li>
<li class="nav-item">
<a href="../../tags/" class="nav-link">Tags</a>
                </li>
<li class="nav-item">
<a href="https://www.datascience.eu.org" class="nav-link">Main site</a>

                
            </li>
</ul>
<!-- DuckDuckGo custom search --><form method="get" id="search" action="https://duckduckgo.com/" class="navbar-form pull-left">
<input type="hidden" name="sites" value="https://r.datascience.eu.org/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" name="q" maxlength="255" placeholder="Search…" class="span2" style="margin-top: 4px;"><input type="submit" value="DuckDuckGo Search" style="visibility: hidden;">
</form>
<!-- End of custom search -->


            <ul class="navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">GGPlot2 Extras</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    Krishnakanth Allika
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2020-05-09T20:00:06+05:30" itemprop="datePublished" title="2020-05-09 20:00">2020-05-09 20:00</time></a>
            </p>
                <p class="commentline">
        
<a href="%7Blink%7D" onclick="this.href='/posts/00428/'; this.target='_self';"><span class="IDCommentsReplace" style="display:none">cache/posts/00428_GGPlot2 Extras.html</span>
<script>
var idcomments_acct = '7fae5836cfdd49cac599cac5b95695d1';
var idcomments_post_id = "cache/posts/00428_GGPlot2 Extras.html";
var idcomments_post_url = "/posts/00428/";
</script><script src="https://www.intensedebate.com/js/genericLinkWrapperV2.js"></script></a>


            

        </p>
</div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>R version 4.0.0 (2020-04-24) -- "Arbor Day"<br>
Copyright (C) 2020 The R Foundation for Statistical Computing<br>
Platform: x86_64-w64-mingw32/x64 (64-bit)</p>
<p>R is free software and comes with ABSOLUTELY NO WARRANTY.<br>
You are welcome to redistribute it under certain conditions.<br>
Type 'license()' or 'licence()' for distribution details.</p>
<p>Natural language support but running in an English locale</p>
<p>R is a collaborative project with many contributors.<br>
Type 'contributors()' for more information and<br>
'citation()' on how to cite R or R packages in publications.</p>
<p>Type 'demo()' for some demos, 'help()' for on-line help, or<br>
'help.start()' for an HTML browser interface to help.<br>
Type 'q()' to quit R.</p>
<blockquote>
<p>setwd("C:/images")<br>
library(swirl)</p>
</blockquote>
<p>| Hi! Type swirl() when you are ready to begin.</p>
<blockquote>
<p>swirl()</p>
</blockquote>
<p>| Welcome to swirl! Please sign in. If you've been here before, use the same name as<br>
| you did then. If you are new, call yourself something unique.</p>
<p>What shall I call you? Krishnakanth Allika</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Exploratory Data Analysis<br>
2: Take me to the swirl course repository!</p>
<p>Selection: 1</p>
<p>| Please choose a lesson, or type 0 to return to course menu.</p>

<pre><code> 1: Principles of Analytic Graphs   2: Exploratory Graphs             
 3: Graphics Devices in R           4: Plotting Systems               
 5: Base Plotting System            6: Lattice Plotting System        
 7: Working with Colors             8: GGPlot2 Part1                  
 9: GGPlot2 Part2                  10: GGPlot2 Extras                 
11: Hierarchical Clustering        12: K Means Clustering             
13: Dimension Reduction            14: Clustering Example             
15: CaseStudy</code></pre>
<p>Selection: 10</p>
<p>| Attempting to load lesson dependencies...</p>
<p>| Package ‘ggplot2’ loaded correctly!</p>
<p>|                                                                             |   0%</p>
<p>| GGPlot2_Extras. (Slides for this and other Data Science courses may be found at<br>
| github <a href="https://github.com/DataScienceSpecialization/courses/">https://github.com/DataScienceSpecialization/courses/</a>. If you care to use<br>
| them, they must be downloaded as a zip file and viewed locally. This lesson<br>
| corresponds to 04_ExploratoryAnalysis/ggplot2.)</p>
<p>...</p>
<p>|=                                                                            |   2%<br>
| In this lesson we'll go through a few more qplot examples using diamond data which<br>
| comes with the ggplot2 package. This data is a little more complicated than the mpg<br>
| data and it contains information on various characteristics of diamonds.</p>
<p>...</p>
<p>|===                                                                          |   4%<br>
| Run the R command str with the argument diamonds to see what the data looks like.</p>
<blockquote>
<p>str(diamonds)</p>

<pre><code>tibble [53,940 x 10] (S3: tbl_df/tbl/data.frame)  
 $ carat  : num [1:53940] 0.23 0.21 0.23 0.29 0.31 0.24 0.24 0.26 0.22 0.23 ...  
 $ cut    : Ord.factor w/ 5 levels "Fair"&lt;"Good"&lt;..: 5 4 2 4 2 3 3 3 1 3 ...  
 $ color  : Ord.factor w/ 7 levels "D"&lt;"E"&lt;"F"&lt;"G"&lt;..: 2 2 2 6 7 7 6 5 2 5 ...  
 $ clarity: Ord.factor w/ 8 levels "I1"&lt;"SI2"&lt;"SI1"&lt;..: 2 3 5 4 2 6 7 3 4 5 ...  
 $ depth  : num [1:53940] 61.5 59.8 56.9 62.4 63.3 62.8 62.3 61.9 65.1 59.4 ...  
 $ table  : num [1:53940] 55 61 65 58 58 57 57 55 61 61 ...  
 $ price  : int [1:53940] 326 326 327 334 335 336 336 337 337 338 ...  
 $ x      : num [1:53940] 3.95 3.89 4.05 4.2 4.34 3.94 3.95 4.07 3.87 4 ...  
 $ y      : num [1:53940] 3.98 3.84 4.07 4.23 4.35 3.96 3.98 4.11 3.78 4.05 ...  
 $ z      : num [1:53940] 2.43 2.31 2.31 2.63 2.75 2.48 2.47 2.53 2.49 2.39 ...</code></pre>
<p>| Keep working like that and you'll get there!</p>
</blockquote>
<p>|====                                                                         |   6%<br>
| From the output, how many characteristics of diamonds do you think this data<br>
| contains?</p>
<p>1: 53950<br>
2: 53940<br>
3: 10<br>
4: 5394</p>
<p>Selection: 3</p>
<p>| You are doing so well!</p>
<p>|======                                                                       |   7%<br>
| From the output of str, how many diamonds are characterized in this dataset?</p>
<p>1: 53950<br>
2: 10<br>
3: 5394<br>
4: 53940</p>
<p>Selection: 1</p>
<p>| You're close...I can feel it! Try it again.</p>
<p>| The output says there are 53940 observations of 10 variables. This is followed by a<br>
| 10-long list of characteristics (carat, cut, color, etc.) that can apply to<br>
| diamonds.</p>
<p>1: 5394<br>
2: 53940<br>
3: 10<br>
4: 53950</p>
<p>Selection: 2</p>
<p>| You got it!</p>
<p>|=======                                                                      |   9%<br>
| Now let's plot a histogram of the price of the 53940 diamonds in this dataset.<br>
| Recall that a histogram requires only one variable of the data, so run the R command<br>
| qplot with the first argument price and the argument data set equal to diamonds.<br>
| This will show the frequency of different diamond prices.</p>
<blockquote>
<p>qplot(price,data=diamonds)<br><code>stat_bin()</code> using <code>bins = 30</code>. Pick better value with <code>binwidth</code>.</p>
</blockquote>
<p><img src="../../images/r0041290.png" alt="image" title="image"></p>
<p>| Excellent work!</p>
<p>|=========                                                                    |  11%<br>
| Not only do you get a histogram, but you also get a message about the binwidth<br>
| defaulting to range/30. Recall that range refers to the spread or dispersion of the<br>
| data, in this case price of diamonds. Run the R command range now with<br>
| diamonds$price as its argument.</p>
<blockquote>
<p>range(diamonds$price)<br>
[1]   326 18823</p>
</blockquote>
<p>| You nailed it! Good job!</p>
<p>|==========                                                                   |  13%<br>
| We see that range returned the minimum and maximum prices, so the diamonds vary in<br>
| price from $326 to $18823. We've done the arithmetic for you, the range (difference<br>
| between these two numbers) is $18497.</p>
<p>...</p>
<p>|===========                                                                  |  15%<br>
| Rerun qplot now with 3 arguments. The first is price, the second is data set equal<br>
| to diamonds, and the third is binwidth set equal to 18497/30). (Use the up arrow to<br>
| save yourself some typing.) See if the plot looks familiar.</p>
<blockquote>
<p>qplot(price,data=diamonds,binwidth=18497/30)</p>
</blockquote>
<p><img src="../../images/r0041300.png" alt="image" title="image"></p>
<p>| All that practice is paying off!</p>
<p>|=============                                                                |  17%<br>
| No more messages in red, but a histogram almost identical to the previous one! If<br>
| you typed 18497/30 at the command line you would get the result 616.5667. This means<br>
| that the height of each bin tells you how many diamonds have a price between x and<br>
| x+617 where x is the left edge of the bin.</p>
<p>...</p>
<p>|==============                                                               |  19%<br>
| We've created a vector containing integers that are multiples of 617 for you. It's<br>
| called brk. Look at it now.</p>
<blockquote>
<p>brk</p>

<pre><code> [1]     0   617  1234  1851  2468  3085  3702  4319  4936  5553  6170  6787  7404  
[14]  8021  8638  9255  9872 10489 11106 11723 12340 12957 13574 14191 14808 15425  
[27] 16042 16659 17276 17893 18510 19127</code></pre>
<p>| You are amazing!</p>
</blockquote>
<p>|================                                                             |  20%<br>
| We've also created a vector containing the number of diamonds with prices between<br>
| each pair of adjacent entries of brk. For instance, the first count is the number of<br>
| diamonds with prices between 0 and $617, and the second is the number of diamonds  
| with prices between $617 and $1234. Look at the vector named counts now.</p>
<blockquote>
<p>counts</p>

<pre><code> [1]  4611 13255  5230  4262  3362  2567  2831  2841  2203  1666  1445  1112   987  
[14]   766   796   655   606   553   540   427   429   376   348   338   298   305  
[27]   269   287   227   251    97</code></pre>
<p>| You nailed it! Good job!</p>
</blockquote>
<p>|=================                                                            |  22%<br>
| See how it matches the histogram you just plotted? So, qplot really works!</p>
<p>...</p>
<p>|===================                                                          |  24%<br>
| You're probably sick of it but rerun qplot again, this time with 4 arguments. The<br>
| first 3 are the same as the last qplot command you just ran (price, data set equal<br>
| to diamonds, and binwidth set equal to 18497/30). (Use the up arrow to save yourself<br>
| some typing.) The fourth argument is fill set equal to cut. The shape of the<br>
| histogram will be familiar, but it will be more colorful.</p>
<blockquote>
<p>qplot(price,data=diamonds,binwidth=18497/30,fill=cut)</p>
</blockquote>
<p><img src="../../images/r0041310.png" alt="image" title="image"></p>
<p>| You're the best!</p>
<p>|====================                                                         |  26%<br>
| This shows how the counts within each price grouping (bin) are distributed among the<br>
| different cuts of diamonds. Notice how qplot displays these distributions relative<br>
| to the cut legend on the right. The fair cut diamonds are at the bottom of each bin,<br>
| the good cuts are above them, then the very good above them, until the ideal cuts<br>
| are at the top of each bin. You can quickly see from this display that there are<br>
| very few fair cut diamonds priced above $5000.</p>
<p>...</p>
<p>|=====================                                                        |  28%<br>
| Now we'll replot the histogram as a density function which will show the proportion<br>
| of diamonds in each bin. This means that the shape will be similar but the scale on<br>
| the y-axis will be different since, by definition, the density function is<br>
| nonnegative everywhere, and the area under the curve is one. To do this, simply call<br>
| qplot with 3 arguments. The first 2 are price and data (set equal to diamonds). The<br>
| third is geom which should be set equal to the string "density". Try this now.</p>
<blockquote>
<p>qplot(price,data=diamonds,geom="density")</p>
</blockquote>
<p><img src="../../images/r0041320.png" alt="image" title="image"></p>
<p>| Your dedication is inspiring!</p>
<p>|=======================                                                      |  30%<br>
| Notice that the shape is similar to that of the histogram we saw previously. The<br>
| highest peak is close to 0 on the x-axis meaning that most of the diamonds in the<br>
| dataset were inexpensive. In general, as prices increase (move right along the<br>
| x-axis) the number of diamonds (at those prices) decrease. The exception to this is<br>
| when the price is around $4000; there's a slight increase in frequency. Let's see if<br>
| cut is responsible for this increase.</p>
<p>...</p>
<p>|========================                                                     |  31%<br>
| Rerun qplot, this time with 4 arguments. The first 2 are the usual, and the third is<br>
| geom set equal to "density". The fourth is color set equal to cut. Try this now.</p>
<blockquote>
<p>qplot(price,data=diamonds,geom="density",color=cut)</p>
</blockquote>
<p><img src="../../images/r0041330.png" alt="image" title="image"></p>
<p>| Keep working like that and you'll get there!</p>
<p>|==========================                                                   |  33%<br>
| See how easily qplot did this? Four of the five cuts have 2 peaks, one at price<br>
| $1000 and the other between $4000 and $5000. The exception is the Fair cut which has  
| a single peak at $2500. This gives us a little more understanding of the histogram<br>
| we saw before.</p>
<p>...</p>
<p>|===========================                                                  |  35%<br>
| Let's move on to scatterplots. For these we'll need to specify two variables from<br>
| the diamond dataset.</p>
<p>...</p>
<p>|=============================                                                |  37%<br>
| Let's start with carat and price. Use these as the first 2 arguments of qplot. The<br>
| third should be data set equal to the dataset. Try this now.</p>
<blockquote>
<p>qplot(carat,price,data=diamonds)</p>
</blockquote>
<p><img src="../../images/r0041340.png" alt="image" title="image"></p>
<p>| You got it right!</p>
<p>|==============================                                               |  39%<br>
| We see the positive trend here, as the number of carats increases the price also<br>
| goes up.</p>
<p>...</p>
<p>|===============================                                              |  41%<br>
| Now rerun the same command, except add a fourth parameter, shape, set equal to cut.</p>
<blockquote>
<p>qplot(carat,price,data=diamonds,shape=cut)<br>
Warning message:<br>
Using shapes for an ordinal variable is not advised</p>
</blockquote>
<p><img src="../../images/r0041350.png" alt="image" title="image"></p>
<p>| You are doing so well!</p>
<p>|=================================                                            |  43%<br>
| The same scatterplot appears, except the cuts of the diamonds are distinguished by<br>
| different symbols. The legend at the right tells you which symbol is associated with<br>
| each cut. These are small and hard to read, so rerun the same command, except this<br>
| time instead of setting the argument shape equal to cut, set the argument color<br>
| equal to cut.</p>
<blockquote>
<p>qplot(carat,price,data=diamonds,color=cut)</p>
</blockquote>
<p><img src="../../images/r0041360.png" alt="image" title="image"></p>
<p>| Excellent job!</p>
<p>|==================================                                           |  44%<br>
| That's easier to see! Now we'll close with two, more complicated scatterplot<br>
| examples.</p>
<p>...</p>
<p>|====================================                                         |  46%<br>
| We'll rerun the plot you just did (carat,price,data=diamonds and color=cut) but add<br>
| an additional parameter. Use geom_smooth with the method set equal to the string<br>
| "lm".</p>
<blockquote>
<p>qplot(carat,price,data=diamonds,color=cut)+geom_smooth(method="lm")<br><code>geom_smooth()</code> using formula 'y ~ x'</p>
</blockquote>
<p><img src="../../images/r0041370.png" alt="image" title="image"></p>
<p>| That's a job well done!</p>
<p>|=====================================                                        |  48%<br>
| Again, we see the same scatterplot, but slightly more compressed and showing 5<br>
| regression lines, one for each cut of diamonds. It might be hard to see, but around<br>
| each line is a shadow showing the 95% confidence interval. We see, unsurprisingly,<br>
| that the better the cut, the steeper (more positive) the slope of the lines.</p>
<p>...</p>
<p>|======================================                                       |  50%<br>
| Finally, let's rerun that plot you just did qplot(carat,price,data=diamonds,<br>
| color=cut) + geom_smooth(method="lm") but add one (just one) more argument to qplot.<br>
| The new argument is facets and it should be set equal to the formula .~cut. Recall<br>
| that the facets argument indicates we want a multi-panel plot. The symbol to the<br>
| left of the tilde indicates rows (in this case just one) and the symbol to the right<br>
| of the tilde indicates columns (in this five, the number of cuts). Try this now.</p>
<blockquote>
<p>qplot(carat,price,data=diamonds,color=cut,facets=.~cut)+geom_smooth(method="lm")<br><code>geom_smooth()</code> using formula 'y ~ x'</p>
</blockquote>
<p><img src="../../images/r0041380.png" alt="image" title="image"></p>
<p>| You are quite good my friend!</p>
<p>|========================================                                     |  52%<br>
| Pretty good, right? Not too difficult either. Let's review what we learned!</p>
<p>...</p>
<p>|=========================================                                    |  54%<br>
| Which types of plot does qplot plot?</p>
<p>1: box and whisker plots<br>
2: histograms<br>
3: all of the others<br>
4: scatterplots</p>
<p>Selection: 3</p>
<p>| You are doing so well!</p>
<p>|===========================================                                  |  56%<br>
| Any and all of the above choices work; qplot is just that good. What does the gg in<br>
| ggplot2 stand for?</p>
<p>1: good grief<br>
2: goto graphics<br>
3: grammar of graphics<br>
4: good graphics</p>
<p>Selection: 3</p>
<p>| You are amazing!</p>
<p>|============================================                                 |  57%<br>
| True or False? The geom argument takes a string for a value.</p>
<p>1: False<br>
2: True</p>
<p>Selection: 2</p>
<p>| You are really on a roll!</p>
<p>|==============================================                               |  59%<br>
| True or False? The method argument takes a string for a value.</p>
<p>1: True<br>
2: False</p>
<p>Selection: 1</p>
<p>| You got it!</p>
<p>|===============================================                              |  61%<br>
| True or False? The binwidth argument takes a string for a value.</p>
<p>1: True<br>
2: False</p>
<p>Selection: 2</p>
<p>| You nailed it! Good job!</p>
<p>|================================================                             |  63%<br>
| True or False? The user must specify x- and y-axis labels when using qplot.</p>
<p>1: False<br>
2: True</p>
<p>Selection: 1</p>
<p>| That's correct!</p>
<p>|==================================================                           |  65%<br>
| Now for some ggplots.</p>
<p>...</p>
<p>|===================================================                          |  67%<br>
| First create a graphical object g by assigning to it the output of a call to the<br>
| function ggplot with 2 arguments. The first is the dataset diamonds and the second<br>
| is a call to the function aes with 2 arguments, depth and price. Remember you won't<br>
| see any result.</p>
<blockquote>
<p>g&lt;-ggplot(data=diamonds,aes(depth,price))</p>
</blockquote>
<p>| You are quite good my friend!</p>
<p>|=====================================================                        |  69%<br>
| Does g exist? Yes! Type summary with g as an argument to see what it holds.</p>
<blockquote>
<p>summary(g)</p>

<pre><code>data: carat, cut, color, clarity, depth, table, price, x, y, z [53940x10]  
mapping:  x = ~depth, y = ~price  
faceting: &lt;ggproto object: Class FacetNull, Facet, gg&gt;  
    compute_layout: function  
    draw_back: function  
    draw_front: function  
    draw_labels: function  
    draw_panels: function  
    finish_data: function  
    init_scales: function  
    map_data: function  
    params: list  
    setup_data: function  
    setup_params: function  
    shrink: TRUE  
    train_scales: function  
    vars: function  
    super:  &lt;ggproto object: Class FacetNull, Facet, gg&gt;</code></pre>
<p>| That's a job well done!</p>
</blockquote>
<p>|======================================================                       |  70%<br>
| We see that g holds the entire dataset. Now suppose we want to see a scatterplot of<br>
| the relationship. Add to g a call to the function geom_point with 1 argument, alpha<br>
| set equal to 1/3.</p>
<blockquote>
<p>g+geom_point(alpha=1/3)</p>
</blockquote>
<p><img src="../../images/r0041390.png" alt="image" title="image"></p>
<p>| You're the best!</p>
<p>|========================================================                     |  72%<br>
| That's somewhat interesting. We see that depth ranges from 43 to 79, but the densest<br>
| distribution is around 60 to 65. Suppose we want to see if this relationship<br>
| (between depth and price) is affected by cut or carat. We know cut is a factor with<br>
| 5 levels (Fair, Good, Very Good, Premium, and Ideal). But carat is numeric and not a<br>
| discrete factor. Can we do this?</p>
<p>...</p>
<p>|=========================================================                    |  74%<br>
| Of course! That's why we asked. R has a handy command, cut, which allows you to<br>
| divide your data into sets and label each entry as belonging to one of the sets, in<br>
| effect creating a new factor. First, we'll have to decide where to cut the data.</p>
<p>...</p>
<p>|==========================================================                   |  76%<br>
| Let's divide the data into 3 pockets, so 1/3 of the data falls into each. We'll use<br>
| the R command quantile to do this. Create the variable cutpoints and assign to it<br>
| the output of a call to the function quantile with 3 arguments. The first is the<br>
| data to cut, namely diamonds$carat; the second is a call to the R function seq. This<br>
| is also called with 3 arguments, (0, 1, and length set equal to 4). The third<br>
| argument to the call to quantile is the boolean na.rm set equal to TRUE.</p>
<blockquote>
<p>cutpoints&lt;-quantile(diamonds$carat,seq(0,1,length=4),na.rm=TRUE)</p>
</blockquote>
<p>| Keep working like that and you'll get there!</p>
<p>|============================================================                 |  78%<br>
| Look at cutpoints now to understand what it is.</p>
<blockquote>
<p>cutpoints</p>
</blockquote>

<pre><code>   0% 33.33333% 66.66667%      100%   
 0.20      0.50      1.00      5.01   

</code></pre>
<p>| You got it right!</p>
<p>|=============================================================                |  80%<br>
| We see a 4-long vector (explaining why length was set equal to 4). We also see that<br>
| .2 is the smallest carat size in the dataset and 5.01 is the largest. One third of<br>
| the diamonds are between .2 and .5 carats and another third are between .5 and 1<br>
| carat in size. The remaining third are between 1 and 5.01 carats. Now we can use the<br>
| R command cut to label each of the 53940 diamonds in the dataset as belonging to one<br>
| of these 3 factors. Create a new name in diamonds, diamonds$car2 by assigning it the  
| output of the call to cut. This command takes 2 arguments, diamonds$carat, which is<br>
| what we want to cut, and cutpoints, the places where we'll cut.</p>
<blockquote>
<p>diamonds$car2&lt;-cut(diamonds$carat,cutpoints)</p>
</blockquote>
<p>| You are quite good my friend!</p>
<p>|===============================================================              |  81%<br>
| Now we can continue with our multi-facet plot. First we have to reset g since we<br>
| changed the dataset (diamonds) it contained (by adding a new column). Assign to g<br>
| the output of a call to ggplot with 2 arguments. The dataset diamonds is the first,<br>
| and a call to the function aes with 2 arguments (depth,price) is the second.</p>
<blockquote>
<p>g&lt;-ggplot(data=diamonds,aes(depth,price))</p>
</blockquote>
<p>| You're the best!</p>
<p>|================================================================             |  83%<br>
| Now add to g calls to 2 functions. This first is a call to geom_point with the<br>
| argument alpha set equal to 1/3. The second is a call to the function facet_grid<br>
| using the formula cut ~ car2 as its argument.</p>
<blockquote>
<p>g+geom_point(alpha=1/3)+facet_grid(cut~car2)</p>
</blockquote>
<p><img src="../../images/r0041400.png" alt="image" title="image"></p>
<p>| That's correct!</p>
<p>|==================================================================           |  85%<br>
| We see a multi-facet plot with 5 rows, each corresponding to a cut factor. Not<br>
| surprising. What is surprising is the number of columns. We were expecting 3 and got<br>
| 4. Why?</p>
<p>...</p>
<p>|===================================================================          |  87%<br>
| The first 3 columns are labeled with the cutpoint boundaries. The fourth is labeled<br>
| NA and shows us where the data points with missing data (NA or Not Available)<br>
| occurred. We see that there were only a handful (12 in fact) and they occurred in<br>
| Very Good, Premium, and Ideal cuts. We created a vector, myd, containing the indices<br>
| of these datapoints. Look at these entries in diamonds by typing the expression<br>
| diamonds[myd,]. The myd tells R what rows to show and the empty column entry says to<br>
| print all the columns.</p>
<blockquote>
<p>diamonds[myd,]</p>

<pre><code># A tibble: 12 x 11  
   carat cut       color clarity depth table price     x     y     z car2   
   &lt;dbl&gt; &lt;ord&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;  
 1   0.2 Premium   E     SI2      60.2    62   345  3.79  3.75  2.27 NA     
 2   0.2 Premium   E     VS2      59.8    62   367  3.79  3.77  2.26 NA     
 3   0.2 Premium   E     VS2      59      60   367  3.81  3.78  2.24 NA     
 4   0.2 Premium   E     VS2      61.1    59   367  3.81  3.78  2.32 NA     
 5   0.2 Premium   E     VS2      59.7    62   367  3.84  3.8   2.28 NA     
 6   0.2 Ideal     E     VS2      59.7    55   367  3.86  3.84  2.3  NA     
 7   0.2 Premium   F     VS2      62.6    59   367  3.73  3.71  2.33 NA     
 8   0.2 Ideal     D     VS2      61.5    57   367  3.81  3.77  2.33 NA     
 9   0.2 Very Good E     VS2      63.4    59   367  3.74  3.71  2.36 NA     
10   0.2 Ideal     E     VS2      62.2    57   367  3.76  3.73  2.33 NA     
11   0.2 Premium   D     VS2      62.3    60   367  3.73  3.68  2.31 NA     
12   0.2 Premium   D     VS2      61.7    60   367  3.77  3.72  2.31 NA</code></pre>
<p>| You're the best!</p>
</blockquote>
<p>|====================================================================         |  89%<br>
| We see these entries match the plots. Whew - that's a relief. The car2 field is, in<br>
| fact, NA for these entries, but the carat field shows they each had a carat size of<br>
| .2. What's going on here?</p>
<p>...</p>
<p>|======================================================================       |  91%<br>
| Actually our plot answers this question. The boundaries for each column appear in<br>
| the gray labels at the top of each column, and we see that the first column is<br>
| labeled (0.2,0.5]. This indicates that this column contains data greater than .2 and<br>
| less than or equal to .5. So diamonds with carat size .2 were excluded from the car2<br>
| field.</p>
<p>...</p>
<p>|=======================================================================      |  93%<br>
| Finally, recall the last plotting command<br>
| (g+geom_point(alpha=1/3)+facet_grid(cut~car2)) or retype it if you like and add<br>
| another call. This one to the function geom_smooth. Pass it 3 arguments, method set<br>
| equal to the string "lm", size set equal to 3, and color equal to the string "pink".</p>
<blockquote>
<p>play()</p>
</blockquote>
<p>| Entering play mode. Experiment as you please, then type nxt() when you are ready to<br>
| resume the lesson.</p>
<blockquote>
<p>diamonds[is.na(diamonds$car2),]</p>

<pre><code># A tibble: 12 x 11  
   carat cut       color clarity depth table price     x     y     z car2   
   &lt;dbl&gt; &lt;ord&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;  
 1   0.2 Premium   E     SI2      60.2    62   345  3.79  3.75  2.27 NA     
 2   0.2 Premium   E     VS2      59.8    62   367  3.79  3.77  2.26 NA     
 3   0.2 Premium   E     VS2      59      60   367  3.81  3.78  2.24 NA     
 4   0.2 Premium   E     VS2      61.1    59   367  3.81  3.78  2.32 NA     
 5   0.2 Premium   E     VS2      59.7    62   367  3.84  3.8   2.28 NA     
 6   0.2 Ideal     E     VS2      59.7    55   367  3.86  3.84  2.3  NA     
 7   0.2 Premium   F     VS2      62.6    59   367  3.73  3.71  2.33 NA     
 8   0.2 Ideal     D     VS2      61.5    57   367  3.81  3.77  2.33 NA     
 9   0.2 Very Good E     VS2      63.4    59   367  3.74  3.71  2.36 NA     
10   0.2 Ideal     E     VS2      62.2    57   367  3.76  3.73  2.33 NA     
11   0.2 Premium   D     VS2      62.3    60   367  3.73  3.68  2.31 NA     
12   0.2 Premium   D     VS2      61.7    60   367  3.77  3.72  2.31 NA</code></pre>
<p>nxt()</p>
</blockquote>
<p>| Resuming lesson...</p>
<p>| Finally, recall the last plotting command<br>
| (g+geom_point(alpha=1/3)+facet_grid(cut~car2)) or retype it if you like and add<br>
| another call. This one to the function geom_smooth. Pass it 3 arguments, method set<br>
| equal to the string "lm", size set equal to 3, and color equal to the string "pink".</p>
<blockquote>
<p>g+geom_point(alpha=1/3)+facet_grid(cut~car2)+geom_smooth(method="lm",size=3,color="pink")<br><code>geom_smooth()</code> using formula 'y ~ x'</p>
</blockquote>
<p><img src="../../images/r0041410.png" alt="image" title="image"></p>
<p>| Keep up the great work!</p>
<p>|=========================================================================    |  94%<br>
| Nice thick regression lines which are somewhat interesting. You can add labels to<br>
| the plot if you want but we'll let you experiment on your own.</p>
<p>...</p>
<p>|==========================================================================   |  96%<br>
| Lastly, ggplot2 can, of course, produce boxplots. This final exercise is the sum of<br>
| 3 function calls. The first call is to ggplot with 2 arguments, diamonds and a call<br>
| to aes with carat and price as arguments. The second call is to geom_boxplot with no<br>
| arguments. The third is to facet_grid with one argument, the formula . ~ cut. Try<br>
| this now.</p>
<blockquote>
<p>ggplot(diamonds,aes(carat,price))+geom_boxplot()+facet_grid(.~cut)<br>
Warning message:<br>
Continuous y aesthetic -- did you forget aes(group=...)?</p>
</blockquote>
<p><img src="../../images/r0041420.png" alt="image" title="image"></p>
<p>| Perseverance, that's the answer.</p>
<p>|============================================================================ |  98%<br>
| Yes! A boxplot looking like marshmallows about to be roasted. Well done and<br>
| congratulations! You've finished this jewel of a lesson. Hope it paid off!</p>
<p>...</p>
<p>|=============================================================================| 100%<br>
| Would you like to receive credit for completing this course on Coursera.org?</p>
<p>1: Yes<br>
2: No</p>
<p>Selection: 1<br>
What is your email address? xxxxxx@xxxxxxxxxxxx<br>
What is your assignment token? xXxXxxXXxXxxXXXx<br>
Grade submission succeeded!</p>
<p>| Excellent job!</p>
<p>| You've reached the end of this lesson! Returning to the main menu...</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Exploratory Data Analysis<br>
2: Take me to the swirl course repository!</p>
<p>Selection: 0</p>
<p>| Leaving swirl now. Type swirl() to resume.</p>
<blockquote>
<p>rm(list=ls())</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Last updated 2020-05-09 22:04:44.535875 IST</em></p>

</div>
</div>
</div>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../tags/ggplot2/" rel="tag">GGPlot2</a></li>
            <li><a class="tag p-category" href="../../tags/ggplot/" rel="tag">ggplot()</a></li>
            <li><a class="tag p-category" href="../../tags/qplot/" rel="tag">qplot()</a></li>
            <li><a class="tag p-category" href="../../tags/r/" rel="tag">R</a></li>
            <li><a class="tag p-category" href="../../tags/range/" rel="tag">range()</a></li>
            <li><a class="tag p-category" href="../../tags/swirl/" rel="tag">swirl</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../00427/" rel="prev" title="GGPlot2 Part2">Previous post</a>
            </li>
            <li class="next">
                <a href="../00429/" rel="next" title="Hierarchical Clustering">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
        
        
<script>
var idcomments_acct = '7fae5836cfdd49cac599cac5b95695d1';
var idcomments_post_id = "cache/posts/00428_GGPlot2 Extras.html";
var idcomments_post_url = "https://r.datascience.eu.org/posts/00428/";
</script><span id="IDCommentsPostTitle" style="display:none"></span>
<script src="https://www.intensedebate.com/js/genericCommentWrapperV2.js"></script></section><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha384-3lJUsx1TJHt7BA4udB5KPnDrlkO8T6J6v/op7ui0BbCjvZ9WqV4Xm6DTP6kQ/iBH" crossorigin="anonymous"></script><script type="text/x-mathjax-config">
        MathJax.Hub.Config({tex2jax: {inlineMath: [['$latex ','$'], ['\\(','\\)']]}});
        </script></article><!--End of body content--><footer id="footer">
            Contents © 2020 Krishnakanth Allika 
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
<img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png"></a><br>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.
            
            
        </footer>
</div>
</div>


        <script src="../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-163231811-1"></script><script>  window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-163231811-1'); gtag('set', {'user_id': 'USER_ID'});</script>
</body>
</html>
