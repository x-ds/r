<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Data Science with R">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Data Science with R</title>
<link href="../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://r.datascience.eu.org/posts/">
<link rel="icon" href="../files/favicon.ico" sizes="16x16">
<link rel="next" href="index-3.html" type="text/html">
<!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-expand-md static-top mb-4
navbar-dark bg-dark
"><div class="container">
<!-- This keeps the margins nice -->
        <a class="navbar-brand" href="https://r.datascience.eu.org/">

            <span id="blog-title">Data Science with R</span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bs-navbar">
            <ul class="navbar-nav mr-auto">
<li class="nav-item">
<a href="../toc/" class="nav-link">Table of Contents</a>
                </li>
<li class="nav-item">
<a href="../categories/" class="nav-link">Categories</a>
                </li>
<li class="nav-item">
<a href="../tags/" class="nav-link">Tags</a>
                </li>
<li class="nav-item">
<a href="https://www.datascience.eu.org" class="nav-link">Main site</a>

                
            </li>
</ul>
<!-- DuckDuckGo custom search --><form method="get" id="search" action="https://duckduckgo.com/" class="navbar-form pull-left">
<input type="hidden" name="sites" value="https://r.datascience.eu.org/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" name="q" maxlength="255" placeholder="Search…" class="span2" style="margin-top: 4px;"><input type="submit" value="DuckDuckGo Search" style="visibility: hidden;">
</form>
<!-- End of custom search -->


            <ul class="navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="00427/" class="u-url">GGPlot2 Part2</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Krishnakanth Allika
            </span></p>
            <p class="dateline">
            <a href="00427/" rel="bookmark">
            <time class="published dt-published" datetime="2020-05-08T21:20:55+05:30" itemprop="datePublished" title="2020-05-08 21:20">2020-05-08 21:20</time></a>
            </p>
                <p class="commentline">
        
<a href="%7Blink%7D" onclick="this.href='/posts/00427/'; this.target='_self';"><span class="IDCommentsReplace" style="display:none">cache/posts/00427_GGPlot2 Part2.html</span>
<script>
var idcomments_acct = '7fae5836cfdd49cac599cac5b95695d1';
var idcomments_post_id = "cache/posts/00427_GGPlot2 Part2.html";
var idcomments_post_url = "/posts/00427/";
</script><script src="https://www.intensedebate.com/js/genericLinkWrapperV2.js"></script></a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote>
<p>library(swirl)<br>
swirl()</p>
</blockquote>
<p>| Welcome to swirl! Please sign in. If you've been here before, use the same name as<br>
| you did then. If you are new, call yourself something unique.</p>
<p>What shall I call you? Krishnakanth Allika</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Exploratory Data Analysis<br>
2: Take me to the swirl course repository!</p>
<p>Selection: 1</p>
<p>| Please choose a lesson, or type 0 to return to course menu.</p>

<pre><code> 1: Principles of Analytic Graphs   2: Exploratory Graphs             
 3: Graphics Devices in R           4: Plotting Systems               
 5: Base Plotting System            6: Lattice Plotting System        
 7: Working with Colors             8: GGPlot2 Part1                  
 9: GGPlot2 Part2                  10: GGPlot2 Extras                 
11: Hierarchical Clustering        12: K Means Clustering             
13: Dimension Reduction            14: Clustering Example             
15: CaseStudy</code></pre>
<p>Selection: 9</p>
<p>| Attempting to load lesson dependencies...</p>
<p>| Package ‘ggplot2’ loaded correctly!</p>
<p>|                                                                              |   0%</p>
<p>| GGPlot2_Part2. (Slides for this and other Data Science courses may be found at github<br>
| <a href="https://github.com/DataScienceSpecialization/courses/">https://github.com/DataScienceSpecialization/courses/</a>. If you care to use them, they<br>
| must be downloaded as a zip file and viewed locally. This lesson corresponds to<br>
| 04_ExploratoryAnalysis/ggplot2.)</p>
<p>...</p>
<p>|==                                                                            |   2%<br>
| In a previous lesson we showed you the vast capabilities of qplot, the basic<br>
| workhorse function of the ggplot2 package. In this lesson we'll focus on some<br>
| fundamental components of the package. These underlie qplot which uses default values<br>
| when it calls them. If you understand these building blocks, you will be better able<br>
| to customize your plots. We'll use the second workhorse function in the package,<br>
| ggplot, as well as other graphing functions.</p>
<p>...</p>
<p>|===                                                                           |   4%<br>
| Do you remember what the gg of ggplot2 stands for?</p>
<p>1: grammar of graphics<br>
2: good grief<br>
3: great graphics<br>
4: goto graphics</p>
<p>Selection: 1</p>
<p>| That's the answer I was looking for.</p>
<p>|=====                                                                         |   6%<br>
| A "grammar" of graphics means that ggplot2 contains building blocks with which you<br>
| can create your own graphical objects. What are these basic components of ggplot2<br>
| plots? There are 7 of them.</p>
<p>...</p>
<p>|======                                                                        |   8%<br>
| Obviously, there's a DATA FRAME which contains the data you're trying to plot. Then<br>
| the AESTHETIC MAPPINGS determine how data are mapped to color, size, etc. The GEOMS<br>
| (geometric objects) are what you see in the plot (points, lines, shapes) and FACETS<br>
| are the panels used in conditional plots. You've used these or seen them used in the<br>
| first ggplot2 (qplot) lesson.</p>
<p>...</p>
<p>|========                                                                      |  10%<br>
| There are 3 more. STATS are statistical transformations such as binning, quantiles,<br>
| and smoothing which ggplot2 applies to the data. SCALES show what coding an aesthetic<br>
| map uses (for example, male = red, female = blue). Finally, the plots are depicted on<br>
| a COORDINATE SYSTEM. When you use qplot these were taken care of for you.</p>
<p>...</p>
<p>|==========                                                                    |  12%<br>
| Do you remember what the "artist's palette" model means in the context of plotting?</p>
<p>1: we draw pictures<br>
2: we mix paints<br>
3: plots are built up in layers<br>
4: things get messy</p>
<p>Selection: 3</p>
<p>| You nailed it! Good job!</p>
<p>|===========                                                                   |  15%<br>
| As in the base plotting system (and in contrast to the lattice system), when building<br>
| plots with ggplot2, the plots are built up in layers, maybe in several steps. You can<br>
| plot the data, then overlay a summary (for instance, a regression line or smoother)<br>
| and then add any metadata and annotations you need.</p>
<p>...</p>
<p>|=============                                                                 |  17%<br>
| We'll keep using the mpg data that comes with the ggplot2 package. Recall the<br>
| versatility of qplot. Just as a refresher, call qplot now with 5 arguments. The first<br>
| 3 deal with data - displ, hwy, and data=mpg. The fourth is geom set equal to the<br>
| concatenation of the two strings, "point" and "smooth". The fifth is facets set equal<br>
| to the formula .~drv. Try this now.</p>
<blockquote>
<p>qplot(displ,hwy,data=mpg,geom=c("point","smooth"),facets=.~drv)<br><code>geom_smooth()</code> using method = 'loess' and formula 'y ~ x'</p>
</blockquote>
<p><img src="../images/r0041060.png" alt="image" title="image"></p>
<p>| You got it!</p>
<p>|===============                                                               |  19%<br>
| We see a 3 facet plot, one for each drive type (4, f, and r). Now we'll see how<br>
| ggplot works. We'll build up a similar plot using the basic components of the<br>
| package. We'll do this in a series of steps.</p>
<p>...</p>
<p>|================                                                              |  21%<br>
| First we'll create a variable g by assigning to it the output of a call to ggplot<br>
| with 2 arguments. The first is mpg (our dataset) and the second will tell ggplot what<br>
| we want to plot, in this case, displ and hwy. These are what we want our aesthetics<br>
| to represent so we enclose these as two arguments to the function aes. Try this now.</p>
<blockquote>
<p>g&lt;-ggplot(mpg,aes(displ,hwy))</p>
</blockquote>
<p>| You are quite good my friend!</p>
<p>|==================                                                            |  23%<br>
| Notice that nothing happened? As in the lattice system, ggplot created a graphical<br>
| object which we assigned to the variable g.</p>
<p>...</p>
<p>|====================                                                          |  25%<br>
| Run the R command summary with g as its argument to see what g contains.</p>
<blockquote>
<p>summary(g)</p>

<pre><code>data: manufacturer, model, displ, year, cyl, trans, drv, cty, hwy, fl, class  
  [234x11]  
mapping:  x = ~displ, y = ~hwy  
faceting: &lt;ggproto object: Class FacetNull, Facet, gg&gt;  
    compute_layout: function  
    draw_back: function  
    draw_front: function  
    draw_labels: function  
    draw_panels: function  
    finish_data: function  
    init_scales: function  
    map_data: function  
    params: list  
    setup_data: function  
    setup_params: function  
    shrink: TRUE  
    train_scales: function  
    vars: function  
    super:  &lt;ggproto object: Class FacetNull, Facet, gg&gt;</code></pre>
<p>| You are quite good my friend!</p>
</blockquote>
<p>|=====================                                                         |  27%<br>
| So g contains the mpg data with all its named components in a 234 by 11 matrix. It<br>
| also contains a mapping, x (displ) and y (hwy) which you specified, and no faceting.</p>
<p>...</p>
<p>|=======================                                                       |  29%<br>
| Note that if you tried to print g with the expressions g or print(g) you'd get an<br>
| error! Even though it's a great package, ggplot doesn't know how to display the data<br>
| yet since you didn't specify how you wanted to see it. Now type g+geom_point() and<br>
| see what happens.</p>
<blockquote>
<p>g+geom_point()</p>
</blockquote>
<p><img src="../images/r0041070.png" alt="image" title="image"></p>
<p>| You are quite good my friend!</p>
<p>|========================                                                      |  31%<br>
| By calling the function geom_point you added a layer. By not assigning the expression<br>
| to a variable you displayed a plot. Notice that you didn't have to pass any arguments<br>
| to the function geom_point. That's because the object g has all the data stored in<br>
| it. (Remember you saw that when you ran summary on g before.) Now use the expression<br>
| you just typed (g + geom_point()) and add to it another layer, a call to<br>
| geom_smooth(). Notice the red message R gives you.</p>
<blockquote>
<p>g+geom_point()+geom_smooth()<br><code>geom_smooth()</code> using method = 'loess' and formula 'y ~ x'</p>
</blockquote>
<p><img src="../images/r0041080.png" alt="image" title="image"></p>
<p>| You got it!</p>
<p>|==========================                                                    |  33%<br>
| The gray shadow around the blue line is the confidence band. See how wide it is at<br>
| the right? Let's try a different smoothing function. Use the up arrow to recover the<br>
| expression you just typed, and instead of calling geom_smooth with no arguments, call<br>
| it with the argument method set equal to the string "lm".</p>
<blockquote>
<p>g+geom_point()+geom_smooth(method="lm")<br><code>geom_smooth()</code> using formula 'y ~ x'</p>
</blockquote>
<p><img src="../images/r0041090.png" alt="image" title="image"></p>
<p>| Excellent work!</p>
<p>|============================                                                  |  35%<br>
| By changing the smoothing function to "lm" (linear model) ggplot2 generated a<br>
| regression line through the data. Now recall the expression you just used and add to<br>
| it another call, this time to the function facet_grid. Use the formula . ~ drv as it<br>
| argument. Note that this is the same type of formula used in the calls to qplot.</p>
<blockquote>
<p>g+geom_point()+geom_smooth(method="lm")+facet_grid(.~drv)<br><code>geom_smooth()</code> using formula 'y ~ x'</p>
</blockquote>
<p><img src="../images/r0041100.png" alt="image" title="image"></p>
<p>| Your dedication is inspiring!</p>
<p>|=============================                                                 |  38%<br>
| Notice how each panel is labeled with the appropriate factor. All the data associated<br>
| with 4-wheel drive cars is in the leftmost panel, front-wheel drive data is shown in<br>
| the middle panel, and rear-wheel drive data in the rightmost. Notice that this is<br>
| similar to the plot you created at the start of the lesson using qplot. (We used a<br>
| different smoothing function than previously.)</p>
<p>...</p>
<p>|===============================                                               |  40%<br>
| So far you've just used the default labels that ggplot provides. You can add your own<br>
| annotation using functions such as xlab(), ylab(), and ggtitle(). In addition, the<br>
| function labs() is more general and can be used to label either or both axes as well<br>
| as provide a title. Now recall the expression you just typed and add a call to the<br>
| function ggtitle with the argument "Swirl Rules!".</p>
<blockquote>
<p>g+geom_point()+geom_smooth(method="lm")+facet_grid(.~drv)+ggtitle("Swirl Rules!")<br><code>geom_smooth()</code> using formula 'y ~ x'</p>
</blockquote>
<p><img src="../images/r0041110.png" alt="image" title="image"></p>
<p>| You are doing so well!</p>
<p>|================================                                              |  42%<br>
| Now that you've seen the basics we'll talk about customizing. Each of the “geom”<br>
| functions (e.g., _point and _smooth) has options to modify it. Also, the function<br>
| theme() can be used to modify aspects of the entire plot, e.g. the position of the<br>
| legend. Two standard appearance themes are included in ggplot. These are theme_gray()<br>
| which is the default theme (gray background with white grid lines) and theme_bw()<br>
| which is a plainer (black and white) color scheme.</p>
<p>...</p>
<p>|==================================                                            |  44%<br>
| Let's practice modifying aesthetics now. We'll use the graphic object g that we<br>
| already filled with mpg data and add a call to the function geom_point, but this time<br>
| we'll give geom_point 3 arguments. Set the argument color equal to "pink", the<br>
| argument size to 4, and the argument alpha to 1/2. Notice that all the arguments are<br>
| set equal to constants.</p>
<blockquote>
<p>g+geom_point(color="pink",size=4,alpha=0.5)</p>
</blockquote>
<p><img src="../images/r0041120.png" alt="image" title="image"></p>
<p>| You are doing so well!</p>
<p>|====================================                                          |  46%<br>
| Notice the different shades of pink? That's the result of the alpha aesthetic which<br>
| you set to 1/2. This aesthetic tells ggplot how transparent the points should be.<br>
| Darker circles indicate values hit by multiple data points.</p>
<p>...</p>
<p>|=====================================                                         |  48%<br>
| Now we'll modify the aesthetics so that color indicates which drv type each point<br>
| represents. Again, use g and add to it a call to the function geom_point with 3<br>
| arguments. The first is size set equal to 4, the second is alpha equal to 1/2. The<br>
| third is a call to the function aes with the argument color set equal to drv. Note<br>
| that you MUST use the function aes since the color of the points is data dependent<br>
| and not a constant as it was in the previous example.</p>
<blockquote>
<p>g+geom_point(size=4,alpha=0.5,aes(color=drv))</p>
</blockquote>
<p><img src="../images/r0041130.png" alt="image" title="image"></p>
<p>| That's a job well done!</p>
<p>|=======================================                                       |  50%<br>
| Notice the helpful legend on the right decoding the relationship between color and<br>
| drv.</p>
<p>...</p>
<p>|=========================================                                     |  52%<br>
| Now we'll practice modifying labels. Again, we'll use g and add to it calls to 3<br>
| functions. First, add a call to geom_point with an argument making the color<br>
| dependent on the drv type (as we did in the previous example). Second, add a call to<br>
| the function labs with the argument title set equal to "Swirl Rules!". Finally, add a<br>
| call to labs with 2 arguments, one setting x equal to "Displacement" and the other<br>
| setting y equal to "Hwy Mileage".</p>
<blockquote>
<p>g+geom_point(aes(color=drv))+labs(title="Swirl Rules!")+labs(x="Displacement",y="Hwy Mileage")</p>
</blockquote>
<p><img src="../images/r0041140.png" alt="image" title="image"></p>
<p>| You are amazing!</p>
<p>|==========================================                                    |  54%<br>
| Note that you could have combined the two calls to the function labs in the previous<br>
| example. Now we'll practice customizing the geom_smooth calls. Use g and add to it a<br>
| call to geom_point setting the color to drv type (remember to use the call to the aes<br>
| function), size set to 2 and alpha to 1/2. Then add a call to geom_smooth with 4<br>
| arguments. Set size equal to 4, linetype to 3, method to "lm", and se to FALSE.</p>
<blockquote>
<p>g+geom_point(aes(color=drv),size=2,alpha=0.5)+geom_smooth(size=4,linetype=3,method="lm",se=FALSE)<br><code>geom_smooth()</code> using formula 'y ~ x'</p>
</blockquote>
<p><img src="../images/r0041150.png" alt="image" title="image"></p>
<p>| Perseverance, that's the answer.</p>
<p>|============================================                                  |  56%<br>
| What did these arguments do? The method specified a linear regression (note the<br>
| negative slope indicating that the bigger the displacement the lower the gas<br>
| mileage), the linetype specified that it should be dashed (not continuous), the size<br>
| made the dashes big, and the se flag told ggplot to turn off the gray shadows<br>
| indicating standard errors (confidence intervals).</p>
<p>...</p>
<p>|=============================================                                 |  58%<br>
| Finally, let's do a simple plot using the black and white theme, theme_bw. Specify g<br>
| and add a call to the function geom_point with the argument setting the color to the<br>
| drv type. Then add a call to the function theme_bw with the argument base_family set<br>
| equal to "Times". See if you notice the difference.</p>
<blockquote>
<p>g+geom_point(aes(color=drv))+theme_bw(base_family = "Times")<br>
There were 13 warnings (use warnings() to see them)</p>
</blockquote>
<p><img src="../images/r0041160.png" alt="image" title="image"></p>
<p>| Nice work!</p>
<p>|===============================================                               |  60%<br>
| No more gray background! Also, if you have good eyesight, you'll notice that the font<br>
| in the labels changed.</p>
<p>...</p>
<p>|=================================================                             |  62%<br>
| One final note before we go through a more complicated, layered ggplot example, and<br>
| this concerns the limits of the axes. We're pointing this out to emphasize a subtle<br>
| difference between ggplot and the base plotting function plot.</p>
<p>...</p>
<p>|==================================================                            |  65%<br>
| We've created some random x and y data, called myx and myy, components of a dataframe<br>
| called testdat. These represent 100 random normal points, except halfway through, we<br>
| made one of the points be an outlier. That is, we set its y-value to be out of range<br>
| of the other points. Use the base plotting function plot to create a line plot of<br>
| this data. Call it with 4 arguments - myx, myy, type="l", and ylim=c(-3,3). The<br>
| type="l" tells plot you want to display the data as a line instead of as a<br>
| scatterplot.</p>
<p>warning messages from top-level task callback 'mini'<br>
There were 40 warnings (use warnings() to see them)</p>
<blockquote>
<p>play()</p>
</blockquote>
<p>| Entering play mode. Experiment as you please, then type nxt() when you are ready to<br>
| resume the lesson.</p>
<blockquote>
<p>g+geom_point(aes(color=drv))+theme_dark()</p>
</blockquote>
<p><img src="../images/r0041170.png" alt="image" title="image"></p>
<blockquote>
<p>g+geom_point(aes(color=drv))+theme_minimal()</p>
</blockquote>
<p><img src="../images/r0041180.png" alt="image" title="image"></p>
<blockquote>
<p>g+geom_point(aes(color=drv))+theme_grey()</p>
</blockquote>
<p><img src="../images/r0041190.png" alt="image" title="image"></p>
<blockquote>
<p>nxt()</p>
</blockquote>
<p>| Resuming lesson...</p>
<p>| We've created some random x and y data, called myx and myy, components of a dataframe<br>
| called testdat. These represent 100 random normal points, except halfway through, we<br>
| made one of the points be an outlier. That is, we set its y-value to be out of range<br>
| of the other points. Use the base plotting function plot to create a line plot of<br>
| this data. Call it with 4 arguments - myx, myy, type="l", and ylim=c(-3,3). The<br>
| type="l" tells plot you want to display the data as a line instead of as a<br>
| scatterplot.</p>
<blockquote>
<p>plot(myx,myy,type="l",ylim=c(-3,3))</p>
</blockquote>
<p><img src="../images/r0041200.png" alt="image" title="image"></p>
<p>| You got it!</p>
<p>|====================================================                          |  67%<br>
| Notice how plot plotted the points in the (-3,3) range for y-values. The outlier at<br>
| (50,100) is NOT shown on the line plot. Now we'll plot the same data with ggplot.<br>
| Recall that the name of the dataframe is testdat. Create the graphical object g with<br>
| a call to ggplot with 2 arguments, testdat (the data) and a call to aes with 2<br>
| arguments, x set equal to myx, and y set equal to myy.</p>
<blockquote>
<p>g&lt;-ggplot(data=testdat,aes(x=myx,y=myy))</p>
</blockquote>
<p>| You got it!</p>
<p>|======================================================                        |  69%<br>
| Now add a call to geom_line with 0 arguments to g.</p>
<blockquote>
<p>g+geom_line()</p>
</blockquote>
<p><img src="../images/r0041210.png" alt="image" title="image"></p>
<p>| You got it right!</p>
<p>|=======================================================                       |  71%<br>
| Notice how ggplot DID display the outlier point at (50,100). As a result the rest of<br>
| the data is smashed down so you don't get to see what the bulk of it looks like. The<br>
| single outlier probably isn't important enough to dominate the graph. How do we get<br>
| ggplot to behave more like plot in a situation like this?</p>
<p>...</p>
<p>|=========================================================                     |  73%<br>
| Let's take a guess that in addition to adding geom_line() to g we also just have to<br>
| add ylim(-3,3) to it as we did with the call to plot. Try this now to see what<br>
| happens.</p>
<blockquote>
<p>g+geom_line()+ylim(-3,3)</p>
</blockquote>
<p><img src="../images/r0041220.png" alt="image" title="image"></p>
<p>| Perseverance, that's the answer.</p>
<p>|==========================================================                    |  75%<br>
| Notice that by doing this, ggplot simply ignored the outlier point at (50,100).<br>
| There's a break in the line which isn't very noticeable. Now recall that at the<br>
| beginning of the lesson we mentioned 7 components of a ggplot plot, one of which was<br>
| a coordinate system. This is a situation where using a coordinate system would be<br>
| helpful. Instead of adding ylim(-3,3) to the expression g+geom_line(), add a call to<br>
| the function coord_cartesian with the argument ylim set equal to c(-3,3).</p>
<blockquote>
<p>g+geom_line()+coord_cartesian(ylim=c(-3,3))</p>
</blockquote>
<p><img src="../images/r0041230.png" alt="image" title="image"></p>
<p>| You are really on a roll!</p>
<p>|============================================================                  |  77%<br>
| See the difference? This looks more like the plot produced by the base plot function.<br>
| The outlier y value at x=50 is not shown, but the plot indicates that it is larger<br>
| than 3.</p>
<p>...</p>
<p>|==============================================================                |  79%<br>
| We'll close with a more complicated example to show you the full power of ggplot and<br>
| the entire ggplot2 package. We'll continue to work with the mpg dataset.</p>
<p>...</p>
<p>|===============================================================               |  81%<br>
| Start by creating the graphical object g by assigning to it a call to ggplot with 2<br>
| arguments. The first is the dataset and the second is a call to the function aes.<br>
| This call will have 3 arguments, x set equal to displ, y set equal to hwy, and color<br>
| set equal to factor(year). This last will allow us to distinguish between the two<br>
| manufacturing years (1999 and 2008) in our data.</p>
<blockquote>
<p>g&lt;-ggplot(data=mpg,aes(x=displ,y=hwy,color=factor(year)))</p>
</blockquote>
<p>| All that practice is paying off!</p>
<p>|=================================================================             |  83%<br>
| Uh oh! Nothing happened. Does g exist? Of course, it just isn't visible yet since you<br>
| didn't add a layer.</p>
<p>...</p>
<p>|===================================================================           |  85%<br>
| If you typed g at the command line, what would happen?</p>
<p>1: a scatterplot would appear with 2 colors of points<br>
2: I would have to try this to answer the question<br>
3: R would return an error in red</p>
<p>Selection: 3</p>
<p>| You got it!</p>
<p>|====================================================================          |  88%<br>
| We'll build the plot up step by step. First add to g a call to the function<br>
| geom_point with 0 arguments.</p>
<blockquote>
<p>g+geom_point()</p>
</blockquote>
<p><img src="../images/r0041240.png" alt="image" title="image"></p>
<p>| You nailed it! Good job!</p>
<p>|======================================================================        |  90%<br>
| A simple, yet comfortingly familiar scatterplot appears. Let's make our display a 2<br>
| dimensional multi-panel plot. Recall your last command (with the up arrow) and add to<br>
| it a call the function facet_grid. Give it 2 arguments. The first is the formula<br>
| drv~cyl, and the second is the argument margins set equal to TRUE. Try this now.</p>
<blockquote>
<p>g+geom_point()+facet_grid(drv~cyl,margins=TRUE)</p>
</blockquote>
<p><img src="../images/r0041250.png" alt="image" title="image"></p>
<p>| Keep up the great work!</p>
<p>|========================================================================      |  92%<br>
| A 4 by 5 plot, huh? The margins argument tells ggplot to display the marginal totals<br>
| over each row and column, so instead of seeing 3 rows (the number of drv factors) and<br>
| 4 columns (the number of cyl factors) we see a 4 by 5 display. Note that the panel in<br>
| position (4,5) is a tiny version of the scatterplot of the entire dataset.</p>
<p>...</p>
<p>|=========================================================================     |  94%<br>
| Now add to your last command (or retype it if you like to type) a call to geom_smooth<br>
| with 4 arguments. These are method set to "lm", se set to FALSE, size set to 2, and<br>
| color set to "black".</p>
<blockquote>
<p>g+geom_point()+facet_grid(drv~cyl,margins=TRUE)+geom_smooth(method="lm",se=FALSE,size=2,color="black")<br><code>geom_smooth()</code> using formula 'y ~ x'</p>
</blockquote>
<p><img src="../images/r0041260.png" alt="image" title="image"></p>
<p>| Keep up the great work!</p>
<p>|===========================================================================   |  96%<br>
| Angry Birds? Finally, add to your last command (or retype it if you like to type) a<br>
| call to the function labs with 3 arguments. These are x set to "Displacement", y set<br>
| to "Highway Mileage", and title set to "Swirl Rules!".</p>
<blockquote>
<p>g+geom_point()+facet_grid(drv~cyl,margins=TRUE)+geom_smooth(method="lm",se=FALSE,size=2,color="black")+labs(x="Displacement",y="Highway Mileage",title="Swirl Rules!")<br><code>geom_smooth()</code> using formula 'y ~ x'</p>
</blockquote>
<p><img src="../images/r0041270.png" alt="image" title="image"></p>
<p>| Keep working like that and you'll get there!</p>
<p>|============================================================================  |  98%<br>
| You could have done these labels with separate calls to labs but we thought you'd be<br>
| sick of this by now. Anyway, congrats! You've concluded part 2 of ggplot2. We hope<br>
| you got enough mileage out of the lesson. If you like ggplot2 you can do some extras<br>
| with the extra lesson.</p>
<p>...</p>
<p>|==============================================================================| 100%<br>
| Would you like to receive credit for completing this course on Coursera.org?</p>
<p>1: Yes<br>
2: No</p>
<p>Selection: 1<br>
What is your email address? xxxxxx@xxxxxxxxxxxx<br>
What is your assignment token? xXxXxxXXxXxxXXXx<br>
Grade submission succeeded!</p>
<p>| You got it right!</p>
<p>| You've reached the end of this lesson! Returning to the main menu...</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Exploratory Data Analysis<br>
2: Take me to the swirl course repository!</p>
<p>Selection: 0</p>
<p>| Leaving swirl now. Type swirl() to resume.</p>
<blockquote>
<p>g+geom_point()+facet_grid(drv~cyl,margins=TRUE)+geom_smooth(method="lm",se=FALSE,size=2,color="black")+labs(x="Displacement",y="Highway Mileage",title="Swirl Rules!")+theme(plot.title = element_text(hjust = 0.5))<br><code>geom_smooth()</code> using formula 'y ~ x'</p>
</blockquote>
<p><img src="../images/r0041280.png" alt="image" title="image"></p>
<blockquote>
<p>rm(list=ls())</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Last updated 2020-05-08 21:23:15.085181 IST</em></p>

</div>
</div>
</div>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="00426/" class="u-url">GGPlot2 Part1</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Krishnakanth Allika
            </span></p>
            <p class="dateline">
            <a href="00426/" rel="bookmark">
            <time class="published dt-published" datetime="2020-05-08T20:00:59+05:30" itemprop="datePublished" title="2020-05-08 20:00">2020-05-08 20:00</time></a>
            </p>
                <p class="commentline">
        
<a href="%7Blink%7D" onclick="this.href='/posts/00426/'; this.target='_self';"><span class="IDCommentsReplace" style="display:none">cache/posts/00426_GGPlot2 Part1.html</span>
<script>
var idcomments_acct = '7fae5836cfdd49cac599cac5b95695d1';
var idcomments_post_id = "cache/posts/00426_GGPlot2 Part1.html";
var idcomments_post_url = "/posts/00426/";
</script><script src="https://www.intensedebate.com/js/genericLinkWrapperV2.js"></script></a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote>
<p>library(swirl)<br>
library(ggplot2)<br>
swirl()</p>
</blockquote>
<p>| Welcome to swirl! Please sign in. If you've been here before, use the same name as<br>
| you did then. If you are new, call yourself something unique.</p>
<p>What shall I call you? Krishnakanth Allika</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Exploratory Data Analysis<br>
2: Take me to the swirl course repository!</p>
<p>Selection: 1</p>
<p>| Please choose a lesson, or type 0 to return to course menu.</p>
<p>1: Principles of Analytic Graphs   2: Exploratory Graphs<br>
 3: Graphics Devices in R           4: Plotting Systems<br>
 5: Base Plotting System            6: Lattice Plotting System<br>
 7: Working with Colors             8: GGPlot2 Part1<br>
 9: GGPlot2 Part2                  10: GGPlot2 Extras<br>
11: Hierarchical Clustering        12: K Means Clustering<br>
13: Dimension Reduction            14: Clustering Example<br>
15: CaseStudy</p>
<p>Selection: 8</p>
<p>| Attempting to load lesson dependencies...</p>
<p>| Package ‘ggplot2’ loaded correctly!</p>
<p>|                                                                             |   0%</p>
<p>| GGPlot2_Part1. (Slides for this and other Data Science courses may be found at<br>
| github <a href="https://github.com/DataScienceSpecialization/courses/">https://github.com/DataScienceSpecialization/courses/</a>. If you care to use<br>
| them, they must be downloaded as a zip file and viewed locally. This lesson<br>
| corresponds to 04_ExploratoryAnalysis/ggplot2.)</p>
<p>...</p>
<p>|==                                                                           |   2%<br>
| In another lesson, we gave you an overview of the three plotting systems in R. In<br>
| this lesson we'll focus on the third and newest plotting system in R, ggplot2.  As<br>
| we did with the other two systems, we'll focus on creating graphics on the screen<br>
| device rather than another graphics device.</p>
<p>...</p>
<p>|====                                                                         |   5%<br>
| The ggplot2 package is an add-on package available from CRAN via install.packages().<br>
| (Don't worry, we've installed it for you already.) It is an implementation of The<br>
| Grammar of Graphics, an abstract concept (as well as book) authored and invented by<br>
| Leland Wilkinson and implemented by Hadley Wickham while he was a graduate student<br>
| at Iowa State. The web site <a href="http://ggplot2.org">http://ggplot2.org</a> provides complete documentation.</p>
<p>...</p>
<p>|======                                                                       |   7%<br>
| A grammar of graphics represents an abstraction of graphics, that is, a theory of<br>
| graphics which conceptualizes basic pieces from which you can build new graphics and<br>
| graphical objects. The goal of the grammar is to “Shorten the distance from mind to<br>
| page”. From Hadley Wickham's book we learn that</p>
<p>...</p>
<p>|========                                                                     |  10%<br>
| The ggplot2 package "is composed of a set of independent components that can be<br>
| composed in many different ways. ... you can create new graphics that are precisely<br>
| tailored for your problem." These components include aesthetics which are attributes<br>
| such as colour, shape, and size, and geometric objects or geoms such as points,<br>
| lines, and bars.</p>
<p>...</p>
<p>|=========                                                                    |  12%<br>
| Before we delve into details, let's review the other 2 plotting systems.</p>
<p>...</p>
<p>|===========                                                                  |  15%<br>
| Recall what you know about R's base plotting system. Which of the following does NOT<br>
| apply to it?</p>
<p>1: It is convenient and mirrors how we think of building plots and analyzing data<br>
2: Can easily go back once the plot has started (e.g., to adjust margins or correct a typo)<br>
3: Use annotation functions to add/modify (text, lines, points, axis)<br>
4: Start with plot (or similar) function</p>
<p>Selection: 2</p>
<p>| That's correct!</p>
<p>|=============                                                                |  17%<br>
| Recall what you know about R's lattice plotting system. Which of the following does<br>
| NOT apply to it?</p>
<p>1: Margins and spacing are set automatically because entire plot is specified at once<br>
2: Most useful for conditioning types of plots and putting many panels on one plot<br>
3: Can always add to the plot once it is created<br>
4: Plots are created with a single function call (xyplot, bwplot, etc.)</p>
<p>Selection: 3</p>
<p>| Excellent job!</p>
<p>|===============                                                              |  20%<br>
| If we told you that ggplot2 combines the best of base and lattice, that would mean<br>
| it ...?</p>
<p>1: Automatically deals with spacings, text, titles but also allows you to annotate<br>
2: Its default mode makes many choices for you (but you can customize!)<br>
3: All of the others<br>
4: Like lattice it allows for multipanels but more easily and intuitively</p>
<p>Selection: 3</p>
<p>| You are quite good my friend!</p>
<p>|=================                                                            |  22%<br>
| Yes, ggplot2 combines the best of base and lattice. It allows for multipanel<br>
| (conditioning) plots (as lattice does) but also post facto annotation (as base<br>
| does), so you can add titles and labels. It uses the low-level grid package (which<br>
| comes with R) to draw the graphics. As part of its grammar philosophy, ggplot2 plots<br>
| are composed of aesthetics (attributes such as size, shape, color) and geoms<br>
| (points, lines, and bars), the geometric objects you see on the plot.</p>
<p>...</p>
<p>|===================                                                          |  24%<br>
| The ggplot2 package has 2 workhorse functions. The more basic workhorse function is<br>
| qplot, (think quick plot), which works like the plot function in the base graphics<br>
| system. It can produce many types of plots (scatter, histograms, box and whisker)<br>
| while hiding tedious details from the user. Similar to lattice functions, it looks<br>
| for data in a data frame or parent environment.</p>
<p>...</p>
<p>|=====================                                                        |  27%<br>
| The more advanced workhorse function in the package is ggplot, which is more<br>
| flexible and can be customized for doing things qplot cannot do. In this lesson<br>
| we'll focus on qplot.</p>
<p>...</p>
<p>|=======================                                                      |  29%<br>
| We'll start by showing how easy and versatile qplot is. First, let's look at some<br>
| data which comes with the ggplot2 package. The mpg data frame contains fuel economy<br>
| data for 38 models of cars manufactured in 1999 and 2008. Run the R command str with<br>
| the argument mpg. This will give you an idea of what mpg contains.</p>
<blockquote>
<p>str(mpg)</p>

<pre><code>tibble [234 x 11] (S3: tbl_df/tbl/data.frame)  
 $ manufacturer: chr [1:234] "audi" "audi" "audi" "audi" ...  
 $ model       : chr [1:234] "a4" "a4" "a4" "a4" ...  
 $ displ       : num [1:234] 1.8 1.8 2 2 2.8 2.8 3.1 1.8 1.8 2 ...  
 $ year        : int [1:234] 1999 1999 2008 2008 1999 1999 2008 1999 1999 2008 ...  
 $ cyl         : int [1:234] 4 4 4 4 6 6 6 4 4 4 ...  
 $ trans       : chr [1:234] "auto(l5)" "manual(m5)" "manual(m6)" "auto(av)" ...  
 $ drv         : chr [1:234] "f" "f" "f" "f" ...  
 $ cty         : int [1:234] 18 21 20 21 16 18 18 18 16 20 ...  
 $ hwy         : int [1:234] 29 29 31 30 26 26 27 26 25 28 ...  
 $ fl          : chr [1:234] "p" "p" "p" "p" ...  
 $ class       : chr [1:234] "compact" "compact" "compact" "compact" ...</code></pre>
<p>| You are really on a roll!</p>
</blockquote>
<p>|========================                                                     |  32%<br>
| We see that there are 234 points in the dataset concerning 11 different<br>
| characteristics of the cars. Suppose we want to see if there's a correlation between<br>
| engine displacement (displ) and highway miles per gallon (hwy). As we did with the<br>
| plot function of the base system we could simply call qplot with 3 arguments, the<br>
| first two are the variables we want to examine and the third argument data is set<br>
| equal to the name of the dataset which contains them (in this case, mpg). Try this<br>
| now.</p>
<blockquote>
<p>qplot(displ,hwy,data=mpg)</p>
</blockquote>
<p><img src="../images/r0040960.png" alt="image" title="image"></p>
<p>| You are amazing!</p>
<p>|==========================                                                   |  34%<br>
| A nice scatterplot done simply, right? All the labels are provided. The first<br>
| argument is shown along the x-axis and the second along the y-axis. The negative<br>
| trend (increasing displacement and lower gas mileage) is pretty clear. Now suppose<br>
| we want to do the same plot but this time use different colors to distinguish<br>
| between the 3 factors (subsets) of different types of drive (drv) in the data<br>
| (front-wheel, rear-wheel, and 4-wheel). Again, qplot makes this very easy. We'll<br>
| just add what ggplot2 calls an aesthetic, a fourth argument, color, and set it equal<br>
| to drv. Try this now. (Use the up arrow key to save some typing.)</p>
<blockquote>
<p>qplot(displ,hwy,data=mpg,color=drv)</p>
</blockquote>
<p><img src="../images/r0040970.png" alt="image" title="image"></p>
<p>| All that hard work is paying off!</p>
<p>|============================                                                 |  37%<br>
| Pretty cool, right? See the legend to the right which qplot helpfully supplied? The<br>
| colors were automatically assigned by qplot so the legend decodes the colors for<br>
| you. Notice that qplot automatically used dots or points to indicate the data. These<br>
| points are geoms (geometric objects). We could have used a different aesthetic, for<br>
| instance shape instead of color, to distinguish between the drive types.</p>
<p>...</p>
<p>|==============================                                               |  39%<br>
| Now let's add a second geom to the default points. How about some smoothing function<br>
| to produce trend lines, one for each color? Just add a fifth argument, geom, and<br>
| using the R function c(), set it equal to the concatenation of the two strings<br>
| "point" and "smooth". The first refers to the data points and second to the trend<br>
| lines we want plotted. Try this now.</p>
<blockquote>
<p>qplot(displ,hwy,data=mpg,color=drv,geom=c("point","smooth"))<br><code>geom_smooth()</code> using method = 'loess' and formula 'y ~ x'</p>
</blockquote>
<p><img src="../images/r0040980.png" alt="image" title="image"></p>
<p>| That's correct!</p>
<p>|================================                                             |  41%<br>
| Notice the gray areas surrounding each trend lines. These indicate the 95%<br>
| confidence intervals for the lines.</p>
<p>...</p>
<p>|==================================                                           |  44%<br>
| Before we leave qplot's scatterplotting ability, call qplot again, this time with 3<br>
| arguments. The first is y set equal to hwy, the second is data set equal to mpg, and<br>
| the third is color set equal to drv. Try this now.</p>
<blockquote>
<p>qplot(y=hwy,data=mpg,color=drv)</p>
</blockquote>
<p><img src="../images/r0040990.png" alt="image" title="image"></p>
<p>| Great job!</p>
<p>|====================================                                         |  46%<br>
| What's this plot showing? We see the x-axis ranges from 0 to 250 and we remember<br>
| that we had 234 data points in our set, so we can infer that each point in the plot<br>
| represents one of the hwy values (indicated by the y-axis). We've created the vector<br>
| myhigh for you which contains the hwy data from the mpg dataset. Look at myhigh now.</p>
<blockquote>
<p>play()</p>
</blockquote>
<p>| Entering play mode. Experiment as you please, then type nxt() when you are ready to<br>
| resume the lesson.</p>
<blockquote>
<p>qplot(y=hwy,data=mpg)</p>
</blockquote>
<p><img src="../images/r0041000.png" alt="image" title="image"></p>
<blockquote>
<p>nxt()</p>
</blockquote>
<p>| Resuming lesson...</p>
<p>| What's this plot showing? We see the x-axis ranges from 0 to 250 and we remember<br>
| that we had 234 data points in our set, so we can infer that each point in the plot<br>
| represents one of the hwy values (indicated by the y-axis). We've created the vector<br>
| myhigh for you which contains the hwy data from the mpg dataset. Look at myhigh now.</p>
<blockquote>
<p>myhigh</p>

<pre><code>  [1] 29 29 31 30 26 26 27 26 25 28 27 25 25 25 25 24 25 23 20 15 20 17 17 26 23 26 25  
 [28] 24 19 14 15 17 27 30 26 29 26 24 24 22 22 24 24 17 22 21 23 23 19 18 17 17 19 19  
 [55] 12 17 15 17 17 12 17 16 18 15 16 12 17 17 16 12 15 16 17 15 17 17 18 17 19 17 19  
 [82] 19 17 17 17 16 16 17 15 17 26 25 26 24 21 22 23 22 20 33 32 32 29 32 34 36 36 29  
[109] 26 27 30 31 26 26 28 26 29 28 27 24 24 24 22 19 20 17 12 19 18 14 15 18 18 15 17  
[136] 16 18 17 19 19 17 29 27 31 32 27 26 26 25 25 17 17 20 18 26 26 27 28 25 25 24 27  
[163] 25 26 23 26 26 26 26 25 27 25 27 20 20 19 17 20 17 29 27 31 31 26 26 28 27 29 31  
[190] 31 26 26 27 30 33 35 37 35 15 18 20 20 22 17 19 18 20 29 26 29 29 24 44 29 26 29  
[217] 29 29 29 23 24 44 41 29 26 28 29 29 29 28 29 26 26 26</code></pre>
<p>| You got it!</p>
</blockquote>
<p>|======================================                                       |  49%<br>
| Comparing the values of myhigh with the plot, we see the first entries in the vector<br>
| (29, 29, 31, 30,...) correspond to the leftmost points in the the plot (in order),<br>
| and the last entries in myhigh (28, 29, 26, 26, 26) correspond to the rightmost<br>
| plotted points. So, specifying the y parameter only, without an x argument, plots<br>
| the values of the y argument in the order in which they occur in the data.</p>
<p>...</p>
<p>|=======================================                                      |  51%<br>
| The all-purpose qplot can also create box and whisker plots.  Call qplot now with 4<br>
| arguments. First specify the variable by which you'll split the data, in this case<br>
| drv, then specify the variable which you want to examine, in this case hwy. The<br>
| third argument is data (set equal to mpg), and the fourth, the geom, set equal to<br>
| the string "boxplot"</p>
<blockquote>
<p>qplot(drv,hwy,data=mpg,geom="boxplot")</p>
</blockquote>
<p><img src="../images/r0041010.png" alt="image" title="image"></p>
<p>| Your dedication is inspiring!</p>
<p>|=========================================                                    |  54%<br>
| We see 3 boxes, one for each drive. Now to impress you, call qplot with 5 arguments.<br>
| The first 4 are just as you used previously, (drv, hwy, data set equal to mpg, and<br>
| geom set equal to the string "boxplot"). Now add a fifth argument, color, equal to<br>
| manufacturer.</p>
<blockquote>
<p>qplot(drv,hwy,data=mpg,geom="boxplot",color=manufacturer)</p>
</blockquote>
<p><img src="../images/r0041020.png" alt="image" title="image"></p>
<p>| You are amazing!</p>
<p>|===========================================                                  |  56%<br>
| It's a little squished but we just wanted to illustrate qplot's capabilities. Notice<br>
| that there are still 3 regions of the plot (determined by the factor drv). Each is<br>
| subdivided into several boxes depicting different manufacturers.</p>
<p>...</p>
<p>|=============================================                                |  59%<br>
| Now, on to histograms. These display frequency counts for a single variable. Let's<br>
| start with an easy one. Call qplot with 3 arguments. First specify the variable for<br>
| which you want the frequency count, in this case hwy, then specify the data (set<br>
| equal to mpg), and finally, the aesthetic, fill, set equal to drv. Instead of a plain<br>
| old histogram, this will again use colors to distinguish the 3 different drive<br>
| factors.</p>
<blockquote>
<p>qplot(hwy,data=mpg,fill=drv)<br><code>stat_bin()</code> using <code>bins = 30</code>. Pick better value with <code>binwidth</code>.</p>
</blockquote>
<p><img src="../images/r0041030.png" alt="image" title="image"></p>
<p>| Your dedication is inspiring!</p>
<p>|===============================================                              |  61%<br>
| See how qplot consistently uses the colors. Red (if 4-wheel drv is in the bin) is at<br>
| the bottom of the bin, then green on top of it (if present), followed by blue (rear<br>
| wheel drv). The color lets us see right away that 4-wheel drive vehicles in this<br>
| dataset don't have gas mileages exceeding 30 miles per gallon.</p>
<p>...</p>
<p>|=================================================                            |  63%<br>
| It's cool that qplot can do this so easily, but some people may find this multi-color<br>
| histogram hard to interpret. Instead of using colors to distinguish between the drive<br>
| factors let's use facets or panels. (That's what lattice called them.) This just<br>
| means we'll split the data into 3 subsets (according to drive) and make 3 smaller<br>
| individual plots of each subset in one plot (and with one call to qplot).</p>
<p>...</p>
<p>|===================================================                          |  66%<br>
| Remember that with base plot we had to do each subplot individually. The lattice<br>
| system made plotting conditioning plots easier. Let's see how easy it is with qplot.</p>
<p>...</p>
<p>|=====================================================                        |  68%<br>
| We'll do two plots, a scatterplot and then a histogram, each with 3 facets. For the<br>
| scatterplot, call qplot with 4 arguments. The first two are displ and hwy and the<br>
| third is the argument data set equal to mpg. The fourth is the argument facets which<br>
| will be set equal to the expression . ~ drv which is ggplot2's shorthand for number<br>
| of rows (to the left of the ~) and number of columns (to the right of the ~). Here<br>
| the . indicates a single row and drv implies 3, since there are 3 distinct drive<br>
| factors. Try this now.</p>
<blockquote>
<p>qplot(displ,hwy,data=mpg,facets=.~drv)</p>
</blockquote>
<p><img src="../images/r0041040.png" alt="image" title="image"></p>
<p>| Nice work!</p>
<p>|======================================================                       |  71%<br>
| The result is a 1 by 3 array of plots. Note how each is labeled at the top with the<br>
| factor label (4,f, or r). This shows us more detailed information than the histogram.<br>
| We see the relationship between displacement and highway mileage for each of the 3<br>
| drive factors.</p>
<p>...</p>
<p>|========================================================                     |  73%<br>
| Now we'll do a histogram, again calling qplot with 4 arguments. This time, since we<br>
| need only one variable for a histogram, the first is hwy and the second is the<br>
| argument data set equal to mpg. The third is the argument facets which we'll set<br>
| equal to the expression drv ~ . . This will give us a different arrangement of the<br>
| facets. The fourth argument is binwidth. Set this equal to 2. Try this now.</p>
<blockquote>
<p>qplot(hwy,data=mpg,facets=drv~.,binwidth=2)</p>
</blockquote>
<p><img src="../images/r0041050.png" alt="image" title="image"></p>
<p>| Keep working like that and you'll get there!</p>
<p>|==========================================================                   |  76%<br>
| The facets argument, drv ~ ., resulted in what arrangement of facets?</p>
<p>1: 2 by 2<br>
2: 1 by 3<br>
3: 3 by 1<br>
4: huh?</p>
<p>Selection: 3</p>
<p>| Nice work!</p>
<p>|============================================================                 |  78%<br>
| Pretty good, right? Not too difficult either. Let's review what we learned!</p>
<p>...</p>
<p>|==============================================================               |  80%<br>
| Which of the following is a basic workhorse function of ggplot2?</p>
<p>1: gplot<br>
2: scatterplot<br>
3: qplot<br>
4: xyplot<br>
5: hist</p>
<p>Selection: 3</p>
<p>| All that practice is paying off!</p>
<p>|================================================================             |  83%<br>
| Which types of plot does qplot plot?</p>
<p>1: scatterplots<br>
2: all of the others<br>
3: histograms<br>
4: box and whisker plots</p>
<p>Selection: 2</p>
<p>| Great job!</p>
<p>|==================================================================           |  85%<br>
| What does the gg in ggplot2 stand for?</p>
<p>1: goto graphics<br>
2: grammar of graphics<br>
3: good grief<br>
4: good graphics</p>
<p>Selection: 2</p>
<p>| Your dedication is inspiring!</p>
<p>|====================================================================         |  88%<br>
| True or False? The geom argument takes a string for a value.</p>
<p>1: False<br>
2: True</p>
<p>Selection: 2</p>
<p>| Nice work!</p>
<p>|=====================================================================        |  90%<br>
| True or False? The data argument takes a string for a value.</p>
<p>1: True<br>
2: False</p>
<p>Selection: 2</p>
<p>| You're the best!</p>
<p>|=======================================================================      |  93%<br>
| True or False? The binwidth argument takes a string for a value.</p>
<p>1: False<br>
2: True</p>
<p>Selection: 1</p>
<p>| Great job!</p>
<p>|=========================================================================    |  95%<br>
| True or False? The user must specify x- and y-axis labels when using qplot.</p>
<p>1: True<br>
2: False</p>
<p>Selection: 2</p>
<p>| All that practice is paying off!</p>
<p>|===========================================================================  |  98%<br>
| Congrats! You've finished plot 1 of ggplot2. In the next lesson the plot thickens.</p>
<p>...</p>
<p>|=============================================================================| 100%<br>
| Would you like to receive credit for completing this course on Coursera.org?</p>
<p>1: Yes<br>
2: No</p>
<p>Selection: 1<br>
What is your email address? xxxxxx@xxxxxxxxxxxx<br>
What is your assignment token? xXxXxxXXxXxxXXXx<br>
Grade submission succeeded!</p>
<p>| That's a job well done!</p>
<p>| You've reached the end of this lesson! Returning to the main menu...</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Exploratory Data Analysis<br>
2: Take me to the swirl course repository!</p>
<p>Selection: 0</p>
<p>| Leaving swirl now. Type swirl() to resume.</p>
<blockquote>
<p>rm(list=ls())</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Last updated 2020-05-08 20:04:09.107833 IST</em></p>

</div>
</div>
</div>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="00425/" class="u-url">Working with Colors</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Krishnakanth Allika
            </span></p>
            <p class="dateline">
            <a href="00425/" rel="bookmark">
            <time class="published dt-published" datetime="2020-05-08T19:00:30+05:30" itemprop="datePublished" title="2020-05-08 19:00">2020-05-08 19:00</time></a>
            </p>
                <p class="commentline">
        
<a href="%7Blink%7D" onclick="this.href='/posts/00425/'; this.target='_self';"><span class="IDCommentsReplace" style="display:none">cache/posts/00425_Working with Colors.html</span>
<script>
var idcomments_acct = '7fae5836cfdd49cac599cac5b95695d1';
var idcomments_post_id = "cache/posts/00425_Working with Colors.html";
var idcomments_post_url = "/posts/00425/";
</script><script src="https://www.intensedebate.com/js/genericLinkWrapperV2.js"></script></a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>R version 4.0.0 (2020-04-24) -- "Arbor Day"<br>
Copyright (C) 2020 The R Foundation for Statistical Computing<br>
Platform: x86_64-w64-mingw32/x64 (64-bit)</p>
<p>R is free software and comes with ABSOLUTELY NO WARRANTY.<br>
You are welcome to redistribute it under certain conditions.<br>
Type 'license()' or 'licence()' for distribution details.</p>
<p>Natural language support but running in an English locale</p>
<p>R is a collaborative project with many contributors.<br>
Type 'contributors()' for more information and<br>
'citation()' on how to cite R or R packages in publications.</p>
<p>Type 'demo()' for some demos, 'help()' for on-line help, or<br>
'help.start()' for an HTML browser interface to help.<br>
Type 'q()' to quit R.</p>
<blockquote>
<p>setwd("C:/Users/kk/Downloads/edu/DataScienceJHU/DataScienceWithR/04_Exploratory_Data_Analysis/workspace")<br>
library(ggplot2)<br>
library(swirl)</p>
</blockquote>
<p>| Hi! Type swirl() when you are ready to begin.</p>
<blockquote>
<p>swirl()</p>
</blockquote>
<p>| Welcome to swirl! Please sign in. If you've been here before, use the same name as<br>
| you did then. If you are new, call yourself something unique.</p>
<p>What shall I call you? Krishnakanth Allika</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Exploratory Data Analysis<br>
2: Take me to the swirl course repository!</p>
<p>Selection: 1</p>
<p>| Please choose a lesson, or type 0 to return to course menu.</p>

<pre><code> 1: Principles of Analytic Graphs   2: Exploratory Graphs             
 3: Graphics Devices in R           4: Plotting Systems               
 5: Base Plotting System            6: Lattice Plotting System        
 7: Working with Colors             8: GGPlot2 Part1                  
 9: GGPlot2 Part2                  10: GGPlot2 Extras                 
11: Hierarchical Clustering        12: K Means Clustering             
13: Dimension Reduction            14: Clustering Example             
15: CaseStudy</code></pre>
<p>Selection: 7</p>
<p>| Attempting to load lesson dependencies...</p>
<p>| Package ‘jpeg’ loaded correctly!</p>
<p>| Package ‘RColorBrewer’ loaded correctly!</p>
<p>| Package ‘datasets’ loaded correctly!</p>
<p>|                                                                             |   0%</p>
<p>| Working_with_Colors. (Slides for this and other Data Science courses may be found at<br>
| github <a href="https://github.com/DataScienceSpecialization/courses/">https://github.com/DataScienceSpecialization/courses/</a>. If you care to use<br>
| them, they must be downloaded as a zip file and viewed locally. This lesson<br>
| corresponds to 04_ExploratoryAnalysis/Colors.)</p>
<p>...</p>
<p>|=                                                                            |   1%<br>
| This lesson is about using colors in R. It really supplements the lessons on<br>
| plotting with the base and lattice packages which contain functions that are able to<br>
| take the argument col. We'll discuss ways to set this argument more colorfully.</p>
<p>...</p>
<p>|==                                                                           |   3%<br>
| Of course, color choice is secondary to your data and how you analyze it, but<br>
| effectively using colors can enhance your plots and presentations, emphasizing the<br>
| important points you're trying to convey.</p>
<p>...</p>
<p>|===                                                                          |   4%<br>
| The motivation for this lesson is that the default color schemes for most plots in R<br>
| are not optimal. Fortunately there have been recent developments to improve the<br>
| handling and specification of colors in plots and graphs. We'll cover some functions<br>
| in R as well as in external packages that are very handy. If you know how to use<br>
| some of these then you'll have more options when you create your displays.</p>
<p>...</p>
<p>|====                                                                         |   6%<br>
| We'll begin with a motivating example - a typical R plot using 3 default colors.</p>
<p><img src="../images/r0040830.png" alt="image" title="image"></p>
<p>...</p>
<p>|======                                                                       |   7%<br>
| According to the plot, what is color 2?</p>
<p>1: Blue<br>
2: Empty black circles<br>
3: Red<br>
4: Green</p>
<p>Selection: 3</p>
<p>| Nice work!</p>
<p>|=======                                                                      |   9%<br>
| So these are the first 3 default values. If you were plotting and just specified<br>
| col=c(1:3) as one of your arguments, these are colors you'd get. Maybe you like<br>
| them, but they might not be the best choice for your application.</p>
<p>...</p>
<p>|========                                                                     |  10%<br>
| To show you some options, here's a display of two color palettes that come with the<br>
| grDevices package available to you. The left shows you some colors from the function<br>
| heat.colors. Here low values are represented in red and as the values increase the<br>
| colors move through yellow towards white. This is consistent with the physical<br>
| properties of fire. The right display is from the function topo.colors which uses<br>
| topographical colors ranging from blue (low values) towards brown (higher values).</p>
<p><img src="../images/r0040840.png" alt="image" title="image"></p>
<p>...</p>
<p>|=========                                                                    |  12%<br>
| So we'll first discuss some functions that the grDevices package offers. The<br>
| function colors() lists the names of 657 predefined colors you can use in any<br>
| plotting function.  These names are returned as strings. Run the R command sample<br>
| with colors() as its first argument and 10 as its second to give you an idea of the<br>
| choices you have.</p>
<blockquote>
<p>sample(colors(),10)<br>
 [1] "gray1"         "darkorchid2"   "blue3"         "darkorchid3"   "gray10"<br>
 [6] "firebrick1"    "magenta3"      "gray75"        "lemonchiffon4" "rosybrown3"</p>
</blockquote>
<p>| Great job!</p>
<p>|==========                                                                   |  13%<br>
| We see a lot of variety in the colors, some of which are names followed by numbers<br>
| indicating that there are multiple forms of that particular color.</p>
<p>...</p>
<p>|===========                                                                  |  14%<br>
| So you're free to use any of these 600+ colors listed by the colors function.<br>
| However, two additional functions from grDevices, colorRamp and colorRampPalette,<br>
| give you more options. Both of these take color names as arguments and use them as<br>
| "palettes", that is, these argument colors are blended in different proportions to<br>
| form new colors.</p>
<p>...</p>
<p>|============                                                                 |  16%<br>
| The first, colorRamp, takes a palette of colors (the arguments) and returns a<br>
| function that takes values between 0 and 1 as arguments. The 0 and 1 correspond to<br>
| the extremes of the color palette. Arguments between 0 and 1 return blends of these<br>
| extremes.</p>
<p>...</p>
<p>|=============                                                                |  17%<br>
| Let's see what this means. Assign to the variable pal the output of a call to<br>
| colorRamp with the single argument, c("red","blue").</p>
<blockquote>
<p>pal&lt;-colorRamp(c("red","blue"))</p>
</blockquote>
<p>| You are amazing!</p>
<p>|===============                                                              |  19%<br>
| We don't see any output, but R has created the function pal which we can call with a<br>
| single argument between 0 and 1. Call pal now with the argument 0.</p>
<blockquote>
<p>pal(0)<br>
     [,1] [,2] [,3]<br>
[1,]  255    0    0</p>
</blockquote>
<p>| You are quite good my friend!</p>
<p>|================                                                             |  20%<br>
| We see a 1 by 3 array with 255 as the first entry and 0 in the other 2. This 3 long<br>
| vector corresponds to red, green, blue (RGB) color encoding commonly used in<br>
| televisions and monitors. In R, 24 bits are used to represent colors. Think of these<br>
| 24 bits as 3 sets of 8 bits, each of which represents an intensity for one of the<br>
| colors red, green, and blue.</p>
<p>...</p>
<p>|=================                                                            |  22%<br>
| The 255 returned from the pal(0) call corresponds to the largest possible number<br>
| represented with 8 bits, so the vector (255,0,0) contains only red (no green or<br>
| blue), and moreover, it's the highest possible value of red.</p>
<p>...</p>
<p>|==================                                                           |  23%<br>
| Given that you created pal with the palette containing "red" and "blue", what color<br>
| do you think will be represented by the vector that pal(1) returns? Recall that pal<br>
| will only take arguments between 0 and 1, so 1 is the largest argument you can pass<br>
| it.</p>
<p>1: blue<br>
2: red<br>
3: green<br>
4: yellow</p>
<p>Selection: 1</p>
<p>| Keep up the great work!</p>
<p>|===================                                                          |  25%<br>
| Check your answer now by calling pal with the argument 1.</p>
<blockquote>
<p>pal(1)<br>
     [,1] [,2] [,3]<br>
[1,]    0    0  255</p>
</blockquote>
<p>| Excellent work!</p>
<p>|====================                                                         |  26%<br>
| You see the vector (0,0,255) which represents the highest intensity of blue. What<br>
| vector do you think the call pal(.5) will return?</p>
<p>1: (0,255,0)<br>
2: (255,255,255)<br>
3: (127.5,0,127.5)<br>
4: (255,0,255)</p>
<p>Selection: 3</p>
<p>| You got it!</p>
<p>|=====================                                                        |  28%<br>
| The function pal can take more than one argument. It returns one 3-long (or 4-long,<br>
| but more about this later) vector for each argument. To see this in action, call pal<br>
| with the argument seq(0,1,len=6).</p>
<blockquote>
<p>pal(seq(0,1,len=6))</p>

<pre><code>     [,1] [,2] [,3]  
[1,]  255    0    0  
[2,]  204    0   51  
[3,]  153    0  102  
[4,]  102    0  153  
[5,]   51    0  204  
[6,]    0    0  255</code></pre>
<p>| Nice work!</p>
</blockquote>
<p>|======================                                                       |  29%<br>
| Six vectors (each of length 3) are returned. The i-th vector is identical to output<br>
| that would be returned by the call pal(i/5) for i=0,...5. We see that the i-th row<br>
| (for i=1,...6) differs from the (i-1)-st row in the following way. Its red entry is<br>
| 51 = 255/5 points lower and its blue entry is 51 points higher.</p>
<p>...</p>
<p>|=======================                                                      |  30%<br>
| So pal creates colors using the palette we specified when we called colorRamp. In<br>
| this example none of pal's outputs will ever contain green since it wasn't in our<br>
| initial palette.</p>
<p>...</p>
<p>|=========================                                                    |  32%<br>
| We'll turn now to colorRampPalette, a function similar to colorRamp. It also takes a<br>
| palette of colors and returns a function. This function, however, takes integer<br>
| arguments (instead of numbers between 0 and 1) and returns a vector of colors each<br>
| of which is a blend of colors of the original palette.</p>
<p>...</p>
<p>|==========================                                                   |  33%<br>
| The argument you pass to the returned function specifies the number of colors you<br>
| want returned. Each element of the returned vector is a 24 bit number, represented<br>
| as 6 hexadecimal characters, which range from 0 to F. This set of 6 hex characters<br>
| represents the intensities of red, green, and blue, 2 characters for each color.</p>
<p>...</p>
<p>|===========================                                                  |  35%<br>
| To see this better, assign to the variable p1 the output of a call to<br>
| colorRampPalette with the single argument, c("red","blue"). We'll compare it to our<br>
| experiments using colorRamp.</p>
<blockquote>
<p>p1&lt;-colorRampPalette(c("red","blue"))</p>
</blockquote>
<p>| You got it!</p>
<p>|============================                                                 |  36%<br>
| Now call p1 with the argument 2.</p>
<blockquote>
<p>p1(2)<br>
[1] "#FF0000" "#0000FF"</p>
</blockquote>
<p>| All that hard work is paying off!</p>
<p>|=============================                                                |  38%<br>
| We see a 2-long vector is returned. The first entry FF0000 represents red. The FF is<br>
| hexadecimal for 255, the same value returned by our call pal(0). The second entry<br>
| 0000FF represents blue, also with intensity 255.</p>
<p>...</p>
<p>|==============================                                               |  39%<br>
| Now call p1 with the argument 6. Let's see if we get the same result as we did when<br>
| we called pal with the argument seq(0,1,len=6).</p>
<blockquote>
<p>p1(6)<br>
[1] "#FF0000" "#CC0033" "#990066" "#650099" "#3200CC" "#0000FF"</p>
</blockquote>
<p>| You are amazing!</p>
<p>|===============================                                              |  41%<br>
| Now we get the 6-long vector (FF0000, CC0033, 990066, 650099, 3200CC, 0000FF). We<br>
| see the two ends (FF0000 and 0000FF) are consistent with the colors red and blue.<br>
| How about CC0033? Type 0xcc or 0xCC at the command line to see the decimal<br>
| equivalent of this hex number. You must include the 0 before the x to specify that<br>
| you're entering a hexadecimal number.</p>
<blockquote>
<p>0xCC<br>
[1] 204</p>
</blockquote>
<p>| You are amazing!</p>
<p>|================================                                             |  42%<br>
| So 0xCC equals 204 and we can easily convert hex 33 to decimal, as in<br>
| 0x33=3*16+3=51. These were exactly the numbers we got in the second row returned<br>
| from our call to pal(seq(0,1,len=6)). We see that 4 of the 6 numbers agree with our<br>
| earlier call to pal. Two of the 6 differ slightly.</p>
<p>...</p>
<p>|=================================                                            |  43%<br>
| We can also form palettes using colors other than red, green and blue. Form a<br>
| palette, p2, by calling colorRampPalette with the colors "red" and "yellow".<br>
| Remember to concatenate them into a single argument.</p>
<blockquote>
<p>p2&lt;-colorRampPalette(c("red","yellow"))</p>
</blockquote>
<p>| You are really on a roll!</p>
<p>|===================================                                          |  45%<br>
| Now call p2 with the argument 2. This will show us the two extremes of the blends of<br>
| colors we'll get.</p>
<blockquote>
<p>p2(2)<br>
[1] "#FF0000" "#FFFF00"</p>
</blockquote>
<p>| Excellent work!</p>
<p>|====================================                                         |  46%<br>
| Not surprisingly the first color we see is FF0000, which we know represents red. The<br>
| second color returned, FFFF00, must represent yellow, a combination of full<br>
| intensity red and full intensity green. This makes sense, since yellow falls between<br>
| red and green on the color wheel as we see here. (We borrowed this image from<br>
| lucaskrech.com.)</p>
<p><img src="../images/r0040850.png" alt="image" title="image"></p>
<p>...</p>
<p>|=====================================                                        |  48%<br>
| Let's now call p2 with the argument 10. This will show us how the two extremes, red<br>
| and yellow, are blended together.</p>
<blockquote>
<p>p2(10)<br>
 [1] "#FF0000" "#FF1C00" "#FF3800" "#FF5500" "#FF7100" "#FF8D00" "#FFAA00" "#FFC600"<br>
 [9] "#FFE200" "#FFFF00"</p>
</blockquote>
<p>| Your dedication is inspiring!</p>
<p>|======================================                                       |  49%<br>
| So we see the 10-long vector. For each element, the red component is fixed at FF,<br>
| and the green component grows from 00 (at the first element) to FF (at the last).</p>
<p>...</p>
<p>|=======================================                                      |  51%<br>
| This is all fine and dandy but you're probably wondering when you can see how all<br>
| these colors show up in a display. We copied some code from the R documentation<br>
| pages (color.scale if you're interested) and created a function for you, showMe.<br>
| This takes as an argument, a color vector, which as you know, is precisely what<br>
| calls to p1 and p2 return to you. Call showMe now with p1(20).</p>
<blockquote>
<p>showMe(p1(20))</p>
</blockquote>
<p><img src="../images/r0040860.png" alt="image" title="image"></p>
<p>| That's the answer I was looking for.</p>
<p>|========================================                                     |  52%<br>
| We see the interpolated palette here. Low values in the lower left corner are red<br>
| and as you move to the upper right, the colors move toward blue. Now call showMe<br>
| with p2(20) as its argument.</p>
<blockquote>
<p>showMe(p2(20))</p>
</blockquote>
<p><img src="../images/r0040870.png" alt="image" title="image"></p>
<p>| You're the best!</p>
<p>|=========================================                                    |  54%<br>
| Here we see a similar display, the colors moving from red to yellow, the base colors<br>
| of our p2 palette. For fun, see what p2(2) looks like using showMe.</p>
<blockquote>
<p>showMe(p2(2))</p>
</blockquote>
<p><img src="../images/r0040880.png" alt="image" title="image"></p>
<p>| You are really on a roll!</p>
<p>|==========================================                                   |  55%<br>
| A much more basic pattern, simple but elegant.</p>
<p>...</p>
<p>|============================================                                 |  57%<br>
| We mentioned before that colorRamp (and colorRampPalette) could return a 3 or 4 long<br>
| vector of colors. We saw 3-long vectors returned indicating red, green, and blue<br>
| intensities. What would the 4th entry be?</p>
<p>...</p>
<p>|=============================================                                |  58%<br>
| We'll answer this indirectly. First, look at the function p1 that colorRampPalette<br>
| returned to you. Just type p1 at the command prompt.</p>
<blockquote>
<p>p1<br>
function (n)<br>
{<br>
    x &lt;- ramp(seq.int(0, 1, length.out = n))<br>
    if (ncol(x) == 4L)<br>
        rgb(x[, 1L], x[, 2L], x[, 3L], x[, 4L], maxColorValue = 255)<br>
    else rgb(x[, 1L], x[, 2L], x[, 3L], maxColorValue = 255)<br>
}</p>
<p>&lt;bytecode: 0x00000174e0c71940&gt;</p>
<p>&lt;environment: 0x00000174dbdd5a00&gt;</p>
</blockquote>
<p>| Keep up the great work!</p>
<p>|==============================================                               |  59%<br>
| We see that p1 is a short function with one argument, n. The argument n is used as<br>
| the length in a call to the function seq.int, itself an argument to the function<br>
| ramp. We can infer that ramp is just going to divide the interval from 0 to 1 into n<br>
| pieces.</p>
<p>...</p>
<p>|===============================================                              |  61%<br>
| The heart of p1 is really the call to the function rgb with either 4 or 5 arguments.<br>
| Use the ?fun construct to look at the R documentation for rgb now.</p>
<blockquote>
<p>?rgb</p>
</blockquote>
<p>| You got it!</p>
<p>|================================================                             |  62%<br>
| We see that rgb is a color specification function that can be used to produce any<br>
| color with red, green, blue proportions. We see the maxColorValue is 1 by default,<br>
| so if we called rgb with values for red, green and blue, we would specify numbers at<br>
| most 1 (assuming we didn't change the default for maxColorValue). According to the<br>
| documentation, what is the maximum number of arguments rgb can have?</p>
<p>1: 6<br>
2: 4<br>
3: 5<br>
4: 3</p>
<p>Selection: 1</p>
<p>| All that practice is paying off!</p>
<p>|=================================================                            |  64%<br>
| So the fourth argument is alpha which can be a logical, i.e., either TRUE or FALSE,<br>
| or a numerical value. Create the function p3 now by calling colorRampPalette with<br>
| the colors blue and green (remember to concatenate them into a single argument) and<br>
| setting the alpha argument to .5.</p>
<blockquote>
<p>p3&lt;-colorRampPalette(c("blue","green"),alpha=0.5)</p>
</blockquote>
<p>| You are really on a roll!</p>
<p>|==================================================                           |  65%<br>
| Now call p3 with the argument 5.</p>
<blockquote>
<p>p3(5)<br>
[1] "#0000FFFF" "#003FBFFF" "#007F7FFF" "#00BF3FFF" "#00FF00FF"</p>
</blockquote>
<p>| Perseverance, that's the answer.</p>
<p>|===================================================                          |  67%<br>
| We see that in the 5-long vector that the call returned, each element has 32 bits, 4<br>
| groups of 8 bits each. The last 8 bits represent the value of alpha. Since it was<br>
| NOT ZERO in the call to colorRampPalette, it gets the maximum FF value. (The same<br>
| result would happen if alpha had been set to TRUE.) When it was 0 or FALSE (as in<br>
| previous calls to colorRampPalette) it was given the value 00 and wasn't shown. The<br>
| leftmost 24 bits of each element are the same RGB encoding we previously saw.</p>
<p>...</p>
<p>|====================================================                         |  68%<br>
| So what is alpha? Alpha represents an opacity level, that is, how transparent should<br>
| the colors be. We can add color transparency with the alpha parameter to calls to<br>
| rgb. We haven't seen any examples of this yet, but we will now.</p>
<p>...</p>
<p>|======================================================                       |  70%<br>
| We generated 1000 random normal pairs for you in the variables x and y. We'll plot<br>
| them in a scatterplot by calling plot with 4 arguments. The variables x and y are<br>
| the first 2. The third is the print character argument pch. Set this equal to 19<br>
| (filled circles). The final argument is col which should be set equal to a call to<br>
| rgb. Give rgb 3 arguments, 0, .5, and .5.</p>
<blockquote>
<p>plot(x,y,pch=19,col=rgb(0,0.5,0.5))</p>
</blockquote>
<p><img src="../images/r0040890.png" alt="image" title="image"></p>
<p>| Your dedication is inspiring!</p>
<p>|=======================================================                      |  71%<br>
| Well this picture is okay for a scatterplot, a nice mix of blue and green, but it<br>
| really doesn't tell us too much information in the center portion, since the points<br>
| are so thick there. We see there are a lot of points, but is one area more filled<br>
| than another? We can't really discriminate between different point densities. This<br>
| is where the alpha argument can help us. Recall your plot command (use the up arrow)<br>
| and add a 4th argument, .3, to the call to rgb. This will be our value for alpha.</p>
<blockquote>
<p>plot(x,y,pch=19,col=rgb(0,0.5,0.5,0.3))</p>
</blockquote>
<p><img src="../images/r0040900.png" alt="image" title="image"></p>
<p>| You are amazing!</p>
<p>|========================================================                     |  72%<br>
| Clearly this is better. It shows us where, specifically, the densest areas of the<br>
| scatterplot really are.</p>
<p>...</p>
<p>|=========================================================                    |  74%<br>
| Our last topic for this lesson is the RColorBrewer Package, available on CRAN, that<br>
| contains interesting and useful color palettes, of which there are 3 types,<br>
| sequential, divergent, and qualitative. Which one you would choose to use depends on<br>
| your data.</p>
<p>...</p>
<p>|==========================================================                   |  75%<br>
| Here's a picture of the palettes available from this package. The top section shows<br>
| the sequential palettes in which the colors are ordered from light to dark. The<br>
| divergent palettes are at the bottom. Here the neutral color (white) is in the<br>
| center, and as you move from the middle to the two ends of each palette, the colors<br>
| increase in intensity. The middle display shows the qualitative palettes which look<br>
| like collections of random colors. These might be used to distinguish factors in<br>
| your data.</p>
<p><img src="../images/r0040910.png" alt="image" title="image"></p>
<p>...</p>
<p>|===========================================================                  |  77%<br>
| These colorBrewer palettes can be used in conjunction with the colorRamp() and<br>
| colorRampPalette() functions. You would use colors from a colorBrewer palette as<br>
| your base palette,i.e., as arguments to colorRamp or colorRampPalette which would<br>
| interpolate them to create new colors.</p>
<p>...</p>
<p>|============================================================                 |  78%<br>
| As an example of this, create a new object, cols by calling the function brewer.pal<br>
| with 2 arguments, 3 and "BuGn". The string "BuGn" is the second last palette in the<br>
| sequential display. The 3 tells the function how many different colors we want.</p>
<blockquote>
<p>cols&lt;-brewer.pal(3,"BuGn")</p>
</blockquote>
<p>| That's the answer I was looking for.</p>
<p>|=============================================================                |  80%<br>
| Use showMe to look at cols now.</p>
<blockquote>
<p>showMe(cols)</p>
</blockquote>
<p><img src="../images/r0040920.png" alt="image" title="image"></p>
<p>| Keep up the great work!</p>
<p>|==============================================================               |  81%<br>
| We see 3 colors, mixes of blue and green. Now create the variable pal by calling<br>
| colorRampPalette with cols as its argument.</p>
<blockquote>
<p>pal&lt;-colorRampPalette(cols)</p>
</blockquote>
<p>| All that hard work is paying off!</p>
<p>|================================================================             |  83%<br>
| The call showMe(pal(3)) would be identical to the showMe(cols) call. So use showMe<br>
| to look at pal(20).</p>
<blockquote>
<p>showMe(pal(20))</p>
</blockquote>
<p><img src="../images/r0040930.png" alt="image" title="image"></p>
<p>| Keep up the great work!</p>
<p>|=================================================================            |  84%<br>
| Now we can use the colors in pal(20) to display topographic information on<br>
| Auckland's Maunga Whau Volcano. R provides this information in a matrix called<br>
| volcano which is included in the package datasets.  Call the R function image with<br>
| volcano as its first argument and col set equal to pal(20) as its second.</p>
<blockquote>
<p>image(volcano,col=pal(20))</p>
</blockquote>
<p><img src="../images/r0040940.png" alt="image" title="image"></p>
<p>| Great job!</p>
<p>|==================================================================           |  86%<br>
| We see that the colors here of the sequential palette clue us in on the topography.<br>
| The darker colors are more concentrated than the lighter ones. Just for fun, recall<br>
| your last command calling image and instead of pal(20), use p1(20) as the second<br>
| argument.</p>
<blockquote>
<p>image(volcano,col=p1(20))</p>
</blockquote>
<p><img src="../images/r0040950.png" alt="image" title="image"></p>
<p>| Your dedication is inspiring!</p>
<p>|===================================================================          |  87%<br>
| Not as nice a picture since the palette isn't as well suited to this data, but<br>
| that's okay. It's review time!!!!</p>
<p>...</p>
<p>|====================================================================         |  88%<br>
| True or False? Careful use of colors in plots/maps/etc. can make it easier for the<br>
| reader to understand what points you're trying to convey.</p>
<p>1: False<br>
2: True</p>
<p>Selection: 2</p>
<p>| You got it!</p>
<p>|=====================================================================        |  90%<br>
| Which of the following is an R package that provides color palettes for sequential,<br>
| categorical, and diverging data?</p>
<p>1: RColorBluer<br>
2: RColorBrewer<br>
3: RColorStewer<br>
4: RColorVintner</p>
<p>Selection: 2</p>
<p>| Keep working like that and you'll get there!</p>
<p>|======================================================================       |  91%<br>
| True or False? The colorRamp and colorRampPalette functions can be used in<br>
| conjunction with color palettes to connect data to colors.</p>
<p>1: False<br>
2: True</p>
<p>Selection: 2</p>
<p>| You are really on a roll!</p>
<p>|=======================================================================      |  93%<br>
| True or False?  Transparency can NEVER be used to clarify plots with many points</p>
<p>1: True<br>
2: False</p>
<p>Selection: 2</p>
<p>| Excellent work!</p>
<p>|=========================================================================    |  94%<br>
| True or False?  The call p7 &lt;- colorRamp("red","blue") would work (i.e., not<br>
| generate an error).</p>
<p>1: True<br>
2: False</p>
<p>Selection: 2</p>
<p>| Excellent job!</p>
<p>|==========================================================================   |  96%<br>
| True or False?  The function colors returns only 10 colors.</p>
<p>1: False<br>
2: True</p>
<p>Selection: 1</p>
<p>| All that practice is paying off!</p>
<p>|===========================================================================  |  97%<br>
| Transparency is determined by which parameter of the rgb function?</p>
<p>1: beta<br>
2: gamma<br>
3: it's all Greek to me<br>
4: delta<br>
5: alpha</p>
<p>Selection: 5</p>
<p>| You got it right!</p>
<p>|============================================================================ |  99%<br>
| Congratulations! We hope this lesson didn't make you see red. We're green with envy<br>
| that you blue through it.</p>
<p>...</p>
<p>|=============================================================================| 100%<br>
| Would you like to receive credit for completing this course on Coursera.org?</p>
<p>1: Yes<br>
2: No</p>
<p>Selection: 1<br>
What is your email address? xxxxxx@xxxxxxxxxxxx<br>
What is your assignment token? xXxXxxXXxXxxXXXx<br>
Grade submission succeeded!</p>
<p>| Your dedication is inspiring!</p>
<p>| You've reached the end of this lesson! Returning to the main menu...</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Exploratory Data Analysis<br>
2: Take me to the swirl course repository!</p>
<p>Selection: 0</p>
<p>| Leaving swirl now. Type swirl() to resume.</p>
<blockquote>
<p>rm(list=ls())</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Last updated 2020-05-08 19:05:14.923558 IST</em></p>

</div>
</div>
</div>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="00424/" class="u-url">Lattice Plotting System</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Krishnakanth Allika
            </span></p>
            <p class="dateline">
            <a href="00424/" rel="bookmark">
            <time class="published dt-published" datetime="2020-05-08T12:18:03+05:30" itemprop="datePublished" title="2020-05-08 12:18">2020-05-08 12:18</time></a>
            </p>
                <p class="commentline">
        
<a href="%7Blink%7D" onclick="this.href='/posts/00424/'; this.target='_self';"><span class="IDCommentsReplace" style="display:none">cache/posts/00424_Lattice Plotting System.html</span>
<script>
var idcomments_acct = '7fae5836cfdd49cac599cac5b95695d1';
var idcomments_post_id = "cache/posts/00424_Lattice Plotting System.html";
var idcomments_post_url = "/posts/00424/";
</script><script src="https://www.intensedebate.com/js/genericLinkWrapperV2.js"></script></a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>R version 4.0.0 (2020-04-24) -- "Arbor Day"<br>
Copyright (C) 2020 The R Foundation for Statistical Computing<br>
Platform: x86_64-w64-mingw32/x64 (64-bit)</p>
<p>R is free software and comes with ABSOLUTELY NO WARRANTY.<br>
You are welcome to redistribute it under certain conditions.<br>
Type 'license()' or 'licence()' for distribution details.</p>
<p>Natural language support but running in an English locale</p>
<p>R is a collaborative project with many contributors.<br>
Type 'contributors()' for more information and<br>
'citation()' on how to cite R or R packages in publications.</p>
<p>Type 'demo()' for some demos, 'help()' for on-line help, or<br>
'help.start()' for an HTML browser interface to help.<br>
Type 'q()' to quit R.</p>
<blockquote>
<p>setwd("C:/Users/kk/Downloads/edu/DataScienceJHU/DataScienceWithR/04_Exploratory_Data_Analysis/workspace")<br>
library(ggplot2)<br>
library(lattice)<br>
library(swirl)</p>
</blockquote>
<p>| Hi! Type swirl() when you are ready to begin.</p>
<blockquote>
<p>swirl()</p>
</blockquote>
<p>| Welcome to swirl! Please sign in. If you've been here before, use the same name as<br>
| you did then. If you are new, call yourself something unique.</p>
<p>What shall I call you? Krishnakanth Allika</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Exploratory Data Analysis<br>
2: Take me to the swirl course repository!</p>
<p>Selection: 1</p>
<p>| Please choose a lesson, or type 0 to return to course menu.</p>
<p>1: Principles of Analytic Graphs   2: Exploratory Graphs<br>
 3: Graphics Devices in R           4: Plotting Systems<br>
 5: Base Plotting System            6: Lattice Plotting System<br>
 7: Working with Colors             8: GGPlot2 Part1<br>
 9: GGPlot2 Part2                  10: GGPlot2 Extras<br>
11: Hierarchical Clustering        12: K Means Clustering<br>
13: Dimension Reduction            14: Clustering Example<br>
15: CaseStudy</p>
<p>Selection: 6</p>
<p>| Attempting to load lesson dependencies...</p>
<p>| Package ‘lattice’ loaded correctly!</p>
<p>| Package ‘ggplot2’ loaded correctly!</p>
<p>|                                                                             |   0%</p>
<p>| Lattice_Plotting_System. (Slides for this and other Data Science courses may be<br>
| found at github <a href="https://github.com/DataScienceSpecialization/courses/">https://github.com/DataScienceSpecialization/courses/</a>. If you care<br>
| to use them, they must be downloaded as a zip file and viewed locally. This lesson<br>
| corresponds to 04_ExploratoryAnalysis/PlottingLattice.)</p>
<p>...</p>
<p>|=                                                                            |   1%<br>
| In another lesson, we gave you an overview of the three plotting systems in R. In<br>
| this lesson we'll focus on the lattice plotting system.  As we did with the base<br>
| plotting system, we'll focus on using lattice to create graphics on the screen<br>
| device rather than another graphics device.</p>
<p>...</p>
<p>|==                                                                           |   3%<br>
| The lattice plotting system is completely separate and independent of the base<br>
| plotting system. It's an add-on package so it has to be explicitly loaded with a<br>
| call to the R function library. We've done this for you. The R Documentation tells<br>
| us that lattice "is an implementation of Trellis graphics for R. It is a powerful<br>
| and elegant high-level data visualization system with an emphasis on multivariate<br>
| data."</p>
<p>...</p>
<p>|===                                                                          |   4%<br>
| Lattice is implemented using two packages. The first is called, not surprisingly,<br>
| lattice, and it contains code for producing Trellis graphics. Some of the functions<br>
| in this package are the higher level functions which you, the user, would call.<br>
| These include xyplot, bwplot, and levelplot.</p>
<p>...</p>
<p>|=====                                                                        |   6%<br>
| If xyplot produces a scatterplot, what kind of plot does bwplot produce?</p>
<p>1: box and whisker<br>
2: big and whittle<br>
3: bad and wonderful<br>
4: black and white</p>
<p>Selection: 1</p>
<p>| That's a job well done!</p>
<p>|======                                                                       |   7%<br>
| The second package in the lattice system is grid which contains the low-level<br>
| functions upon which the lattice package is built. You, the user, seldom call<br>
| functions from the grid package directly.</p>
<p>...</p>
<p>|=======                                                                      |   9%<br>
| Unlike base plotting, the lattice system does not have a "two-phase" aspect with<br>
| separate plotting and annotation. Instead all plotting and annotation is done at<br>
| once with a single function call.</p>
<p>...</p>
<p>|========                                                                     |  10%<br>
| The lattice system, as the base does, provides several different plotting functions.<br>
| These include xyplot for creating scatterplots, bwplot for box-and-whiskers plots or<br>
| boxplots, and histogram for histograms. There are several others (stripplot,<br>
| dotplot, splom and levelplot), which we won't cover here.</p>
<p>...</p>
<p>|=========                                                                    |  12%<br>
| Lattice functions generally take a formula for their first argument, usually of the<br>
| form y ~ x. This indicates that y depends on x, so in a scatterplot y would be<br>
| plotted on the y-axis and x on the x-axis.</p>
<p>...</p>
<p>|==========                                                                   |  13%<br>
| Here's an example of typical lattice plot call, xyplot(y ~ x | f <em> g, data). The f<br>
| and g represent the optional conditioning variables. The </em> represents interaction<br>
| between them. Remember when we said that lattice is good for plotting multivariate<br>
| data? That's where these conditioning variables come into play.</p>
<p>...</p>
<p>|===========                                                                  |  15%<br>
| The second argument is the data frame or list from which the variables in the<br>
| formula should be looked up.  If no data frame or list is passed, then the parent<br>
| frame is used. If no other arguments are passed, the default values are used.</p>
<p>...</p>
<p>|=============                                                                |  16%<br>
| Recall the airquality data we've used before. We've loaded it again for you. To<br>
| remind yourself what it looks like run the R command head with airquality as an<br>
| argument to see what the data looks like.</p>
<blockquote>
<p>head(airquality)</p>

<pre><code>  Ozone Solar.R Wind Temp Month Day  
1    41     190  7.4   67     5   1  
2    36     118  8.0   72     5   2  
3    12     149 12.6   74     5   3  
4    18     313 11.5   62     5   4  
5    NA      NA 14.3   56     5   5  
6    28      NA 14.9   66     5   6</code></pre>
<p>| You got it right!</p>
</blockquote>
<p>|==============                                                               |  18%<br>
| Now try running xyplot with the formula Ozone~Wind as the first argument and the<br>
| second argument data set equal to airquality.</p>
<blockquote>
<p>xyplot(Ozone~Wind,data=airquality)</p>
</blockquote>
<p><img src="../images/r0040730.png" alt="graph" title="graph"></p>
<p>| That's a job well done!</p>
<p>|===============                                                              |  19%<br>
| Look vaguely familiar? The dots are blue, instead of black, but lattice labeled the<br>
| axes for you. You can use some of the same graphical parameters (e.g., pch and col)<br>
| that you used in the base package in calls to lattice functions.</p>
<p>...</p>
<p>|================                                                             |  21%<br>
| Now rerun xyplot with the formula Ozone~Wind as the first argument and the second<br>
| argument data set equal to airquality (use the up arrow to save typing). This time<br>
| add the arguments col set equal to "red", pch set equal to 8, and main set equal to<br>
| "Big Apple Data".</p>
<blockquote>
<p>xyplot(Ozone ~ Wind, data = airquality, pch=8, col="red", main="Big Apple Data")</p>
</blockquote>
<p><img src="../images/r0040740.png" alt="graph" title="graph"></p>
<p>| You are really on a roll!</p>
<p>|=================                                                            |  22%<br>
| Red snowflakes are cool, right? Now that you’ve seen the basic xyplot() and some of<br>
| its arguments, you might want to experiment more by yourself when you're done with<br>
| the lesson to discover what other arguments and colors are available. (If you can't<br>
| wait to experiment, recall that swirl has play() and nxt() functions. At a command<br>
| prompt, typing play() allows you to leave swirl temporarily so you can try different<br>
| R commands at the console. Typing nxt() when you’re done playing brings you back to<br>
| swirl and you can resume your lesson.)</p>
<p>...</p>
<p>|==================                                                           |  24%<br>
| Now you'll see how easy it is to generate a multipanel plot using a single lattice<br>
| command.</p>
<p>...</p>
<p>|====================                                                         |  25%<br>
| Run xyplot with the formula Ozone~Wind | as.factor(Month) as the first argument and<br>
| the second argument data set equal to airquality (use the up arrow to save typing).<br>
| So far, not much is different, right? Add a third argument, layout, set equal to<br>
| c(5,1).</p>
<blockquote>
<p>xyplot(Ozone~Wind|as.factor(Month),data=airquality,layout=c(5,1))</p>
</blockquote>
<p><img src="../images/r0040750.png" alt="graph" title="graph"></p>
<p>| Great job!</p>
<p>|=====================                                                        |  27%<br>
| Note that the default color and plotting character are back. What did the<br>
| as.factor(Month) do?</p>
<p>1: Randomly divided the data into 5 panels<br>
2: Huh?<br>
3: Displayed and labeled each subplot with the month's integer<br>
4: Displayed the data by individual months</p>
<p>Selection: 3</p>
<p>| Perseverance, that's the answer.</p>
<p>|======================                                                       |  28%<br>
| Since Month is a named column of the airquality dataframe we had to tell R to treat<br>
| it as a factor. To see how this affects the plot, rerun the xyplot command you just<br>
| ran, but use Ozone ~ Wind | Month instead of Ozone ~ Wind | as.factor(Month) as the<br>
| first argument.</p>
<blockquote>
<p>xyplot(Ozone~Wind|Month,data=airquality,layout=c(5,1))</p>
</blockquote>
<p><img src="../images/r0040760.png" alt="graph" title="graph"></p>
<p>| Keep working like that and you'll get there!</p>
<p>|=======================                                                      |  30%<br>
| Not as informative, right? The word Month in each panel really doesn't tell you much<br>
| if it doesn't identify which month it's plotting. Notice that the actual data is the<br>
| same between the two plots, though.</p>
<p>...</p>
<p>|========================                                                     |  31%<br>
| Lattice functions behave differently from base graphics functions in one critical<br>
| way. Recall that base graphics functions plot data directly to the graphics device<br>
| (e.g., screen, or file such as a PDF file). In contrast, lattice graphics functions<br>
| return an object of class trellis.</p>
<p>...</p>
<p>|=========================                                                    |  33%<br>
| The print methods for lattice functions actually do the work of plotting the data on<br>
| the graphics device. They return "plot objects" that can be stored (but it’s usually<br>
| better to just save the code and data). On the command line, trellis objects are<br>
| auto-printed so that it appears the function is plotting the data.</p>
<p>...</p>
<p>|==========================                                                   |  34%<br>
| To see this, create a variable p which is assigned the output of this simple call to<br>
| xyplot, xyplot(Ozone~Wind,data=airquality).</p>
<blockquote>
<p>p&lt;-xyplot(Ozone~Wind,data=airquality)</p>
</blockquote>
<p>| You are amazing!</p>
<p>|============================                                                 |  36%<br>
| Nothing plotted, right? But the object p is around.</p>
<p>...</p>
<p>|=============================                                                |  37%<br>
| Type p or print(p) now to see it.</p>
<blockquote>
<p>p</p>
</blockquote>
<p><img src="../images/r0040770.png" alt="graph" title="graph"></p>
<p>| Excellent job!</p>
<p>|==============================                                               |  39%<br>
| Like magic, it appears. Now run the R command names with p as its argument.</p>
<blockquote>
<p>names(p)<br>
 [1] "formula"           "as.table"          "aspect.fill"       "legend"<br>
 [5] "panel"             "page"              "layout"            "skip"<br>
 [9] "strip"             "strip.left"        "xscale.components" "yscale.components"<br>
[13] "axis"              "xlab"              "ylab"              "xlab.default"<br>
[17] "ylab.default"      "xlab.top"          "ylab.right"        "main"<br>
[21] "sub"               "x.between"         "y.between"         "par.settings"<br>
[25] "plot.args"         "lattice.options"   "par.strip.text"    "index.cond"<br>
[29] "perm.cond"         "condlevels"        "call"              "x.scales"<br>
[33] "y.scales"          "panel.args.common" "panel.args"        "packet.sizes"<br>
[37] "x.limits"          "y.limits"          "x.used.at"         "y.used.at"<br>
[41] "x.num.limit"       "y.num.limit"       "aspect.ratio"      "prepanel.default"<br>
[45] "prepanel"</p>
</blockquote>
<p>| All that practice is paying off!</p>
<p>|===============================                                              |  40%<br>
| We see that the trellis object p has 45 named properties, the first of which is<br>
| "formula" which isn't too surprising. A lot of these properties are probably NULL in<br>
| value. We've done some behind-the-scenes work for you and created two vectors. The<br>
| first, mynames, is a character vector of the names in p. The second is a boolean<br>
| vector, myfull, which has TRUE values for nonnull entries of p. Run mynames[myfull]<br>
| to see which entries of p are not NULL.</p>
<blockquote>
<p>mynames[myfull]<br>
 [1] "formula"           "as.table"          "aspect.fill"       "panel"<br>
 [5] "skip"              "strip"             "strip.left"        "xscale.components"<br>
 [9] "yscale.components" "axis"              "xlab"              "ylab"<br>
[13] "xlab.default"      "ylab.default"      "x.between"         "y.between"<br>
[17] "index.cond"        "perm.cond"         "condlevels"        "call"<br>
[21] "x.scales"          "y.scales"          "panel.args.common" "panel.args"<br>
[25] "packet.sizes"      "x.limits"          "y.limits"          "aspect.ratio"<br>
[29] "prepanel.default"</p>
</blockquote>
<p>| That's the answer I was looking for.</p>
<p>|================================                                             |  42%<br>
| Wow! 29 nonNull values for one little plot. Note that a lot of them are like the<br>
| ones we saw in the base plotting system. Let's look at the values of some of them.<br>
| Type p[["formula"]] now.</p>
<blockquote>
<p>p[["formula"]]<br>
Ozone ~ Wind</p>
</blockquote>
<p>| You are amazing!</p>
<p>|=================================                                            |  43%<br>
| Not surprising, is it? It's a familiar formula. Now look at p's x.limits. Remember<br>
| the double square brackets and quotes.</p>
<blockquote>
<p>p[["x.limits"]]<br>
[1]  0.37 22.03</p>
</blockquote>
<p>| Keep up the great work!</p>
<p>|==================================                                           |  45%<br>
| They match the plot, right? The x values are indeed between .37 and 22.03.</p>
<p>...</p>
<p>|====================================                                         |  46%<br>
| Again, not surprising. Before we wrap up, let's talk about lattice's panel functions<br>
| which control what happens inside each panel of the plot. The ease of making<br>
| multi-panel plots makes lattice very appealing. The lattice package comes with<br>
| default panel functions, but you can customize what happens in each panel.</p>
<p>...</p>
<p>|=====================================                                        |  48%<br>
| Panel functions receive the x and y coordinates of the data points in their panel<br>
| (along with any optional arguments). To see this, we've created some data for you -<br>
| two 100-long vectors, x and y. For its first 50 values y is a function of x, for the<br>
| last 50 values, y is random. We've also defined a 100-long factor vector f which<br>
| distinguishes between the first and last 50 elements of the two vectors. Run the R<br>
| command table with f as it argument.</p>
<blockquote>
<p>table(f)</p>

<pre><code>f  
Group 1 Group 2   
     50      50</code></pre>
<p>| That's a job well done!</p>
</blockquote>
<p>|======================================                                       |  49%<br>
| The first 50 entries of f are "Group 1" and the last 50 are "Group 2". Run xyplot<br>
| with two arguments. The first is the formula y~x|f, and the second is layout set<br>
| equal to c(2,1). Note that we're not providing an explicit data argument, so xyplot<br>
| will look in the environment and see the x and y that we've generated for you.</p>
<blockquote>
<p>xyplot(y~x|f,layout=c(2,1))</p>
</blockquote>
<p><img src="../images/r0040780.png" alt="graph" title="graph"></p>
<p>| You nailed it! Good job!</p>
<p>|=======================================                                      |  51%<br>
| To understand this a little better look at the variable v1 we've created for you.</p>
<blockquote>
<p>v1<br>
[1] -2.185287  1.101780 -2.716851  1.569850</p>
</blockquote>
<p>| You're the best!</p>
<p>|========================================                                     |  52%<br>
| The first two numbers are the range of the x values of Group 1 and the last two<br>
| numbers are the range of y values of Group 1. See how they match the values of the<br>
| left panel (Group 1) in the plot. Now look at v2 which holds the comparable numbers<br>
| for Group 2.</p>
<blockquote>
<p>v2<br>
[1] -1.6066772  2.2205197 -0.1605085  2.0341048</p>
</blockquote>
<p>| You nailed it! Good job!</p>
<p>|=========================================                                    |  54%<br>
| Again, the values match the plot. That's reassuring. We've copied some code from the<br>
| slides for you. To see it, type myedit("plot1.R"). This will open your editor and<br>
| display the R code in it.</p>
<blockquote>
<p>myedit("plot1.R")</p>
</blockquote>

<pre><code>p &lt;- xyplot(y ~ x | f, panel = function(x, y, ...) {  
  panel.xyplot(x, y, ...)  ## First call the default panel function for 'xyplot'  
  panel.abline(h = median(y), lty = 2)  ## Add a horizontal line at the median  
})  
print(p)  
invisible()</code></pre>
<p>| You are quite good my friend!</p>
<p>|===========================================                                  |  55%<br>
| How many calls to basic lattice plotting functions are there in plot1.R?</p>
<p>1: 1<br>
2: 2<br>
3: 3</p>
<p>Selection: 1</p>
<p>| You got it!</p>
<p>|============================================                                 |  57%<br>
| Note the panel function. How many formal arguments does it have?</p>
<p>1: 2<br>
2: 3<br>
3: 1</p>
<p>Selection: 1</p>
<p>| One more time. You can do it!</p>
<p>| You have to count the ... as an argument?</p>
<p>1: 1<br>
2: 3<br>
3: 2</p>
<p>Selection: 2</p>
<p>| Excellent job!</p>
<p>|=============================================                                |  58%<br>
| The panel function has 3 arguments, x, y and ... . This last stands for all other<br>
| arguments (such as graphical parameters) you might want to include. There are 2<br>
| lines in the panel function. Each invokes a panel method, the first to plot the data<br>
| in each panel (panel.xyplot), the second to draw a horizontal line in each panel<br>
| (panel.abline). Note the similarity of this last call to that of the base plotting<br>
| function of the same name.</p>
<p>...</p>
<p>|==============================================                               |  60%<br>
| We've defined a function for you, pathtofile, which takes a filename as its<br>
| argument. This makes sure R can find the file on your computer. Now run the R<br>
| command source with two arguments. The first is the call to pathtofile with the<br>
| string "plot1.R" as its argument and the second is the argument local set equal to<br>
| TRUE. This command will run the code contained in plot1.R within the swirl<br>
| environment so you can see what it does.</p>
<blockquote>
<p>source(pathtofile("plot1.R"),local=TRUE)</p>
</blockquote>
<p><img src="../images/r0040790.png" alt="graph" title="graph"></p>
<p>| That's the answer I was looking for.</p>
<p>|===============================================                              |  61%<br>
| See how the lines appear. The plot shows two panels because...?</p>
<p>1: there are 2 calls to panel methods<br>
2: f contains 2 factors<br>
3: there are 2 variables<br>
4: lattice can handle at most 2 panels</p>
<p>Selection: 2</p>
<p>| All that hard work is paying off!</p>
<p>|================================================                             |  63%<br>
| We've copied another piece of similar code, i.e., a call to xyplot with a custom<br>
| panel function, from the slides. To see it, type myedit("plot2.R"). This will open<br>
| your editor and display the R code in it.</p>
<blockquote>
<p>myedit("plot2.R")</p>
</blockquote>

<pre><code>p2 &lt;- xyplot(y ~ x | f, panel = function(x, y, ...) {  
  panel.xyplot(x, y, ...)  ## First call default panel function  
  panel.lmline(x, y, col = 2)  ## Overlay a simple linear regression line  
})  
print(p2)  
invisible()</code></pre>
<p>| You nailed it! Good job!</p>
<p>|=================================================                            |  64%<br>
| You can see how plot2.R differs from plot1.R, right?</p>
<p>...</p>
<p>|===================================================                          |  66%<br>
| Again, run the R command source with the two arguments pathtofile("plot2.R") and<br>
| local=TRUE. This will run the code in plot2.R.</p>
<blockquote>
<p>source(pathtofile("plot2.R"),local=TRUE)</p>
</blockquote>
<p><img src="../images/r0040800.png" alt="graph" title="graph"></p>
<p>| You are doing so well!</p>
<p>|====================================================                         |  67%<br>
| The regression lines are red because ...?</p>
<p>1: R always plots regression lines in red<br>
2: R is the first letter of the word red<br>
3: the custom panel function specified a col argument</p>
<p>Selection: 3</p>
<p>| Excellent job!</p>
<p>|=====================================================                        |  69%<br>
| Before we close we'll look at how easily lattice can handle a plot with a great many<br>
| panels. (The sky's the limit.) We've loaded some diamond data for you. It comes with<br>
| the ggplot2 package. We'll use it just to show off lattice's panel plotting<br>
| capability.</p>
<p>...</p>
<p>|======================================================                       |  70%<br>
| The data is in the data frame diamonds. Use the R command str to see what it looks<br>
| like.</p>
<blockquote>
<p>str(diamonds)</p>

<pre><code>tibble [53,940 x 10] (S3: tbl_df/tbl/data.frame)  
 $ carat  : num [1:53940] 0.23 0.21 0.23 0.29 0.31 0.24 0.24 0.26 0.22 0.23 ...  
 $ cut    : Ord.factor w/ 5 levels "Fair"&lt;"Good"&lt;..: 5 4 2 4 2 3 3 3 1 3 ...  
 $ color  : Ord.factor w/ 7 levels "D"&lt;"E"&lt;"F"&lt;"G"&lt;..: 2 2 2 6 7 7 6 5 2 5 ...  
 $ clarity: Ord.factor w/ 8 levels "I1"&lt;"SI2"&lt;"SI1"&lt;..: 2 3 5 4 2 6 7 3 4 5 ...  
 $ depth  : num [1:53940] 61.5 59.8 56.9 62.4 63.3 62.8 62.3 61.9 65.1 59.4 ...  
 $ table  : num [1:53940] 55 61 65 58 58 57 57 55 61 61 ...  
 $ price  : int [1:53940] 326 326 327 334 335 336 336 337 337 338 ...  
 $ x      : num [1:53940] 3.95 3.89 4.05 4.2 4.34 3.94 3.95 4.07 3.87 4 ...  
 $ y      : num [1:53940] 3.98 3.84 4.07 4.23 4.35 3.96 3.98 4.11 3.78 4.05 ...  
 $ z      : num [1:53940] 2.43 2.31 2.31 2.63 2.75 2.48 2.47 2.53 2.49 2.39 ...</code></pre>
<p>| Perseverance, that's the answer.</p>
</blockquote>
<p>|=======================================================                      |  72%<br>
| So the data frame contains 10 pieces of information for each of 53940 diamonds. Run<br>
| the R command table with diamonds$color as an argument.</p>
<blockquote>
<p>table(diamonds$color)</p>

<pre><code>    D     E     F     G     H     I     J   
 6775  9797  9542 11292  8304  5422  2808</code></pre>
<p>| You nailed it! Good job!</p>
</blockquote>
<p>|========================================================                     |  73%<br>
| We see 7 colors each represented by a letter. Now run the R command table with two<br>
| arguments, diamonds$color and diamonds$cut.</p>
<blockquote>
<p>table(diamonds$color,diamonds$cut)</p>

<pre><code>    Fair Good Very Good Premium Ideal  
  D  163  662      1513    1603  2834  
  E  224  933      2400    2337  3903  
  F  312  909      2164    2331  3826  
  G  314  871      2299    2924  4884  
  H  303  702      1824    2360  3115  
  I  175  522      1204    1428  2093  
  J  119  307       678     808   896</code></pre>
<p>| That's a job well done!</p>
</blockquote>
<p>|=========================================================                    |  75%<br>
| We see a 7 by 5 array with counts indicating how many diamonds in the data frame<br>
| have a particular color and cut. From the table, which is the most frequent<br>
| combination?</p>
<p>1: Ideal cut of color F.<br>
2: Ideal color of cut G<br>
3: Premium cut of color G<br>
4: Ideal cut of color G</p>
<p>Selection: 4</p>
<p>| Keep up the great work!</p>
<p>|===========================================================                  |  76%<br>
| To save you some trouble we've defined three character strings for you, labels for<br>
| the x- and y-axes and a main title. They're in the file myLabels.R, so run myedit on<br>
| this file to see them. Remember to put the file name in quotes when you call myedit.</p>
<blockquote>
<p>myedit("myLabels.R")</p>
</blockquote>

<pre><code>myxlab &lt;- "Carat"  
myylab &lt;- "Price"  
mymain &lt;- "Diamonds are Sparkly!"</code></pre>
<p>| Excellent job!</p>
<p>|============================================================                 |  78%<br>
| Now run source with pathtofile("myLabels.R") and local set equal to TRUE.</p>
<blockquote>
<p>source(pathtofile("myLabels.R"),local=TRUE)</p>
</blockquote>
<p>| All that hard work is paying off!</p>
<p>|=============================================================                |  79%<br>
| Now call xyplot with the formula price~carat | color*cut and data set equal to<br>
| diamonds. In addition, set the argument strip equal to FALSE, pch set equal to 20,<br>
| xlab to myxlab, ylab to myylab, and main to mymain. The plot may take longer than<br>
| previous plots because it is bigger.</p>
<blockquote>
<p>xyplot(price~carat|color*cut,data=diamonds,strip=FALSE,pch=20,xlab=myxlab,ylab=myylab,main=mymain)</p>
</blockquote>
<p><img src="../images/r0040810.png" alt="graph" title="graph"></p>
<p>| Excellent work!</p>
<p>|==============================================================               |  81%<br>
| Pretty cool, right? 35 panels, one for each combination of color and cut. The dots<br>
| (pch=20) show how prices for the diamonds in each category (panel) vary depending on<br>
| carat.</p>
<p>...</p>
<p>|===============================================================              |  82%<br>
| Are colors defining the rows or columns of the plot?</p>
<p>1: columns<br>
2: rows</p>
<p>Selection: 1</p>
<p>| You got it!</p>
<p>|================================================================             |  84%<br>
| Were you curious about that argument strip? I know I was. Now rerun the xyplot<br>
| command you just ran (use the up arrow key to retrieve it), this time without the<br>
| strip argument.</p>
<blockquote>
<p>xyplot(price~carat|color*cut,data=diamonds,pch=20,xlab=myxlab,ylab=myylab,main=mymain)</p>
</blockquote>
<p><img src="../images/r0040820.png" alt="graph" title="graph"></p>
<p>| All that hard work is paying off!</p>
<p>|==================================================================           |  85%<br>
| The plot shows that the strip argument ....</p>
<p>1: labels each panel<br>
2: removes information from the plot<br>
3: makes the plot less intelligible<br>
4: has a default value of FALSE</p>
<p>Selection: 1</p>
<p>| All that practice is paying off!</p>
<p>|===================================================================          |  87%<br>
| Review time!!!</p>
<p>...</p>
<p>|====================================================================         |  88%<br>
| True or False? Lattice plots are constructed by a series of calls to core functions.</p>
<p>1: False<br>
2: True</p>
<p>Selection: 1</p>
<p>| That's the answer I was looking for.</p>
<p>|=====================================================================        |  90%<br>
| True or False? Lattice plots are constructed with a single function call to a core<br>
| lattice function (e.g. xyplot)</p>
<p>1: False<br>
2: True</p>
<p>Selection: 2</p>
<p>| You got it!</p>
<p>|======================================================================       |  91%<br>
| True or False? Aspects like margins and spacing are automatically handled and<br>
| defaults are usually sufficient.</p>
<p>1: False<br>
2: True</p>
<p>Selection: 2</p>
<p>| That's a job well done!</p>
<p>|=======================================================================      |  93%<br>
| True or False? The lattice system is ideal for creating conditioning plots where you<br>
| examine the same kind of plot under many different conditions.</p>
<p>1: False<br>
2: True</p>
<p>Selection: 2</p>
<p>| Excellent job!</p>
<p>|========================================================================     |  94%<br>
| True or False? The lattice system, like the base plotting system, returns a trellis<br>
| plot object.</p>
<p>1: False<br>
2: True</p>
<p>Selection: 1</p>
<p>| Nice work!</p>
<p>|==========================================================================   |  96%<br>
| True or False?  Panel functions can NEVER be customized to modify what is plotted in<br>
| each of the plot panels.</p>
<p>1: True<br>
2: False</p>
<p>Selection: 2</p>
<p>| Your dedication is inspiring!</p>
<p>|===========================================================================  |  97%<br>
| True or False?  Lattice plots can display at most 20 panels in a single plot.</p>
<p>1: False<br>
2: True</p>
<p>Selection: 1</p>
<p>| You are doing so well!</p>
<p>|============================================================================ |  99%<br>
| Congrats! We hope this lesson didn't leave you climbing the trellis.</p>
<p>...</p>
<p>|=============================================================================| 100%<br>
| Would you like to receive credit for completing this course on Coursera.org?</p>
<p>1: No<br>
2: Yes</p>
<p>Selection: 2<br>
What is your email address? xxxxxx@xxxxxxxxxxxx<br>
What is your assignment token? xXxXxxXXxXxxXXXx<br>
Grade submission succeeded!</p>
<p>| Keep up the great work!</p>
<p>| You've reached the end of this lesson! Returning to the main menu...</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Exploratory Data Analysis<br>
2: Take me to the swirl course repository!</p>
<p>Selection: 0</p>
<p>| Leaving swirl now. Type swirl() to resume.</p>
<blockquote>
<p>rm(list=ls())</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Last updated 2020-05-08 12:20:33.102850 IST</em></p>

</div>
</div>
</div>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="00423/" class="u-url">Base Plotting System</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Krishnakanth Allika
            </span></p>
            <p class="dateline">
            <a href="00423/" rel="bookmark">
            <time class="published dt-published" datetime="2020-05-04T20:01:16+05:30" itemprop="datePublished" title="2020-05-04 20:01">2020-05-04 20:01</time></a>
            </p>
                <p class="commentline">
        
<a href="%7Blink%7D" onclick="this.href='/posts/00423/'; this.target='_self';"><span class="IDCommentsReplace" style="display:none">cache/posts/00423_Base Plotting System.html</span>
<script>
var idcomments_acct = '7fae5836cfdd49cac599cac5b95695d1';
var idcomments_post_id = "cache/posts/00423_Base Plotting System.html";
var idcomments_post_url = "/posts/00423/";
</script><script src="https://www.intensedebate.com/js/genericLinkWrapperV2.js"></script></a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote>
<p>library(swirl)<br>
swirl()</p>
</blockquote>
<p>| Welcome to swirl! Please sign in. If you've been here before, use the same name as you did<br>
| then. If you are new, call yourself something unique.</p>
<p>What shall I call you? Krishnakanth Allika</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Exploratory Data Analysis<br>
2: Take me to the swirl course repository!</p>
<p>Selection: 1</p>
<p>| Please choose a lesson, or type 0 to return to course menu.</p>
<p>1: Principles of Analytic Graphs   2: Exploratory Graphs<br>
 3: Graphics Devices in R           4: Plotting Systems<br>
 5: Base Plotting System            6: Lattice Plotting System<br>
 7: Working with Colors             8: GGPlot2 Part1<br>
 9: GGPlot2 Part2                  10: GGPlot2 Extras<br>
11: Hierarchical Clustering        12: K Means Clustering<br>
13: Dimension Reduction            14: Clustering Example<br>
15: CaseStudy</p>
<p>Selection: 5<br>
  |                                                                                   |   0%</p>
<p>| Base_Plotting_System. (Slides for this and other Data Science courses may be found at<br>
| github <a href="https://github.com/DataScienceSpecialization/courses/">https://github.com/DataScienceSpecialization/courses/</a>. If you care to use them,<br>
| they must be downloaded as a zip file and viewed locally. This lesson corresponds to<br>
| 04_ExploratoryAnalysis/PlottingBase.)</p>
<p>...</p>
<p>|=                                                                                  |   2%<br>
| In another lesson, we gave you an overview of the three plotting systems in R. In this<br>
| lesson we'll focus on the base plotting system and talk more about how you can exploit all<br>
| its many parameters to get the plot you want.  We'll focus on using the base plotting<br>
| system to create graphics on the screen device rather than another graphics device.</p>
<p>...</p>
<p>|===                                                                                |   3%<br>
| The core plotting and graphics engine in R is encapsulated in two packages. The first is<br>
| the graphics package which contains plotting functions for the "base" system. The<br>
| functions in this package include plot, hist, boxplot, barplot, etc. The second package is<br>
| grDevices which contains all the code implementing the various graphics devices, including<br>
| X11, PDF, PostScript, PNG, etc.</p>
<p>...</p>
<p>|====                                                                               |   5%<br>
| Base graphics are often constructed piecemeal, with each aspect of the plot handled<br>
| separately through a particular function call. Usually you start with a plot function<br>
| (such as plot, hist, or boxplot), then you use annotation functions (text, abline, points)<br>
| to add to or modify your plot.</p>
<p>...</p>
<p>|=====                                                                              |   6%<br>
| Before making a plot you have to determine where the plot will appear and what it will be<br>
| used for.  Is there a large amount of data going into the plot? Or is it just a few<br>
| points? Do you need to be able to dynamically resize the graphic?</p>
<p>...</p>
<p>|======                                                                             |   8%<br>
| What do you think is a disadvantage of the Base Plotting System?</p>
<p>1: It mirrors how we think of building plots and analyzing data<br>
2: You can't go back once a plot has started<br>
3: It's intuitive and exploratory<br>
4: A complicated plot is a series of simple R commands</p>
<p>Selection: 2</p>
<p>| That's a job well done!</p>
<p>|========                                                                           |   9%<br>
| Yes! The base system is very intuitive and easy to use. You can't go backwards, though,<br>
| say, if you need to readjust margins or have misspelled a caption. A finished plot will be<br>
| a series of R commands, so it's difficult to translate a finished plot into a different<br>
| system.</p>
<p>...</p>
<p>|=========                                                                          |  11%<br>
| Calling a basic routine such as plot(x, y) or hist(x) launches a graphics device (if one<br>
| is not already open) and draws a new plot on the device. If the arguments to plot or hist<br>
| are not of some special class, then the default method is called.</p>
<p>...</p>
<p>|==========                                                                         |  12%<br>
| As you'll see, most of the base plotting functions have many arguments, for example,<br>
| setting the title, labels of axes, plot character, etc. Some of the parameters can be set<br>
| when you call the function or they can be added later in a separate function call.</p>
<p>...</p>
<p>|===========                                                                        |  14%<br>
| Now we'll go through some quick examples of basic plotting before we delve into gory<br>
| details. We'll use the dataset airquality (part of the library datasets) which we've<br>
| loaded for you. This shows ozone and other air measurements for New York City for 5 months<br>
| in 1973.</p>
<p>...</p>
<p>|=============                                                                      |  15%<br>
| Use the R command head with airquality as an argument to see what the data looks like.</p>
<blockquote>
<p>head(airquality)<br>
  Ozone Solar.R Wind Temp Month Day<br>
1    41     190  7.4   67     5   1<br>
2    36     118  8.0   72     5   2<br>
3    12     149 12.6   74     5   3<br>
4    18     313 11.5   62     5   4<br>
5    NA      NA 14.3   56     5   5<br>
6    28      NA 14.9   66     5   6</p>
</blockquote>
<p>| Your dedication is inspiring!</p>
<p>|==============                                                                     |  17%<br>
| We see the dataset contains 6 columns of data. Run the command range with two arguments.<br>
| The first is the ozone column of airquality, specified by airquality\$Ozone, and the second<br>
| is the boolean na.rm set equal to TRUE. If you don't specify this second argument, you<br>
| won't get a meaningful result.</p>
<blockquote>
<p>range(airquality\$Ozone,na.rm=TRUE)<br>
[1]   1 168</p>
</blockquote>
<p>| Perseverance, that's the answer.</p>
<p>|===============                                                                    |  18%<br>
| So the measurements range from 1 to 168. First we'll do a simple histogram of this ozone<br>
| column to show the distribution of measurements. Use the R command hist with the argument<br>
| airquality\$Ozone.</p>
<blockquote>
<p>hist(airquality\$Ozone)</p>
</blockquote>
<p><img src="../images/r0040550.png" alt="graph" title="graph"></p>
<p>| You're the best!</p>
<p>|================                                                                   |  20%<br>
| Simple, right? R put a title on the histogram and labeled both axes for you. What is the<br>
| most frequent count?</p>
<p>1: Under 25<br>
2: Over 100<br>
3: Over 150<br>
4: Between 60 and 75</p>
<p>Selection: 1</p>
<p>| Great job!</p>
<p>|==================                                                                 |  21%<br>
| Next we'll do a boxplot. First, though, run the R command table with the argument<br>
| airquality\$Month.</p>
<blockquote>
<p>table(airquality\$Month)</p>
</blockquote>
<p>5  6  7  8  9<br>
31 30 31 31 30</p>
<p>| Excellent work!</p>
<p>|===================                                                                |  23%<br>
| We see that the data covers 5 months, May through September. We'll want a boxplot of ozone<br>
| as a function of the month in which the measurements were taken so we'll use the R formula<br>
| Ozone~Month as the first argument of boxplot. Our second argument will be airquality, the<br>
| dataset from which the variables of the first argument are taken.  Try this now.</p>
<blockquote>
<p>boxplot(Ozone~Month,airquality)</p>
</blockquote>
<p><img src="../images/r0040560.png" alt="graph" title="graph"></p>
<p>| Keep up the great work!</p>
<p>|====================                                                               |  24%<br>
| Note that boxplot, unlike hist, did NOT specify a title and axis labels for you<br>
| automatically.</p>
<p>...</p>
<p>|=====================                                                              |  26%<br>
| Let's call boxplot again to specify labels. (Use the up arrow to recover the previous<br>
| command and save yourself some typing.) We'll add more arguments to the call to specify<br>
| labels for the 2 axes. Set xlab equal to "Month" and ylab equal to "Ozone (ppb)". Specify<br>
| col.axis equal to "blue" and col.lab equal to "red". Try this now.</p>
<blockquote>
<p>boxplot(Ozone~Month,airquality,xlab="Month",ylab="Ozone (ppb)",col.axis="blue",col.lab="red")</p>
</blockquote>
<p><img src="../images/r0040570.png" alt="graph" title="graph"></p>
<p>| All that practice is paying off!</p>
<p>|=======================                                                            |  27%<br>
| Nice colors, but still no title. Let's add one with the R command title. Use the argument<br>
| main set equal to the string "Ozone and Wind in New York City".</p>
<blockquote>
<p>title(main="Ozone and Wind in New York City")</p>
</blockquote>
<p><img src="../images/r0040580.png" alt="graph" title="graph"></p>
<p>| Nice work!</p>
<p>|========================                                                           |  29%<br>
| Now we'll show you how to plot a simple two-dimensional scatterplot using the R function<br>
| plot. We'll show the relationship between Wind (x-axis) and Ozone (y-axis). We'll use the<br>
| function plot with those two arguments (Wind and Ozone, in that order). To save some<br>
| typing, though, we'll call the R command with using 2 arguments. The first argument of<br>
| with will be airquality, the dataset containing Wind and Ozone; the second argument will<br>
| be the call to plot. Doing this allows us to avoid using the longer notation, e.g.,<br>
| airquality\$Wind. Try this now.</p>
<blockquote>
<p>with(airquality,plot(Wind,Ozone))</p>
</blockquote>
<p><img src="../images/r0040590.png" alt="graph" title="graph"></p>
<p>| Perseverance, that's the answer.</p>
<p>|=========================                                                          |  30%<br>
| Note that plot generated labels for the x and y axes but no title.</p>
<p>...</p>
<p>|==========================                                                         |  32%<br>
| Add one now with the R command title. Use the argument main set equal to the string "Ozone<br>
| and Wind in New York City". (You can use the up arrow to recover the command if you don't<br>
| want to type it.)</p>
<blockquote>
<p>title(main="Ozone and Wind in New York City")</p>
</blockquote>
<p><img src="../images/r0040600.png" alt="graph" title="graph"></p>
<p>| Perseverance, that's the answer.</p>
<p>|============================                                                       |  33%<br>
| The basic plotting parameters are documented in the R help page for the function par. You<br>
| can use par to set parameters OR to find out what values are already set. To see just how<br>
| much flexibility you have, run the R command length with the argument par() now.</p>
<blockquote>
<p>length(par())<br>
[1] 72</p>
</blockquote>
<p>| All that hard work is paying off!</p>
<p>|=============================                                                      |  35%<br>
| So there are a boatload (72) of parameters that par() gives you access to. Run the R<br>
| function names with par() as its argument to see what these parameters are.</p>
<blockquote>
<p>names(par())<br>
 [1] "xlog"      "ylog"      "adj"       "ann"       "ask"       "bg"        "bty"<br>
 [8] "cex"       "cex.axis"  "cex.lab"   "cex.main"  "cex.sub"   "cin"       "col"<br>
[15] "col.axis"  "col.lab"   "col.main"  "col.sub"   "cra"       "crt"       "csi"<br>
[22] "cxy"       "din"       "err"       "family"    "fg"        "fig"       "fin"<br>
[29] "font"      "font.axis" "font.lab"  "font.main" "font.sub"  "lab"       "las"<br>
[36] "lend"      "lheight"   "ljoin"     "lmitre"    "lty"       "lwd"       "mai"<br>
[43] "mar"       "mex"       "mfcol"     "mfg"       "mfrow"     "mgp"       "mkh"<br>
[50] "new"       "oma"       "omd"       "omi"       "page"      "pch"       "pin"<br>
[57] "plt"       "ps"        "pty"       "smo"       "srt"       "tck"       "tcl"<br>
[64] "usr"       "xaxp"      "xaxs"      "xaxt"      "xpd"       "yaxp"      "yaxs"<br>
[71] "yaxt"      "ylbias"</p>
</blockquote>
<p>| You got it right!</p>
<p>|==============================                                                     |  36%<br>
| Variety is the spice of life. You might recognize some of these such as col and lwd from<br>
| previous swirl lessons. You can always run ?par to see what they do. For now, run the<br>
| command par()\$pin and see what you get.</p>
<blockquote>
<p>par()\$pin<br>
[1] 4.520417 1.805833</p>
</blockquote>
<p>| You got it!</p>
<p>|===============================                                                    |  38%<br>
| Alternatively, you could have gotten the same result by running par("pin") or par('pin')).<br>
| What do you think these two numbers represent?</p>
<p>1: Coordinates of the center of the plot window<br>
2: Random numbers<br>
3: A confidence interval<br>
4: Plot dimensions in inches</p>
<p>Selection: 4</p>
<p>| All that hard work is paying off!</p>
<p>|=================================                                                  |  39%<br>
| Now, run the command par("fg") or or par('fg') or par()\$fg and see what you get.</p>
<blockquote>
<p>par("fg")<br>
[1] "black"</p>
</blockquote>
<p>| You nailed it! Good job!</p>
<p>|==================================                                                 |  41%<br>
| It gave you a color, right? Since par()\$fg specifies foreground color, what do you think  
| par()\\$bg specifies?</p>
<p>1: Beautiful color<br>
2: blue-green<br>
3: Better color<br>
4: Background color</p>
<p>Selection: 4</p>
<p>| You are amazing!</p>
<p>|===================================                                                |  42%<br>
| Many base plotting functions share a set of parameters. We'll go through some of the more<br>
| commonly used ones now. See if you can tell what they do from their names.</p>
<p>...</p>
<p>|====================================                                               |  44%<br>
| What do you think the graphical parameter pch controls?</p>
<p>1: pc help<br>
2: plot character<br>
3: point control height<br>
4: picture characteristics</p>
<p>Selection: 2</p>
<p>| You are doing so well!</p>
<p>|===================================                                          |  45%<br>
| The plot character default is the open circle, but it "can either be a single<br>
| character or an integer code for one of a set of graphics symbols." Run the command<br>
| par("pch") to see the integer value of the default. When you need to, you can use<br>
| R's Documentation (?pch) to find what the other values mean.</p>
<blockquote>
<p>par("pch")<br>
[1] 1</p>
</blockquote>
<p>| You're the best!</p>
<p>|====================================                                         |  47%<br>
| So 1 is the code for the open circle. What do you think the graphical parameters lty<br>
| and lwd control respectively?</p>
<p>1: line length and width<br>
2: line slope and intercept<br>
3: line type and width<br>
4: line width and type</p>
<p>Selection: 3</p>
<p>| You nailed it! Good job!</p>
<p>|=====================================                                        |  48%<br>
| Run the command par("lty") to see the default line type.</p>
<blockquote>
<p>par("lty")<br>
[1] "solid"</p>
</blockquote>
<p>| Excellent job!</p>
<p>|======================================                                       |  50%<br>
| So the default line type is solid, but it can be dashed, dotted, etc. Once again,<br>
| R's ?par documentation will tell you what other line types are available. The line<br>
| width is a positive integer; the default value is 1.</p>
<p>...</p>
<p>|========================================                                     |  52%<br>
| We've seen a lot of examples of col, the plotting color, specified as a number,<br>
| string, or hex code; the colors() function gives you a vector of colors by name.</p>
<p>...</p>
<p>|=========================================                                    |  53%<br>
| What do you think the graphical parameters xlab and ylab control respectively?</p>
<p>1: labels for the y- and x- axes<br>
2: labels for the x- and y- axes</p>
<p>Selection: 2</p>
<p>| You are quite good my friend!</p>
<p>|==========================================                                   |  55%<br>
| The par() function is used to specify global graphics parameters that affect all<br>
| plots in an R session. (Use dev.off or plot.new to reset to the defaults.) These<br>
| parameters can be overridden when specified as arguments to specific plotting<br>
| functions. These include las (the orientation of the axis labels on the plot), bg<br>
| (background color), mar (margin size), oma (outer margin size), mfrow and mfcol<br>
| (number of plots per row, column).</p>
<p>...</p>
<p>|===========================================                                  |  56%<br>
| The last two, mfrow and mfcol, both deal with multiple plots in that they specify<br>
| the number of plots per row and column. The difference between them is the order in<br>
| which they fill the plot matrix. The call mfrow will fill the rows first while mfcol<br>
| fills the columns first.</p>
<p>...</p>
<p>|============================================                                 |  58%<br>
| So to reiterate, first call a basic plotting routine. For instance, plot makes a<br>
| scatterplot or other type of plot depending on the class of the object being<br>
| plotted.</p>
<p>...</p>
<p>|==============================================                               |  59%<br>
| As we've seen, R provides several annotating functions. Which of the following is<br>
| NOT one of them?</p>
<p>1: title<br>
2: hist<br>
3: lines<br>
4: text<br>
5: points</p>
<p>Selection: 2</p>
<p>| Your dedication is inspiring!</p>
<p>|===============================================                              |  61%<br>
| So you can add text, title, points, and lines to an existing plot. To add lines, you<br>
| give a vector of x values and a corresponding vector of y values (or a 2-column<br>
| matrix); the function lines just connects the dots. The function text adds text<br>
| labels to a plot using specified x, y coordinates.</p>
<p>...</p>
<p>|================================================                             |  62%<br>
| The function title adds annotations. These include x- and y- axis labels, title,<br>
| subtitle, and outer margin. Two other annotating functions are mtext which adds<br>
| arbitrary text to either the outer or inner margins of the plot and axis which adds<br>
| axis ticks and labels. Another useful function is legend which explains to the<br>
| reader what the symbols your plot uses mean.</p>
<p>...</p>
<p>|=================================================                            |  64%<br>
| Before we close, let's test your ability to make a somewhat complicated scatterplot.<br>
| First run plot with 3 arguments. airquality\$Wind, airquality\\$Ozone, and type set<br>
| equal to "n". This tells R to set up the plot but not to put the data in it.</p>
<blockquote>
<p>plot(airquality\$Wind,airquality\\$Ozone,type="n")<br>
There were 12 warnings (use warnings() to see them)</p>
</blockquote>
<p><img src="../images/r0040610.png" alt="graph" title="graph"></p>
<p>| You got it!</p>
<p>|==================================================                           |  65%<br>
| Now for the test. (You might need to check R's documentation for some of these.) Add<br>
| a title with the argument main set equal to the string "Wind and Ozone in NYC"</p>
<blockquote>
<p>title(main = "Wind and Ozone in NYC")</p>
</blockquote>
<p><img src="../images/r0040620.png" alt="graph" title="graph"></p>
<p>| That's the answer I was looking for.</p>
<p>|===================================================                          |  67%<br>
| Now create a variable called may by subsetting airquality appropriately. (Recall<br>
| that the data specifies months by number and May is the fifth month of the year.)</p>
<blockquote>
<p>may&lt;-subset(airquality,Month==5)</p>
</blockquote>
<p>| All that practice is paying off!</p>
<p>|=====================================================                        |  68%<br>
| Now use the R command points to plot May's wind and ozone (in that order) as solid<br>
| blue triangles. You have to set the color and plot character with two separate<br>
| arguments. Note we use points because we're adding to an existing plot.</p>
<blockquote>
<p>points(may\$Wind,may\\$Ozone,col="blue",pch=17)</p>
</blockquote>
<p><img src="../images/r0040630.png" alt="graph" title="graph"></p>
<p>| That's a job well done!</p>
<p>|======================================================                       |  70%<br>
| Now create the variable notmay by subsetting airquality appropriately.</p>
<blockquote>
<p>notmay&lt;-subset(airquality,Month!=5)</p>
</blockquote>
<p>| Keep up the great work!</p>
<p>|=======================================================                      |  71%<br>
| Now use the R command points to plot these notmay's wind and ozone (in that order)<br>
| as red snowflakes.</p>
<blockquote>
<p>points(notmay\$Wind,notmay\\$Ozone,col="red",pch=8)</p>
</blockquote>
<p><img src="../images/r0040640.png" alt="graph" title="graph"></p>
<p>| Your dedication is inspiring!</p>
<p>|========================================================                     |  73%<br>
| Now we'll use the R command legend to clarify the plot and explain what it means.<br>
| The function has a lot of arguments, but we'll only use 4. The first will be the<br>
| string "topright" to tell R where to put the legend. The remaining 3 arguments will<br>
| each be 2-long vectors created by R's concatenate function, e.g., c(). These<br>
| arguments are pch, col, and legend. The first is the vector (17,8), the second<br>
| ("blue","red"), and the third ("May","Other Months"). Try it now.</p>
<blockquote>
<p>legend("topright",pch=c(17,8),col=c("blue","red"),legend=c("May","Other Months"))</p>
</blockquote>
<p><img src="../images/r0040650.png" alt="graph" title="graph"></p>
<p>| That's a job well done!</p>
<p>|=========================================================                    |  74%<br>
| Now add a vertical line at the median of airquality\$Wind. Make it dashed (lty=2)<br>
| with a width of 2.</p>
<blockquote>
<p>abline(v=median(airquality\$Wind),lty=2,lwd=2)</p>
</blockquote>
<p><img src="../images/r0040660.png" alt="graph" title="graph"></p>
<p>| You are really on a roll!</p>
<p>|==========================================================                   |  76%<br>
| Use par with the parameter mfrow set equal to the vector (1,2) to set up the plot<br>
| window for two plots side by side. You won't see a result.</p>
<blockquote>
<p>par(mfrow=c(1,2))</p>
</blockquote>
<p>| You are doing so well!</p>
<p>|============================================================                 |  77%<br>
| Now plot airquality\$Wind and airquality\\$Ozone and use main to specify the title<br>
| "Ozone and Wind".</p>
<blockquote>
<p>plot(airquality\$Wind,airquality\\$Ozone,main="Ozone and Wind")</p>
</blockquote>
<p><img src="../images/r0040670.png" alt="graph" title="graph"></p>
<p>| Perseverance, that's the answer.</p>
<p>|=============================================================                |  79%<br>
| Now for the second plot.</p>
<p>...</p>
<p>|==============================================================               |  80%<br>
| Plot airquality\$Ozone and airquality\\$Solar.R and use main to specify the title<br>
| "Ozone and Solar Radiation".</p>
<blockquote>
<p>plot(airquality\$Ozone,airquality\\$Solar.R,main="Ozone and Solar Radiation")</p>
</blockquote>
<p><img src="../images/r0040680.png" alt="graph" title="graph"></p>
<p>| That's correct!</p>
<p>|===============================================================              |  82%<br>
| Now for something more challenging.</p>
<p>...</p>
<p>|================================================================             |  83%<br>
| This one with 3 plots, to illustrate inner and outer margins. First, set up the plot<br>
| window by typing par(mfrow = c(1, 3), mar = c(4, 4, 2, 1), oma = c(0, 0, 2, 0))</p>
<blockquote>
<p>par(mfrow = c(1, 3), mar = c(4, 4, 2, 1), oma = c(0, 0, 2, 0))</p>
</blockquote>
<p>| Perseverance, that's the answer.</p>
<p>|=================================================================            |  85%<br>
| Margins are specified as 4-long vectors of integers. Each number tells how many<br>
| lines of text to leave at each side. The numbers are assigned clockwise starting at<br>
| the bottom. The default for the inner margin is c(5.1, 4.1, 4.1, 2.1) so you can see<br>
| we reduced each of these so we'll have room for some outer text.</p>
<p>...</p>
<p>|==================================================================           |  86%<br>
| The first plot should be familiar. Plot airquality\$Wind and airquality\\$Ozone with<br>
| the title (argument main) as "Ozone and Wind".</p>
<blockquote>
<p>plot(airquality\$Wind,airquality\\$Ozone,main="Ozone and Wind")</p>
</blockquote>
<p><img src="../images/r0040690.png" alt="graph" title="graph"></p>
<p>| You nailed it! Good job!</p>
<p>|====================================================================         |  88%<br>
| The second plot is similar.</p>
<p>...</p>
<p>|=====================================================================        |  89%<br>
| Plot airquality\$Solar.R and airquality\\$Ozone with the title (argument main) as<br>
| "Ozone and Solar Radiation".</p>
<blockquote>
<p>plot(airquality\$Solar.R,airquality\\$Ozone,main="Ozone and Solar Radiation")</p>
</blockquote>
<p><img src="../images/r0040700.png" alt="graph" title="graph"></p>
<p>| That's a job well done!</p>
<p>|======================================================================       |  91%<br>
| Now for the final panel.</p>
<p>...</p>
<p>|=======================================================================      |  92%<br>
| Plot airquality\$Temp and airquality\\$Ozone with the title (argument main) as "Ozone<br>
| and Temperature".</p>
<blockquote>
<p>plot(airquality\$Temp,airquality\\$Ozone,main="Ozone and Temperature")</p>
</blockquote>
<p><img src="../images/r0040710.png" alt="graph" title="graph"></p>
<p>| You got it!</p>
<p>|========================================================================     |  94%<br>
| Now we'll put in a title.</p>
<p>...</p>
<p>|==========================================================================   |  95%<br>
| Since this is the main title, we specify it with the R command mtext. Call mtext<br>
| with the string "Ozone and Weather in New York City" and the argument outer set<br>
| equal to TRUE.</p>
<blockquote>
<p>mtext("Ozone and Weather in New York City",outer=TRUE)</p>
</blockquote>
<p><img src="../images/r0040720.png" alt="graph" title="graph"></p>
<p>| That's correct!</p>
<p>|===========================================================================  |  97%<br>
| Voila! Beautiful, right?</p>
<p>...</p>
<p>|============================================================================ |  98%<br>
| Congrats! You've weathered this lesson nicely and passed out of the No!zone.</p>
<p>...</p>
<p>|=============================================================================| 100%<br>
| Would you like to receive credit for completing this course on Coursera.org?</p>
<p>1: No<br>
2: Yes</p>
<p>Selection: 2<br>
What is your email address? xxxxxx@xxxxxxxxxxxx<br>
What is your assignment token? xXxXxxXXxXxxXXXx<br>
Grade submission succeeded!</p>
<p>| All that practice is paying off!</p>
<p>| You've reached the end of this lesson! Returning to the main menu...</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Exploratory Data Analysis<br>
2: Take me to the swirl course repository!</p>
<p>Selection: 0</p>
<p>| Leaving swirl now. Type swirl() to resume.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Last updated 2020-05-04 20:05:26.618647 IST</em></p>

</div>
</div>
</div>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="00422/" class="u-url">Plotting Systems</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Krishnakanth Allika
            </span></p>
            <p class="dateline">
            <a href="00422/" rel="bookmark">
            <time class="published dt-published" datetime="2020-05-04T19:56:24+05:30" itemprop="datePublished" title="2020-05-04 19:56">2020-05-04 19:56</time></a>
            </p>
                <p class="commentline">
        
<a href="%7Blink%7D" onclick="this.href='/posts/00422/'; this.target='_self';"><span class="IDCommentsReplace" style="display:none">cache/posts/00422_Plotting Systems.html</span>
<script>
var idcomments_acct = '7fae5836cfdd49cac599cac5b95695d1';
var idcomments_post_id = "cache/posts/00422_Plotting Systems.html";
var idcomments_post_url = "/posts/00422/";
</script><script src="https://www.intensedebate.com/js/genericLinkWrapperV2.js"></script></a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>R version 4.0.0 (2020-04-24) -- "Arbor Day"<br>
Copyright (C) 2020 The R Foundation for Statistical Computing<br>
Platform: x86_64-w64-mingw32/x64 (64-bit)</p>
<p>R is free software and comes with ABSOLUTELY NO WARRANTY.<br>
You are welcome to redistribute it under certain conditions.<br>
Type 'license()' or 'licence()' for distribution details.</p>
<p>R is a collaborative project with many contributors.<br>
Type 'contributors()' for more information and<br>
'citation()' on how to cite R or R packages in publications.</p>
<p>Type 'demo()' for some demos, 'help()' for on-line help, or<br>
'help.start()' for an HTML browser interface to help.<br>
Type 'q()' to quit R.</p>
<blockquote>
<p>setwd("C:/Users/kk/PortableApps/Git/home/k-allika/repos/DataScienceWithR/04_Exploratory_Data_Analysis/week01/workspace")<br>
library(swirl)</p>
</blockquote>
<p>| Hi! Type swirl() when you are ready to begin.</p>
<blockquote>
<p>swirl()</p>
</blockquote>
<p>| Welcome to swirl! Please sign in. If you've been here before, use the same name as you did<br>
| then. If you are new, call yourself something unique.</p>
<p>What shall I call you? Krishnakanth Allika</p>
<p>| Would you like to continue with one of these lessons?</p>
<p>1: Exploratory Data Analysis Plotting Systems<br>
2: No. Let me start something new.</p>
<p>Selection: 1</p>
<p>| Attempting to load lesson dependencies...</p>
<p>| Package ‘ggplot2’ loaded correctly!</p>
<p>| Package ‘lattice’ loaded correctly!</p>
<p>| Package ‘jpeg’ loaded correctly!</p>
<p>| Plotting_Systems. (Slides for this and other Data Science courses may be found at github<br>
| <a href="https://github.com/DataScienceSpecialization/courses/">https://github.com/DataScienceSpecialization/courses/</a>. If you care to use them, they must<br>
| be downloaded as a zip file and viewed locally. This lesson corresponds to<br>
| 04_ExploratoryAnalysis/PlottingSystems.)</p>
<p>...</p>
<p>|==                                                                                 |   3%<br>
| In this lesson, we'll give you a brief overview of the three plotting systems in R, their<br>
| differences, strengths, and weaknesses. We'll only cover the basics here to give you a<br>
| general idea of the systems and in later lessons we'll cover each system in more depth.</p>
<p>...</p>
<p>|====                                                                               |   5%<br>
| The first plotting system is the Base Plotting System which comes with R. It's the oldest<br>
| system which uses a simple "Artist's palette" model. What this means is that you start<br>
| with a blank canvas and build your plot up from there, step by step.</p>
<p>...</p>
<p>|=======                                                                            |   8%<br>
| Usually you start with a plot function (or something similar), then you use annotation<br>
| functions to add to or modify your plot. R provides many annotating functions such as<br>
| text, lines, points, and axis. R provides documentation for each of these. They all add to<br>
| an already existing plot.</p>
<p>...</p>
<p>|=========                                                                          |  11%<br>
| What do you think is a disadvantage of the Base Plotting System?</p>
<p>1: It mirrors how we think of building plots and analyzing data<br>
2: A complicated plot is a series of simple R commands<br>
3: You can't go back once a plot has started<br>
4: It's intuitive and exploratory</p>
<p>Selection: 3</p>
<p>| Nice work!</p>
<p>|===========                                                                        |  14%<br>
| Yes! The base system is very intuitive and easy to use when you're starting to do<br>
| exploratory graphing and looking for a research direction. You can't go backwards, though,<br>
| say, if you need to readjust margins or fix a misspelled a caption. A finished plot will<br>
| be a series of R commands, so it's difficult to translate a finished plot into a different<br>
| system.</p>
<p>...</p>
<p>|=============                                                                      |  16%<br>
| We've loaded the dataset cars for you to demonstrate how easy it is to plot. First, use<br>
| the R command head with cars as an argument to see what the data looks like.</p>
<blockquote>
<p>head(cars)<br>
  speed dist<br>
1     4    2<br>
2     4   10<br>
3     7    4<br>
4     7   22<br>
5     8   16<br>
6     9   10</p>
</blockquote>
<p>| You are really on a roll!</p>
<p>|================                                                                   |  19%<br>
| So the dataset collates the speeds and distances needed to stop for 50 cars. This data was<br>
| recorded in the 1920's.</p>
<p>...</p>
<p>|==================                                                                 |  22%<br>
| We'll use the R command with which takes two arguments. The first specifies a dataset or<br>
| environment in which to run the second argument, an R expression. This will save us a bit<br>
| of typing. Try running the command with now using cars as the first argument and a call to<br>
| plot as the second. The call to plot will take two arguments, speed and dist. Please<br>
| specify them in that order.</p>
<blockquote>
<p>with(cars,plot(speed,dist))</p>
</blockquote>
<p><img src="../images/r0040500.png" alt="graph" title="graph"></p>
<p>| You got it right!</p>
<p>|====================                                                               |  24%<br>
| Simple, right? You can see the relationship between the two variables, speed and distance.<br>
| The first variable is plotted along the x-axis and the second along the y-axis.</p>
<p>...</p>
<p>|======================                                                             |  27%<br>
| Now we'll show you what the function text does. Run the command text with three arguments.<br>
| The first two, x and y coordinates, specify the placement of the third argument, the text<br>
| to be added to the plot. Let the first argument be mean(cars\$speed), the second  
| max(cars\\$dist), and the third the string "SWIRL rules!". Try it now.</p>
<blockquote>
<p>text(mean(cars\$speed),max(cars\\$dist),"SWIRL rules!")</p>
</blockquote>
<p><img src="../images/r0040510.png" alt="graph" title="graph"></p>
<p>| You are quite good my friend!</p>
<p>|=========================                                                          |  30%<br>
| Ain't it the truth?</p>
<p>...</p>
<p>|===========================                                                        |  32%<br>
| Now we'll move on to the second plotting system, the Lattice System which comes in the<br>
| package of the same name. Unlike the Base System, lattice plots are created with a single<br>
| function call such as xyplot or bwplot. Margins and spacing are set automatically because<br>
| the entire plot is specified at once.</p>
<p>...</p>
<p>|=============================                                                      |  35%<br>
| The lattice system is most useful for conditioning types of plots which display how y<br>
| changes with x across levels of z. The variable z might be a categorical variable of your<br>
| data. This system is also good for putting many plots on a screen at once.</p>
<p>...</p>
<p>|===============================                                                    |  38%<br>
| The lattice system has several disadvantages. First, it is sometimes awkward to specify an<br>
| entire plot in a single function call. Annotating a plot may not be especially intuitive.<br>
| Second, using panel functions and subscripts is somewhat difficult and requires<br>
| preparation. Finally, you cannot "add" to the plot once it is created as you can with the<br>
| base system.</p>
<p>...</p>
<p>|==================================                                                 |  41%</p>
<p>| As before, we've loaded some data for you in the variable state. This data comes with the<br>
| lattice package and it concerns various characteristics of the 50 states in the U.S. Use<br>
| the R command head to see the first few entries of state now.</p>
<blockquote>
<p>head(state)<br>
           Population Income Illiteracy Life.Exp Murder HS.Grad Frost   Area region<br>
Alabama          3615   3624        2.1    69.05   15.1    41.3    20  50708  South<br>
Alaska            365   6315        1.5    69.31   11.3    66.7   152 566432   West<br>
Arizona          2212   4530        1.8    70.55    7.8    58.1    15 113417   West<br>
Arkansas         2110   3378        1.9    70.66   10.1    39.9    65  51945  South<br>
California      21198   5114        1.1    71.71   10.3    62.6    20 156361   West<br>
Colorado         2541   4884        0.7    72.06    6.8    63.9   166 103766   West</p>
</blockquote>
<p>| You are really on a roll!</p>
<p>|====================================                                               |  43%<br>
| As you can see state holds 9 pieces of information for each of the 50 states. The last<br>
| variable, region, specifies a category for each state. Run the R command table with the<br>
| argument state\$region to see how many categories there are and how many states are in<br>
| each.</p>
<blockquote>
<p>table(state\$region)</p>
</blockquote>

<pre><code>Northeast         South North Central          West   
        9            16            12            13   

</code></pre>
<p>| Your dedication is inspiring!</p>
<p>|======================================                                             |  46%<br>
| So there are 4 categories and the 50 states are sorted into them appropriately. Let's use<br>
| the lattice command xyplot to see how life expectancy varies with income in each of the<br>
| four regions.</p>
<p>...</p>
<p>|========================================                                           |  49%<br>
| To do this we'll give xyplot 3 arguments. The first is the most complicated. It is this R<br>
| formula, Life.Exp ~ Income | region, which indicates we're plotting life expectancy as it<br>
| depends on income for each region. The second argument, data, is set equal to state. This<br>
| allows us to use "Life.Exp" and "Income" in the formula instead of specifying the dataset<br>
| state for each term (as in state\$Income). The third argument, layout, is set equal to the<br>
| two-long vector c(4,1). Run xyplot now with these three arguments.</p>
<blockquote>
<p>xyplot(Life.Exp~Income|region,data=state,layout=c(4,1))</p>
</blockquote>
<p><img src="../images/r0040520.png" alt="graph" title="graph"></p>
<p>| Perseverance, that's the answer.</p>
<p>|===========================================                                        |  51%<br>
| We see the data for each of the 4 regions plotted in one row. Based on this plot, which<br>
| region of the U.S. seems to have the shortest life expectancy?</p>
<p>1: West<br>
2: South<br>
3: Northeast<br>
4: North Central</p>
<p>Selection: 2</p>
<p>| You got it!</p>
<p>|=============================================                                      |  54%<br>
| Just for fun rerun the xyplot and this time set layout to the vector c(2,2). To save<br>
| typing use the up arrow to recover the previous xyplot command.</p>
<blockquote>
<p>xyplot(Life.Exp~Income|region,data=state,layout=c(2,2))</p>
</blockquote>
<p><img src="../images/r0040530.png" alt="graph" title="graph"></p>
<p>| Your dedication is inspiring!</p>
<p>|===============================================                                    |  57%<br>
| See how the plot changed? No need for you to worry about margins or labels. The package<br>
| took care of all that for you.</p>
<p>...</p>
<p>|=================================================                                  |  59%<br>
| Now for the last plotting system, ggplot2, which is a hybrid of the base and lattice<br>
| systems. It automatically deals with spacing, text, titles (as Lattice does) but also<br>
| allows you to annotate by "adding" to a plot (as Base does), so it's the best of both<br>
| worlds.</p>
<p>...</p>
<p>|====================================================                               |  62%<br>
| Although ggplot2 bears a superficial similarity to lattice, it's generally easier and more<br>
| intuitive to use. Its default mode makes many choices for you but you can still customize<br>
| a lot. The package is based on a "grammar of graphics" (hence the gg in the name), so you<br>
| can control the aesthetics of your plots. For instance, you can plot conditioning graphs<br>
| and panel plots as we did in the lattice example.</p>
<p>...</p>
<p>|======================================================                             |  65%<br>
| We'll see an example now of ggplot2 with a simple (single) command. As before, we've<br>
| loaded a dataset for you from the ggplot2 package. This mpg data holds fuel economy data<br>
| between 1999 and 2008 for 38 different models of cars. Run head with mpg as an argument so<br>
| you get an idea of what the data looks like.</p>
<blockquote>
<p>head(mpg)<br>
# A tibble: 6 x 11<br>
  manufacturer model displ  year   cyl trans      drv     cty   hwy fl    class<br><chr><chr><dbl><int><int><chr><chr><int><int><chr><chr><br>
1 audi         a4      1.8  1999     4 auto(l5)   f        18    29 p     compact<br>
2 audi         a4      1.8  1999     4 manual(m5) f        21    29 p     compact<br>
3 audi         a4      2    2008     4 manual(m6) f        20    31 p     compact<br>
4 audi         a4      2    2008     4 auto(av)   f        21    30 p     compact<br>
5 audi         a4      2.8  1999     6 auto(l5)   f        16    26 p     compact<br>
6 audi         a4      2.8  1999     6 manual(m5) f        18    26 p     compact</chr></chr></int></int></chr></chr></int></int></dbl></chr></chr></p>
</blockquote>
<p>| That's a job well done!</p>
<p>|========================================================                           |  68%<br>
| Looks complicated. Run dim with the argument mpg to see how big the dataset is.</p>
<blockquote>
<p>dim(mpg)<br>
[1] 234  11</p>
</blockquote>
<p>| Excellent work!</p>
<p>|==========================================================                         |  70%<br>
| Holy cow! That's a lot of information for just 38 models of cars. Run the R command table<br>
| with the argument mpg\$model. This will tell us how many models of cars we're dealing with.</p>
<blockquote>
<p>table(mpg\$model)</p>
</blockquote>

<pre><code>       4runner 4wd                     a4             a4 quattro             a6 quattro   
                 6                      7                      8                      3   
            altima     c1500 suburban 2wd                  camry           camry solara   
                 6                      5                      7                      7   
       caravan 2wd                  civic                corolla               corvette   
                11                      9                      5                      5   
 dakota pickup 4wd            durango 4wd         expedition 2wd           explorer 4wd   
                 9                      7                      3                      6   
   f150 pickup 4wd           forester awd     grand cherokee 4wd             grand prix   
                 7                      6                      8                      5   
               gti            impreza awd                  jetta        k1500 tahoe 4wd   
                 5                      8                      9                      4   
</code></pre>
<p>land cruiser wagon 4wd                 malibu                 maxima        mountaineer 4wd<br>
                     2                      5                      3                      4<br>
               mustang          navigator 2wd             new beetle                 passat<br>
                     9                      3                      6                      7<br>
        pathfinder 4wd    ram 1500 pickup 4wd            range rover                 sonata<br>
                     4                     10                      4                      7<br>
               tiburon      toyota tacoma 4wd<br>
                     7                      7</p>
<p>| Nice work!</p>
<p>|=============================================================                      |  73%<br>
| Oh, there are 38 models. We're interested in the effect engine displacement (displ) has on<br>
| highway gas mileage (hwy), so we'll use the ggplot2 command qplot to display this<br>
| relationship. Run qplot now with three arguments. The first two are the variables displ<br>
| and hwy we want to plot, and the third is the argument data set equal to mpg. As before,<br>
| this allows us to avoid using the mpg\$variable notation for the first two arguments.</p>
<blockquote>
<p>qplot(displ,hwy,data=mpg)</p>
</blockquote>
<p><img src="../images/r0040540.png" alt="graph" title="graph"></p>
<p>| You are doing so well!</p>
<p>|===============================================================                    |  76%<br>
| Not surprisingly we see that the bigger the engine displacement the lower the gas mileage.</p>
<p>...</p>
<p>|=================================================================                  |  78%<br>
| Let's review!</p>
<p>...</p>
<p>|===================================================================                |  81%<br>
| Which R plotting system is based on an artist's palette?</p>
<p>1: Winsor&amp;Newton<br>
2: ggplot2<br>
3: base<br>
4: lattice</p>
<p>Selection: 3</p>
<p>| All that practice is paying off!</p>
<p>|======================================================================             |  84%<br>
| Which R plotting system does NOT allow you to annotate plots with separate calls?</p>
<p>1: base<br>
2: ggplot2<br>
3: Winsor&amp;Newton<br>
4: lattice</p>
<p>Selection: 4</p>
<p>| You got it right!</p>
<p>|========================================================================           |  86%<br>
| Which R plotting system combines the best features of the other two?</p>
<p>1: base<br>
2: Winsor&amp;Newton<br>
3: lattice<br>
4: ggplot2</p>
<p>Selection: 4</p>
<p>| You are doing so well!</p>
<p>|==========================================================================         |  89%<br>
| Which R plotting system uses a graphics grammar?</p>
<p>1: lattice<br>
2: base<br>
3: Winsor&amp;Newton<br>
4: ggplot2</p>
<p>Selection: 4</p>
<p>| You're the best!</p>
<p>|============================================================================       |  92%<br>
| Which R plotting system forces you to make your entire plot with one call?</p>
<p>1: Winsor&amp;Newton<br>
2: lattice<br>
3: ggplot2<br>
4: base</p>
<p>Selection: 2</p>
<p>| You are amazing!</p>
<p>|===============================================================================    |  95%<br>
| Which of the following sells high quality artists' brushes?</p>
<p>1: Winsor&amp;Newton<br>
2: base<br>
3: ggplot2<br>
4: lattice</p>
<p>Selection: 1</p>
<p>| You nailed it! Good job!</p>
<p>|=================================================================================  |  97%<br>
| Congrats! You've concluded this plotting lesson. We hope you didn't find it plodding.</p>
<p>...</p>
<p>|===================================================================================| 100%<br>
| Would you like to receive credit for completing this course on Coursera.org?</p>
<p>1: Yes<br>
2: No</p>
<p>Selection: 1<br>
What is your email address? xxxxxx@xxxxxxxxxxxx<br>
What is your assignment token? xXxXxxXXxXxxXXXx<br>
Grade submission succeeded!</p>
<p>| You nailed it! Good job!</p>
<p>| You've reached the end of this lesson! Returning to the main menu...</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Exploratory Data Analysis<br>
2: Take me to the swirl course repository!</p>
<p>Selection: 0</p>
<p>| Leaving swirl now. Type swirl() to resume.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Last updated 2020-05-04 19:59:20.871482 IST</em></p>

</div>
</div>
</div>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="00421/" class="u-url">Graphics Devices in R</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Krishnakanth Allika
            </span></p>
            <p class="dateline">
            <a href="00421/" rel="bookmark">
            <time class="published dt-published" datetime="2020-05-04T13:21:25+05:30" itemprop="datePublished" title="2020-05-04 13:21">2020-05-04 13:21</time></a>
            </p>
                <p class="commentline">
        
<a href="%7Blink%7D" onclick="this.href='/posts/00421/'; this.target='_self';"><span class="IDCommentsReplace" style="display:none">cache/posts/00421_Graphics Devices in R.html</span>
<script>
var idcomments_acct = '7fae5836cfdd49cac599cac5b95695d1';
var idcomments_post_id = "cache/posts/00421_Graphics Devices in R.html";
var idcomments_post_url = "/posts/00421/";
</script><script src="https://www.intensedebate.com/js/genericLinkWrapperV2.js"></script></a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>R version 4.0.0 (2020-04-24) -- "Arbor Day"<br>
Copyright (C) 2020 The R Foundation for Statistical Computing<br>
Platform: x86_64-w64-mingw32/x64 (64-bit)</p>
<p>R is free software and comes with ABSOLUTELY NO WARRANTY.<br>
You are welcome to redistribute it under certain conditions.<br>
Type 'license()' or 'licence()' for distribution details.</p>
<p>R is a collaborative project with many contributors.<br>
Type 'contributors()' for more information and<br>
'citation()' on how to cite R or R packages in publications.</p>
<p>Type 'demo()' for some demos, 'help()' for on-line help, or<br>
'help.start()' for an HTML browser interface to help.<br>
Type 'q()' to quit R.</p>
<blockquote>
<p>setwd("C:/Users/kk/PortableApps/Git/home/k-allika/repos/DataScienceWithR/04_Exploratory_Data_Analysis/week01/workspace")<br>
library(swirl)</p>
</blockquote>
<p>| Hi! Type swirl() when you are ready to begin.</p>
<blockquote>
<p>swirl()</p>
</blockquote>
<p>| Welcome to swirl! Please sign in. If you've been here before, use the same name as you did<br>
| then. If you are new, call yourself something unique.</p>
<p>What shall I call you? Krishnakanth Allika</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Exploratory Data Analysis<br>
2: Take me to the swirl course repository!</p>
<p>Selection: 1</p>
<p>| Please choose a lesson, or type 0 to return to course menu.</p>
<p>1: Principles of Analytic Graphs   2: Exploratory Graphs<br>
 3: Graphics Devices in R           4: Plotting Systems<br>
 5: Base Plotting System            6: Lattice Plotting System<br>
 7: Working with Colors             8: GGPlot2 Part1<br>
 9: GGPlot2 Part2                  10: GGPlot2 Extras<br>
11: Hierarchical Clustering        12: K Means Clustering<br>
13: Dimension Reduction            14: Clustering Example<br>
15: CaseStudy</p>
<p>Selection: 3<br>
  |                                                                                   |   0%</p>
<p>| Graphics_Devices_in_R. (Slides for this and other Data Science courses may be found at<br>
| github <a href="https://github.com/DataScienceSpecialization/courses/">https://github.com/DataScienceSpecialization/courses/</a>. If you care to use them,<br>
| they must be downloaded as a zip file and viewed locally. This lesson corresponds to<br>
| 04_ExploratoryAnalysis/Graphics_Devices_in_R.)</p>
<p>...</p>
<p>|==                                                                                 |   3%<br>
| As the title suggests, this will be a short lesson introducing you to graphics devices in<br>
| R. So, what IS a graphics device?</p>
<p>...</p>
<p>|=====                                                                              |   6%<br>
| Would you believe that it is something where you can make a plot appear, either a screen<br>
| device, such as a window on your computer, OR a file device?</p>
<p>...</p>
<p>|=======                                                                            |   9%<br>
| There are several different kinds of file devices with particular characteristics and<br>
| hence uses. These include PDF, PNG, JPEG, SVG, and TIFF. We'll talk more about these<br>
| later.</p>
<p>...</p>
<p>|==========                                                                         |  12%<br>
| To be clear, when you make a plot in R, it has to be "sent" to a specific graphics device.<br>
| Usually this is the screen (the default device), especially when you're doing exploratory<br>
| work. You'll send your plots to files when you're ready to publish a report, make a<br>
| presentation, or send info to colleagues.</p>
<p>...</p>
<p>|============                                                                       |  15%<br>
| How you access your screen device depends on what computer system you're using. On a Mac<br>
| the screen device is launched with the call quartz(), on Windows you use the call<br>
| windows(), and on Unix/Linux x11().  On a given platform (Mac, Windows, Unix/Linux) there<br>
| is only one screen device, and obviously not all graphics devices are available on all<br>
| platforms (i.e. you cannot launch windows() on a Mac).</p>
<p>...</p>
<p>|===============                                                                    |  18%<br>
| Run the R command ?Devices to see what graphics devices are available on your system.</p>
<blockquote>
<p>?Devices</p>
</blockquote>
<p>| That's correct!</p>
<p>|=================                                                                  |  21%<br>
| R Documentation shows you what's available.</p>
<p>...</p>
<p>|====================                                                               |  24%<br>
| There are two basic approaches to plotting. The first, plotting to the screen, is the most<br>
| common. It's simple - you call a plotting function like plot, xyplot, or qplot (which you<br>
| call depends on the plotting system you favor, but that's another lesson), so that the<br>
| plot appears on the screen. Then you annotate (add to) the plot if necessary.</p>
<p>...</p>
<p>|======================                                                             |  26%<br>
| As an example, run the R command with with 2 arguments. The first is a dataset, faithful,<br>
| which comes with R, and the second is a call to the base plotting function plot. Your call<br>
| to plot should have two arguments, eruptions and waiting. Try this now to see what<br>
| happens.</p>
<blockquote>
<p>with(faithful,plot(eruptions,waiting))</p>
</blockquote>
<p><img src="../images/r0040470.png" alt="graph" title="graph"></p>
<p>| Excellent job!</p>
<p>|========================                                                           |  29%<br>
| See how R created a scatterplot on the screen for you? This shows that relationship<br>
| between eruptions of the geyser Old Faithful and waiting time. Now use the R function<br>
| title with the argument main set equal to the string "Old Faithful Geyser data". This is<br>
| an annotation to the plot.</p>
<blockquote>
<p>title(main="Old Faithful Geyser data")</p>
</blockquote>
<p><img src="../images/r0040480.png" alt="graph" title="graph"></p>
<p>| You are amazing!</p>
<p>|===========================                                                        |  32%<br>
| Simple, right?  Now run the command dev.cur(). This will show you the current plotting<br>
| device, the screen.</p>
<blockquote>
<p>dev.cur()<br>
RStudioGD<br>
        2</p>
</blockquote>
<p>| That's the answer I was looking for.</p>
<p>|=============================                                                      |  35%<br>
| The second way to create a plot is to send it to a file device. Depending on the type of<br>
| plot you're making, you explicitly launch a graphics device, e.g., a pdf file. Type the<br>
| command pdf(file="myplot.pdf") to launch the file device. This will create the pdf file<br>
| myplot.pdf in your working directory.</p>
<blockquote>
<p>pdf(file="myplot.pdf")</p>
</blockquote>
<p>| Nice work!</p>
<p>|================================                                                   |  38%<br>
| You then call the plotting function (if you are using a file device, no plot will appear<br>
| on the screen). Run the with command again to plot the Old Faithful data. Use the up arrow<br>
| key to recover the command and save yourself some typing.</p>
<blockquote>
<p>with(faithful,plot(eruptions,waiting))</p>
</blockquote>
<p>| That's correct!</p>
<p>|==================================                                                 |  41%<br>
| Now rerun the title command and annotate the plot. (Up arrow keys are great!)</p>
<blockquote>
<p>title(main="Old Faithful Geyser data")</p>
</blockquote>
<p>| You are doing so well!</p>
<p>|=====================================                                              |  44%<br>
| Finally, when plotting to a file device, you have to close the device with the command<br>
| dev.off(). This is very important! Don't do it yet, though. After closing, you'll be able<br>
| to view the pdf file on your computer.</p>
<p>...</p>
<p>|=======================================                                            |  47%<br>
| There are two basic types of file devices, vector and bitmap devices. These use different<br>
| formats and have different characteristics. Vector formats are good for line drawings and<br>
| plots with solid colors using a modest number of points, while bitmap formats are good for<br>
| plots with a large number of points, natural scenes or web-based plots.</p>
<p>...</p>
<p>|==========================================                                         |  50%<br>
| We'll mention 4 specific vector formats. The first is pdf, which we've just used in our<br>
| example. This is useful for line-type graphics and papers. It resizes well, is usually<br>
| portable, but it is not efficient if a plot has many objects/points.</p>
<p>...</p>
<p>|============================================                                       |  53%<br>
| The second is svg which is XML-based, scalable vector graphics. This supports animation<br>
| and interactivity and is potentially useful for web-based plots.</p>
<p>...</p>
<p>|==============================================                                     |  56%<br>
| The last two vector formats are win.metafile, a Windows-only metafile format, and<br>
| postscript (ps), an older format which also resizes well, is usually portable, and can be<br>
| used to create encapsulated postscript files. Unfortunately, Windows systems often don’t<br>
| have a postscript viewer.</p>
<p>...</p>
<p>|=================================================                                  |  59%<br>
| We'll also mention 4 different bitmap formats. The first is png (Portable Network<br>
| Graphics) which is good for line drawings or images with solid colors. It uses lossless<br>
| compression (like the old GIF format), and most web browsers can read this format<br>
| natively. In addition, png is good for plots with many points, but it does not resize<br>
| well.</p>
<p>...</p>
<p>|===================================================                                |  62%<br>
| In contrast, jpeg files are good for photographs or natural scenes. They use lossy<br>
| compression, so they're good for plots with many points. Files in jpeg format don't resize<br>
| well, but they can be read by almost any computer and any web browser. They're not great<br>
| for line drawings.</p>
<p>...</p>
<p>|======================================================                             |  65%<br>
| The last two bitmap formats are tiff, an older lossless compression meta-format and bmp<br>
| which is a native Windows bitmapped format.</p>
<p>...</p>
<p>|========================================================                           |  68%<br>
| Although it is possible to open multiple graphics devices (screen, file, or both), when<br>
| viewing multiple plots at once, plotting can only occur on one graphics device at a time.</p>
<p>...</p>
<p>|===========================================================                        |  71%<br>
| The currently active graphics device can be found by calling dev.cur(). Try it now to see<br>
| what number is assigned to your pdf device.</p>
<blockquote>
<p>dev.cur()<br>
pdf<br>
  4</p>
</blockquote>
<p>| Your dedication is inspiring!</p>
<p>|=============================================================                      |  74%<br>
| Now use dev.off() to close the device.</p>
<blockquote>
<p>dev.off()<br>
RStudioGD<br>
        2</p>
</blockquote>
<p>View <a href="../files/f0040010.pdf" title="myplot.pdf">myplot.pdf</a></p>
<p>| You are quite good my friend!</p>
<p>|===============================================================                    |  76%<br>
| Now rerun dev.cur() to see what integer your plotting window is assigned.</p>
<blockquote>
<p>dev.cur()<br>
RStudioGD<br>
        2</p>
</blockquote>
<p>| You got it!</p>
<p>|==================================================================                 |  79%<br>
| The device is back to what it was when you started. As you might have guessed, every open<br>
| graphics device is assigned an integer greater than or equal to 2. You can change the<br>
| active graphics device with dev.set(<integer>) where <integer> is the number associated<br>
| with the graphics device you want to switch to.</integer></integer></p>
<p>...</p>
<p>|====================================================================               |  82%<br>
| You can also copy a plot from one device to another. This can save you some time but<br>
| beware! Copying a plot is not an exact operation, so the result may not be identical to<br>
| the original. R provides some functions to help you do this. The function dev.copy copies<br>
| a plot from one device to another, and dev.copy2pdf specifically copies a plot to a PDF<br>
| file.</p>
<p>...</p>
<p>|=======================================================================            |  85%<br>
| Just for fun, rerun the with command again, with(faithful, plot(eruptions, waiting)), to<br>
| plot the Old Faithful data. Use the up arrow key to recover the command if you don't feel<br>
| like typing.</p>
<blockquote>
<p>with(faithful,plot(eruptions,waiting))</p>
</blockquote>
<p>| You are really on a roll!</p>
<p>|=========================================================================          |  88%<br>
| Now rerun the title command, title(main = "Old Faithful Geyser data"), to annotate the<br>
| plot. (Up arrow keys are great!)</p>
<blockquote>
<p>title(main="Old Faithful Geyser data")</p>
</blockquote>
<p>| You are really on a roll!</p>
<p>|============================================================================       |  91%<br>
| Now run dev.copy with the 2 arguments. The first is png, and the second is file set equal<br>
| to "geyserplot.png". This will copy your screen plot to a png file in your working<br>
| directory which you can view AFTER you close the device.</p>
<blockquote>
<p>dev.copy(png,"geyserplot.png")<br>
png<br>
  4</p>
</blockquote>
<p>| Not quite, but you're learning! Try again. Or, type info() for more options.</p>
<p>| Type dev.copy(png, file = "geyserplot.png") at the command prompt.</p>
<blockquote>
<p>dev.copy(png,file="geyserplot.png")<br>
png<br>
  5</p>
</blockquote>
<p>| That's correct!</p>
<p>|==============================================================================     |  94%<br>
| Don't forget to close the PNG device! Do it NOW!!! Then you'll be able to view the file.</p>
<blockquote>
<p>dev.off()<br>
RStudioGD<br>
        2</p>
</blockquote>
<p><img src="../images/r0040490.png" alt="geyserplot.png" title="geyserplot.png"></p>
<p>| Keep working like that and you'll get there!</p>
<p>|=================================================================================  |  97%<br>
| Congrats! We hope you found this lesson deviced well!</p>
<p>...</p>
<p>|===================================================================================| 100%<br>
| Would you like to receive credit for completing this course on Coursera.org?</p>
<p>1: Yes<br>
2: No</p>
<p>Selection: 1<br>
What is your email address? xxxxxx@xxxxxxxxxxxx<br>
What is your assignment token? xXxXxxXXxXxxXXXx<br>
Grade submission succeeded!</p>
<p>| All that hard work is paying off!</p>
<p>| You've reached the end of this lesson! Returning to the main menu...</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Exploratory Data Analysis<br>
2: Take me to the swirl course repository!</p>
<p>Selection: 0</p>
<p>| Leaving swirl now. Type swirl() to resume.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Last updated 2020-05-04 13:23:19.344014 IST</em></p>

</div>
</div>
</div>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="00420/" class="u-url">Exploratory Graphs</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Krishnakanth Allika
            </span></p>
            <p class="dateline">
            <a href="00420/" rel="bookmark">
            <time class="published dt-published" datetime="2020-05-02T19:15:50+05:30" itemprop="datePublished" title="2020-05-02 19:15">2020-05-02 19:15</time></a>
            </p>
                <p class="commentline">
        
<a href="%7Blink%7D" onclick="this.href='/posts/00420/'; this.target='_self';"><span class="IDCommentsReplace" style="display:none">cache/posts/00420_Exploratory Graphs.html</span>
<script>
var idcomments_acct = '7fae5836cfdd49cac599cac5b95695d1';
var idcomments_post_id = "cache/posts/00420_Exploratory Graphs.html";
var idcomments_post_url = "/posts/00420/";
</script><script src="https://www.intensedebate.com/js/genericLinkWrapperV2.js"></script></a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote>
<p>library(swirl)<br>
swirl()</p>
</blockquote>
<p>| Welcome to swirl! Please sign in. If you've been here before, use the same name as you did<br>
| then. If you are new, call yourself something unique.</p>
<p>What shall I call you? Krishnakanth Allika</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Exploratory Data Analysis<br>
2: Take me to the swirl course repository!</p>
<p>Selection: 1</p>
<p>| Please choose a lesson, or type 0 to return to course menu.</p>
<p>1: Principles of Analytic Graphs   2: Exploratory Graphs<br>
 3: Graphics Devices in R           4: Plotting Systems<br>
 5: Base Plotting System            6: Lattice Plotting System<br>
 7: Working with Colors             8: GGPlot2 Part1<br>
 9: GGPlot2 Part2                  10: GGPlot2 Extras<br>
11: Hierarchical Clustering        12: K Means Clustering<br>
13: Dimension Reduction            14: Clustering Example<br>
15: CaseStudy</p>
<p>Selection: 2<br>
  |                                                                                   |   0%</p>
<p>| Exploratory_Graphs. (Slides for this and other Data Science courses may be found at github<br>
| <a href="https://github.com/DataScienceSpecialization/courses/">https://github.com/DataScienceSpecialization/courses/</a>. If you care to use them, they must<br>
| be downloaded as a zip file and viewed locally. This lesson corresponds to<br>
| 04_ExploratoryAnalysis/exploratoryGraphs.)</p>
<p>Error in (function (srcref)  : unimplemented type (29) in 'eval'<br>
Error: no more error handlers available (recursive errors?); invoking 'abort' restart<br>
Error in readline("...") :<br>
  INTEGER() can only be applied to a 'integer', not a 'unknown type #29'<br>
In addition: Warning message:<br>
In readline("...") : type 29 is unimplemented in 'type2char'</p>
<p>| Leaving swirl now. Type swirl() to resume.</p>
<blockquote>
<p>swirl()</p>
</blockquote>
<p>| Welcome to swirl! Please sign in. If you've been here before, use the same name as you did<br>
| then. If you are new, call yourself something unique.</p>
<p>What shall I call you? Krishnakanth Allika</p>
<p>| Would you like to continue with one of these lessons?</p>
<p>1: Exploratory Data Analysis Exploratory Graphs<br>
2: No. Let me start something new.</p>
<p>Selection: 1</p>
<p>| Exploratory_Graphs. (Slides for this and other Data Science courses may be found at github<br>
| <a href="https://github.com/DataScienceSpecialization/courses/">https://github.com/DataScienceSpecialization/courses/</a>. If you care to use them, they must<br>
| be downloaded as a zip file and viewed locally. This lesson corresponds to<br>
| 04_ExploratoryAnalysis/exploratoryGraphs.)</p>
<p>...</p>
<p>|=                                                                                  |   1%<br>
| In this lesson, we'll discuss why graphics are an important tool for data scientists and<br>
| the special role that exploratory graphs play in the field.</p>
<p>...</p>
<p>|==                                                                                 |   3%<br>
| Which of the following would NOT be a good reason to use graphics in data science?</p>
<p>1: To understand data properties<br>
2: To find a color that best matches the shirt you're wearing<br>
3: To find patterns in data<br>
4: To suggest modeling strategies</p>
<p>Selection: 2</p>
<p>| All that practice is paying off!</p>
<p>|===                                                                                |   4%<br>
| So graphics give us some visual form of data, and since our brains are very good at seeing<br>
| patterns, graphs give us a compact way to present data and find or display any pattern<br>
| that may be present.</p>
<p>...</p>
<p>|====                                                                               |   5%<br>
| Which of the following cliches captures the essence of graphics?</p>
<p>1: To err is human, to forgive divine<br>
2: A rose by any other name smells as sweet<br>
3: A picture is worth a 1000 words<br>
4: The apple doesn't fall far from the tree</p>
<p>Selection: 3</p>
<p>| Excellent work!</p>
<p>|======                                                                             |   7%<br>
| Exploratory graphs serve mostly the same functions as graphs. They help us find patterns<br>
| in data and understand its properties. They suggest modeling strategies and help to debug<br>
| analyses. We DON'T use exploratory graphs to communicate results.</p>
<p>...</p>
<p>|=======                                                                            |   8%<br>
| Instead, exploratory graphs are the initial step in an investigation, the "quick and<br>
| dirty" tool used to point the data scientist in a fruitful direction. A scientist might<br>
| need to make a lot of exploratory graphs in order to develop a personal understanding of<br>
| the problem being studied. Plot details such as axes, legends, color and size are cleaned<br>
| up later to convey more information in an aesthetically pleasing way.</p>
<p>...</p>
<p>|========                                                                           |   9%<br>
| To demonstrate these ideas, we've copied some data for you from the U.S. Environmental<br>
| Protection Agency (EPA) which sets national ambient air quality standards for outdoor air<br>
| pollution. These Standards say that for fine particle pollution (PM2.5), the "annual mean,<br>
| averaged over 3 years" cannot exceed 12 micro grams per cubic meter. We stored the data<br>
| from the U.S. EPA web site in the data frame pollution. Use the R function head to see the<br>
| first few entries of pollution.</p>
<blockquote>
<p>head(pollution)<br>
       pm25  fips region longitude latitude<br>
1  9.771185 01003   east -87.74826 30.59278<br>
2  9.993817 01027   east -85.84286 33.26581<br>
3 10.688618 01033   east -87.72596 34.73148<br>
4 11.337424 01049   east -85.79892 34.45913<br>
5 12.119764 01055   east -86.03212 34.01860<br>
6 10.827805 01069   east -85.35039 31.18973</p>
</blockquote>
<p>| You nailed it! Good job!</p>
<p>|=========                                                                          |  11%<br>
| We see right away that there's at least one county exceeding the EPA's standard of 12<br>
| micrograms per cubic meter. What else do we see?</p>
<p>...</p>
<p>|==========                                                                         |  12%<br>
| We see 5 columns of data. The pollution count is in the first column labeled pm25. We'll<br>
| work mostly with that. The other 4 columns are a fips code indicating the state (first 2<br>
| digits) and county (last 3 digits) with that count, the associated region (east or west),<br>
| and the longitude and latitude of the area. Now run the R command dim with pollution as an<br>
| argument to see how long the table is.</p>
<blockquote>
<p>dim(pollution)<br>
[1] 576   5</p>
</blockquote>
<p>| Great job!</p>
<p>|===========                                                                        |  13%<br>
| So there are 576 entries in pollution. We'd like to investigate the question "Are there<br>
| any counties in the U.S. that exceed that national standard (12 micro grams per cubic<br>
| meter) for fine particle pollution?" We'll look at several one dimensional summaries of<br>
| the data to investigate this question.</p>
<p>...</p>
<p>|============                                                                       |  15%<br>
| The first technique uses the R command summary, a 5-number summary which returns 6<br>
| numbers. Run it now with the pm25 column of pollution as its argument. Recall that the<br>
| construct for this is pollution$pm25.</p>
<blockquote>
<p>summary(pollution$pm25)<br>
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.<br>
  3.383   8.549  10.047   9.836  11.356  18.441</p>
</blockquote>
<p>| You are doing so well!</p>
<p>|=============                                                                      |  16%<br>
| This shows us basic info about the pm25 data, namely its Minimum (0 percentile) and<br>
| Maximum (100 percentile) values, and three Quartiles of the data. These last indicate the<br>
| pollution measures at which 25%, 50%, and 75% of the counties fall below. In addition to<br>
| these 5 numbers we see the Mean or average measure of particulate pollution across the 576<br>
| counties.</p>
<p>...</p>
<p>|==============                                                                     |  17%<br>
| Half the measured counties have a pollution level less than or equal to what number of<br>
| micrograms per cubic meter?</p>
<p>1: 10.050<br>
2: 9.836<br>
3: 8.549<br>
4: 11.360</p>
<p>Selection: 1</p>
<p>| You're the best!</p>
<p>|===============                                                                    |  19%<br>
| To save you a lot of typing we've saved off pollution$pm25 for you in the variable ppm.<br>
| You can use ppm now in place of the longer expression. Try it now as the argument of the R<br>
| command quantile. See how the results look a lot like the results of the output of the<br>
| summary command.</p>
<blockquote>
<p>quantile(ppm)<br>
       0%       25%       50%       75%      100%<br>
 3.382626  8.548799 10.046697 11.356012 18.440731</p>
</blockquote>
<p>| All that hard work is paying off!</p>
<p>|=================                                                                  |  20%<br>
| See how the results are similar to those returned by summary? Quantile gives the<br>
| quartiles, right? What is the one value missing from this quantile output that summary<br>
| gave you?</p>
<p>1: the maximum value<br>
2: the median<br>
3: the minimum value<br>
4: the mean</p>
<p>Selection: 4</p>
<p>| Excellent work!</p>
<p>|==================                                                                 |  21%<br>
| Now we'll plot a picture, specifically a boxplot. Run the R command boxplot with ppm as an<br>
| input. Also specify the color parameter col equal to "blue".</p>
<blockquote>
<p>boxplot(ppm,col="blue")</p>
</blockquote>
<p><img src="../images/r0040290.png" alt="graph" title="graph"></p>
<p>| That's a job well done!</p>
<p>|===================                                                                |  23%<br>
| The boxplot shows us the same quartile data that summary and quantile did. The lower and<br>
| upper edges of the blue box respectively show the values of the 25% and 75% quantiles.</p>
<p>...</p>
<p>|====================                                                               |  24%<br>
| What do you think the horizontal line inside the box represents?</p>
<p>1: the maximum value<br>
2: the mean<br>
3: the minimum value<br>
4: the median</p>
<p>Selection: 4</p>
<p>| Nice work!</p>
<p>|=====================                                                              |  25%<br>
| The "whiskers" of the box (the vertical lines extending above and below the box) relate to<br>
| the range parameter of boxplot, which we let default to the value 1.5 used by R. The<br>
| height of the box is the interquartile range, the difference between the 75th and 25th<br>
| quantiles. In this case that difference is 2.8. The whiskers are drawn to be a length of<br>
| range<em>2.8 or 1.5</em>2.8. This shows us roughly how many, if any, data points are outliers,<br>
| that is, beyond this range of values.</p>
<p>...</p>
<p>|======================                                                             |  27%<br>
| Note that boxplot is part of R's base plotting package. A nice feature that this package<br>
| provides is its ability to overlay features. That is, you can add to (annotate) an<br>
| existing plot.</p>
<p>...</p>
<p>|=======================                                                            |  28%<br>
| To see this, run the R command abline with the argument h equal to 12. Recall that 12 is<br>
| the EPA standard for air quality.</p>
<blockquote>
<p>abline(h=12)</p>
</blockquote>
<p><img src="../images/r0040300.png" alt="graph" title="graph"></p>
<p>| That's a job well done!</p>
<p>|========================                                                           |  29%<br>
| What do you think this command did?</p>
<p>1: drew a horizontal line at 12<br>
2: hid 12 random data points<br>
3: drew a vertical line at 12<br>
4: nothing</p>
<p>Selection: 1</p>
<p>| Keep up the great work!</p>
<p>|=========================                                                          |  31%<br>
| So abline "adds one or more straight lines through the current plot." We see from the plot<br>
| that the bulk of the measured counties comply with the standard since they fall under the<br>
| line marking that standard.</p>
<p>...</p>
<p>|===========================                                                        |  32%<br>
| Now use the R command hist (another function from the base package) with the argument ppm.<br>
| Specify the color parameter col equal to "green". This will plot a histogram of the data.</p>
<blockquote>
<p>hist(ppm,col="green")</p>
</blockquote>
<p><img src="../images/r0040310.png" alt="graph" title="graph"></p>
<p>| You nailed it! Good job!</p>
<p>|============================                                                       |  33%<br>
| The histogram gives us a little more detailed information about our data, specifically the<br>
| distribution of the pollution counts, or how many counties fall into each bucket of<br>
| measurements.</p>
<p>...</p>
<p>|=============================                                                      |  35%<br>
| What are the most frequent pollution counts?</p>
<p>1: between 9 and 12<br>
2: between 12 and 14<br>
3: between 6 and 8<br>
4: under 5</p>
<p>Selection: 1</p>
<p>| You're the best!</p>
<p>|==============================                                                     |  36%<br>
| Now run the R command rug with the argument ppm.</p>
<blockquote>
<p>rug(ppm)</p>
</blockquote>
<p><img src="../images/r0040320.png" alt="graph" title="graph"></p>
<p>| That's correct!</p>
<p>|===============================                                                    |  37%<br>
| This one-dimensional plot, with its grayscale representation, gives you a little more<br>
| detailed information about how many data points are in each bucket and where they lie<br>
| within the bucket. It shows (through density of tick marks) that the greatest<br>
| concentration of counties has between 9 and 12 micrograms per cubic meter just as the<br>
| histogram did.</p>
<p>...</p>
<p>|================================                                                   |  39%<br>
| To illustrate this a little more, we've defined for you two vectors, high and low,<br>
| containing pollution data of high (greater than 15) and low (less than 5) values<br>
| respectively. Look at low now and see how it relates to the output of rug.</p>
<blockquote>
<p>low<br>
 [1] 3.494351 4.186090 4.917140 4.504539 4.793644 4.601408 4.195688 4.625279 4.460193<br>
[10] 4.978397 4.324736 4.175901 3.382626 4.132739 4.955570 4.565808</p>
</blockquote>
<p>| All that hard work is paying off!</p>
<p>|=================================                                                  |  40%<br>
| It confirms that there are two data points between 3 and 4 and many between 4 and 5. Now<br>
| look at high.</p>
<blockquote>
<p>high<br>
[1] 16.19452 15.80378 18.44073 16.66180 15.01573 17.42905 16.25190 16.18358</p>
</blockquote>
<p>| Excellent job!</p>
<p>|==================================                                                 |  41%<br>
| Again, we see one data point greater than 18, one between 17 and 18, several between 16<br>
| and 17 and two between 15 and 16, verifying what rug indicated.</p>
<p>...</p>
<p>|===================================                                                |  43%<br>
| Now rerun hist with 3 arguments, ppm as its first, col equal to "green", and the argument<br>
| breaks equal to 100.</p>
<blockquote>
<p>hist(ppm,col="green",breaks=100)</p>
</blockquote>
<p><img src="../images/r0040330.png" alt="graph" title="graph"></p>
<p>| All that practice is paying off!</p>
<p>|=====================================                                              |  44%<br>
| What do you think the breaks argument specifies in this case?</p>
<p>1: the number of data points to graph<br>
2: the number of counties exceeding the EPA standard<br>
3: the number of buckets to split the data into<br>
4: the number of stars in the sky</p>
<p>Selection: 3</p>
<p>| You are amazing!</p>
<p>|======================================                                             |  45%<br>
| So this histogram with more buckets is not nearly as smooth as the preceding one. In fact,<br>
| it's a little too noisy to see the distribution clearly. When you're plotting histograms<br>
| you might have to experiment with the argument breaks to get a good idea of your data's<br>
| distribution. For fun now, rerun the R command rug with the argument ppm.</p>
<blockquote>
<p>rug(ppm)</p>
</blockquote>
<p><img src="../images/r0040340.png" alt="graph" title="graph"></p>
<p>| That's a job well done!</p>
<p>|=======================================                                            |  47%<br>
| See how rug works with the existing plot? It automatically adjusted its pocket size to<br>
| that of the last plot plotted.</p>
<p>...</p>
<p>|========================================                                           |  48%<br>
| Now rerun hist with ppm as the data and col equal to "green".</p>
<blockquote>
<p>hist(ppm,col="green")</p>
</blockquote>
<p><img src="../images/r0040310.png" alt="graph" title="graph"></p>
<p>| Great job!</p>
<p>|=========================================                                          |  49%<br>
| Now run the command abline with the argument v equal to 12 and the argument lwd equal to<br>
| 2.</p>
<blockquote>
<p>abline(v=12,lwd=2)</p>
</blockquote>
<p><img src="../images/r0040350.png" alt="graph" title="graph"></p>
<p>| You are doing so well!</p>
<p>|==========================================                                         |  51%<br>
| See the vertical line at 12? Not very visible, is it, even though you specified a line<br>
| width of 2? Run abline with the argument v equal to median(ppm), the argument col equal to<br>
| "magenta", and the argument lwd equal to 4.</p>
<blockquote>
<p>abline(v=median(ppm),col="magenta",lwd=4)</p>
</blockquote>
<p><img src="../images/r0040360.png" alt="graph" title="graph"></p>
<p>| You are quite good my friend!</p>
<p>|===========================================                                        |  52%<br>
| Better, right? Thicker and more of a contrast in color. This shows that although the<br>
| median (50%) is below the standard, there are a fair number of counties in the U.S that<br>
| have pollution levels higher than the standard.</p>
<p>...</p>
<p>|============================================                                       |  53%<br>
| Now recall that our pollution data had 5 columns of information. So far we've only looked<br>
| at the pm25 column. We can also look at other information. To remind yourself what's there<br>
| run the R command names with pollution as the argument.</p>
<blockquote>
<p>names(pollution)<br>
[1] "pm25"      "fips"      "region"    "longitude" "latitude"</p>
</blockquote>
<p>| Keep up the great work!</p>
<p>|=============================================                                      |  55%<br>
| Longitude and latitude don't sound interesting, and each fips is unique since it<br>
| identifies states (first 2 digits) and counties (last 3 digits). Let's look at the region<br>
| column to see what's there. Run the R command table on this column. Use the construct<br>
| pollution$region. Store the result in the variable reg.</p>
<blockquote>
<p>reg&lt;-table(pollution$region)</p>
</blockquote>
<p>| All that practice is paying off!</p>
<p>|==============================================                                     |  56%<br>
| Look at reg now.</p>
<blockquote>
<p>reg</p>
</blockquote>
<p>east west<br>
 442  134</p>
<p>| Nice work!</p>
<p>|================================================                                   |  57%<br>
| Lot more counties in the east than west. We'll use the R command barplot (another type of<br>
| one-dimensional summary) to plot this information. Call barplot with reg as its first<br>
| argument, the argument col equal to "wheat", and the argument main equal to the string<br>
| "Number of Counties in Each Region".</p>
<blockquote>
<p>barplot(reg,col="wheat",main="Number of Counties in Each Region")</p>
</blockquote>
<p><img src="../images/r0040370.png" alt="graph" title="graph"></p>
<p>| You are quite good my friend!</p>
<p>|=================================================                                  |  59%<br>
| What do you think the argument main specifies?</p>
<p>1: the y axis label<br>
2: the title of the graph<br>
3: the x axis label<br>
4: I can't tell</p>
<p>Selection: 2</p>
<p>| You are doing so well!</p>
<p>|==================================================                                 |  60%<br>
| So we've seen several examples of one-dimensional graphs that summarize data. Two<br>
| dimensional graphs include scatterplots, multiple graphs which we'll see more examples of,<br>
| and overlayed one-dimensional plots which the R packages such as lattice and ggplot2<br>
| provide.</p>
<p>...</p>
<p>|===================================================                                |  61%<br>
| Some graphs have more than two-dimensions. These include overlayed or multiple<br>
| two-dimensional plots and spinning plots. Some three-dimensional plots are tricky to<br>
| understand so have limited applications. We'll see some examples now of more complicated<br>
| graphs, in particular, we'll show two graphs together.</p>
<p>...</p>
<p>|====================================================                               |  63%<br>
| First we'll show how R, in one line and using base plotting, can display multiple<br>
| boxplots. We simply specify that we want to see the pollution data as a function of<br>
| region. We know that our pollution data characterized each of the 576 entries as belonging<br>
| to one of two regions (east and west).</p>
<p>...</p>
<p>|=====================================================                              |  64%<br>
| We use the R formula y ~ x to show that y (in this case pm25) depends on x (region). Since<br>
| both come from the same data frame (pollution) we can specify a data argument set equal to<br>
| pollution. By doing this, we don't have to type pollution$pm25 (or ppm) and  
| pollution$region. We can just specify the formula pm25~region. Call boxplot now with this<br>
| formula as its argument, data equal to pollution, and col equal to "red".</p>
<blockquote>
<p>boxplot(pm25~region,data=pollution,col="red")</p>
</blockquote>
<p><img src="../images/r0040380.png" alt="graph" title="graph"></p>
<p>| Perseverance, that's the answer.</p>
<p>|======================================================                             |  65%<br>
| Two for the price of one! Similarly we can plot multiple histograms in one plot, though to<br>
| do this we have to use more than one R command. First we have to set up the plot window<br>
| with the R command par which specifies how we want to lay out the plots, say one above the<br>
| other. We also use par to specify margins, a 4-long vector which indicates the number of<br>
| lines for the bottom, left, top and right. Type the R command<br>
| par(mfrow=c(2,1),mar=c(4,4,2,1)) now. Don't expect to see any new result.</p>
<blockquote>
<p>par(mfrow=c(2,1),mar=c(4,4,2,1))</p>
</blockquote>
<p>| That's a job well done!</p>
<p>|=======================================================                            |  67%<br>
| So we set up the plot window for two rows and one column with the mfrow argument. The mar<br>
| argument set up the margins. Before we plot the histograms let's explore the R command<br>
| subset which, not surprisingly, "returns subsets of vectors, matrices or data frames which<br>
| meet conditions". We'll use subset to pull off the data we want to plot. Call subset now<br>
| with pollution as its first argument and a boolean expression testing region for equality<br>
| with the string "east". Put the result in the variable east.</p>
<blockquote>
<p>east&lt;-subset(pollution,region=="east")</p>
</blockquote>
<p>| Keep working like that and you'll get there!</p>
<p>|========================================================                           |  68%<br>
| Use head to look at the first few entries of east.</p>
<blockquote>
<p>head(east)<br>
       pm25  fips region longitude latitude<br>
1  9.771185 01003   east -87.74826 30.59278<br>
2  9.993817 01027   east -85.84286 33.26581<br>
3 10.688618 01033   east -87.72596 34.73148<br>
4 11.337424 01049   east -85.79892 34.45913<br>
5 12.119764 01055   east -86.03212 34.01860<br>
6 10.827805 01069   east -85.35039 31.18973</p>
</blockquote>
<p>| Excellent work!</p>
<p>|==========================================================                         |  69%<br>
| So east holds more information than we need. We just want to plot a histogram with the<br>
| pm25 portion. Call hist now with the pm25 portion of east as its first argument and col<br>
| equal to "green" as its second.</p>
<blockquote>
<p>hist(east$pm25,col="green")</p>
</blockquote>
<p><img src="../images/r0040390.png" alt="graph" title="graph"></p>
<p>| You got it!</p>
<p>|===========================================================                        |  71%<br>
| See? The command par told R we were going to have one column with 2 rows, so it placed<br>
| this histogram in the top position.</p>
<p>...</p>
<p>|============================================================                       |  72%<br>
| Now, here's a challenge for you. Plot the histogram of the counties from the west using<br>
| just one R command. Let the appropriate subset command (with the pm25 portion specified)<br>
| be the first argument and col (equal to "green") the second.  To cut down on your typing,<br>
| use the up arrow key to get your last command and replace "east" with the subset command.<br>
| Make sure the boolean argument checks for equality between region and "west".</p>
<blockquote>
<p>hist(subset(pollution,region=="west")$pm25,col="green")</p>
</blockquote>
<p><img src="../images/r0040400.png" alt="graph" title="graph"></p>
<p>| You are really on a roll!</p>
<p>|=============================================================                      |  73%<br>
| See how R does all the labeling for you? Notice that the titles are different since we<br>
| used different commands for the two plots. Let's look at some scatter plots now.</p>
<p>...</p>
<p>|==============================================================                     |  75%<br>
| Scatter plots are two-dimensional plots which show the relationship between two variables,<br>
| usually x and y. Let's look at a scatterplot showing the relationship between latitude and<br>
| the pm25 data. We'll use plot, a function from R's base plotting package.</p>
<p>...</p>
<p>|===============================================================                    |  76%<br>
| We've seen that we can use a function call as an argument when calling another function.<br>
| We'll do this again when we call plot with the arguments latitude and pm25 which are both<br>
| from our data frame pollution. We'll call plot from inside the R command with which<br>
| evaluates "an R expression in an environment constructed from data". We'll use pollution<br>
| as the first argument to with and the call to plot as the second. This allows us to avoid<br>
| typing "pollution$" before the arguments to plot, so it saves us some typing and adds to<br>
| your base of R knowledge. Try this now.</p>
<blockquote>
<p>with(pollution,plot(latitude,pm25))</p>
</blockquote>
<p><img src="../images/r0040410.png" alt="graph" title="graph"></p>
<p>| You nailed it! Good job!</p>
<p>|================================================================                   |  77%<br>
| Note that the first argument is plotted along the x-axis and the second along the y. Now<br>
| use abline to add a horizontal line at 12. Use two additional arguments, lwd equal to 2<br>
| and lty also equal to 2. See what happens.</p>
<blockquote>
<p>abline(h=12,lwd=2,lty=2)</p>
</blockquote>
<p><img src="../images/r0040420.png" alt="graph" title="graph"></p>
<p>| That's correct!</p>
<p>|=================================================================                  |  79%<br>
| See how lty=2 made the line dashed? Now let's replot the scatterplot. This time, instead<br>
| of using with, call plot directly with 3 arguments. The first 2 are pollution$latitude and  
| ppm. The third argument, col, we'll use to add color and more information to our plot. Set  
| this argument (col) equal to pollution$region and see what happens.</p>
<blockquote>
<p>plot(pollution$latitude,ppm,col=pollution$region)</p>
</blockquote>
<p><img src="../images/r0040430.png" alt="graph" title="graph"></p>
<p>| Perseverance, that's the answer.</p>
<p>|==================================================================                 |  80%<br>
| We've got two colors on the map to distinguish between counties in the east and those in<br>
| the west. Can we figure out which color is east and which west? See that the high (greater<br>
| than 50) and low (less than 25) latitudes are both red. Latitudes indicate distance from<br>
| the equator, so which half of the U.S. (east or west) has counties at the extreme north<br>
| and south?</p>
<p>1: east<br>
2: west</p>
<p>Selection: 2</p>
<p>| That's a job well done!</p>
<p>|====================================================================               |  81%<br>
| As before, use abline to add a horizontal line at 12. Use two additional arguments, lwd<br>
| equal to 2 and lty also equal to 2.</p>
<blockquote>
<p>abline(h=12,lwd=2,lty=2)</p>
</blockquote>
<p><img src="../images/r0040440.png" alt="graph" title="graph"></p>
<p>| You are amazing!</p>
<p>|=====================================================================              |  83%<br>
| We see many counties are above the healthy standard set by the EPA, but it's hard to tell<br>
| overall, which region, east or west, is worse.</p>
<p>...</p>
<p>|======================================================================             |  84%<br>
| Let's plot two scatterplots distinguished by region.</p>
<p>...</p>
<p>|=======================================================================            |  85%<br>
| As we did with multiple histograms, we first have to set up the plot window with the R<br>
| command par. This time, let's plot the scatterplots side by side (one row and two<br>
| columns). We also need to use different margins. Type the R command par(mfrow = c(1, 2),<br>
| mar = c(5, 4, 2, 1)) now. Don't expect to see any new result.</p>
<blockquote>
<p>par(mfrow = c(1, 2),mar = c(5, 4, 2, 1))</p>
</blockquote>
<p>| You are quite good my friend!</p>
<p>|========================================================================           |  87%<br>
| For the first scatterplot, on the left, we'll plot the latitudes and pm25 counts from the<br>
| west. We already pulled out the information for the counties in the east. Let's now get<br>
| the information for the counties from the west. Create the variable west by using the<br>
| subset command with pollution as the first argument and the appropriate boolean as the<br>
| second.</p>
<blockquote>
<p>west&lt;-subset(pollution,region="west")</p>
</blockquote>
<p>| Keep trying! Or, type info() for more options.</p>
<p>| Type west &lt;- subset(pollution,region=="west") at the command prompt.</p>
<blockquote>
<p>west&lt;-subset(pollution,region=="west")</p>
</blockquote>
<p>| That's the answer I was looking for.</p>
<p>|=========================================================================          |  88%<br>
| Now call plot with three arguments. These are west$latitude (x-axis), west$pm25 (y-axis),<br>
| and the argument main equal to the string "West" (title). Do this now.</p>
<blockquote>
<p>plot(west$latitude,west$pm25,main="West")</p>
</blockquote>
<p><img src="../images/r0040450.png" alt="graph" title="graph"></p>
<p>| You are really on a roll!</p>
<p>|==========================================================================         |  89%<br>
| For the second scatterplot, on the right, we'll plot the latitudes and pm25 counts from<br>
| the east.</p>
<p>...</p>
<p>|===========================================================================        |  91%<br>
| As before, use the up arrow key and change the 3 "West" strings to "East".</p>
<blockquote>
<p>plot(east$latitude,east$pm25,main="East")</p>
</blockquote>
<p><img src="../images/r0040460.png" alt="graph" title="graph"></p>
<p>| You're the best!</p>
<p>|============================================================================       |  92%<br>
| See how R took care of all the details for you? Nice, right? It looks like there are more<br>
| dirty counties in the east but the extreme dirt (greater than 15) is in the west.</p>
<p>...</p>
<p>|=============================================================================      |  93%<br>
| Let's summarize and review.</p>
<p>...</p>
<p>|===============================================================================    |  95%<br>
| Which of the following characterizes exploratory plots?</p>
<p>1: quick and dead<br>
2: slow and clean<br>
3: quick and dirty<br>
4: slow and steady</p>
<p>Selection: 3</p>
<p>| That's the answer I was looking for.</p>
<p>|================================================================================   |  96%<br>
| True or false? Plots let you summarize the data (usually graphically) and highlight any<br>
| broad features</p>
<p>1: False<br>
2: True</p>
<p>Selection: 2</p>
<p>| You are amazing!</p>
<p>|=================================================================================  |  97%<br>
| Which of the following do plots NOT do?</p>
<p>1: Explore basic questions and hypotheses (and perhaps rule them out)<br>
2: Conclude that you are ALWAYS right<br>
3: Suggest modeling strategies for the "next step"<br>
4: Summarize the data (usually graphically) and highlight any broad features</p>
<p>Selection: 2</p>
<p>| That's a job well done!</p>
<p>|================================================================================== |  99%<br>
| Congrats! You've concluded exploring this lesson on graphics. We hope you didn't find it<br>
| too quick or dirty.</p>
<p>...</p>
<p>|===================================================================================| 100%<br>
| Would you like to receive credit for completing this course on Coursera.org?</p>
<p>1: Yes<br>
2: No</p>
<p>Selection: 2</p>
<p>| Excellent job!</p>
<p>| You've reached the end of this lesson! Returning to the main menu...</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Exploratory Data Analysis<br>
2: Take me to the swirl course repository!</p>
<p>Selection: 0</p>
<p>| Leaving swirl now. Type swirl() to resume.</p>
<blockquote>
<p>rm(list=ls())</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Last updated 2020-05-02 19:17:35.849963 IST</em></p>

</div>
</div>
</div>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="00419/" class="u-url">Principles of Analytic Graphs</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Krishnakanth Allika
            </span></p>
            <p class="dateline">
            <a href="00419/" rel="bookmark">
            <time class="published dt-published" datetime="2020-05-02T16:38:15+05:30" itemprop="datePublished" title="2020-05-02 16:38">2020-05-02 16:38</time></a>
            </p>
                <p class="commentline">
        
<a href="%7Blink%7D" onclick="this.href='/posts/00419/'; this.target='_self';"><span class="IDCommentsReplace" style="display:none">cache/posts/00419_Principles of Analytic Graphs.html</span>
<script>
var idcomments_acct = '7fae5836cfdd49cac599cac5b95695d1';
var idcomments_post_id = "cache/posts/00419_Principles of Analytic Graphs.html";
var idcomments_post_url = "/posts/00419/";
</script><script src="https://www.intensedebate.com/js/genericLinkWrapperV2.js"></script></a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>R version 4.0.0 (2020-04-24) -- "Arbor Day"<br>
Copyright (C) 2020 The R Foundation for Statistical Computing<br>
Platform: x86_64-w64-mingw32/x64 (64-bit)</p>
<p>R is free software and comes with ABSOLUTELY NO WARRANTY.<br>
You are welcome to redistribute it under certain conditions.<br>
Type 'license()' or 'licence()' for distribution details.</p>
<p>R is a collaborative project with many contributors.<br>
Type 'contributors()' for more information and<br>
'citation()' on how to cite R or R packages in publications.</p>
<p>Type 'demo()' for some demos, 'help()' for on-line help, or<br>
'help.start()' for an HTML browser interface to help.<br>
Type 'q()' to quit R.</p>
<p>[Workspace loaded from C:/Users/kk/PortableApps/Git/home/k-allika/repos/DataScienceWithR/.RData]</p>
<blockquote>
<p>setwd("C:/Users/kk/PortableApps/Git/home/k-allika/repos/DataScienceWithR/04_Exploratory_Data_Analysis/week01/workspace")<br>
library(swirl)</p>
</blockquote>
<p>| Hi! I see that you have some variables saved in your workspace. To keep things running<br>
| smoothly, I recommend you clean up before starting swirl.</p>
<p>| Type ls() to see a list of the variables in your workspace. Then, type rm(list=ls()) to<br>
| clear your workspace.</p>
<p>| Type swirl() when you are ready to begin.</p>
<blockquote>
<p>swirl()</p>
</blockquote>
<p>| Welcome to swirl! Please sign in. If you've been here before, use the same name as you did<br>
| then. If you are new, call yourself something unique.</p>
<p>What shall I call you? Krishnakanth Allika</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Exploratory Data Analysis<br>
2: Getting and Cleaning Data<br>
3: R Programming<br>
4: Take me to the swirl course repository!</p>
<p>Selection: 1</p>
<p>| Please choose a lesson, or type 0 to return to course menu.</p>
<p>1: Principles of Analytic Graphs   2: Exploratory Graphs<br>
 3: Graphics Devices in R           4: Plotting Systems<br>
 5: Base Plotting System            6: Lattice Plotting System<br>
 7: Working with Colors             8: GGPlot2 Part1<br>
 9: GGPlot2 Part2                  10: GGPlot2 Extras<br>
11: Hierarchical Clustering        12: K Means Clustering<br>
13: Dimension Reduction            14: Clustering Example<br>
15: CaseStudy</p>
<p>Selection: 1</p>
<p>| Attempting to load lesson dependencies...</p>
<p>| Package ‘jpeg’ loaded correctly!</p>
<p>|                                                                                   |   0%</p>
<p>| Principles_of_Analytic_Graphs. (Slides for this and other Data Science courses may be<br>
| found at github <a href="https://github.com/DataScienceSpecialization/courses/">https://github.com/DataScienceSpecialization/courses/</a>. If you care to use<br>
| them, they must be downloaded as a zip file and viewed locally. This lesson corresponds to<br>
| 04_ExploratoryAnalysis/Principles_of_Analytic_Graphics.)</p>
<p>...</p>
<p>|==                                                                                 |   3%<br>
| In this lesson, we'll discuss some basic principles of presenting data effectively. These<br>
| will illustrate some fundamental concepts of displaying results in order to make them more<br>
| meaningful and convincing. These principles are cribbed from Edward Tufte's great 2006<br>
| book, Beautiful Evidence. You can read more about them at the www.edwardtufte.com website.</p>
<p>...</p>
<p>|=====                                                                              |   6%<br>
| As a warm-up, which of the following would NOT be a good use of analytic graphing?</p>
<p>1: To show causality, mechanism, explanation<br>
2: To show multivariate data<br>
3: To decide which horse to bet on at the track<br>
4: To show comparisons</p>
<p>Selection: 3</p>
<p>| Keep up the great work!</p>
<p>|=======                                                                            |   8%<br>
| You're ready to start. Graphs give us a visual form of data, and the first principle of<br>
| analytic graphs is to show some comparison. You'll hear more about this when you study<br>
| statistical inference (another great course BTW), but evidence for a hypothesis is always<br>
| relative to another competing or alternative hypothesis.</p>
<p>...</p>
<p>|=========                                                                          |  11%<br>
| When presented with a claim that something is good, you should always ask "Compared to<br>
| What?" This is why in commercials you often hear the phrase "other leading brands". An<br>
| implicit comparison, right?</p>
<p>...</p>
<p>|============                                                                       |  14%<br>
| Consider this boxplot which shows the relationship between the use of an air cleaner and<br>
| the number of symptom-free days of asthmatic children. (The top and bottom lines of the<br>
| box indicate the 25% and 75% quartiles of the data, and the horizontal line in the box<br>
| shows the 50%.) Since the box is above 0, the number of symptom-free days for children<br>
| with asthma is bigger using the air cleaner. This is good, right?</p>
<p>...</p>
<p><img src="../images/r0040230.png" alt="graph" title="graph"></p>
<p>|==============                                                                     |  17%<br>
| How many days of improvement does the median correspond to?</p>
<p>1: 4<br>
2: -2<br>
3: 1<br>
4: 12</p>
<p>Selection: 3</p>
<p>| That's correct!</p>
<p>|================                                                                   |  19%<br>
| While it's somewhat informative, it's also somewhat cryptic, since the y-axis is claiming<br>
| to show a change in number of symptom-free days. Wouldn't it be better to show a<br>
| comparison?</p>
<p>...</p>
<p>|==================                                                                 |  22%<br>
| Like this? Here's a graphic which shows two boxplots, the one on the left showing the<br>
| results for a control group that doesn't use an air cleaner alongside the previously shown<br>
| boxplot.</p>
<p>...</p>
<p>|=====================                                                              |  25%<br>
| By showing the two boxplots side by side, you can clearly see that using the air cleaner<br>
| increases the number of symptom-free days for most asthmatic children. The plot on the<br>
| right (using the air cleaner) is generally higher than the one on the left (the control<br>
| group).</p>
<p>...</p>
<p><img src="../images/r0040240.png" alt="graph" title="graph"></p>
<p>|=======================                                                            |  28%<br>
| What does this graph NOT show you?</p>
<p>1: Half the chidren in the control group had no improvement<br>
2: Children in the control group had at most 3 symptom-free days<br>
3: 75% of the children using the air cleaner had at most 3 symptom-free days<br>
4: Using the air cleaner makes asthmatic children sicker</p>
<p>Selection: 4</p>
<p>| You're the best!</p>
<p>|=========================                                                          |  31%<br>
| So the first principle was to show a comparison. The second principle is to show causality<br>
| or a mechanism of how your theory of the data works. This explanation or systematic<br>
| structure shows your causal framework for thinking about the question you're trying to<br>
| answer.</p>
<p>...</p>
<p>|============================                                                       |  33%<br>
| Consider this plot which shows the dual boxplot we just showed, but next to it we have a<br>
| corresponding plot of changes in measures of particulate matter.</p>
<p>...</p>
<p><img src="../images/r0040250.png" alt="graph" title="graph"></p>
<p>|==============================                                                     |  36%<br>
| This picture tries to explain how the air cleaner increases the number of symptom-free<br>
| days for asthmatic children. What mechanism does the graph imply?</p>
<p>1: That the air cleaner increases pollution<br>
2: That the air cleaner reduces pollution<br>
3: That the children in the control group are healthier<br>
4: That the air in the control group is cleaner than the air in the other group</p>
<p>Selection: 2</p>
<p>| You are amazing!</p>
<p>|================================                                                   |  39%<br>
| By showing the two sets of boxplots side by side you're explaining your theory of why the<br>
| air cleaner increases the number of symptom-free days. Onward!</p>
<p>...</p>
<p>|===================================                                                |  42%<br>
| So the first principle was to show some comparison, the second was to show a mechanism, so<br>
| what will the third principle say to show?</p>
<p>...</p>
<p>|=====================================                                              |  44%<br>
| Multivariate data!</p>
<p>...</p>
<p>|=======================================                                            |  47%<br>
| What is multivariate data you might ask? In technical (scientific) literature this term<br>
| means more than 2 variables. Two-variable plots are what you saw in high school algebra.<br>
| Remember those x,y plots when you were learning about slopes and intercepts and equations<br>
| of lines? They're valuable, but usually questions are more complicated and require more<br>
| variables.</p>
<p>...</p>
<p>|==========================================                                         |  50%<br>
| Sometimes, if you restrict yourself to two variables you'll be misled and draw an<br>
| incorrect conclusion.</p>
<p>...</p>
<p>|============================================                                       |  53%<br>
| Consider this plot which shows the relationship between air pollution (x-axis) and<br>
| mortality rates among the elderly (y-axis). The blue regression line shows a surprising<br>
| result. (You'll learn about regression lines when you take the fabulous Regression Models<br>
| course.)</p>
<p>...</p>
<p><img src="../images/r0040260.png" alt="graph" title="graph"></p>
<p>|==============================================                                     |  56%<br>
| What does the blue regression line indicate?</p>
<p>1: Pollution doesn't really increase, it just gets reported more<br>
2: As pollution increases fewer people die<br>
3: As pollution increases the number of deaths doesn't change<br>
4: As pollution increases more people die</p>
<p>Selection: 2</p>
<p>| Excellent job!</p>
<p>|================================================                                   |  58%<br>
| Fewer deaths with more pollution? That's a surprise! Something's gotta be wrong, right? In<br>
| fact, this is an example of Simpson's paradox, or the Yule–Simpson effect. Wikipedia<br>
| (<a href="http://en.wikipedia.org/wiki/Simpson%27s_paradox">http://en.wikipedia.org/wiki/Simpson%27s_paradox</a>) tells us that this "is a paradox in<br>
| probability and statistics, in which a trend that appears in different groups of data<br>
| disappears when these groups are combined."</p>
<p>...</p>
<p>|===================================================                                |  61%<br>
| Suppose we divided this mortality/pollution data into the four seasons. Would we see<br>
| different trends?</p>
<p>...</p>
<p>|=====================================================                              |  64%<br>
| Yes, we do! Plotting the same data for the 4 seasons individually we see a different<br>
| result.</p>
<p>...</p>
<p><img src="../images/r0040270.png" alt="graph" title="graph"></p>
<p>|=======================================================                            |  67%<br>
| What does the new plot indicate?</p>
<p>1: Pollution doesn't really increase, it just gets reported more<br>
2: As pollution increases the seasons change<br>
3: As pollution increases more people die in all seasons<br>
4: As pollution increases fewer people die in all seasons</p>
<p>Selection: 3</p>
<p>| That's correct!</p>
<p>|==========================================================                         |  69%<br>
| The fourth principle of analytic graphing involves integrating evidence. This means not<br>
| limiting yourself to one form of expression. You can use words, numbers, images as well as<br>
| diagrams. Graphics should make use of many modes of data presentation. Remember, "Don't<br>
| let the tool drive the analysis!"</p>
<p>...</p>
<p>|============================================================                       |  72%<br>
| To show you what we mean, here's an example of a figure taken from a paper published in<br>
| the Journal of the AMA. It shows the relationship between pollution and hospitalization of<br>
| people with heart disease. As you can see, it's a lot different from our previous plots.<br>
| The solid circles in the center portion indicate point estimates of percentage changes in<br>
| hospitalization rates for different levels of pollution. The lines through the circles<br>
| indicate confidence intervals associated with these estimates. (You'll learn more about<br>
| confidence intervals in another great course, the one on statistical inference.)</p>
<p><img src="../images/r0040280.png" alt="graph" title="graph"><br>
...</p>
<p>|==============================================================                     |  75%<br>
| Note that on the right side of the figure is another column of numbers, one for each of<br>
| the point estimates given. This column shows posterior probabilities that relative risk is<br>
| greater than 0. This, in effect, is a measure of the strength of the evidence showing the<br>
| correlation between pollution and hospitalization.  The point here is that all of this<br>
| information is located in one picture so that the reader can see the strength of not only<br>
| the correlations but the evidence as well.</p>
<p>...</p>
<p>|=================================================================                  |  78%<br>
| The fifth principle of graphing involves describing and documenting the evidence with<br>
| sources and appropriate labels and scales. Credibility is important so the data graphics<br>
| should tell a complete story. Also, using R, you want to preserve any code you use to<br>
| generate your data and graphics so that the research can be replicated if necessary. This<br>
| allows for easy verification or finding bugs in your analysis.</p>
<p>...</p>
<p>|===================================================================                |  81%<br>
| The sixth and final principle of analytic graphing is maybe the most important. Content is<br>
| king! If you don't have something interesting to report, your graphs won't save you.<br>
| Analytical presentations ultimately stand or fall depending on the quality, relevance, and<br>
| integrity of their content.</p>
<p>...</p>
<p>|=====================================================================              |  83%<br>
| Review time!!!</p>
<p>...</p>
<p>|=======================================================================            |  86%<br>
| Which of the following is NOT a good principle of graphing?</p>
<p>1: To integrate multiple modes of evidence<br>
2: Having unreadable labels<br>
3: To describe and document evidence<br>
4: Content is king</p>
<p>Selection: 2</p>
<p>| You are really on a roll!</p>
<p>|==========================================================================         |  89%<br>
| Which of the following is NOT a good principle of graphing?</p>
<p>1: To prove you're always right<br>
2: To show two competing hypotheses<br>
3: To demonstrate a causative mechanism underlying a correlation<br>
4: Content is king</p>
<p>Selection: 1</p>
<p>| You nailed it! Good job!</p>
<p>|============================================================================       |  92%<br>
| Which of the following is NOT a good principle of graphing?</p>
<p>1: To integrate different types of evidence<br>
2: To show that some fonts are better than others<br>
3: To show good labels and scales<br>
4: Content is king</p>
<p>Selection: 2</p>
<p>| That's the answer I was looking for.</p>
<p>|==============================================================================     |  94%<br>
| True or False? Color is king.</p>
<p>1: False<br>
2: True</p>
<p>Selection: 2</p>
<p>| Not quite, but you're learning! Try again.</p>
<p>| Think of the sixth principle</p>
<p>1: True<br>
2: False</p>
<p>Selection: 2</p>
<p>| You are doing so well!</p>
<p>|=================================================================================  |  97%<br>
| Congrats! You've concluded exploring this lesson on principles of graphing. We hope you<br>
| found it principally principled.</p>
<p>...</p>
<p>|===================================================================================| 100%<br>
| Would you like to receive credit for completing this course on Coursera.org?</p>
<p>1: No<br>
2: Yes</p>
<p>Selection: 1</p>
<p>| Nice work!</p>
<p>| You've reached the end of this lesson! Returning to the main menu...</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Exploratory Data Analysis<br>
2: Getting and Cleaning Data<br>
3: R Programming<br>
4: Take me to the swirl course repository!</p>
<p>Selection: 0</p>
<p>| Leaving swirl now. Type swirl() to resume.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Last updated 2020-05-02 16:41:08.783416 IST</em></p>

</div>
</div>
</div>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="00418/" class="u-url">Tidying Data with tidyr</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Krishnakanth Allika
            </span></p>
            <p class="dateline">
            <a href="00418/" rel="bookmark">
            <time class="published dt-published" datetime="2020-04-23T21:03:03+05:30" itemprop="datePublished" title="2020-04-23 21:03">2020-04-23 21:03</time></a>
            </p>
                <p class="commentline">
        
<a href="%7Blink%7D" onclick="this.href='/posts/00418/'; this.target='_self';"><span class="IDCommentsReplace" style="display:none">cache/posts/00418_Tidying Data with tidyr.html</span>
<script>
var idcomments_acct = '7fae5836cfdd49cac599cac5b95695d1';
var idcomments_post_id = "cache/posts/00418_Tidying Data with tidyr.html";
var idcomments_post_url = "/posts/00418/";
</script><script src="https://www.intensedebate.com/js/genericLinkWrapperV2.js"></script></a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote>
<p>swirl()</p>
</blockquote>
<p>| Welcome to swirl! Please sign in. If you've been here before, use the same name as you
| did then. If you are new, call yourself something unique.</p>
<p>What shall I call you? Krishnakanth Allika</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Getting and Cleaning Data<br>
2: R Programming<br>
3: Take me to the swirl course repository!</p>
<p>Selection: 1</p>
<p>| Please choose a lesson, or type 0 to return to course menu.</p>
<p>1: Manipulating Data with dplyr<br>
2: Grouping and Chaining with dplyr<br>
3: Tidying Data with tidyr<br>
4: Dates and Times with lubridate</p>
<p>Selection: 3</p>
<p>| Attempting to load lesson dependencies...</p>
<p>| This lesson requires the ‘readr’ package. Would you like me to install it for you now?</p>
<p>1: Yes<br>
2: No</p>
<p>Selection: 1</p>
<p>| Trying to install package ‘readr’ now...<br>
also installing the dependencies ‘hms’, ‘clipr’</p>
<p>package ‘hms’ successfully unpacked and MD5 sums checked<br>
package ‘clipr’ successfully unpacked and MD5 sums checked<br>
package ‘readr’ successfully unpacked and MD5 sums checked</p>
<p>| Package ‘readr’ loaded correctly!</p>
<p>| This lesson requires the ‘tidyr’ package. Would you like me to install it for you now?</p>
<p>1: Yes<br>
2: No</p>
<p>Selection: 1</p>
<p>| Trying to install package ‘tidyr’ now...<br>
package ‘tidyr’ successfully unpacked and MD5 sums checked</p>
<p>| Package ‘tidyr’ loaded correctly!</p>
<p>| Package ‘dplyr’ loaded correctly!</p>
<p>|                                                                                |   0%</p>
<p>| In this lesson, you'll learn how to tidy your data with the tidyr package.</p>
<p>...</p>
<p>|=                                                                               |   2%<br>
| Parts of this lesson will require the use of dplyr. If you don't have a basic knowledge<br>
| of dplyr, you should exit this lesson and begin with the dplyr lessons from earlier in<br>
| the course.</p>
<p>...</p>
<p>|===                                                                             |   4%<br>
| tidyr was automatically installed (if necessary) and loaded when you started this<br>
| lesson. Just to build the habit, (re)load the package with library(tidyr).</p>
<blockquote>
<p>library(tidyr)</p>
</blockquote>
<p>| That's a job well done!</p>
<p>|====                                                                            |   5%<br>
| The author of tidyr, Hadley Wickham, discusses his philosophy of tidy data in his 'Tidy<br>
| Data' paper:<br>
|<br>
| <a href="http://vita.had.co.nz/papers/tidy-data.pdf">http://vita.had.co.nz/papers/tidy-data.pdf</a><br>
|<br>
| This paper should be required reading for anyone who works with data, but it's not<br>
| required in order to complete this lesson.</p>
<p>...</p>
<p>|======                                                                          |   7%<br>
| Tidy data is formatted in a standard way that facilitates exploration and analysis and<br>
| works seamlessly with other tidy data tools. Specifically, tidy data satisfies three<br>
| conditions:<br>
|<br>
| 1) Each variable forms a column<br>
|<br>
| 2) Each observation forms a row<br>
|<br>
| 3) Each type of observational unit forms a table</p>
<p>...</p>
<p>|=======                                                                         |   9%<br>
| Any dataset that doesn't satisfy these conditions is considered 'messy' data.<br>
| Therefore, all of the following are characteristics of messy data, EXCEPT...</p>
<p>1: Variables are stored in both rows and columns<br>
2: Column headers are values, not variable names<br>
3: Every column contains a different variable<br>
4: Multiple types of observational units are stored in the same table<br>
5: Multiple variables are stored in one column<br>
6: A single observational unit is stored in multiple tables</p>
<p>Selection: 3</p>
<p>| Keep up the great work!</p>
<p>|=========                                                                       |  11%<br>
| The incorrect answers to the previous question are the most common symptoms of messy<br>
| data. Let's work through a simple example of each of these five cases, then tidy some<br>
| real data.</p>
<p>...</p>
<p>|==========                                                                      |  13%<br>
| The first problem is when you have column headers that are values, not variable names.<br>
| I've created a simple dataset called 'students' that demonstrates this scenario. Type<br>
| students to take a look.</p>
<blockquote>
<p>play()</p>
</blockquote>
<p>| Entering play mode. Experiment as you please, then type nxt() when you are ready to<br>
| resume the lesson.</p>
<blockquote>
<p>download.file("<a href="http://vita.had.co.nz/papers/tidy-data.pdf%22,%22tidy-data.pdf">http://vita.had.co.nz/papers/tidy-data.pdf","tidy-data.pdf</a>")<br>
trying URL '<a href="http://vita.had.co.nz/papers/tidy-data.pdf">http://vita.had.co.nz/papers/tidy-data.pdf</a>'<br>
Content type 'application/pdf' length 360450 bytes (352 KB)<br>
downloaded 352 KB</p>
<p>nxt()</p>
</blockquote>
<p>| Resuming lesson...</p>
<p>| The first problem is when you have column headers that are values, not variable names.<br>
| I've created a simple dataset called 'students' that demonstrates this scenario. Type<br>
| students to take a look.</p>
<blockquote>
<p>students<br>
  grade male female<br>
1     A    5      3<br>
2     B    4      1<br>
3     C    8      6<br>
4     D    4      5<br>
5     E    5      5</p>
</blockquote>
<p>| That's a job well done!</p>
<p>|============                                                                    |  15%<br>
| The first column represents each of five possible grades that students could receive<br>
| for a particular class. The second and third columns give the number of male and female<br>
| students, respectively, that received each grade.</p>
<p>...</p>
<p>|=============                                                                   |  16%<br>
| This dataset actually has three variables: grade, sex, and count. The first variable,<br>
| grade, is already a column, so that should remain as it is. The second variable, sex,<br>
| is captured by the second and third column headings. The third variable, count, is the<br>
| number of students for each combination of grade and sex.</p>
<p>...</p>
<p>|===============                                                                 |  18%<br>
| To tidy the students data, we need to have one column for each of these three<br>
| variables. We'll use the gather() function from tidyr to accomplish this. Pull up the<br>
| documentation for this function with ?gather.</p>
<blockquote>
<p>?gather</p>
</blockquote>
<p>| Nice work!</p>
<p>|================                                                                |  20%<br>
| Using the help file as a guide, call gather() with the following arguments (in order):<br>
| students, sex, count, -grade. Note the minus sign before grade, which says we want to<br>
| gather all columns EXCEPT grade.</p>
<blockquote>
<p>gather(students,sex,count,-grade)<br>
   grade    sex count<br>
1      A   male     5<br>
2      B   male     4<br>
3      C   male     8<br>
4      D   male     4<br>
5      E   male     5<br>
6      A female     3<br>
7      B female     1<br>
8      C female     6<br>
9      D female     5<br>
10     E female     5</p>
</blockquote>
<p>| All that hard work is paying off!</p>
<p>|=================                                                               |  22%<br>
| Each row of the data now represents exactly one observation, characterized by a unique<br>
| combination of the grade and sex variables. Each of our variables (grade, sex, and<br>
| count) occupies exactly one column. That's tidy data!</p>
<p>...</p>
<p>|===================                                                             |  24%<br>
| It's important to understand what each argument to gather() means. The data argument,<br>
| students, gives the name of the original dataset. The key and value arguments -- sex<br>
| and count, respectively -- give the column names for our tidy dataset. The final<br>
| argument, -grade, says that we want to gather all columns EXCEPT the grade column<br>
| (since grade is already a proper column variable.)</p>
<p>...</p>
<p>|====================                                                            |  25%<br>
| The second messy data case we'll look at is when multiple variables are stored in one<br>
| column. Type students2 to see an example of this.</p>
<blockquote>
<p>students2<br>
  grade male_1 female_1 male_2 female_2<br>
1     A      7        0      5        8<br>
2     B      4        0      5        8<br>
3     C      7        4      5        6<br>
4     D      8        2      8        1<br>
5     E      8        4      1        0</p>
</blockquote>
<p>| Excellent work!</p>
<p>|======================                                                          |  27%<br>
| This dataset is similar to the first, except now there are two separate classes, 1 and<br>
| 2, and we have total counts for each sex within each class. students2 suffers from the<br>
| same messy data problem of having column headers that are values (male_1, female_1,<br>
| etc.) and not variable names (sex, class, and count).</p>
<p>...</p>
<p>|=======================                                                         |  29%<br>
| However, it also has multiple variables stored in each column (sex and class), which is<br>
| another common symptom of messy data. Tidying this dataset will be a two step process.</p>
<p>...</p>
<p>|=========================                                                       |  31%<br>
| Let's start by using gather() to stack the columns of students2, like we just did with<br>
| students. This time, name the 'key' column sex_class and the 'value' column count. Save<br>
| the result to a new variable called res. Consult ?gather again if you need help.</p>
<blockquote>
<p>res&lt;-gather(students2,sex_class,count,-grade)</p>
</blockquote>
<p>| Your dedication is inspiring!</p>
<p>|==========================                                                      |  33%<br>
| Print res to the console to see what we accomplished.</p>
<blockquote>
<p>res<br>
   grade sex_class count<br>
1      A    male_1     7<br>
2      B    male_1     4<br>
3      C    male_1     7<br>
4      D    male_1     8<br>
5      E    male_1     8<br>
6      A  female_1     0<br>
7      B  female_1     0<br>
8      C  female_1     4<br>
9      D  female_1     2<br>
10     E  female_1     4<br>
11     A    male_2     5<br>
12     B    male_2     5<br>
13     C    male_2     5<br>
14     D    male_2     8<br>
15     E    male_2     1<br>
16     A  female_2     8<br>
17     B  female_2     8<br>
18     C  female_2     6<br>
19     D  female_2     1<br>
20     E  female_2     0</p>
</blockquote>
<p>| Your dedication is inspiring!</p>
<p>|============================                                                    |  35%<br>
| That got us half way to tidy data, but we still have two different variables, sex and<br>
| class, stored together in the sex_class column. tidyr offers a convenient separate()<br>
| function for the purpose of separating one column into multiple columns. Pull up the<br>
| help file for separate() now.</p>
<blockquote>
<p>?separate</p>
</blockquote>
<p>| You got it right!</p>
<p>|=============================                                                   |  36%<br>
| Call separate() on res to split the sex_class column into sex and class. You only need<br>
| to specify the first three arguments: data = res, col = sex_class, into = c("sex",<br>
| "class"). You don't have to provide the argument names as long as they are in the<br>
| correct order.</p>
<blockquote>
<p>separate(data=res,col=sex_class,into=c("sex","class"))<br>
   grade    sex class count<br>
1      A   male     1     7<br>
2      B   male     1     4<br>
3      C   male     1     7<br>
4      D   male     1     8<br>
5      E   male     1     8<br>
6      A female     1     0<br>
7      B female     1     0<br>
8      C female     1     4<br>
9      D female     1     2<br>
10     E female     1     4<br>
11     A   male     2     5<br>
12     B   male     2     5<br>
13     C   male     2     5<br>
14     D   male     2     8<br>
15     E   male     2     1<br>
16     A female     2     8<br>
17     B female     2     8<br>
18     C female     2     6<br>
19     D female     2     1<br>
20     E female     2     0</p>
</blockquote>
<p>| You are amazing!</p>
<p>|===============================                                                 |  38%<br>
| Conveniently, separate() was able to figure out on its own how to separate the<br>
| sex_class column. Unless you request otherwise with the 'sep' argument, it splits on<br>
| non-alphanumeric values. In other words, it assumes that the values are separated by<br>
| something other than a letter or number (in this case, an underscore.)</p>
<p>...</p>
<p>|================================                                                |  40%<br>
| Tidying students2 required both gather() and separate(), causing us to save an<br>
| intermediate result (res). However, just like with dplyr, you can use the %&gt;% operator<br>
| to chain multiple function calls together.</p>
<p>...</p>
<p>|=================================                                               |  42%<br>
| I've opened an R script for you to give this a try. Follow the directions in the<br>
| script, then save the script and type submit() at the prompt when you are ready. If you<br>
| get stuck and want to start over, you can type reset() to reset the script to its<br>
| original state.</p>

<pre><code>{r}
# Repeat your calls to gather() and separate(), but this time
# use the %&gt;% operator to chain the commands together without
# storing an intermediate result.
#
# If this is your first time seeing the %&gt;% operator, check
# out ?chain, which will bring up the relevant documentation.
# You can also look at the Examples section at the bottom
# of ?gather and ?separate.
#
# The main idea is that the result to the left of %&gt;%
# takes the place of the first argument of the function to
# the right. Therefore, you OMIT THE FIRST ARGUMENT to each
# function.
#
students2 %&gt;%
  gather(sex_class ,count ,-grade ) %&gt;%
  separate(sex_class , c("sex", "class")) %&gt;%
  print</code></pre>
<blockquote>
<p>submit()</p>
</blockquote>
<p>| Sourcing your script...</p>
<p>grade    sex class count<br>
1      A   male     1     7<br>
2      B   male     1     4<br>
3      C   male     1     7<br>
4      D   male     1     8<br>
5      E   male     1     8<br>
6      A female     1     0<br>
7      B female     1     0<br>
8      C female     1     4<br>
9      D female     1     2<br>
10     E female     1     4<br>
11     A   male     2     5<br>
12     B   male     2     5<br>
13     C   male     2     5<br>
14     D   male     2     8<br>
15     E   male     2     1<br>
16     A female     2     8<br>
17     B female     2     8<br>
18     C female     2     6<br>
19     D female     2     1<br>
20     E female     2     0</p>
<p>| Excellent work!</p>
<p>|===================================                                             |  44%<br>
| A third symptom of messy data is when variables are stored in both rows and columns.<br>
| students3 provides an example of this. Print students3 to the console.</p>
<blockquote>
<p>students3<br>
    name    test class1 class2 class3 class4 class5<br>
1  Sally midterm      A   <na>      B   <na><na><br>
2  Sally   final      C   <na>      C   <na><na><br>
3   Jeff midterm   <na>      D   <na>      A   <na><br>
4   Jeff   final   <na>      E   <na>      C   <na><br>
5  Roger midterm   <na>      C   <na><na>      B<br>
6  Roger   final   <na>      A   <na><na>      A<br>
7  Karen midterm   <na><na>      C      A   <na><br>
8  Karen   final   <na><na>      C      A   <na><br>
9  Brian midterm      B   <na><na><na>      A<br>
10 Brian   final      B   <na><na><na>      C</na></na></na></na></na></na></na></na></na></na></na></na></na></na></na></na></na></na></na></na></na></na></na></na></na></na></na></na></na></na></p>
</blockquote>
<p>| You got it right!</p>
<p>|====================================                                            |  45%<br>
| In students3, we have midterm and final exam grades for five students, each of whom<br>
| were enrolled in exactly two of five possible classes.</p>
<p>...</p>
<p>|======================================                                          |  47%<br>
| The first variable, name, is already a column and should remain as it is. The headers<br>
| of the last five columns, class1 through class5, are all different values of what<br>
| should be a class variable. The values in the test column, midterm and final, should<br>
| each be its own variable containing the respective grades for each student.</p>
<p>...</p>
<p>|=======================================                                         |  49%<br>
| This will require multiple steps, which we will build up gradually using %&gt;%. Edit the<br>
| R script, save it, then type submit() when you are ready. Type reset() to reset the<br>
| script to its original state.</p>

<pre><code>{r}
# Call gather() to gather the columns class1
# through class5 into a new variable called class.
# The 'key' should be class, and the 'value'
# should be grade.
#
# tidyr makes it easy to reference multiple adjacent
# columns with class1:class5, just like with sequences
# of numbers.
#
# Since each student is only enrolled in two of
# the five possible classes, there are lots of missing
# values (i.e. NAs). Use the argument na.rm = TRUE
# to omit these values from the final result.
#
# Remember that when you're using the %&gt;% operator,
# the value to the left of it gets inserted as the
# first argument to the function on the right.
#
# Consult ?gather and/or ?chain if you get stuck.
#
students3 %&gt;%
  gather(class ,grade , class1:class5 ,na.rm = TRUE) %&gt;%
  print</code></pre>
<blockquote>
<p>submit()</p>
</blockquote>
<p>| Sourcing your script...</p>

<pre><code>name    test  class grade  
</code></pre>
<p>1  Sally midterm class1     A<br>
2  Sally   final class1     C<br>
9  Brian midterm class1     B<br>
10 Brian   final class1     B<br>
13  Jeff midterm class2     D<br>
14  Jeff   final class2     E<br>
15 Roger midterm class2     C<br>
16 Roger   final class2     A<br>
21 Sally midterm class3     B<br>
22 Sally   final class3     C<br>
27 Karen midterm class3     C<br>
28 Karen   final class3     C<br>
33  Jeff midterm class4     A<br>
34  Jeff   final class4     C<br>
37 Karen midterm class4     A<br>
38 Karen   final class4     A<br>
45 Roger midterm class5     B<br>
46 Roger   final class5     A<br>
49 Brian midterm class5     A<br>
50 Brian   final class5     C</p>
<p>| That's correct!</p>
<p>|=========================================                                       |  51%<br>
| The next step will require the use of spread(). Pull up the documentation for spread()<br>
| now.</p>
<blockquote>
<p>?spread</p>
</blockquote>
<p>| Keep working like that and you'll get there!</p>
<p>|==========================================                                      |  53%<br>
| Edit the R script, then save it and type submit() when you are ready. Type reset() to<br>
| reset the script to its original state.</p>

<pre><code>{r}
# This script builds on the previous one by appending
# a call to spread(), which will allow us to turn the
# values of the test column, midterm and final, into
# column headers (i.e. variables).
#
# You only need to specify two arguments to spread().
# Can you figure out what they are? (Hint: You don't
# have to specify the data argument since we're using
# the %&gt;% operator.
#
students3 %&gt;%
  gather(class, grade, class1:class5, na.rm = TRUE) %&gt;%
  spread( test, grade) %&gt;%
  print</code></pre>
<blockquote>
<p>submit()</p>
</blockquote>
<p>| Sourcing your script...</p>

<pre><code>name  class final midterm  
</code></pre>
<p>1  Brian class1     B       B<br>
2  Brian class5     C       A<br>
3   Jeff class2     E       D<br>
4   Jeff class4     C       A<br>
5  Karen class3     C       C<br>
6  Karen class4     A       A<br>
7  Roger class2     A       C<br>
8  Roger class5     A       B<br>
9  Sally class1     C       A<br>
10 Sally class3     C       B</p>
<p>| All that practice is paying off!</p>
<p>|============================================                                    |  55%<br>
| readr is required for certain data manipulations, such as `parse_number(), which will<br>
| be used in the next question.  Let's, (re)load the package with library(readr).</p>
<blockquote>
<p>library(readr)</p>
</blockquote>
<p>| Nice work!</p>
<p>|=============================================                                   |  56%<br>
| Lastly, we want the values in the class column to simply be 1, 2, ..., 5 and not<br>
| class1, class2, ..., class5. We can use the parse_number() function from readr to<br>
| accomplish this. To see how it works, try parse_number("class5").</p>
<blockquote>
<p>parse_number("class5")<br>
[1] 5</p>
</blockquote>
<p>| Your dedication is inspiring!</p>
<p>|===============================================                                 |  58%<br>
| Now, the final step. Edit the R script, then save it and type submit() when you are<br>
| ready. Type reset() to reset the script to its original state.</p>

<pre><code>{r}
# We want the values in the class columns to be
# 1, 2, ..., 5 and not class1, class2, ..., class5.
#
# Use the mutate() function from dplyr along with
# parse_number(). Hint: You can "overwrite" a column
# with mutate() by assigning a new value to the existing
# column instead of creating a new column.
#
# Check out ?mutate and/or ?parse_number if you need
# a refresher.
#
students3 %&gt;%
  gather(class, grade, class1:class5, na.rm = TRUE) %&gt;%
  spread(test, grade) %&gt;%
  ### Call to mutate() goes here %&gt;%
  mutate(class=parse_number(class)) %&gt;%
  print</code></pre>
<blockquote>
<p>submit()</p>
</blockquote>
<p>| Sourcing your script...</p>

<pre><code>name class final midterm  
</code></pre>
<p>1  Brian     1     B       B<br>
2  Brian     5     C       A<br>
3   Jeff     2     E       D<br>
4   Jeff     4     C       A<br>
5  Karen     3     C       C<br>
6  Karen     4     A       A<br>
7  Roger     2     A       C<br>
8  Roger     5     A       B<br>
9  Sally     1     C       A<br>
10 Sally     3     C       B</p>
<p>| You got it!</p>
<p>|================================================                                |  60%<br>
| The fourth messy data problem we'll look at occurs when multiple observational units<br>
| are stored in the same table. students4 presents an example of this. Take a look at the<br>
| data now.</p>
<blockquote>
<p>students4<br>
    id  name sex class midterm final<br>
1  168 Brian   F     1       B     B<br>
2  168 Brian   F     5       A     C<br>
3  588 Sally   M     1       A     C<br>
4  588 Sally   M     3       B     C<br>
5  710  Jeff   M     2       D     E<br>
6  710  Jeff   M     4       A     C<br>
7  731 Roger   F     2       C     A<br>
8  731 Roger   F     5       B     A<br>
9  908 Karen   M     3       C     C<br>
10 908 Karen   M     4       A     A</p>
</blockquote>
<p>| You are doing so well!</p>
<p>|=================================================                               |  62%<br>
| students4 is almost the same as our tidy version of students3. The only difference is<br>
| that students4 provides a unique id for each student, as well as his or her sex (M =<br>
| male; F = female).</p>
<p>...</p>
<p>|===================================================                             |  64%<br>
| At first glance, there doesn't seem to be much of a problem with students4. All columns<br>
| are variables and all rows are observations. However, notice that each id, name, and<br>
| sex is repeated twice, which seems quite redundant. This is a hint that our data<br>
| contains multiple observational units in a single table.</p>
<p>...</p>
<p>|====================================================                            |  65%<br>
| Our solution will be to break students4 into two separate tables -- one containing<br>
| basic student information (id, name, and sex) and the other containing grades (id,<br>
| class, midterm, final).<br>
|<br>
| Edit the R script, save it, then type submit() when you are ready. Type reset() to<br>
| reset the script to its original state.</p>

<pre><code>{r}
# Complete the chained command below so that we are
# selecting the id, name, and sex column from students4
# and storing the result in student_info.
#
student_info &lt;- students4 %&gt;%
  select(id ,name ,sex ) %&gt;%
  print</code></pre>
<blockquote>
<p>submit()</p>
</blockquote>
<p>| Sourcing your script...</p>

<pre><code>id  name sex  
</code></pre>
<p>1  168 Brian   F<br>
2  168 Brian   F<br>
3  588 Sally   M<br>
4  588 Sally   M<br>
5  710  Jeff   M<br>
6  710  Jeff   M<br>
7  731 Roger   F<br>
8  731 Roger   F<br>
9  908 Karen   M<br>
10 908 Karen   M</p>
<p>| You are amazing!</p>
<p>|======================================================                          |  67%<br>
| Notice anything strange about student_info? It contains five duplicate rows! See the<br>
| script for directions on how to fix this. Save the script and type submit() when you<br>
| are ready, or type reset() to reset the script to its original state.</p>

<pre><code>{r}
# Add a call to unique() below, which will remove
# duplicate rows from student_info.
#
# Like with the call to the print() function below,
# you can omit the parentheses after the function name.
# This is a nice feature of %&gt;% that applies when
# there are no additional arguments to specify.
#
student_info &lt;- students4 %&gt;%
  select(id, name, sex) %&gt;%
  ### Your code here %&gt;%
  unique() %&gt;%
  print</code></pre>
<blockquote>
<p>submit()</p>
</blockquote>
<p>| Sourcing your script...</p>
<p>id  name sex<br>
1 168 Brian   F<br>
3 588 Sally   M<br>
5 710  Jeff   M<br>
7 731 Roger   F<br>
9 908 Karen   M</p>
<p>| Excellent job!</p>
<p>|=======================================================                         |  69%<br>
| Now, using the script I just opened for you, create a second table called gradebook<br>
| using the id, class, midterm, and final columns (in that order).<br>
|<br>
| Edit the R script, save it, then type submit() when you are ready. Type reset() to<br>
| reset the script to its original state.</p>

<pre><code>{r}
# select() the id, class, midterm, and final columns
# (in that order) and store the result in gradebook.
#
gradebook &lt;- students4 %&gt;%
  ### Your code here %&gt;%
  select(id,class,midterm,final) %&gt;%
  print</code></pre>
<blockquote>
<p>submit()</p>
</blockquote>
<p>| Sourcing your script...</p>

<pre><code>id class midterm final  
</code></pre>
<p>1  168     1       B     B<br>
2  168     5       A     C<br>
3  588     1       A     C<br>
4  588     3       B     C<br>
5  710     2       D     E<br>
6  710     4       A     C<br>
7  731     2       C     A<br>
8  731     5       B     A<br>
9  908     3       C     C<br>
10 908     4       A     A</p>
<p>| You are quite good my friend!</p>
<p>|=========================================================                       |  71%<br>
| It's important to note that we left the id column in both tables. In the world of<br>
| relational databases, 'id' is called our 'primary key' since it allows us to connect<br>
| each student listed in student_info with their grades listed in gradebook. Without a<br>
| unique identifier, we might not know how the tables are related. (In this case, we<br>
| could have also used the name variable, since each student happens to have a unique<br>
| name.)</p>
<p>...</p>
<p>|==========================================================                      |  73%<br>
| The fifth and final messy data scenario that we'll address is when a single<br>
| observational unit is stored in multiple tables. It's the opposite of the fourth<br>
| problem.</p>
<p>...</p>
<p>|============================================================                    |  75%<br>
| To illustrate this, we've created two datasets, passed and failed. Take a look at<br>
| passed now.</p>
<blockquote>
<p>passed<br>
   name class final<br>
1 Brian     1     B<br>
2 Roger     2     A<br>
3 Roger     5     A<br>
4 Karen     4     A</p>
</blockquote>
<p>| All that hard work is paying off!</p>
<p>|=============================================================                   |  76%<br>
| Now view the contents of failed.</p>
<blockquote>
<p>failed<br>
   name class final<br>
1 Brian     5     C<br>
2 Sally     1     C<br>
3 Sally     3     C<br>
4  Jeff     2     E<br>
5  Jeff     4     C<br>
6 Karen     3     C</p>
</blockquote>
<p>| Your dedication is inspiring!</p>
<p>|===============================================================                 |  78%<br>
| Teachers decided to only take into consideration final exam grades in determining<br>
| whether students passed or failed each class. As you may have inferred from the data,<br>
| students passed a class if they received a final exam grade of A or B and failed<br>
| otherwise.</p>
<p>...</p>
<p>|================================================================                |  80%<br>
| The name of each dataset actually represents the value of a new variable that we will<br>
| call 'status'. Before joining the two tables together, we'll add a new column to each<br>
| containing this information so that it's not lost when we put everything together.</p>
<p>...</p>
<p>|=================================================================               |  82%<br>
| Use dplyr's mutate() to add a new column to the passed table. The column should be<br>
| called status and the value, "passed" (a character string), should be the same for all<br>
| students. 'Overwrite' the current version of passed with the new one.</p>
<blockquote>
<p>passed&lt;-mutate(passed,status="passed")</p>
</blockquote>
<p>| That's a job well done!</p>
<p>|===================================================================             |  84%<br>
| Now, do the same for the failed table, except the status column should have the value<br>
| "failed" for all students.</p>
<blockquote>
<p>failed&lt;-mutate(failed,status="failed")</p>
</blockquote>
<p>| Perseverance, that's the answer.</p>
<p>|====================================================================            |  85%<br>
| Now, pass as arguments the passed and failed tables (in order) to the dplyr function<br>
| bind_rows(), which will join them together into a single unit. Check ?bind_rows if you<br>
| need help.<br>
|<br>
| Note: bind_rows() is only available in dplyr 0.4.0 or later. If you have an older<br>
| version of dplyr, please quit the lesson, update dplyr, then restart the lesson where<br>
| you left off. If you're not sure what version of dplyr you have, type<br>
| packageVersion('dplyr').</p>
<blockquote>
<p>bind_rows(passed,failed)<br>
    name class final status<br>
1  Brian     1     B passed<br>
2  Roger     2     A passed<br>
3  Roger     5     A passed<br>
4  Karen     4     A passed<br>
5  Brian     5     C failed<br>
6  Sally     1     C failed<br>
7  Sally     3     C failed<br>
8   Jeff     2     E failed<br>
9   Jeff     4     C failed<br>
10 Karen     3     C failed</p>
</blockquote>
<p>| You nailed it! Good job!</p>
<p>|======================================================================          |  87%<br>
| Of course, we could arrange the rows however we wish at this point, but the important<br>
| thing is that each row is an observation, each column is a variable, and the table<br>
| contains a single observational unit. Thus, the data are tidy.</p>
<p>...</p>
<p>|=======================================================================         |  89%<br>
| We've covered a lot in this lesson. Let's bring everything together and tidy a real<br>
| dataset.</p>
<p>...</p>
<p>|=========================================================================       |  91%<br>
| The SAT is a popular college-readiness exam in the United States that consists of three<br>
| sections: critical reading, mathematics, and writing. Students can earn up to 800<br>
| points on each section. This dataset presents the total number of students, for each<br>
| combination of exam section and sex, within each of six score ranges. It comes from the<br>
| 'Total Group Report 2013', which can be found here:<br>
|<br>
| <a href="http://research.collegeboard.org/programs/sat/data/cb-seniors-2013">http://research.collegeboard.org/programs/sat/data/cb-seniors-2013</a></p>
<p>...</p>
<p>|==========================================================================      |  93%<br>
| I've created a variable called 'sat' in your workspace, which contains data on all<br>
| college-bound seniors who took the SAT exam in 2013. Print the dataset now.</p>
<blockquote>
<p>sat<br>
# A tibble: 6 x 10<br>
  score_range read_male read_fem read_total math_male math_fem math_total write_male<br><chr><int><int><int><int><int><int><int><br>
1 700-800         40151    38898      79049     74461    46040     120501      31574<br>
2 600-690        121950   126084     248034    162564   133954     296518     100963<br>
3 500-590        227141   259553     486694    233141   257678     490819     202326<br>
4 400-490        242554   296793     539347    204670   288696     493366     262623<br>
5 300-390        113568   133473     247041     82468   131025     213493     146106<br>
6 200-290         30728    29154      59882     18788    26562      45350      32500<br>
# ... with 2 more variables: write_fem <int>, write_total <int></int></int></int></int></int></int></int></int></int></chr></p>
</blockquote>
<p>| That's a job well done!</p>
<p>|============================================================================    |  95%<br>
| As we've done before, we'll build up a series of chained commands, using functions from<br>
| both tidyr and dplyr. Edit the R script, save it, then type submit() when you are<br>
| ready. Type reset() to reset the script to its original state.</p>

<pre><code>{r}
# Accomplish the following three goals:
#
# 1. select() all columns that do NOT contain the word "total",
# since if we have the male and female data, we can always
# recreate the total count in a separate column, if we want it.
# Hint: Use the contains() function, which you'll
# find detailed in 'Special functions' section of ?select.
#
# 2. gather() all columns EXCEPT score_range, using
# key = part_sex and value = count.
#
# 3. separate() part_sex into two separate variables (columns),
# called "part" and "sex", respectively. You may need to check
# the 'Examples' section of ?separate to remember how the 'into'
# argument should be phrased.
#
sat %&gt;%
  select(-contains("total")) %&gt;%
  gather(part_sex, count, -score_range) %&gt;%
  ### &lt;Your call to separate()&gt; %&gt;%
  separate(part_sex,c("part","sex")) %&gt;%
  print</code></pre>
<blockquote>
<p>submit()</p>
</blockquote>
<p>| Sourcing your script...</p>
<p># A tibble: 36 x 4<br>
   score_range part  sex    count<br><chr><chr><chr><int><br>
 1 700-800     read  male   40151<br>
 2 600-690     read  male  121950<br>
 3 500-590     read  male  227141<br>
 4 400-490     read  male  242554<br>
 5 300-390     read  male  113568<br>
 6 200-290     read  male   30728<br>
 7 700-800     read  fem    38898<br>
 8 600-690     read  fem   126084<br>
 9 500-590     read  fem   259553<br>
10 400-490     read  fem   296793<br>
# ... with 26 more rows</int></chr></chr></chr></p>
<p>| You got it!</p>
<p>|=============================================================================   |  96%<br>
| Finish off the job by following the directions in the script. Save the script and type<br>
| submit() when you are ready, or type reset() to reset the script to its original state.</p>

<pre><code>{r}
# Append two more function calls to accomplish the following:
#
# 1. Use group_by() (from dplyr) to group the data by part and
# sex, in that order.
#
# 2. Use mutate to add two new columns, whose values will be
# automatically computed group-by-group:
#
#   * total = sum(count)
#   * prop = count / total
#
sat %&gt;%
  select(-contains("total")) %&gt;%
  gather(part_sex, count, -score_range) %&gt;%
  separate(part_sex, c("part", "sex")) %&gt;%
  ### &lt;Your call to group_by()&gt; %&gt;%
  group_by(part,sex) %&gt;%
  mutate(total = sum(count),
         prop = count / total
  ) %&gt;% print</code></pre>
<blockquote>
<p>submit()</p>
</blockquote>
<p>| Sourcing your script...</p>
<p># A tibble: 36 x 6<br>
# Groups:   part, sex [6]<br>
   score_range part  sex    count  total   prop<br><chr><chr><chr><int><int><dbl><br>
 1 700-800     read  male   40151 776092 0.0517<br>
 2 600-690     read  male  121950 776092 0.157<br>
 3 500-590     read  male  227141 776092 0.293<br>
 4 400-490     read  male  242554 776092 0.313<br>
 5 300-390     read  male  113568 776092 0.146<br>
 6 200-290     read  male   30728 776092 0.0396<br>
 7 700-800     read  fem    38898 883955 0.0440<br>
 8 600-690     read  fem   126084 883955 0.143<br>
 9 500-590     read  fem   259553 883955 0.294<br>
10 400-490     read  fem   296793 883955 0.336<br>
# ... with 26 more rows</dbl></int></int></chr></chr></chr></p>
<p>| Keep up the great work!</p>
<p>|=============================================================================== |  98%<br>
| In this lesson, you learned how to tidy data with tidyr and dplyr. These tools will<br>
| help you spend less time and energy getting your data ready to analyze and more time<br>
| actually analyzing it.</p>
<p>...</p>
<p>|================================================================================| 100%<br>
| Would you like to receive credit for completing this course on Coursera.org?</p>
<p>1: Yes<br>
2: No</p>
<p>Selection: 1<br>
What is your email address? xxxxxx@xxxxxxxxxxxx<br>
What is your assignment token? xXxXxxXXxXxxXXXx<br>
Grade submission succeeded!</p>
<p>| Excellent job!</p>
<p>| You've reached the end of this lesson! Returning to the main menu...</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Getting and Cleaning Data<br>
2: R Programming<br>
3: Take me to the swirl course repository!</p>
<p>Selection: 0</p>
<p>| Leaving swirl now. Type swirl() to resume.</p>
<blockquote>
<p>ls()<br>
 [1] "failed"       "gradebook"    "passed"       "res"          "sat"<br>
 [6] "student_info" "students"     "students2"    "students3"    "students4"<br>
rm(list=ls())</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Last updated 2020-04-23 21:12:57.937316 IST</em></p>

</div>
</div>
</div>
</div>
    </div>
    </article>
</div>

        <ul class="pager postindexpager clearfix">
<li class="next"><a href="index-3.html" rel="next">Older posts</a></li>
        </ul>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha384-3lJUsx1TJHt7BA4udB5KPnDrlkO8T6J6v/op7ui0BbCjvZ9WqV4Xm6DTP6kQ/iBH" crossorigin="anonymous"></script><script type="text/x-mathjax-config">
        MathJax.Hub.Config({tex2jax: {inlineMath: [['$latex ','$'], ['\\(','\\)']]}});
        </script><!--End of body content--><footer id="footer">
            Contents © 2020 Krishnakanth Allika 
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
<img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png"></a><br>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.
            
            
        </footer>
</div>
</div>


        <script src="../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-163231811-1"></script><script>  window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-163231811-1'); gtag('set', {'user_id': 'USER_ID'});</script>
</body>
</html>
