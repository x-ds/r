<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Data Science with R">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Data Science with R</title>
<link href="../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://www.datascience.eu.org/posts/">
<link rel="icon" href="../files/favicon.ico" sizes="16x16">
<link rel="next" href="index-2.html" type="text/html">
<!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-expand-md static-top mb-4
navbar-dark bg-dark
"><div class="container">
<!-- This keeps the margins nice -->
        <a class="navbar-brand" href="https://www.datascience.eu.org/">

            <span id="blog-title">Data Science with R</span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bs-navbar">
            <ul class="navbar-nav mr-auto">
<li class="nav-item">
<a href="../toc/" class="nav-link">Table of Contents</a>
                </li>
<li class="nav-item">
<a href="../categories/" class="nav-link">Categories</a>
                </li>
<li class="nav-item">
<a href="../tags/" class="nav-link">Tags</a>
                </li>
<li class="nav-item">
<a href="https://www.datascience.eu.org" class="nav-link">Main site</a>

                
            </li>
</ul>
<!-- DuckDuckGo custom search --><form method="get" id="search" action="https://duckduckgo.com/" class="navbar-form pull-left">
<input type="hidden" name="sites" value="https://www.datascience.eu.org/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" name="q" maxlength="255" placeholder="Searchâ€¦" class="span2" style="margin-top: 4px;"><input type="submit" value="DuckDuckGo Search" style="visibility: hidden;">
</form>
<!-- End of custom search -->


            <ul class="navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="00420/" class="u-url">Exploratory Graphs</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Krishnakanth Allika
            </span></p>
            <p class="dateline">
            <a href="00420/" rel="bookmark">
            <time class="published dt-published" datetime="2020-05-02T19:15:50+05:30" itemprop="datePublished" title="2020-05-02 19:15">2020-05-02 19:15</time></a>
            </p>
                <p class="commentline">
        
<a href="%7Blink%7D" onclick="this.href='/posts/00420/'; this.target='_self';"><span class="IDCommentsReplace" style="display:none">cache/posts/00420_Exploratory Graphs.html</span>
<script>
var idcomments_acct = '7fae5836cfdd49cac599cac5b95695d1';
var idcomments_post_id = "cache/posts/00420_Exploratory Graphs.html";
var idcomments_post_url = "/posts/00420/";
</script><script src="https://www.intensedebate.com/js/genericLinkWrapperV2.js"></script></a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote>
<p>library(swirl)<br>
swirl()</p>
</blockquote>
<p>| Welcome to swirl! Please sign in. If you've been here before, use the same name as you did<br>
| then. If you are new, call yourself something unique.</p>
<p>What shall I call you? Krishnakanth Allika</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Exploratory Data Analysis<br>
2: Take me to the swirl course repository!</p>
<p>Selection: 1</p>
<p>| Please choose a lesson, or type 0 to return to course menu.</p>
<p>1: Principles of Analytic Graphs   2: Exploratory Graphs<br>
 3: Graphics Devices in R           4: Plotting Systems<br>
 5: Base Plotting System            6: Lattice Plotting System<br>
 7: Working with Colors             8: GGPlot2 Part1<br>
 9: GGPlot2 Part2                  10: GGPlot2 Extras<br>
11: Hierarchical Clustering        12: K Means Clustering<br>
13: Dimension Reduction            14: Clustering Example<br>
15: CaseStudy</p>
<p>Selection: 2<br>
  |                                                                                   |   0%</p>
<p>| Exploratory_Graphs. (Slides for this and other Data Science courses may be found at github<br>
| <a href="https://github.com/DataScienceSpecialization/courses/">https://github.com/DataScienceSpecialization/courses/</a>. If you care to use them, they must<br>
| be downloaded as a zip file and viewed locally. This lesson corresponds to<br>
| 04_ExploratoryAnalysis/exploratoryGraphs.)</p>
<p>Error in (function (srcref)  : unimplemented type (29) in 'eval'<br>
Error: no more error handlers available (recursive errors?); invoking 'abort' restart<br>
Error in readline("...") :<br>
  INTEGER() can only be applied to a 'integer', not a 'unknown type #29'<br>
In addition: Warning message:<br>
In readline("...") : type 29 is unimplemented in 'type2char'</p>
<p>| Leaving swirl now. Type swirl() to resume.</p>
<blockquote>
<p>swirl()</p>
</blockquote>
<p>| Welcome to swirl! Please sign in. If you've been here before, use the same name as you did<br>
| then. If you are new, call yourself something unique.</p>
<p>What shall I call you? Krishnakanth Allika</p>
<p>| Would you like to continue with one of these lessons?</p>
<p>1: Exploratory Data Analysis Exploratory Graphs<br>
2: No. Let me start something new.</p>
<p>Selection: 1</p>
<p>| Exploratory_Graphs. (Slides for this and other Data Science courses may be found at github<br>
| <a href="https://github.com/DataScienceSpecialization/courses/">https://github.com/DataScienceSpecialization/courses/</a>. If you care to use them, they must<br>
| be downloaded as a zip file and viewed locally. This lesson corresponds to<br>
| 04_ExploratoryAnalysis/exploratoryGraphs.)</p>
<p>...</p>
<p>|=                                                                                  |   1%<br>
| In this lesson, we'll discuss why graphics are an important tool for data scientists and<br>
| the special role that exploratory graphs play in the field.</p>
<p>...</p>
<p>|==                                                                                 |   3%<br>
| Which of the following would NOT be a good reason to use graphics in data science?</p>
<p>1: To understand data properties<br>
2: To find a color that best matches the shirt you're wearing<br>
3: To find patterns in data<br>
4: To suggest modeling strategies</p>
<p>Selection: 2</p>
<p>| All that practice is paying off!</p>
<p>|===                                                                                |   4%<br>
| So graphics give us some visual form of data, and since our brains are very good at seeing<br>
| patterns, graphs give us a compact way to present data and find or display any pattern<br>
| that may be present.</p>
<p>...</p>
<p>|====                                                                               |   5%<br>
| Which of the following cliches captures the essence of graphics?</p>
<p>1: To err is human, to forgive divine<br>
2: A rose by any other name smells as sweet<br>
3: A picture is worth a 1000 words<br>
4: The apple doesn't fall far from the tree</p>
<p>Selection: 3</p>
<p>| Excellent work!</p>
<p>|======                                                                             |   7%<br>
| Exploratory graphs serve mostly the same functions as graphs. They help us find patterns<br>
| in data and understand its properties. They suggest modeling strategies and help to debug<br>
| analyses. We DON'T use exploratory graphs to communicate results.</p>
<p>...</p>
<p>|=======                                                                            |   8%<br>
| Instead, exploratory graphs are the initial step in an investigation, the "quick and<br>
| dirty" tool used to point the data scientist in a fruitful direction. A scientist might<br>
| need to make a lot of exploratory graphs in order to develop a personal understanding of<br>
| the problem being studied. Plot details such as axes, legends, color and size are cleaned<br>
| up later to convey more information in an aesthetically pleasing way.</p>
<p>...</p>
<p>|========                                                                           |   9%<br>
| To demonstrate these ideas, we've copied some data for you from the U.S. Environmental<br>
| Protection Agency (EPA) which sets national ambient air quality standards for outdoor air<br>
| pollution. These Standards say that for fine particle pollution (PM2.5), the "annual mean,<br>
| averaged over 3 years" cannot exceed 12 micro grams per cubic meter. We stored the data<br>
| from the U.S. EPA web site in the data frame pollution. Use the R function head to see the<br>
| first few entries of pollution.</p>
<blockquote>
<p>head(pollution)<br>
       pm25  fips region longitude latitude<br>
1  9.771185 01003   east -87.74826 30.59278<br>
2  9.993817 01027   east -85.84286 33.26581<br>
3 10.688618 01033   east -87.72596 34.73148<br>
4 11.337424 01049   east -85.79892 34.45913<br>
5 12.119764 01055   east -86.03212 34.01860<br>
6 10.827805 01069   east -85.35039 31.18973</p>
</blockquote>
<p>| You nailed it! Good job!</p>
<p>|=========                                                                          |  11%<br>
| We see right away that there's at least one county exceeding the EPA's standard of 12<br>
| micrograms per cubic meter. What else do we see?</p>
<p>...</p>
<p>|==========                                                                         |  12%<br>
| We see 5 columns of data. The pollution count is in the first column labeled pm25. We'll<br>
| work mostly with that. The other 4 columns are a fips code indicating the state (first 2<br>
| digits) and county (last 3 digits) with that count, the associated region (east or west),<br>
| and the longitude and latitude of the area. Now run the R command dim with pollution as an<br>
| argument to see how long the table is.</p>
<blockquote>
<p>dim(pollution)<br>
[1] 576   5</p>
</blockquote>
<p>| Great job!</p>
<p>|===========                                                                        |  13%<br>
| So there are 576 entries in pollution. We'd like to investigate the question "Are there<br>
| any counties in the U.S. that exceed that national standard (12 micro grams per cubic<br>
| meter) for fine particle pollution?" We'll look at several one dimensional summaries of<br>
| the data to investigate this question.</p>
<p>...</p>
<p>|============                                                                       |  15%<br>
| The first technique uses the R command summary, a 5-number summary which returns 6<br>
| numbers. Run it now with the pm25 column of pollution as its argument. Recall that the<br>
| construct for this is pollution$pm25.</p>
<blockquote>
<p>summary(pollution$pm25)<br>
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.<br>
  3.383   8.549  10.047   9.836  11.356  18.441</p>
</blockquote>
<p>| You are doing so well!</p>
<p>|=============                                                                      |  16%<br>
| This shows us basic info about the pm25 data, namely its Minimum (0 percentile) and<br>
| Maximum (100 percentile) values, and three Quartiles of the data. These last indicate the<br>
| pollution measures at which 25%, 50%, and 75% of the counties fall below. In addition to<br>
| these 5 numbers we see the Mean or average measure of particulate pollution across the 576<br>
| counties.</p>
<p>...</p>
<p>|==============                                                                     |  17%<br>
| Half the measured counties have a pollution level less than or equal to what number of<br>
| micrograms per cubic meter?</p>
<p>1: 10.050<br>
2: 9.836<br>
3: 8.549<br>
4: 11.360</p>
<p>Selection: 1</p>
<p>| You're the best!</p>
<p>|===============                                                                    |  19%<br>
| To save you a lot of typing we've saved off pollution$pm25 for you in the variable ppm.<br>
| You can use ppm now in place of the longer expression. Try it now as the argument of the R<br>
| command quantile. See how the results look a lot like the results of the output of the<br>
| summary command.</p>
<blockquote>
<p>quantile(ppm)<br>
       0%       25%       50%       75%      100%<br>
 3.382626  8.548799 10.046697 11.356012 18.440731</p>
</blockquote>
<p>| All that hard work is paying off!</p>
<p>|=================                                                                  |  20%<br>
| See how the results are similar to those returned by summary? Quantile gives the<br>
| quartiles, right? What is the one value missing from this quantile output that summary<br>
| gave you?</p>
<p>1: the maximum value<br>
2: the median<br>
3: the minimum value<br>
4: the mean</p>
<p>Selection: 4</p>
<p>| Excellent work!</p>
<p>|==================                                                                 |  21%<br>
| Now we'll plot a picture, specifically a boxplot. Run the R command boxplot with ppm as an<br>
| input. Also specify the color parameter col equal to "blue".</p>
<blockquote>
<p>boxplot(ppm,col="blue")</p>
</blockquote>
<p><img src="../images/r0040290.png" alt="graph" title="graph"></p>
<p>| That's a job well done!</p>
<p>|===================                                                                |  23%<br>
| The boxplot shows us the same quartile data that summary and quantile did. The lower and<br>
| upper edges of the blue box respectively show the values of the 25% and 75% quantiles.</p>
<p>...</p>
<p>|====================                                                               |  24%<br>
| What do you think the horizontal line inside the box represents?</p>
<p>1: the maximum value<br>
2: the mean<br>
3: the minimum value<br>
4: the median</p>
<p>Selection: 4</p>
<p>| Nice work!</p>
<p>|=====================                                                              |  25%<br>
| The "whiskers" of the box (the vertical lines extending above and below the box) relate to<br>
| the range parameter of boxplot, which we let default to the value 1.5 used by R. The<br>
| height of the box is the interquartile range, the difference between the 75th and 25th<br>
| quantiles. In this case that difference is 2.8. The whiskers are drawn to be a length of<br>
| range<em>2.8 or 1.5</em>2.8. This shows us roughly how many, if any, data points are outliers,<br>
| that is, beyond this range of values.</p>
<p>...</p>
<p>|======================                                                             |  27%<br>
| Note that boxplot is part of R's base plotting package. A nice feature that this package<br>
| provides is its ability to overlay features. That is, you can add to (annotate) an<br>
| existing plot.</p>
<p>...</p>
<p>|=======================                                                            |  28%<br>
| To see this, run the R command abline with the argument h equal to 12. Recall that 12 is<br>
| the EPA standard for air quality.</p>
<blockquote>
<p>abline(h=12)</p>
</blockquote>
<p><img src="../images/r0040300.png" alt="graph" title="graph"></p>
<p>| That's a job well done!</p>
<p>|========================                                                           |  29%<br>
| What do you think this command did?</p>
<p>1: drew a horizontal line at 12<br>
2: hid 12 random data points<br>
3: drew a vertical line at 12<br>
4: nothing</p>
<p>Selection: 1</p>
<p>| Keep up the great work!</p>
<p>|=========================                                                          |  31%<br>
| So abline "adds one or more straight lines through the current plot." We see from the plot<br>
| that the bulk of the measured counties comply with the standard since they fall under the<br>
| line marking that standard.</p>
<p>...</p>
<p>|===========================                                                        |  32%<br>
| Now use the R command hist (another function from the base package) with the argument ppm.<br>
| Specify the color parameter col equal to "green". This will plot a histogram of the data.</p>
<blockquote>
<p>hist(ppm,col="green")</p>
</blockquote>
<p><img src="../images/r0040310.png" alt="graph" title="graph"></p>
<p>| You nailed it! Good job!</p>
<p>|============================                                                       |  33%<br>
| The histogram gives us a little more detailed information about our data, specifically the<br>
| distribution of the pollution counts, or how many counties fall into each bucket of<br>
| measurements.</p>
<p>...</p>
<p>|=============================                                                      |  35%<br>
| What are the most frequent pollution counts?</p>
<p>1: between 9 and 12<br>
2: between 12 and 14<br>
3: between 6 and 8<br>
4: under 5</p>
<p>Selection: 1</p>
<p>| You're the best!</p>
<p>|==============================                                                     |  36%<br>
| Now run the R command rug with the argument ppm.</p>
<blockquote>
<p>rug(ppm)</p>
</blockquote>
<p><img src="../images/r0040320.png" alt="graph" title="graph"></p>
<p>| That's correct!</p>
<p>|===============================                                                    |  37%<br>
| This one-dimensional plot, with its grayscale representation, gives you a little more<br>
| detailed information about how many data points are in each bucket and where they lie<br>
| within the bucket. It shows (through density of tick marks) that the greatest<br>
| concentration of counties has between 9 and 12 micrograms per cubic meter just as the<br>
| histogram did.</p>
<p>...</p>
<p>|================================                                                   |  39%<br>
| To illustrate this a little more, we've defined for you two vectors, high and low,<br>
| containing pollution data of high (greater than 15) and low (less than 5) values<br>
| respectively. Look at low now and see how it relates to the output of rug.</p>
<blockquote>
<p>low<br>
 [1] 3.494351 4.186090 4.917140 4.504539 4.793644 4.601408 4.195688 4.625279 4.460193<br>
[10] 4.978397 4.324736 4.175901 3.382626 4.132739 4.955570 4.565808</p>
</blockquote>
<p>| All that hard work is paying off!</p>
<p>|=================================                                                  |  40%<br>
| It confirms that there are two data points between 3 and 4 and many between 4 and 5. Now<br>
| look at high.</p>
<blockquote>
<p>high<br>
[1] 16.19452 15.80378 18.44073 16.66180 15.01573 17.42905 16.25190 16.18358</p>
</blockquote>
<p>| Excellent job!</p>
<p>|==================================                                                 |  41%<br>
| Again, we see one data point greater than 18, one between 17 and 18, several between 16<br>
| and 17 and two between 15 and 16, verifying what rug indicated.</p>
<p>...</p>
<p>|===================================                                                |  43%<br>
| Now rerun hist with 3 arguments, ppm as its first, col equal to "green", and the argument<br>
| breaks equal to 100.</p>
<blockquote>
<p>hist(ppm,col="green",breaks=100)</p>
</blockquote>
<p><img src="../images/r0040330.png" alt="graph" title="graph"></p>
<p>| All that practice is paying off!</p>
<p>|=====================================                                              |  44%<br>
| What do you think the breaks argument specifies in this case?</p>
<p>1: the number of data points to graph<br>
2: the number of counties exceeding the EPA standard<br>
3: the number of buckets to split the data into<br>
4: the number of stars in the sky</p>
<p>Selection: 3</p>
<p>| You are amazing!</p>
<p>|======================================                                             |  45%<br>
| So this histogram with more buckets is not nearly as smooth as the preceding one. In fact,<br>
| it's a little too noisy to see the distribution clearly. When you're plotting histograms<br>
| you might have to experiment with the argument breaks to get a good idea of your data's<br>
| distribution. For fun now, rerun the R command rug with the argument ppm.</p>
<blockquote>
<p>rug(ppm)</p>
</blockquote>
<p><img src="../images/r0040340.png" alt="graph" title="graph"></p>
<p>| That's a job well done!</p>
<p>|=======================================                                            |  47%<br>
| See how rug works with the existing plot? It automatically adjusted its pocket size to<br>
| that of the last plot plotted.</p>
<p>...</p>
<p>|========================================                                           |  48%<br>
| Now rerun hist with ppm as the data and col equal to "green".</p>
<blockquote>
<p>hist(ppm,col="green")</p>
</blockquote>
<p><img src="../images/r0040310.png" alt="graph" title="graph"></p>
<p>| Great job!</p>
<p>|=========================================                                          |  49%<br>
| Now run the command abline with the argument v equal to 12 and the argument lwd equal to<br>
| 2.</p>
<blockquote>
<p>abline(v=12,lwd=2)</p>
</blockquote>
<p><img src="../images/r0040350.png" alt="graph" title="graph"></p>
<p>| You are doing so well!</p>
<p>|==========================================                                         |  51%<br>
| See the vertical line at 12? Not very visible, is it, even though you specified a line<br>
| width of 2? Run abline with the argument v equal to median(ppm), the argument col equal to<br>
| "magenta", and the argument lwd equal to 4.</p>
<blockquote>
<p>abline(v=median(ppm),col="magenta",lwd=4)</p>
</blockquote>
<p><img src="../images/r0040360.png" alt="graph" title="graph"></p>
<p>| You are quite good my friend!</p>
<p>|===========================================                                        |  52%<br>
| Better, right? Thicker and more of a contrast in color. This shows that although the<br>
| median (50%) is below the standard, there are a fair number of counties in the U.S that<br>
| have pollution levels higher than the standard.</p>
<p>...</p>
<p>|============================================                                       |  53%<br>
| Now recall that our pollution data had 5 columns of information. So far we've only looked<br>
| at the pm25 column. We can also look at other information. To remind yourself what's there<br>
| run the R command names with pollution as the argument.</p>
<blockquote>
<p>names(pollution)<br>
[1] "pm25"      "fips"      "region"    "longitude" "latitude"</p>
</blockquote>
<p>| Keep up the great work!</p>
<p>|=============================================                                      |  55%<br>
| Longitude and latitude don't sound interesting, and each fips is unique since it<br>
| identifies states (first 2 digits) and counties (last 3 digits). Let's look at the region<br>
| column to see what's there. Run the R command table on this column. Use the construct<br>
| pollution$region. Store the result in the variable reg.</p>
<blockquote>
<p>reg&lt;-table(pollution$region)</p>
</blockquote>
<p>| All that practice is paying off!</p>
<p>|==============================================                                     |  56%<br>
| Look at reg now.</p>
<blockquote>
<p>reg</p>
</blockquote>
<p>east west<br>
 442  134</p>
<p>| Nice work!</p>
<p>|================================================                                   |  57%<br>
| Lot more counties in the east than west. We'll use the R command barplot (another type of<br>
| one-dimensional summary) to plot this information. Call barplot with reg as its first<br>
| argument, the argument col equal to "wheat", and the argument main equal to the string<br>
| "Number of Counties in Each Region".</p>
<blockquote>
<p>barplot(reg,col="wheat",main="Number of Counties in Each Region")</p>
</blockquote>
<p><img src="../images/r0040370.png" alt="graph" title="graph"></p>
<p>| You are quite good my friend!</p>
<p>|=================================================                                  |  59%<br>
| What do you think the argument main specifies?</p>
<p>1: the y axis label<br>
2: the title of the graph<br>
3: the x axis label<br>
4: I can't tell</p>
<p>Selection: 2</p>
<p>| You are doing so well!</p>
<p>|==================================================                                 |  60%<br>
| So we've seen several examples of one-dimensional graphs that summarize data. Two<br>
| dimensional graphs include scatterplots, multiple graphs which we'll see more examples of,<br>
| and overlayed one-dimensional plots which the R packages such as lattice and ggplot2<br>
| provide.</p>
<p>...</p>
<p>|===================================================                                |  61%<br>
| Some graphs have more than two-dimensions. These include overlayed or multiple<br>
| two-dimensional plots and spinning plots. Some three-dimensional plots are tricky to<br>
| understand so have limited applications. We'll see some examples now of more complicated<br>
| graphs, in particular, we'll show two graphs together.</p>
<p>...</p>
<p>|====================================================                               |  63%<br>
| First we'll show how R, in one line and using base plotting, can display multiple<br>
| boxplots. We simply specify that we want to see the pollution data as a function of<br>
| region. We know that our pollution data characterized each of the 576 entries as belonging<br>
| to one of two regions (east and west).</p>
<p>...</p>
<p>|=====================================================                              |  64%<br>
| We use the R formula y ~ x to show that y (in this case pm25) depends on x (region). Since<br>
| both come from the same data frame (pollution) we can specify a data argument set equal to<br>
| pollution. By doing this, we don't have to type pollution$pm25 (or ppm) and  
| pollution$region. We can just specify the formula pm25~region. Call boxplot now with this<br>
| formula as its argument, data equal to pollution, and col equal to "red".</p>
<blockquote>
<p>boxplot(pm25~region,data=pollution,col="red")</p>
</blockquote>
<p><img src="../images/r0040380.png" alt="graph" title="graph"></p>
<p>| Perseverance, that's the answer.</p>
<p>|======================================================                             |  65%<br>
| Two for the price of one! Similarly we can plot multiple histograms in one plot, though to<br>
| do this we have to use more than one R command. First we have to set up the plot window<br>
| with the R command par which specifies how we want to lay out the plots, say one above the<br>
| other. We also use par to specify margins, a 4-long vector which indicates the number of<br>
| lines for the bottom, left, top and right. Type the R command<br>
| par(mfrow=c(2,1),mar=c(4,4,2,1)) now. Don't expect to see any new result.</p>
<blockquote>
<p>par(mfrow=c(2,1),mar=c(4,4,2,1))</p>
</blockquote>
<p>| That's a job well done!</p>
<p>|=======================================================                            |  67%<br>
| So we set up the plot window for two rows and one column with the mfrow argument. The mar<br>
| argument set up the margins. Before we plot the histograms let's explore the R command<br>
| subset which, not surprisingly, "returns subsets of vectors, matrices or data frames which<br>
| meet conditions". We'll use subset to pull off the data we want to plot. Call subset now<br>
| with pollution as its first argument and a boolean expression testing region for equality<br>
| with the string "east". Put the result in the variable east.</p>
<blockquote>
<p>east&lt;-subset(pollution,region=="east")</p>
</blockquote>
<p>| Keep working like that and you'll get there!</p>
<p>|========================================================                           |  68%<br>
| Use head to look at the first few entries of east.</p>
<blockquote>
<p>head(east)<br>
       pm25  fips region longitude latitude<br>
1  9.771185 01003   east -87.74826 30.59278<br>
2  9.993817 01027   east -85.84286 33.26581<br>
3 10.688618 01033   east -87.72596 34.73148<br>
4 11.337424 01049   east -85.79892 34.45913<br>
5 12.119764 01055   east -86.03212 34.01860<br>
6 10.827805 01069   east -85.35039 31.18973</p>
</blockquote>
<p>| Excellent work!</p>
<p>|==========================================================                         |  69%<br>
| So east holds more information than we need. We just want to plot a histogram with the<br>
| pm25 portion. Call hist now with the pm25 portion of east as its first argument and col<br>
| equal to "green" as its second.</p>
<blockquote>
<p>hist(east$pm25,col="green")</p>
</blockquote>
<p><img src="../images/r0040390.png" alt="graph" title="graph"></p>
<p>| You got it!</p>
<p>|===========================================================                        |  71%<br>
| See? The command par told R we were going to have one column with 2 rows, so it placed<br>
| this histogram in the top position.</p>
<p>...</p>
<p>|============================================================                       |  72%<br>
| Now, here's a challenge for you. Plot the histogram of the counties from the west using<br>
| just one R command. Let the appropriate subset command (with the pm25 portion specified)<br>
| be the first argument and col (equal to "green") the second.  To cut down on your typing,<br>
| use the up arrow key to get your last command and replace "east" with the subset command.<br>
| Make sure the boolean argument checks for equality between region and "west".</p>
<blockquote>
<p>hist(subset(pollution,region=="west")$pm25,col="green")</p>
</blockquote>
<p><img src="../images/r0040400.png" alt="graph" title="graph"></p>
<p>| You are really on a roll!</p>
<p>|=============================================================                      |  73%<br>
| See how R does all the labeling for you? Notice that the titles are different since we<br>
| used different commands for the two plots. Let's look at some scatter plots now.</p>
<p>...</p>
<p>|==============================================================                     |  75%<br>
| Scatter plots are two-dimensional plots which show the relationship between two variables,<br>
| usually x and y. Let's look at a scatterplot showing the relationship between latitude and<br>
| the pm25 data. We'll use plot, a function from R's base plotting package.</p>
<p>...</p>
<p>|===============================================================                    |  76%<br>
| We've seen that we can use a function call as an argument when calling another function.<br>
| We'll do this again when we call plot with the arguments latitude and pm25 which are both<br>
| from our data frame pollution. We'll call plot from inside the R command with which<br>
| evaluates "an R expression in an environment constructed from data". We'll use pollution<br>
| as the first argument to with and the call to plot as the second. This allows us to avoid<br>
| typing "pollution$" before the arguments to plot, so it saves us some typing and adds to<br>
| your base of R knowledge. Try this now.</p>
<blockquote>
<p>with(pollution,plot(latitude,pm25))</p>
</blockquote>
<p><img src="../images/r0040410.png" alt="graph" title="graph"></p>
<p>| You nailed it! Good job!</p>
<p>|================================================================                   |  77%<br>
| Note that the first argument is plotted along the x-axis and the second along the y. Now<br>
| use abline to add a horizontal line at 12. Use two additional arguments, lwd equal to 2<br>
| and lty also equal to 2. See what happens.</p>
<blockquote>
<p>abline(h=12,lwd=2,lty=2)</p>
</blockquote>
<p><img src="../images/r0040420.png" alt="graph" title="graph"></p>
<p>| That's correct!</p>
<p>|=================================================================                  |  79%<br>
| See how lty=2 made the line dashed? Now let's replot the scatterplot. This time, instead<br>
| of using with, call plot directly with 3 arguments. The first 2 are pollution$latitude and  
| ppm. The third argument, col, we'll use to add color and more information to our plot. Set  
| this argument (col) equal to pollution$region and see what happens.</p>
<blockquote>
<p>plot(pollution$latitude,ppm,col=pollution$region)</p>
</blockquote>
<p><img src="../images/r0040430.png" alt="graph" title="graph"></p>
<p>| Perseverance, that's the answer.</p>
<p>|==================================================================                 |  80%<br>
| We've got two colors on the map to distinguish between counties in the east and those in<br>
| the west. Can we figure out which color is east and which west? See that the high (greater<br>
| than 50) and low (less than 25) latitudes are both red. Latitudes indicate distance from<br>
| the equator, so which half of the U.S. (east or west) has counties at the extreme north<br>
| and south?</p>
<p>1: east<br>
2: west</p>
<p>Selection: 2</p>
<p>| That's a job well done!</p>
<p>|====================================================================               |  81%<br>
| As before, use abline to add a horizontal line at 12. Use two additional arguments, lwd<br>
| equal to 2 and lty also equal to 2.</p>
<blockquote>
<p>abline(h=12,lwd=2,lty=2)</p>
</blockquote>
<p><img src="../images/r0040440.png" alt="graph" title="graph"></p>
<p>| You are amazing!</p>
<p>|=====================================================================              |  83%<br>
| We see many counties are above the healthy standard set by the EPA, but it's hard to tell<br>
| overall, which region, east or west, is worse.</p>
<p>...</p>
<p>|======================================================================             |  84%<br>
| Let's plot two scatterplots distinguished by region.</p>
<p>...</p>
<p>|=======================================================================            |  85%<br>
| As we did with multiple histograms, we first have to set up the plot window with the R<br>
| command par. This time, let's plot the scatterplots side by side (one row and two<br>
| columns). We also need to use different margins. Type the R command par(mfrow = c(1, 2),<br>
| mar = c(5, 4, 2, 1)) now. Don't expect to see any new result.</p>
<blockquote>
<p>par(mfrow = c(1, 2),mar = c(5, 4, 2, 1))</p>
</blockquote>
<p>| You are quite good my friend!</p>
<p>|========================================================================           |  87%<br>
| For the first scatterplot, on the left, we'll plot the latitudes and pm25 counts from the<br>
| west. We already pulled out the information for the counties in the east. Let's now get<br>
| the information for the counties from the west. Create the variable west by using the<br>
| subset command with pollution as the first argument and the appropriate boolean as the<br>
| second.</p>
<blockquote>
<p>west&lt;-subset(pollution,region="west")</p>
</blockquote>
<p>| Keep trying! Or, type info() for more options.</p>
<p>| Type west &lt;- subset(pollution,region=="west") at the command prompt.</p>
<blockquote>
<p>west&lt;-subset(pollution,region=="west")</p>
</blockquote>
<p>| That's the answer I was looking for.</p>
<p>|=========================================================================          |  88%<br>
| Now call plot with three arguments. These are west$latitude (x-axis), west$pm25 (y-axis),<br>
| and the argument main equal to the string "West" (title). Do this now.</p>
<blockquote>
<p>plot(west$latitude,west$pm25,main="West")</p>
</blockquote>
<p><img src="../images/r0040450.png" alt="graph" title="graph"></p>
<p>| You are really on a roll!</p>
<p>|==========================================================================         |  89%<br>
| For the second scatterplot, on the right, we'll plot the latitudes and pm25 counts from<br>
| the east.</p>
<p>...</p>
<p>|===========================================================================        |  91%<br>
| As before, use the up arrow key and change the 3 "West" strings to "East".</p>
<blockquote>
<p>plot(east$latitude,east$pm25,main="East")</p>
</blockquote>
<p><img src="../images/r0040460.png" alt="graph" title="graph"></p>
<p>| You're the best!</p>
<p>|============================================================================       |  92%<br>
| See how R took care of all the details for you? Nice, right? It looks like there are more<br>
| dirty counties in the east but the extreme dirt (greater than 15) is in the west.</p>
<p>...</p>
<p>|=============================================================================      |  93%<br>
| Let's summarize and review.</p>
<p>...</p>
<p>|===============================================================================    |  95%<br>
| Which of the following characterizes exploratory plots?</p>
<p>1: quick and dead<br>
2: slow and clean<br>
3: quick and dirty<br>
4: slow and steady</p>
<p>Selection: 3</p>
<p>| That's the answer I was looking for.</p>
<p>|================================================================================   |  96%<br>
| True or false? Plots let you summarize the data (usually graphically) and highlight any<br>
| broad features</p>
<p>1: False<br>
2: True</p>
<p>Selection: 2</p>
<p>| You are amazing!</p>
<p>|=================================================================================  |  97%<br>
| Which of the following do plots NOT do?</p>
<p>1: Explore basic questions and hypotheses (and perhaps rule them out)<br>
2: Conclude that you are ALWAYS right<br>
3: Suggest modeling strategies for the "next step"<br>
4: Summarize the data (usually graphically) and highlight any broad features</p>
<p>Selection: 2</p>
<p>| That's a job well done!</p>
<p>|================================================================================== |  99%<br>
| Congrats! You've concluded exploring this lesson on graphics. We hope you didn't find it<br>
| too quick or dirty.</p>
<p>...</p>
<p>|===================================================================================| 100%<br>
| Would you like to receive credit for completing this course on Coursera.org?</p>
<p>1: Yes<br>
2: No</p>
<p>Selection: 2</p>
<p>| Excellent job!</p>
<p>| You've reached the end of this lesson! Returning to the main menu...</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Exploratory Data Analysis<br>
2: Take me to the swirl course repository!</p>
<p>Selection: 0</p>
<p>| Leaving swirl now. Type swirl() to resume.</p>
<blockquote>
<p>rm(list=ls())</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Last updated 2020-05-02 19:17:35.849963 IST</em></p>

</div>
</div>
</div>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="00419/" class="u-url">Principles of Analytic Graphs</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Krishnakanth Allika
            </span></p>
            <p class="dateline">
            <a href="00419/" rel="bookmark">
            <time class="published dt-published" datetime="2020-05-02T16:38:15+05:30" itemprop="datePublished" title="2020-05-02 16:38">2020-05-02 16:38</time></a>
            </p>
                <p class="commentline">
        
<a href="%7Blink%7D" onclick="this.href='/posts/00419/'; this.target='_self';"><span class="IDCommentsReplace" style="display:none">cache/posts/00419_Principles of Analytic Graphs.html</span>
<script>
var idcomments_acct = '7fae5836cfdd49cac599cac5b95695d1';
var idcomments_post_id = "cache/posts/00419_Principles of Analytic Graphs.html";
var idcomments_post_url = "/posts/00419/";
</script><script src="https://www.intensedebate.com/js/genericLinkWrapperV2.js"></script></a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>R version 4.0.0 (2020-04-24) -- "Arbor Day"<br>
Copyright (C) 2020 The R Foundation for Statistical Computing<br>
Platform: x86_64-w64-mingw32/x64 (64-bit)</p>
<p>R is free software and comes with ABSOLUTELY NO WARRANTY.<br>
You are welcome to redistribute it under certain conditions.<br>
Type 'license()' or 'licence()' for distribution details.</p>
<p>R is a collaborative project with many contributors.<br>
Type 'contributors()' for more information and<br>
'citation()' on how to cite R or R packages in publications.</p>
<p>Type 'demo()' for some demos, 'help()' for on-line help, or<br>
'help.start()' for an HTML browser interface to help.<br>
Type 'q()' to quit R.</p>
<p>[Workspace loaded from C:/Users/kk/PortableApps/Git/home/k-allika/repos/DataScienceWithR/.RData]</p>
<blockquote>
<p>setwd("C:/Users/kk/PortableApps/Git/home/k-allika/repos/DataScienceWithR/04_Exploratory_Data_Analysis/week01/workspace")<br>
library(swirl)</p>
</blockquote>
<p>| Hi! I see that you have some variables saved in your workspace. To keep things running<br>
| smoothly, I recommend you clean up before starting swirl.</p>
<p>| Type ls() to see a list of the variables in your workspace. Then, type rm(list=ls()) to<br>
| clear your workspace.</p>
<p>| Type swirl() when you are ready to begin.</p>
<blockquote>
<p>swirl()</p>
</blockquote>
<p>| Welcome to swirl! Please sign in. If you've been here before, use the same name as you did<br>
| then. If you are new, call yourself something unique.</p>
<p>What shall I call you? Krishnakanth Allika</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Exploratory Data Analysis<br>
2: Getting and Cleaning Data<br>
3: R Programming<br>
4: Take me to the swirl course repository!</p>
<p>Selection: 1</p>
<p>| Please choose a lesson, or type 0 to return to course menu.</p>
<p>1: Principles of Analytic Graphs   2: Exploratory Graphs<br>
 3: Graphics Devices in R           4: Plotting Systems<br>
 5: Base Plotting System            6: Lattice Plotting System<br>
 7: Working with Colors             8: GGPlot2 Part1<br>
 9: GGPlot2 Part2                  10: GGPlot2 Extras<br>
11: Hierarchical Clustering        12: K Means Clustering<br>
13: Dimension Reduction            14: Clustering Example<br>
15: CaseStudy</p>
<p>Selection: 1</p>
<p>| Attempting to load lesson dependencies...</p>
<p>| Package â€˜jpegâ€™ loaded correctly!</p>
<p>|                                                                                   |   0%</p>
<p>| Principles_of_Analytic_Graphs. (Slides for this and other Data Science courses may be<br>
| found at github <a href="https://github.com/DataScienceSpecialization/courses/">https://github.com/DataScienceSpecialization/courses/</a>. If you care to use<br>
| them, they must be downloaded as a zip file and viewed locally. This lesson corresponds to<br>
| 04_ExploratoryAnalysis/Principles_of_Analytic_Graphics.)</p>
<p>...</p>
<p>|==                                                                                 |   3%<br>
| In this lesson, we'll discuss some basic principles of presenting data effectively. These<br>
| will illustrate some fundamental concepts of displaying results in order to make them more<br>
| meaningful and convincing. These principles are cribbed from Edward Tufte's great 2006<br>
| book, Beautiful Evidence. You can read more about them at the www.edwardtufte.com website.</p>
<p>...</p>
<p>|=====                                                                              |   6%<br>
| As a warm-up, which of the following would NOT be a good use of analytic graphing?</p>
<p>1: To show causality, mechanism, explanation<br>
2: To show multivariate data<br>
3: To decide which horse to bet on at the track<br>
4: To show comparisons</p>
<p>Selection: 3</p>
<p>| Keep up the great work!</p>
<p>|=======                                                                            |   8%<br>
| You're ready to start. Graphs give us a visual form of data, and the first principle of<br>
| analytic graphs is to show some comparison. You'll hear more about this when you study<br>
| statistical inference (another great course BTW), but evidence for a hypothesis is always<br>
| relative to another competing or alternative hypothesis.</p>
<p>...</p>
<p>|=========                                                                          |  11%<br>
| When presented with a claim that something is good, you should always ask "Compared to<br>
| What?" This is why in commercials you often hear the phrase "other leading brands". An<br>
| implicit comparison, right?</p>
<p>...</p>
<p>|============                                                                       |  14%<br>
| Consider this boxplot which shows the relationship between the use of an air cleaner and<br>
| the number of symptom-free days of asthmatic children. (The top and bottom lines of the<br>
| box indicate the 25% and 75% quartiles of the data, and the horizontal line in the box<br>
| shows the 50%.) Since the box is above 0, the number of symptom-free days for children<br>
| with asthma is bigger using the air cleaner. This is good, right?</p>
<p>...</p>
<p><img src="../images/r0040230.png" alt="graph" title="graph"></p>
<p>|==============                                                                     |  17%<br>
| How many days of improvement does the median correspond to?</p>
<p>1: 4<br>
2: -2<br>
3: 1<br>
4: 12</p>
<p>Selection: 3</p>
<p>| That's correct!</p>
<p>|================                                                                   |  19%<br>
| While it's somewhat informative, it's also somewhat cryptic, since the y-axis is claiming<br>
| to show a change in number of symptom-free days. Wouldn't it be better to show a<br>
| comparison?</p>
<p>...</p>
<p>|==================                                                                 |  22%<br>
| Like this? Here's a graphic which shows two boxplots, the one on the left showing the<br>
| results for a control group that doesn't use an air cleaner alongside the previously shown<br>
| boxplot.</p>
<p>...</p>
<p>|=====================                                                              |  25%<br>
| By showing the two boxplots side by side, you can clearly see that using the air cleaner<br>
| increases the number of symptom-free days for most asthmatic children. The plot on the<br>
| right (using the air cleaner) is generally higher than the one on the left (the control<br>
| group).</p>
<p>...</p>
<p><img src="../images/r0040240.png" alt="graph" title="graph"></p>
<p>|=======================                                                            |  28%<br>
| What does this graph NOT show you?</p>
<p>1: Half the chidren in the control group had no improvement<br>
2: Children in the control group had at most 3 symptom-free days<br>
3: 75% of the children using the air cleaner had at most 3 symptom-free days<br>
4: Using the air cleaner makes asthmatic children sicker</p>
<p>Selection: 4</p>
<p>| You're the best!</p>
<p>|=========================                                                          |  31%<br>
| So the first principle was to show a comparison. The second principle is to show causality<br>
| or a mechanism of how your theory of the data works. This explanation or systematic<br>
| structure shows your causal framework for thinking about the question you're trying to<br>
| answer.</p>
<p>...</p>
<p>|============================                                                       |  33%<br>
| Consider this plot which shows the dual boxplot we just showed, but next to it we have a<br>
| corresponding plot of changes in measures of particulate matter.</p>
<p>...</p>
<p><img src="../images/r0040250.png" alt="graph" title="graph"></p>
<p>|==============================                                                     |  36%<br>
| This picture tries to explain how the air cleaner increases the number of symptom-free<br>
| days for asthmatic children. What mechanism does the graph imply?</p>
<p>1: That the air cleaner increases pollution<br>
2: That the air cleaner reduces pollution<br>
3: That the children in the control group are healthier<br>
4: That the air in the control group is cleaner than the air in the other group</p>
<p>Selection: 2</p>
<p>| You are amazing!</p>
<p>|================================                                                   |  39%<br>
| By showing the two sets of boxplots side by side you're explaining your theory of why the<br>
| air cleaner increases the number of symptom-free days. Onward!</p>
<p>...</p>
<p>|===================================                                                |  42%<br>
| So the first principle was to show some comparison, the second was to show a mechanism, so<br>
| what will the third principle say to show?</p>
<p>...</p>
<p>|=====================================                                              |  44%<br>
| Multivariate data!</p>
<p>...</p>
<p>|=======================================                                            |  47%<br>
| What is multivariate data you might ask? In technical (scientific) literature this term<br>
| means more than 2 variables. Two-variable plots are what you saw in high school algebra.<br>
| Remember those x,y plots when you were learning about slopes and intercepts and equations<br>
| of lines? They're valuable, but usually questions are more complicated and require more<br>
| variables.</p>
<p>...</p>
<p>|==========================================                                         |  50%<br>
| Sometimes, if you restrict yourself to two variables you'll be misled and draw an<br>
| incorrect conclusion.</p>
<p>...</p>
<p>|============================================                                       |  53%<br>
| Consider this plot which shows the relationship between air pollution (x-axis) and<br>
| mortality rates among the elderly (y-axis). The blue regression line shows a surprising<br>
| result. (You'll learn about regression lines when you take the fabulous Regression Models<br>
| course.)</p>
<p>...</p>
<p><img src="../images/r0040260.png" alt="graph" title="graph"></p>
<p>|==============================================                                     |  56%<br>
| What does the blue regression line indicate?</p>
<p>1: Pollution doesn't really increase, it just gets reported more<br>
2: As pollution increases fewer people die<br>
3: As pollution increases the number of deaths doesn't change<br>
4: As pollution increases more people die</p>
<p>Selection: 2</p>
<p>| Excellent job!</p>
<p>|================================================                                   |  58%<br>
| Fewer deaths with more pollution? That's a surprise! Something's gotta be wrong, right? In<br>
| fact, this is an example of Simpson's paradox, or the Yuleâ€“Simpson effect. Wikipedia<br>
| (<a href="http://en.wikipedia.org/wiki/Simpson%27s_paradox">http://en.wikipedia.org/wiki/Simpson%27s_paradox</a>) tells us that this "is a paradox in<br>
| probability and statistics, in which a trend that appears in different groups of data<br>
| disappears when these groups are combined."</p>
<p>...</p>
<p>|===================================================                                |  61%<br>
| Suppose we divided this mortality/pollution data into the four seasons. Would we see<br>
| different trends?</p>
<p>...</p>
<p>|=====================================================                              |  64%<br>
| Yes, we do! Plotting the same data for the 4 seasons individually we see a different<br>
| result.</p>
<p>...</p>
<p><img src="../images/r0040270.png" alt="graph" title="graph"></p>
<p>|=======================================================                            |  67%<br>
| What does the new plot indicate?</p>
<p>1: Pollution doesn't really increase, it just gets reported more<br>
2: As pollution increases the seasons change<br>
3: As pollution increases more people die in all seasons<br>
4: As pollution increases fewer people die in all seasons</p>
<p>Selection: 3</p>
<p>| That's correct!</p>
<p>|==========================================================                         |  69%<br>
| The fourth principle of analytic graphing involves integrating evidence. This means not<br>
| limiting yourself to one form of expression. You can use words, numbers, images as well as<br>
| diagrams. Graphics should make use of many modes of data presentation. Remember, "Don't<br>
| let the tool drive the analysis!"</p>
<p>...</p>
<p>|============================================================                       |  72%<br>
| To show you what we mean, here's an example of a figure taken from a paper published in<br>
| the Journal of the AMA. It shows the relationship between pollution and hospitalization of<br>
| people with heart disease. As you can see, it's a lot different from our previous plots.<br>
| The solid circles in the center portion indicate point estimates of percentage changes in<br>
| hospitalization rates for different levels of pollution. The lines through the circles<br>
| indicate confidence intervals associated with these estimates. (You'll learn more about<br>
| confidence intervals in another great course, the one on statistical inference.)</p>
<p><img src="../images/r0040280.png" alt="graph" title="graph"><br>
...</p>
<p>|==============================================================                     |  75%<br>
| Note that on the right side of the figure is another column of numbers, one for each of<br>
| the point estimates given. This column shows posterior probabilities that relative risk is<br>
| greater than 0. This, in effect, is a measure of the strength of the evidence showing the<br>
| correlation between pollution and hospitalization.  The point here is that all of this<br>
| information is located in one picture so that the reader can see the strength of not only<br>
| the correlations but the evidence as well.</p>
<p>...</p>
<p>|=================================================================                  |  78%<br>
| The fifth principle of graphing involves describing and documenting the evidence with<br>
| sources and appropriate labels and scales. Credibility is important so the data graphics<br>
| should tell a complete story. Also, using R, you want to preserve any code you use to<br>
| generate your data and graphics so that the research can be replicated if necessary. This<br>
| allows for easy verification or finding bugs in your analysis.</p>
<p>...</p>
<p>|===================================================================                |  81%<br>
| The sixth and final principle of analytic graphing is maybe the most important. Content is<br>
| king! If you don't have something interesting to report, your graphs won't save you.<br>
| Analytical presentations ultimately stand or fall depending on the quality, relevance, and<br>
| integrity of their content.</p>
<p>...</p>
<p>|=====================================================================              |  83%<br>
| Review time!!!</p>
<p>...</p>
<p>|=======================================================================            |  86%<br>
| Which of the following is NOT a good principle of graphing?</p>
<p>1: To integrate multiple modes of evidence<br>
2: Having unreadable labels<br>
3: To describe and document evidence<br>
4: Content is king</p>
<p>Selection: 2</p>
<p>| You are really on a roll!</p>
<p>|==========================================================================         |  89%<br>
| Which of the following is NOT a good principle of graphing?</p>
<p>1: To prove you're always right<br>
2: To show two competing hypotheses<br>
3: To demonstrate a causative mechanism underlying a correlation<br>
4: Content is king</p>
<p>Selection: 1</p>
<p>| You nailed it! Good job!</p>
<p>|============================================================================       |  92%<br>
| Which of the following is NOT a good principle of graphing?</p>
<p>1: To integrate different types of evidence<br>
2: To show that some fonts are better than others<br>
3: To show good labels and scales<br>
4: Content is king</p>
<p>Selection: 2</p>
<p>| That's the answer I was looking for.</p>
<p>|==============================================================================     |  94%<br>
| True or False? Color is king.</p>
<p>1: False<br>
2: True</p>
<p>Selection: 2</p>
<p>| Not quite, but you're learning! Try again.</p>
<p>| Think of the sixth principle</p>
<p>1: True<br>
2: False</p>
<p>Selection: 2</p>
<p>| You are doing so well!</p>
<p>|=================================================================================  |  97%<br>
| Congrats! You've concluded exploring this lesson on principles of graphing. We hope you<br>
| found it principally principled.</p>
<p>...</p>
<p>|===================================================================================| 100%<br>
| Would you like to receive credit for completing this course on Coursera.org?</p>
<p>1: No<br>
2: Yes</p>
<p>Selection: 1</p>
<p>| Nice work!</p>
<p>| You've reached the end of this lesson! Returning to the main menu...</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Exploratory Data Analysis<br>
2: Getting and Cleaning Data<br>
3: R Programming<br>
4: Take me to the swirl course repository!</p>
<p>Selection: 0</p>
<p>| Leaving swirl now. Type swirl() to resume.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Last updated 2020-05-02 16:41:08.783416 IST</em></p>

</div>
</div>
</div>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="00418/" class="u-url">Tidying Data with tidyr</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Krishnakanth Allika
            </span></p>
            <p class="dateline">
            <a href="00418/" rel="bookmark">
            <time class="published dt-published" datetime="2020-04-23T21:03:03+05:30" itemprop="datePublished" title="2020-04-23 21:03">2020-04-23 21:03</time></a>
            </p>
                <p class="commentline">
        
<a href="%7Blink%7D" onclick="this.href='/posts/00418/'; this.target='_self';"><span class="IDCommentsReplace" style="display:none">cache/posts/00418_Tidying Data with tidyr.html</span>
<script>
var idcomments_acct = '7fae5836cfdd49cac599cac5b95695d1';
var idcomments_post_id = "cache/posts/00418_Tidying Data with tidyr.html";
var idcomments_post_url = "/posts/00418/";
</script><script src="https://www.intensedebate.com/js/genericLinkWrapperV2.js"></script></a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote>
<p>swirl()</p>
</blockquote>
<p>| Welcome to swirl! Please sign in. If you've been here before, use the same name as you
| did then. If you are new, call yourself something unique.</p>
<p>What shall I call you? Krishnakanth Allika</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Getting and Cleaning Data<br>
2: R Programming<br>
3: Take me to the swirl course repository!</p>
<p>Selection: 1</p>
<p>| Please choose a lesson, or type 0 to return to course menu.</p>
<p>1: Manipulating Data with dplyr<br>
2: Grouping and Chaining with dplyr<br>
3: Tidying Data with tidyr<br>
4: Dates and Times with lubridate</p>
<p>Selection: 3</p>
<p>| Attempting to load lesson dependencies...</p>
<p>| This lesson requires the â€˜readrâ€™ package. Would you like me to install it for you now?</p>
<p>1: Yes<br>
2: No</p>
<p>Selection: 1</p>
<p>| Trying to install package â€˜readrâ€™ now...<br>
also installing the dependencies â€˜hmsâ€™, â€˜cliprâ€™</p>
<p>package â€˜hmsâ€™ successfully unpacked and MD5 sums checked<br>
package â€˜cliprâ€™ successfully unpacked and MD5 sums checked<br>
package â€˜readrâ€™ successfully unpacked and MD5 sums checked</p>
<p>| Package â€˜readrâ€™ loaded correctly!</p>
<p>| This lesson requires the â€˜tidyrâ€™ package. Would you like me to install it for you now?</p>
<p>1: Yes<br>
2: No</p>
<p>Selection: 1</p>
<p>| Trying to install package â€˜tidyrâ€™ now...<br>
package â€˜tidyrâ€™ successfully unpacked and MD5 sums checked</p>
<p>| Package â€˜tidyrâ€™ loaded correctly!</p>
<p>| Package â€˜dplyrâ€™ loaded correctly!</p>
<p>|                                                                                |   0%</p>
<p>| In this lesson, you'll learn how to tidy your data with the tidyr package.</p>
<p>...</p>
<p>|=                                                                               |   2%<br>
| Parts of this lesson will require the use of dplyr. If you don't have a basic knowledge<br>
| of dplyr, you should exit this lesson and begin with the dplyr lessons from earlier in<br>
| the course.</p>
<p>...</p>
<p>|===                                                                             |   4%<br>
| tidyr was automatically installed (if necessary) and loaded when you started this<br>
| lesson. Just to build the habit, (re)load the package with library(tidyr).</p>
<blockquote>
<p>library(tidyr)</p>
</blockquote>
<p>| That's a job well done!</p>
<p>|====                                                                            |   5%<br>
| The author of tidyr, Hadley Wickham, discusses his philosophy of tidy data in his 'Tidy<br>
| Data' paper:<br>
|<br>
| <a href="http://vita.had.co.nz/papers/tidy-data.pdf">http://vita.had.co.nz/papers/tidy-data.pdf</a><br>
|<br>
| This paper should be required reading for anyone who works with data, but it's not<br>
| required in order to complete this lesson.</p>
<p>...</p>
<p>|======                                                                          |   7%<br>
| Tidy data is formatted in a standard way that facilitates exploration and analysis and<br>
| works seamlessly with other tidy data tools. Specifically, tidy data satisfies three<br>
| conditions:<br>
|<br>
| 1) Each variable forms a column<br>
|<br>
| 2) Each observation forms a row<br>
|<br>
| 3) Each type of observational unit forms a table</p>
<p>...</p>
<p>|=======                                                                         |   9%<br>
| Any dataset that doesn't satisfy these conditions is considered 'messy' data.<br>
| Therefore, all of the following are characteristics of messy data, EXCEPT...</p>
<p>1: Variables are stored in both rows and columns<br>
2: Column headers are values, not variable names<br>
3: Every column contains a different variable<br>
4: Multiple types of observational units are stored in the same table<br>
5: Multiple variables are stored in one column<br>
6: A single observational unit is stored in multiple tables</p>
<p>Selection: 3</p>
<p>| Keep up the great work!</p>
<p>|=========                                                                       |  11%<br>
| The incorrect answers to the previous question are the most common symptoms of messy<br>
| data. Let's work through a simple example of each of these five cases, then tidy some<br>
| real data.</p>
<p>...</p>
<p>|==========                                                                      |  13%<br>
| The first problem is when you have column headers that are values, not variable names.<br>
| I've created a simple dataset called 'students' that demonstrates this scenario. Type<br>
| students to take a look.</p>
<blockquote>
<p>play()</p>
</blockquote>
<p>| Entering play mode. Experiment as you please, then type nxt() when you are ready to<br>
| resume the lesson.</p>
<blockquote>
<p>download.file("<a href="http://vita.had.co.nz/papers/tidy-data.pdf%22,%22tidy-data.pdf">http://vita.had.co.nz/papers/tidy-data.pdf","tidy-data.pdf</a>")<br>
trying URL '<a href="http://vita.had.co.nz/papers/tidy-data.pdf">http://vita.had.co.nz/papers/tidy-data.pdf</a>'<br>
Content type 'application/pdf' length 360450 bytes (352 KB)<br>
downloaded 352 KB</p>
<p>nxt()</p>
</blockquote>
<p>| Resuming lesson...</p>
<p>| The first problem is when you have column headers that are values, not variable names.<br>
| I've created a simple dataset called 'students' that demonstrates this scenario. Type<br>
| students to take a look.</p>
<blockquote>
<p>students<br>
  grade male female<br>
1     A    5      3<br>
2     B    4      1<br>
3     C    8      6<br>
4     D    4      5<br>
5     E    5      5</p>
</blockquote>
<p>| That's a job well done!</p>
<p>|============                                                                    |  15%<br>
| The first column represents each of five possible grades that students could receive<br>
| for a particular class. The second and third columns give the number of male and female<br>
| students, respectively, that received each grade.</p>
<p>...</p>
<p>|=============                                                                   |  16%<br>
| This dataset actually has three variables: grade, sex, and count. The first variable,<br>
| grade, is already a column, so that should remain as it is. The second variable, sex,<br>
| is captured by the second and third column headings. The third variable, count, is the<br>
| number of students for each combination of grade and sex.</p>
<p>...</p>
<p>|===============                                                                 |  18%<br>
| To tidy the students data, we need to have one column for each of these three<br>
| variables. We'll use the gather() function from tidyr to accomplish this. Pull up the<br>
| documentation for this function with ?gather.</p>
<blockquote>
<p>?gather</p>
</blockquote>
<p>| Nice work!</p>
<p>|================                                                                |  20%<br>
| Using the help file as a guide, call gather() with the following arguments (in order):<br>
| students, sex, count, -grade. Note the minus sign before grade, which says we want to<br>
| gather all columns EXCEPT grade.</p>
<blockquote>
<p>gather(students,sex,count,-grade)<br>
   grade    sex count<br>
1      A   male     5<br>
2      B   male     4<br>
3      C   male     8<br>
4      D   male     4<br>
5      E   male     5<br>
6      A female     3<br>
7      B female     1<br>
8      C female     6<br>
9      D female     5<br>
10     E female     5</p>
</blockquote>
<p>| All that hard work is paying off!</p>
<p>|=================                                                               |  22%<br>
| Each row of the data now represents exactly one observation, characterized by a unique<br>
| combination of the grade and sex variables. Each of our variables (grade, sex, and<br>
| count) occupies exactly one column. That's tidy data!</p>
<p>...</p>
<p>|===================                                                             |  24%<br>
| It's important to understand what each argument to gather() means. The data argument,<br>
| students, gives the name of the original dataset. The key and value arguments -- sex<br>
| and count, respectively -- give the column names for our tidy dataset. The final<br>
| argument, -grade, says that we want to gather all columns EXCEPT the grade column<br>
| (since grade is already a proper column variable.)</p>
<p>...</p>
<p>|====================                                                            |  25%<br>
| The second messy data case we'll look at is when multiple variables are stored in one<br>
| column. Type students2 to see an example of this.</p>
<blockquote>
<p>students2<br>
  grade male_1 female_1 male_2 female_2<br>
1     A      7        0      5        8<br>
2     B      4        0      5        8<br>
3     C      7        4      5        6<br>
4     D      8        2      8        1<br>
5     E      8        4      1        0</p>
</blockquote>
<p>| Excellent work!</p>
<p>|======================                                                          |  27%<br>
| This dataset is similar to the first, except now there are two separate classes, 1 and<br>
| 2, and we have total counts for each sex within each class. students2 suffers from the<br>
| same messy data problem of having column headers that are values (male_1, female_1,<br>
| etc.) and not variable names (sex, class, and count).</p>
<p>...</p>
<p>|=======================                                                         |  29%<br>
| However, it also has multiple variables stored in each column (sex and class), which is<br>
| another common symptom of messy data. Tidying this dataset will be a two step process.</p>
<p>...</p>
<p>|=========================                                                       |  31%<br>
| Let's start by using gather() to stack the columns of students2, like we just did with<br>
| students. This time, name the 'key' column sex_class and the 'value' column count. Save<br>
| the result to a new variable called res. Consult ?gather again if you need help.</p>
<blockquote>
<p>res&lt;-gather(students2,sex_class,count,-grade)</p>
</blockquote>
<p>| Your dedication is inspiring!</p>
<p>|==========================                                                      |  33%<br>
| Print res to the console to see what we accomplished.</p>
<blockquote>
<p>res<br>
   grade sex_class count<br>
1      A    male_1     7<br>
2      B    male_1     4<br>
3      C    male_1     7<br>
4      D    male_1     8<br>
5      E    male_1     8<br>
6      A  female_1     0<br>
7      B  female_1     0<br>
8      C  female_1     4<br>
9      D  female_1     2<br>
10     E  female_1     4<br>
11     A    male_2     5<br>
12     B    male_2     5<br>
13     C    male_2     5<br>
14     D    male_2     8<br>
15     E    male_2     1<br>
16     A  female_2     8<br>
17     B  female_2     8<br>
18     C  female_2     6<br>
19     D  female_2     1<br>
20     E  female_2     0</p>
</blockquote>
<p>| Your dedication is inspiring!</p>
<p>|============================                                                    |  35%<br>
| That got us half way to tidy data, but we still have two different variables, sex and<br>
| class, stored together in the sex_class column. tidyr offers a convenient separate()<br>
| function for the purpose of separating one column into multiple columns. Pull up the<br>
| help file for separate() now.</p>
<blockquote>
<p>?separate</p>
</blockquote>
<p>| You got it right!</p>
<p>|=============================                                                   |  36%<br>
| Call separate() on res to split the sex_class column into sex and class. You only need<br>
| to specify the first three arguments: data = res, col = sex_class, into = c("sex",<br>
| "class"). You don't have to provide the argument names as long as they are in the<br>
| correct order.</p>
<blockquote>
<p>separate(data=res,col=sex_class,into=c("sex","class"))<br>
   grade    sex class count<br>
1      A   male     1     7<br>
2      B   male     1     4<br>
3      C   male     1     7<br>
4      D   male     1     8<br>
5      E   male     1     8<br>
6      A female     1     0<br>
7      B female     1     0<br>
8      C female     1     4<br>
9      D female     1     2<br>
10     E female     1     4<br>
11     A   male     2     5<br>
12     B   male     2     5<br>
13     C   male     2     5<br>
14     D   male     2     8<br>
15     E   male     2     1<br>
16     A female     2     8<br>
17     B female     2     8<br>
18     C female     2     6<br>
19     D female     2     1<br>
20     E female     2     0</p>
</blockquote>
<p>| You are amazing!</p>
<p>|===============================                                                 |  38%<br>
| Conveniently, separate() was able to figure out on its own how to separate the<br>
| sex_class column. Unless you request otherwise with the 'sep' argument, it splits on<br>
| non-alphanumeric values. In other words, it assumes that the values are separated by<br>
| something other than a letter or number (in this case, an underscore.)</p>
<p>...</p>
<p>|================================                                                |  40%<br>
| Tidying students2 required both gather() and separate(), causing us to save an<br>
| intermediate result (res). However, just like with dplyr, you can use the %&gt;% operator<br>
| to chain multiple function calls together.</p>
<p>...</p>
<p>|=================================                                               |  42%<br>
| I've opened an R script for you to give this a try. Follow the directions in the<br>
| script, then save the script and type submit() at the prompt when you are ready. If you<br>
| get stuck and want to start over, you can type reset() to reset the script to its<br>
| original state.</p>

<pre><code>{r}
# Repeat your calls to gather() and separate(), but this time
# use the %&gt;% operator to chain the commands together without
# storing an intermediate result.
#
# If this is your first time seeing the %&gt;% operator, check
# out ?chain, which will bring up the relevant documentation.
# You can also look at the Examples section at the bottom
# of ?gather and ?separate.
#
# The main idea is that the result to the left of %&gt;%
# takes the place of the first argument of the function to
# the right. Therefore, you OMIT THE FIRST ARGUMENT to each
# function.
#
students2 %&gt;%
  gather(sex_class ,count ,-grade ) %&gt;%
  separate(sex_class , c("sex", "class")) %&gt;%
  print</code></pre>
<blockquote>
<p>submit()</p>
</blockquote>
<p>| Sourcing your script...</p>
<p>grade    sex class count<br>
1      A   male     1     7<br>
2      B   male     1     4<br>
3      C   male     1     7<br>
4      D   male     1     8<br>
5      E   male     1     8<br>
6      A female     1     0<br>
7      B female     1     0<br>
8      C female     1     4<br>
9      D female     1     2<br>
10     E female     1     4<br>
11     A   male     2     5<br>
12     B   male     2     5<br>
13     C   male     2     5<br>
14     D   male     2     8<br>
15     E   male     2     1<br>
16     A female     2     8<br>
17     B female     2     8<br>
18     C female     2     6<br>
19     D female     2     1<br>
20     E female     2     0</p>
<p>| Excellent work!</p>
<p>|===================================                                             |  44%<br>
| A third symptom of messy data is when variables are stored in both rows and columns.<br>
| students3 provides an example of this. Print students3 to the console.</p>
<blockquote>
<p>students3<br>
    name    test class1 class2 class3 class4 class5<br>
1  Sally midterm      A   <na>      B   <na><na><br>
2  Sally   final      C   <na>      C   <na><na><br>
3   Jeff midterm   <na>      D   <na>      A   <na><br>
4   Jeff   final   <na>      E   <na>      C   <na><br>
5  Roger midterm   <na>      C   <na><na>      B<br>
6  Roger   final   <na>      A   <na><na>      A<br>
7  Karen midterm   <na><na>      C      A   <na><br>
8  Karen   final   <na><na>      C      A   <na><br>
9  Brian midterm      B   <na><na><na>      A<br>
10 Brian   final      B   <na><na><na>      C</na></na></na></na></na></na></na></na></na></na></na></na></na></na></na></na></na></na></na></na></na></na></na></na></na></na></na></na></na></na></p>
</blockquote>
<p>| You got it right!</p>
<p>|====================================                                            |  45%<br>
| In students3, we have midterm and final exam grades for five students, each of whom<br>
| were enrolled in exactly two of five possible classes.</p>
<p>...</p>
<p>|======================================                                          |  47%<br>
| The first variable, name, is already a column and should remain as it is. The headers<br>
| of the last five columns, class1 through class5, are all different values of what<br>
| should be a class variable. The values in the test column, midterm and final, should<br>
| each be its own variable containing the respective grades for each student.</p>
<p>...</p>
<p>|=======================================                                         |  49%<br>
| This will require multiple steps, which we will build up gradually using %&gt;%. Edit the<br>
| R script, save it, then type submit() when you are ready. Type reset() to reset the<br>
| script to its original state.</p>

<pre><code>{r}
# Call gather() to gather the columns class1
# through class5 into a new variable called class.
# The 'key' should be class, and the 'value'
# should be grade.
#
# tidyr makes it easy to reference multiple adjacent
# columns with class1:class5, just like with sequences
# of numbers.
#
# Since each student is only enrolled in two of
# the five possible classes, there are lots of missing
# values (i.e. NAs). Use the argument na.rm = TRUE
# to omit these values from the final result.
#
# Remember that when you're using the %&gt;% operator,
# the value to the left of it gets inserted as the
# first argument to the function on the right.
#
# Consult ?gather and/or ?chain if you get stuck.
#
students3 %&gt;%
  gather(class ,grade , class1:class5 ,na.rm = TRUE) %&gt;%
  print</code></pre>
<blockquote>
<p>submit()</p>
</blockquote>
<p>| Sourcing your script...</p>

<pre><code>name    test  class grade  
</code></pre>
<p>1  Sally midterm class1     A<br>
2  Sally   final class1     C<br>
9  Brian midterm class1     B<br>
10 Brian   final class1     B<br>
13  Jeff midterm class2     D<br>
14  Jeff   final class2     E<br>
15 Roger midterm class2     C<br>
16 Roger   final class2     A<br>
21 Sally midterm class3     B<br>
22 Sally   final class3     C<br>
27 Karen midterm class3     C<br>
28 Karen   final class3     C<br>
33  Jeff midterm class4     A<br>
34  Jeff   final class4     C<br>
37 Karen midterm class4     A<br>
38 Karen   final class4     A<br>
45 Roger midterm class5     B<br>
46 Roger   final class5     A<br>
49 Brian midterm class5     A<br>
50 Brian   final class5     C</p>
<p>| That's correct!</p>
<p>|=========================================                                       |  51%<br>
| The next step will require the use of spread(). Pull up the documentation for spread()<br>
| now.</p>
<blockquote>
<p>?spread</p>
</blockquote>
<p>| Keep working like that and you'll get there!</p>
<p>|==========================================                                      |  53%<br>
| Edit the R script, then save it and type submit() when you are ready. Type reset() to<br>
| reset the script to its original state.</p>

<pre><code>{r}
# This script builds on the previous one by appending
# a call to spread(), which will allow us to turn the
# values of the test column, midterm and final, into
# column headers (i.e. variables).
#
# You only need to specify two arguments to spread().
# Can you figure out what they are? (Hint: You don't
# have to specify the data argument since we're using
# the %&gt;% operator.
#
students3 %&gt;%
  gather(class, grade, class1:class5, na.rm = TRUE) %&gt;%
  spread( test, grade) %&gt;%
  print</code></pre>
<blockquote>
<p>submit()</p>
</blockquote>
<p>| Sourcing your script...</p>

<pre><code>name  class final midterm  
</code></pre>
<p>1  Brian class1     B       B<br>
2  Brian class5     C       A<br>
3   Jeff class2     E       D<br>
4   Jeff class4     C       A<br>
5  Karen class3     C       C<br>
6  Karen class4     A       A<br>
7  Roger class2     A       C<br>
8  Roger class5     A       B<br>
9  Sally class1     C       A<br>
10 Sally class3     C       B</p>
<p>| All that practice is paying off!</p>
<p>|============================================                                    |  55%<br>
| readr is required for certain data manipulations, such as `parse_number(), which will<br>
| be used in the next question.  Let's, (re)load the package with library(readr).</p>
<blockquote>
<p>library(readr)</p>
</blockquote>
<p>| Nice work!</p>
<p>|=============================================                                   |  56%<br>
| Lastly, we want the values in the class column to simply be 1, 2, ..., 5 and not<br>
| class1, class2, ..., class5. We can use the parse_number() function from readr to<br>
| accomplish this. To see how it works, try parse_number("class5").</p>
<blockquote>
<p>parse_number("class5")<br>
[1] 5</p>
</blockquote>
<p>| Your dedication is inspiring!</p>
<p>|===============================================                                 |  58%<br>
| Now, the final step. Edit the R script, then save it and type submit() when you are<br>
| ready. Type reset() to reset the script to its original state.</p>

<pre><code>{r}
# We want the values in the class columns to be
# 1, 2, ..., 5 and not class1, class2, ..., class5.
#
# Use the mutate() function from dplyr along with
# parse_number(). Hint: You can "overwrite" a column
# with mutate() by assigning a new value to the existing
# column instead of creating a new column.
#
# Check out ?mutate and/or ?parse_number if you need
# a refresher.
#
students3 %&gt;%
  gather(class, grade, class1:class5, na.rm = TRUE) %&gt;%
  spread(test, grade) %&gt;%
  ### Call to mutate() goes here %&gt;%
  mutate(class=parse_number(class)) %&gt;%
  print</code></pre>
<blockquote>
<p>submit()</p>
</blockquote>
<p>| Sourcing your script...</p>

<pre><code>name class final midterm  
</code></pre>
<p>1  Brian     1     B       B<br>
2  Brian     5     C       A<br>
3   Jeff     2     E       D<br>
4   Jeff     4     C       A<br>
5  Karen     3     C       C<br>
6  Karen     4     A       A<br>
7  Roger     2     A       C<br>
8  Roger     5     A       B<br>
9  Sally     1     C       A<br>
10 Sally     3     C       B</p>
<p>| You got it!</p>
<p>|================================================                                |  60%<br>
| The fourth messy data problem we'll look at occurs when multiple observational units<br>
| are stored in the same table. students4 presents an example of this. Take a look at the<br>
| data now.</p>
<blockquote>
<p>students4<br>
    id  name sex class midterm final<br>
1  168 Brian   F     1       B     B<br>
2  168 Brian   F     5       A     C<br>
3  588 Sally   M     1       A     C<br>
4  588 Sally   M     3       B     C<br>
5  710  Jeff   M     2       D     E<br>
6  710  Jeff   M     4       A     C<br>
7  731 Roger   F     2       C     A<br>
8  731 Roger   F     5       B     A<br>
9  908 Karen   M     3       C     C<br>
10 908 Karen   M     4       A     A</p>
</blockquote>
<p>| You are doing so well!</p>
<p>|=================================================                               |  62%<br>
| students4 is almost the same as our tidy version of students3. The only difference is<br>
| that students4 provides a unique id for each student, as well as his or her sex (M =<br>
| male; F = female).</p>
<p>...</p>
<p>|===================================================                             |  64%<br>
| At first glance, there doesn't seem to be much of a problem with students4. All columns<br>
| are variables and all rows are observations. However, notice that each id, name, and<br>
| sex is repeated twice, which seems quite redundant. This is a hint that our data<br>
| contains multiple observational units in a single table.</p>
<p>...</p>
<p>|====================================================                            |  65%<br>
| Our solution will be to break students4 into two separate tables -- one containing<br>
| basic student information (id, name, and sex) and the other containing grades (id,<br>
| class, midterm, final).<br>
|<br>
| Edit the R script, save it, then type submit() when you are ready. Type reset() to<br>
| reset the script to its original state.</p>

<pre><code>{r}
# Complete the chained command below so that we are
# selecting the id, name, and sex column from students4
# and storing the result in student_info.
#
student_info &lt;- students4 %&gt;%
  select(id ,name ,sex ) %&gt;%
  print</code></pre>
<blockquote>
<p>submit()</p>
</blockquote>
<p>| Sourcing your script...</p>

<pre><code>id  name sex  
</code></pre>
<p>1  168 Brian   F<br>
2  168 Brian   F<br>
3  588 Sally   M<br>
4  588 Sally   M<br>
5  710  Jeff   M<br>
6  710  Jeff   M<br>
7  731 Roger   F<br>
8  731 Roger   F<br>
9  908 Karen   M<br>
10 908 Karen   M</p>
<p>| You are amazing!</p>
<p>|======================================================                          |  67%<br>
| Notice anything strange about student_info? It contains five duplicate rows! See the<br>
| script for directions on how to fix this. Save the script and type submit() when you<br>
| are ready, or type reset() to reset the script to its original state.</p>

<pre><code>{r}
# Add a call to unique() below, which will remove
# duplicate rows from student_info.
#
# Like with the call to the print() function below,
# you can omit the parentheses after the function name.
# This is a nice feature of %&gt;% that applies when
# there are no additional arguments to specify.
#
student_info &lt;- students4 %&gt;%
  select(id, name, sex) %&gt;%
  ### Your code here %&gt;%
  unique() %&gt;%
  print</code></pre>
<blockquote>
<p>submit()</p>
</blockquote>
<p>| Sourcing your script...</p>
<p>id  name sex<br>
1 168 Brian   F<br>
3 588 Sally   M<br>
5 710  Jeff   M<br>
7 731 Roger   F<br>
9 908 Karen   M</p>
<p>| Excellent job!</p>
<p>|=======================================================                         |  69%<br>
| Now, using the script I just opened for you, create a second table called gradebook<br>
| using the id, class, midterm, and final columns (in that order).<br>
|<br>
| Edit the R script, save it, then type submit() when you are ready. Type reset() to<br>
| reset the script to its original state.</p>

<pre><code>{r}
# select() the id, class, midterm, and final columns
# (in that order) and store the result in gradebook.
#
gradebook &lt;- students4 %&gt;%
  ### Your code here %&gt;%
  select(id,class,midterm,final) %&gt;%
  print</code></pre>
<blockquote>
<p>submit()</p>
</blockquote>
<p>| Sourcing your script...</p>

<pre><code>id class midterm final  
</code></pre>
<p>1  168     1       B     B<br>
2  168     5       A     C<br>
3  588     1       A     C<br>
4  588     3       B     C<br>
5  710     2       D     E<br>
6  710     4       A     C<br>
7  731     2       C     A<br>
8  731     5       B     A<br>
9  908     3       C     C<br>
10 908     4       A     A</p>
<p>| You are quite good my friend!</p>
<p>|=========================================================                       |  71%<br>
| It's important to note that we left the id column in both tables. In the world of<br>
| relational databases, 'id' is called our 'primary key' since it allows us to connect<br>
| each student listed in student_info with their grades listed in gradebook. Without a<br>
| unique identifier, we might not know how the tables are related. (In this case, we<br>
| could have also used the name variable, since each student happens to have a unique<br>
| name.)</p>
<p>...</p>
<p>|==========================================================                      |  73%<br>
| The fifth and final messy data scenario that we'll address is when a single<br>
| observational unit is stored in multiple tables. It's the opposite of the fourth<br>
| problem.</p>
<p>...</p>
<p>|============================================================                    |  75%<br>
| To illustrate this, we've created two datasets, passed and failed. Take a look at<br>
| passed now.</p>
<blockquote>
<p>passed<br>
   name class final<br>
1 Brian     1     B<br>
2 Roger     2     A<br>
3 Roger     5     A<br>
4 Karen     4     A</p>
</blockquote>
<p>| All that hard work is paying off!</p>
<p>|=============================================================                   |  76%<br>
| Now view the contents of failed.</p>
<blockquote>
<p>failed<br>
   name class final<br>
1 Brian     5     C<br>
2 Sally     1     C<br>
3 Sally     3     C<br>
4  Jeff     2     E<br>
5  Jeff     4     C<br>
6 Karen     3     C</p>
</blockquote>
<p>| Your dedication is inspiring!</p>
<p>|===============================================================                 |  78%<br>
| Teachers decided to only take into consideration final exam grades in determining<br>
| whether students passed or failed each class. As you may have inferred from the data,<br>
| students passed a class if they received a final exam grade of A or B and failed<br>
| otherwise.</p>
<p>...</p>
<p>|================================================================                |  80%<br>
| The name of each dataset actually represents the value of a new variable that we will<br>
| call 'status'. Before joining the two tables together, we'll add a new column to each<br>
| containing this information so that it's not lost when we put everything together.</p>
<p>...</p>
<p>|=================================================================               |  82%<br>
| Use dplyr's mutate() to add a new column to the passed table. The column should be<br>
| called status and the value, "passed" (a character string), should be the same for all<br>
| students. 'Overwrite' the current version of passed with the new one.</p>
<blockquote>
<p>passed&lt;-mutate(passed,status="passed")</p>
</blockquote>
<p>| That's a job well done!</p>
<p>|===================================================================             |  84%<br>
| Now, do the same for the failed table, except the status column should have the value<br>
| "failed" for all students.</p>
<blockquote>
<p>failed&lt;-mutate(failed,status="failed")</p>
</blockquote>
<p>| Perseverance, that's the answer.</p>
<p>|====================================================================            |  85%<br>
| Now, pass as arguments the passed and failed tables (in order) to the dplyr function<br>
| bind_rows(), which will join them together into a single unit. Check ?bind_rows if you<br>
| need help.<br>
|<br>
| Note: bind_rows() is only available in dplyr 0.4.0 or later. If you have an older<br>
| version of dplyr, please quit the lesson, update dplyr, then restart the lesson where<br>
| you left off. If you're not sure what version of dplyr you have, type<br>
| packageVersion('dplyr').</p>
<blockquote>
<p>bind_rows(passed,failed)<br>
    name class final status<br>
1  Brian     1     B passed<br>
2  Roger     2     A passed<br>
3  Roger     5     A passed<br>
4  Karen     4     A passed<br>
5  Brian     5     C failed<br>
6  Sally     1     C failed<br>
7  Sally     3     C failed<br>
8   Jeff     2     E failed<br>
9   Jeff     4     C failed<br>
10 Karen     3     C failed</p>
</blockquote>
<p>| You nailed it! Good job!</p>
<p>|======================================================================          |  87%<br>
| Of course, we could arrange the rows however we wish at this point, but the important<br>
| thing is that each row is an observation, each column is a variable, and the table<br>
| contains a single observational unit. Thus, the data are tidy.</p>
<p>...</p>
<p>|=======================================================================         |  89%<br>
| We've covered a lot in this lesson. Let's bring everything together and tidy a real<br>
| dataset.</p>
<p>...</p>
<p>|=========================================================================       |  91%<br>
| The SAT is a popular college-readiness exam in the United States that consists of three<br>
| sections: critical reading, mathematics, and writing. Students can earn up to 800<br>
| points on each section. This dataset presents the total number of students, for each<br>
| combination of exam section and sex, within each of six score ranges. It comes from the<br>
| 'Total Group Report 2013', which can be found here:<br>
|<br>
| <a href="http://research.collegeboard.org/programs/sat/data/cb-seniors-2013">http://research.collegeboard.org/programs/sat/data/cb-seniors-2013</a></p>
<p>...</p>
<p>|==========================================================================      |  93%<br>
| I've created a variable called 'sat' in your workspace, which contains data on all<br>
| college-bound seniors who took the SAT exam in 2013. Print the dataset now.</p>
<blockquote>
<p>sat<br>
# A tibble: 6 x 10<br>
  score_range read_male read_fem read_total math_male math_fem math_total write_male<br><chr><int><int><int><int><int><int><int><br>
1 700-800         40151    38898      79049     74461    46040     120501      31574<br>
2 600-690        121950   126084     248034    162564   133954     296518     100963<br>
3 500-590        227141   259553     486694    233141   257678     490819     202326<br>
4 400-490        242554   296793     539347    204670   288696     493366     262623<br>
5 300-390        113568   133473     247041     82468   131025     213493     146106<br>
6 200-290         30728    29154      59882     18788    26562      45350      32500<br>
# ... with 2 more variables: write_fem <int>, write_total <int></int></int></int></int></int></int></int></int></int></chr></p>
</blockquote>
<p>| That's a job well done!</p>
<p>|============================================================================    |  95%<br>
| As we've done before, we'll build up a series of chained commands, using functions from<br>
| both tidyr and dplyr. Edit the R script, save it, then type submit() when you are<br>
| ready. Type reset() to reset the script to its original state.</p>

<pre><code>{r}
# Accomplish the following three goals:
#
# 1. select() all columns that do NOT contain the word "total",
# since if we have the male and female data, we can always
# recreate the total count in a separate column, if we want it.
# Hint: Use the contains() function, which you'll
# find detailed in 'Special functions' section of ?select.
#
# 2. gather() all columns EXCEPT score_range, using
# key = part_sex and value = count.
#
# 3. separate() part_sex into two separate variables (columns),
# called "part" and "sex", respectively. You may need to check
# the 'Examples' section of ?separate to remember how the 'into'
# argument should be phrased.
#
sat %&gt;%
  select(-contains("total")) %&gt;%
  gather(part_sex, count, -score_range) %&gt;%
  ### &lt;Your call to separate()&gt; %&gt;%
  separate(part_sex,c("part","sex")) %&gt;%
  print</code></pre>
<blockquote>
<p>submit()</p>
</blockquote>
<p>| Sourcing your script...</p>
<p># A tibble: 36 x 4<br>
   score_range part  sex    count<br><chr><chr><chr><int><br>
 1 700-800     read  male   40151<br>
 2 600-690     read  male  121950<br>
 3 500-590     read  male  227141<br>
 4 400-490     read  male  242554<br>
 5 300-390     read  male  113568<br>
 6 200-290     read  male   30728<br>
 7 700-800     read  fem    38898<br>
 8 600-690     read  fem   126084<br>
 9 500-590     read  fem   259553<br>
10 400-490     read  fem   296793<br>
# ... with 26 more rows</int></chr></chr></chr></p>
<p>| You got it!</p>
<p>|=============================================================================   |  96%<br>
| Finish off the job by following the directions in the script. Save the script and type<br>
| submit() when you are ready, or type reset() to reset the script to its original state.</p>

<pre><code>{r}
# Append two more function calls to accomplish the following:
#
# 1. Use group_by() (from dplyr) to group the data by part and
# sex, in that order.
#
# 2. Use mutate to add two new columns, whose values will be
# automatically computed group-by-group:
#
#   * total = sum(count)
#   * prop = count / total
#
sat %&gt;%
  select(-contains("total")) %&gt;%
  gather(part_sex, count, -score_range) %&gt;%
  separate(part_sex, c("part", "sex")) %&gt;%
  ### &lt;Your call to group_by()&gt; %&gt;%
  group_by(part,sex) %&gt;%
  mutate(total = sum(count),
         prop = count / total
  ) %&gt;% print</code></pre>
<blockquote>
<p>submit()</p>
</blockquote>
<p>| Sourcing your script...</p>
<p># A tibble: 36 x 6<br>
# Groups:   part, sex [6]<br>
   score_range part  sex    count  total   prop<br><chr><chr><chr><int><int><dbl><br>
 1 700-800     read  male   40151 776092 0.0517<br>
 2 600-690     read  male  121950 776092 0.157<br>
 3 500-590     read  male  227141 776092 0.293<br>
 4 400-490     read  male  242554 776092 0.313<br>
 5 300-390     read  male  113568 776092 0.146<br>
 6 200-290     read  male   30728 776092 0.0396<br>
 7 700-800     read  fem    38898 883955 0.0440<br>
 8 600-690     read  fem   126084 883955 0.143<br>
 9 500-590     read  fem   259553 883955 0.294<br>
10 400-490     read  fem   296793 883955 0.336<br>
# ... with 26 more rows</dbl></int></int></chr></chr></chr></p>
<p>| Keep up the great work!</p>
<p>|=============================================================================== |  98%<br>
| In this lesson, you learned how to tidy data with tidyr and dplyr. These tools will<br>
| help you spend less time and energy getting your data ready to analyze and more time<br>
| actually analyzing it.</p>
<p>...</p>
<p>|================================================================================| 100%<br>
| Would you like to receive credit for completing this course on Coursera.org?</p>
<p>1: Yes<br>
2: No</p>
<p>Selection: 1<br>
What is your email address? xxxxxx@xxxxxxxxxxxx<br>
What is your assignment token? xXxXxxXXxXxxXXXx<br>
Grade submission succeeded!</p>
<p>| Excellent job!</p>
<p>| You've reached the end of this lesson! Returning to the main menu...</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Getting and Cleaning Data<br>
2: R Programming<br>
3: Take me to the swirl course repository!</p>
<p>Selection: 0</p>
<p>| Leaving swirl now. Type swirl() to resume.</p>
<blockquote>
<p>ls()<br>
 [1] "failed"       "gradebook"    "passed"       "res"          "sat"<br>
 [6] "student_info" "students"     "students2"    "students3"    "students4"<br>
rm(list=ls())</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Last updated 2020-04-23 21:12:57.937316 IST</em></p>

</div>
</div>
</div>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="00417/" class="u-url">Grouping and Chaining with dplyr</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Krishnakanth Allika
            </span></p>
            <p class="dateline">
            <a href="00417/" rel="bookmark">
            <time class="published dt-published" datetime="2020-04-23T20:38:07+05:30" itemprop="datePublished" title="2020-04-23 20:38">2020-04-23 20:38</time></a>
            </p>
                <p class="commentline">
        
<a href="%7Blink%7D" onclick="this.href='/posts/00417/'; this.target='_self';"><span class="IDCommentsReplace" style="display:none">cache/posts/00417_Grouping and Chaining with dplyr.html</span>
<script>
var idcomments_acct = '7fae5836cfdd49cac599cac5b95695d1';
var idcomments_post_id = "cache/posts/00417_Grouping and Chaining with dplyr.html";
var idcomments_post_url = "/posts/00417/";
</script><script src="https://www.intensedebate.com/js/genericLinkWrapperV2.js"></script></a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>R version 3.6.3 (2020-02-29) -- "Holding the Windsock"<br>
Copyright (C) 2020 The R Foundation for Statistical Computing<br>
Platform: x86_64-w64-mingw32/x64 (64-bit)</p>
<p>R is free software and comes with ABSOLUTELY NO WARRANTY.<br>
You are welcome to redistribute it under certain conditions.<br>
Type 'license()' or 'licence()' for distribution details.</p>
<p>R is a collaborative project with many contributors.<br>
Type 'contributors()' for more information and<br>
'citation()' on how to cite R or R packages in publications.</p>
<p>Type 'demo()' for some demos, 'help()' for on-line help, or<br>
'help.start()' for an HTML browser interface to help.<br>
Type 'q()' to quit R.</p>
<p>[Workspace loaded from C:/Users/kk/PortableApps/Git/home/k-allika/repos/DataScienceWithR/.RData]</p>
<blockquote>
<p>setwd("C:/Users/kk/PortableApps/Git/home/k-allika/repos/DataScienceWithR/03_Getting_and_Cleaning_Data/Week03/workspace")<br>
library(swirl)</p>
</blockquote>
<p>| Hi! Type swirl() when you are ready to begin.</p>
<blockquote>
<p>swirl()</p>
</blockquote>
<p>| Welcome to swirl! Please sign in. If you've been here before, use the same name as you<br>
| did then. If you are new, call yourself something unique.</p>
<p>What shall I call you? Krishnakanth allika</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Getting and Cleaning Data<br>
2: R Programming<br>
3: Take me to the swirl course repository!</p>
<p>Selection: 1</p>
<p>| Please choose a lesson, or type 0 to return to course menu.</p>
<p>1: Manipulating Data with dplyr<br>
2: Grouping and Chaining with dplyr<br>
3: Tidying Data with tidyr<br>
4: Dates and Times with lubridate</p>
<p>Selection: 2</p>
<p>| Attempting to load lesson dependencies...</p>
<p>| Package â€˜dplyrâ€™ loaded correctly!</p>
<p>|                                                                                |   0%</p>
<p>| Warning: This lesson makes use of the View() function. View() may not work properly in<br>
| every programming environment. We highly recommend the use of RStudio for this lesson.</p>
<p>...</p>
<p>|==                                                                              |   2%<br>
| In the last lesson, you learned about the five main data manipulation 'verbs' in dplyr:<br>
| select(), filter(), arrange(), mutate(), and summarize(). The last of these,<br>
| summarize(), is most powerful when applied to grouped data.</p>
<p>...</p>
<p>|===                                                                             |   4%<br>
| The main idea behind grouping data is that you want to break up your dataset into<br>
| groups of rows based on the values of one or more variables. The group_by() function is<br>
| reponsible for doing this.</p>
<p>...</p>
<p>|=====                                                                           |   6%<br>
| We'll continue where we left off with RStudio's CRAN download log from July 8, 2014,<br>
| which contains information on roughly 225,000 R package downloads<br>
| (<a href="http://cran-logs.rstudio.com/">http://cran-logs.rstudio.com/</a>).</p>
<p>...</p>
<p>|======                                                                          |   8%<br>
| As with the last lesson, the dplyr package was automatically installed (if necessary)<br>
| and loaded at the beginning of this lesson. Normally, this is something you would have<br>
| to do on your own. Just to build the habit, type library(dplyr) now to load the package<br>
| again.</p>
<blockquote>
<p>library(dplyr)</p>
</blockquote>
<p>| That's the answer I was looking for.</p>
<p>|========                                                                        |  10%<br>
| I've made the dataset available to you in a data frame called mydf. Put it in a 'data<br>
| frame tbl' using the tbl_df() function and store the result in a object called cran. If<br>
| you're not sure what I'm talking about, you should start with the previous lesson.<br>
| Otherwise, practice makes perfect!</p>
<blockquote>
<p>cran&lt;-as_tibble(mydf)</p>
</blockquote>
<p>| Not exactly. Give it another go. Or, type info() for more options.</p>
<p>| Type cran &lt;- tbl_df(mydf) to store the data in a new tbl_df called cran.</p>
<blockquote>
<p>cran&lt;-tbl_df(mydf)</p>
</blockquote>
<p>| You are doing so well!</p>
<p>|=========                                                                       |  12%<br>
| To avoid confusion and keep things running smoothly, let's remove the original<br>
| dataframe from your workspace with rm("mydf").</p>
<blockquote>
<p>rm("mydf")</p>
</blockquote>
<p>| All that hard work is paying off!</p>
<p>|===========                                                                     |  13%<br>
| Print cran to the console.</p>
<blockquote>
<p>cran<br>
# A tibble: 225,468 x 11<br>
       X date     time       size r_version r_arch r_os    package   version country ip_id<br><int><chr><chr><int><chr><chr><chr><chr><chr><chr><int><br>
 1     1 2014-07~ 00:54:~   80589 3.1.0     x86_64 mingw32 htmltools 0.2.4   US          1<br>
 2     2 2014-07~ 00:59:~  321767 3.1.0     x86_64 mingw32 tseries   0.10-32 US          2<br>
 3     3 2014-07~ 00:47:~  748063 3.1.0     x86_64 linux-~ party     1.0-15  US          3<br>
 4     4 2014-07~ 00:48:~  606104 3.1.0     x86_64 linux-~ Hmisc     3.14-4  US          3<br>
 5     5 2014-07~ 00:46:~   79825 3.0.2     x86_64 linux-~ digest    0.6.4   CA          4<br>
 6     6 2014-07~ 00:48:~   77681 3.1.0     x86_64 linux-~ randomFo~ 4.6-7   US          3<br>
 7     7 2014-07~ 00:48:~  393754 3.1.0     x86_64 linux-~ plyr      1.8.1   US          3<br>
 8     8 2014-07~ 00:47:~   28216 3.0.2     x86_64 linux-~ whisker   0.3-2   US          5<br>
 9     9 2014-07~ 00:54:~    5928 NA        NA     NA      Rcpp      0.10.4  CN          6<br>
10    10 2014-07~ 00:15:~ 2206029 3.0.2     x86_64 linux-~ hflights  0.1     US          7<br>
# ... with 225,458 more rows</int></chr></chr></chr></chr></chr></chr></int></chr></chr></int></p>
</blockquote>
<p>| You nailed it! Good job!</p>
<p>|============                                                                    |  15%<br>
| Our first goal is to group the data by package name. Bring up the help file for<br>
| group_by().</p>
<blockquote>
<p>group_by(cran,package)<br>
# A tibble: 225,468 x 11<br>
# Groups:   package [6,023]<br>
       X date     time       size r_version r_arch r_os    package   version country ip_id<br><int><chr><chr><int><chr><chr><chr><chr><chr><chr><int><br>
 1     1 2014-07~ 00:54:~   80589 3.1.0     x86_64 mingw32 htmltools 0.2.4   US          1<br>
 2     2 2014-07~ 00:59:~  321767 3.1.0     x86_64 mingw32 tseries   0.10-32 US          2<br>
 3     3 2014-07~ 00:47:~  748063 3.1.0     x86_64 linux-~ party     1.0-15  US          3<br>
 4     4 2014-07~ 00:48:~  606104 3.1.0     x86_64 linux-~ Hmisc     3.14-4  US          3<br>
 5     5 2014-07~ 00:46:~   79825 3.0.2     x86_64 linux-~ digest    0.6.4   CA          4<br>
 6     6 2014-07~ 00:48:~   77681 3.1.0     x86_64 linux-~ randomFo~ 4.6-7   US          3<br>
 7     7 2014-07~ 00:48:~  393754 3.1.0     x86_64 linux-~ plyr      1.8.1   US          3<br>
 8     8 2014-07~ 00:47:~   28216 3.0.2     x86_64 linux-~ whisker   0.3-2   US          5<br>
 9     9 2014-07~ 00:54:~    5928 NA        NA     NA      Rcpp      0.10.4  CN          6<br>
10    10 2014-07~ 00:15:~ 2206029 3.0.2     x86_64 linux-~ hflights  0.1     US          7<br>
# ... with 225,458 more rows</int></chr></chr></chr></chr></chr></chr></int></chr></chr></int></p>
</blockquote>
<p>| Keep trying! Or, type info() for more options.</p>
<p>| Use ?group_by to bring up the documentation.</p>
<blockquote>
<p>cran %&gt;% group_by(package)<br>
# A tibble: 225,468 x 11<br>
# Groups:   package [6,023]<br>
       X date     time       size r_version r_arch r_os    package   version country ip_id<br><int><chr><chr><int><chr><chr><chr><chr><chr><chr><int><br>
 1     1 2014-07~ 00:54:~   80589 3.1.0     x86_64 mingw32 htmltools 0.2.4   US          1<br>
 2     2 2014-07~ 00:59:~  321767 3.1.0     x86_64 mingw32 tseries   0.10-32 US          2<br>
 3     3 2014-07~ 00:47:~  748063 3.1.0     x86_64 linux-~ party     1.0-15  US          3<br>
 4     4 2014-07~ 00:48:~  606104 3.1.0     x86_64 linux-~ Hmisc     3.14-4  US          3<br>
 5     5 2014-07~ 00:46:~   79825 3.0.2     x86_64 linux-~ digest    0.6.4   CA          4<br>
 6     6 2014-07~ 00:48:~   77681 3.1.0     x86_64 linux-~ randomFo~ 4.6-7   US          3<br>
 7     7 2014-07~ 00:48:~  393754 3.1.0     x86_64 linux-~ plyr      1.8.1   US          3<br>
 8     8 2014-07~ 00:47:~   28216 3.0.2     x86_64 linux-~ whisker   0.3-2   US          5<br>
 9     9 2014-07~ 00:54:~    5928 NA        NA     NA      Rcpp      0.10.4  CN          6<br>
10    10 2014-07~ 00:15:~ 2206029 3.0.2     x86_64 linux-~ hflights  0.1     US          7<br>
# ... with 225,458 more rows</int></chr></chr></chr></chr></chr></chr></int></chr></chr></int></p>
</blockquote>
<p>| You almost had it, but not quite. Try again. Or, type info() for more options.</p>
<p>| Use ?group_by to bring up the documentation.</p>
<blockquote>
<p>?group_by</p>
</blockquote>
<p>| Your dedication is inspiring!</p>
<p>|==============                                                                  |  17%<br>
| Group cran by the package variable and store the result in a new object called<br>
| by_package.</p>
<blockquote>
<p>by_package&lt;-cran %&gt;% group_by(package)</p>
</blockquote>
<p>| That's not the answer I was looking for, but try again. Or, type info() for more<br>
| options.</p>
<p>| Store the result of group_by(cran, package) in a new object called by_package.</p>
<blockquote>
<p>by_package&lt;-group_by(cran,package)</p>
</blockquote>
<p>| You got it right!</p>
<p>|===============                                                                 |  19%<br>
| Let's take a look at by_package. Print it to the console.</p>
<blockquote>
<p>by_package<br>
# A tibble: 225,468 x 11<br>
# Groups:   package [6,023]<br>
       X date     time       size r_version r_arch r_os    package   version country ip_id<br><int><chr><chr><int><chr><chr><chr><chr><chr><chr><int><br>
 1     1 2014-07~ 00:54:~   80589 3.1.0     x86_64 mingw32 htmltools 0.2.4   US          1<br>
 2     2 2014-07~ 00:59:~  321767 3.1.0     x86_64 mingw32 tseries   0.10-32 US          2<br>
 3     3 2014-07~ 00:47:~  748063 3.1.0     x86_64 linux-~ party     1.0-15  US          3<br>
 4     4 2014-07~ 00:48:~  606104 3.1.0     x86_64 linux-~ Hmisc     3.14-4  US          3<br>
 5     5 2014-07~ 00:46:~   79825 3.0.2     x86_64 linux-~ digest    0.6.4   CA          4<br>
 6     6 2014-07~ 00:48:~   77681 3.1.0     x86_64 linux-~ randomFo~ 4.6-7   US          3<br>
 7     7 2014-07~ 00:48:~  393754 3.1.0     x86_64 linux-~ plyr      1.8.1   US          3<br>
 8     8 2014-07~ 00:47:~   28216 3.0.2     x86_64 linux-~ whisker   0.3-2   US          5<br>
 9     9 2014-07~ 00:54:~    5928 NA        NA     NA      Rcpp      0.10.4  CN          6<br>
10    10 2014-07~ 00:15:~ 2206029 3.0.2     x86_64 linux-~ hflights  0.1     US          7<br>
# ... with 225,458 more rows</int></chr></chr></chr></chr></chr></chr></int></chr></chr></int></p>
</blockquote>
<p>| Excellent work!</p>
<p>|=================                                                               |  21%<br>
| At the top of the output above, you'll see 'Groups: package', which tells us that this<br>
| tbl has been grouped by the package variable. Everything else looks the same, but now<br>
| any operation we apply to the grouped data will take place on a per package basis.</p>
<p>...</p>
<p>|==================                                                              |  23%<br>
| Recall that when we applied mean(size) to the original tbl_df via summarize(), it<br>
| returned a single number -- the mean of all values in the size column. We may care<br>
| about what that number is, but wouldn't it be so much more interesting to look at the<br>
| mean download size for each unique package?</p>
<p>...</p>
<p>|====================                                                            |  25%<br>
| That's exactly what you'll get if you use summarize() to apply mean(size) to the<br>
| grouped data in by_package. Give it a shot.</p>
<blockquote>
<p>summarise(by_package,mean(size))<br>
# A tibble: 6,023 x 2<br>
   package     <code>mean(size)</code><br><chr><dbl><br>
 1 A3                62195.<br>
 2 abc             4826665<br>
 3 abcdeFBA         455980.<br>
 4 ABCExtremes       22904.<br>
 5 ABCoptim          17807.<br>
 6 ABCp2             30473.<br>
 7 abctools        2589394<br>
 8 abd              453631.<br>
 9 abf2              35693.<br>
10 abind             32939.<br>
# ... with 6,013 more rows</dbl></chr></p>
</blockquote>
<p>| You got it right!</p>
<p>|======================                                                          |  27%<br>
| Instead of returning a single value, summarize() now returns the mean size for EACH<br>
| package in our dataset.</p>
<p>...</p>
<p>|=======================                                                         |  29%<br>
| Let's take it a step further. I just opened an R script for you that contains a<br>
| partially constructed call to summarize(). Follow the instructions in the script<br>
| comments.<br>
|<br>
| When you are ready to move on, save the script and type submit(), or type reset() to<br>
| reset the script to its original state.</p>
<blockquote>
<p>play()</p>
</blockquote>
<p>| Entering play mode. Experiment as you please, then type nxt() when you are ready to<br>
| resume the lesson.</p>
<blockquote>
<p>?n<br>
?n_distinct<br>
nxt()</p>
</blockquote>
<p>| Resuming lesson...</p>
<p>| Let's take it a step further. I just opened an R script for you that contains a<br>
| partially constructed call to summarize(). Follow the instructions in the script<br>
| comments.<br>
|<br>
| When you are ready to move on, save the script and type submit(), or type reset() to<br>
| reset the script to its original state.</p>

<pre><code>{r}
# Compute four values, in the following order, from
# the grouped data:
#
# 1. count = n()
# 2. unique = n_distinct(ip_id)
# 3. countries = n_distinct(country)
# 4. avg_bytes = mean(size)
#
# A few thing to be careful of:
#
# 1. Separate arguments by commas
# 2. Make sure you have a closing parenthesis
# 3. Check your spelling!
# 4. Store the result in pack_sum (for 'package summary')
#
# You should also take a look at ?n and ?n_distinct, so
# that you really understand what is going on.

pack_sum &lt;- summarize(by_package,
                      count = n(),
                      unique = n_distinct(ip_id),
                      countries = n_distinct(country),
                      avg_bytes = mean(size))</code></pre>
<blockquote>
<p>submit()</p>
</blockquote>
<p>| Sourcing your script...</p>
<p>| You are doing so well!</p>
<p>|=========================                                                       |  31%<br>
| Print the resulting tbl, pack_sum, to the console to examine its contents.</p>
<blockquote>
<p>pack_sum<br>
# A tibble: 6,023 x 5<br>
   package     count unique countries avg_bytes<br><chr><int><int><int><dbl><br>
 1 A3             25     24        10    62195.<br>
 2 abc            29     25        16  4826665<br>
 3 abcdeFBA       15     15         9   455980.<br>
 4 ABCExtremes    18     17         9    22904.<br>
 5 ABCoptim       16     15         9    17807.<br>
 6 ABCp2          18     17        10    30473.<br>
 7 abctools       19     19        11  2589394<br>
 8 abd            17     16        10   453631.<br>
 9 abf2           13     13         9    35693.<br>
10 abind         396    365        50    32939.<br>
# ... with 6,013 more rows</dbl></int></int></int></chr></p>
</blockquote>
<p>| That's the answer I was looking for.</p>
<p>|==========================                                                      |  33%<br>
| The 'count' column, created with n(), contains the total number of rows (i.e.<br>
| downloads) for each package. The 'unique' column, created with n_distinct(ip_id), gives<br>
| the total number of unique downloads for each package, as measured by the number of<br>
| distinct ip_id's. The 'countries' column, created with n_distinct(country), provides<br>
| the number of countries in which each package was downloaded. And finally, the<br>
| 'avg_bytes' column, created with mean(size), contains the mean download size (in bytes)<br>
| for each package.</p>
<p>...</p>
<p>|============================                                                    |  35%<br>
| It's important that you understand how each column of pack_sum was created and what it<br>
| means. Now that we've summarized the data by individual packages, let's play around<br>
| with it some more to see what we can learn.</p>
<p>...</p>
<p>|=============================                                                   |  37%<br>
| Naturally, we'd like to know which packages were most popular on the day these data<br>
| were collected (July 8, 2014). Let's start by isolating the top 1% of packages, based<br>
| on the total number of downloads as measured by the 'count' column.</p>
<p>...</p>
<p>|===============================                                                 |  38%<br>
| We need to know the value of 'count' that splits the data into the top 1% and bottom<br>
| 99% of packages based on total downloads. In statistics, this is called the 0.99, or<br>
| 99%, sample quantile. Use quantile(pack_sum$count, probs = 0.99) to determine this<br>
| number.</p>
<blockquote>
<p>quantile(pack_sum$count, probs = 0.99)<br>
   99%<br>
679.56</p>
</blockquote>
<p>| You're the best!</p>
<p>|================================                                                |  40%<br>
| Now we can isolate only those packages which had more than 679 total downloads. Use<br>
| filter() to select all rows from pack_sum for which 'count' is strictly greater (&gt;)<br>
| than 679. Store the result in a new object called top_counts.</p>
<blockquote>
<p>top_counts&lt;-filter(pack_sum,count&gt;679)</p>
</blockquote>
<p>| You are doing so well!</p>
<p>|==================================                                              |  42%<br>
| Let's take a look at top_counts. Print it to the console.</p>
<blockquote>
<p>top_counts<br>
# A tibble: 61 x 5<br>
   package    count unique countries avg_bytes<br><chr><int><int><int><dbl><br>
 1 bitops      1549   1408        76    28715.<br>
 2 car         1008    837        64  1229122.<br>
 3 caTools      812    699        64   176589.<br>
 4 colorspace  1683   1433        80   357411.<br>
 5 data.table   680    564        59  1252721.<br>
 6 DBI         2599    492        48   206933.<br>
 7 devtools     769    560        55   212933.<br>
 8 dichromat   1486   1257        74   134732.<br>
 9 digest      2210   1894        83   120549.<br>
10 doSNOW       740     75        24     8364.<br>
# ... with 51 more rows</dbl></int></int></int></chr></p>
</blockquote>
<p>| You are amazing!</p>
<p>|===================================                                             |  44%<br>
| There are only 61 packages in our top 1%, so we'd like to see all of them. Since dplyr<br>
| only shows us the first 10 rows, we can use the View() function to see more.</p>
<p>...</p>
<p>|=====================================                                           |  46%<br>
| View all 61 rows with View(top_counts). Note that the 'V' in View() is capitalized.</p>
<blockquote>
<p>View(top_counts)</p>
</blockquote>
<p><img src="../images/r0040180.png" alt="top_counts" title="top_counts"></p>
<p>| You're the best!</p>
<p>|======================================                                          |  48%<br>
| arrange() the rows of top_counts based on the 'count' column and assign the result to a<br>
| new object called top_counts_sorted. We want the packages with the highest number of<br>
| downloads at the top, which means we want 'count' to be in descending order. If you<br>
| need help, check out ?arrange and/or ?desc.</p>
<blockquote>
<p>top_counts_sorted&lt;-arrange(top_counts,count)</p>
</blockquote>
<p>| Almost! Try again. Or, type info() for more options.</p>
<p>| arrange(top_counts, desc(count)) will arrange the rows of top_counts based on the<br>
| values of the 'count' variable, in descending order. Don't forget to assign the result<br>
| to top_counts_sorted.</p>
<blockquote>
<p>top_counts_sorted&lt;-arrange(top_counts,desc(count))</p>
</blockquote>
<p>| All that hard work is paying off!</p>
<p>|========================================                                        |  50%<br>
| Now use View() again to see all 61 rows of top_counts_sorted.</p>
<blockquote>
<p>View(top_counts_sorted)</p>
</blockquote>
<p><img src="../images/r0040190.png" alt="top_counts_sorted" title="top_counts_sorted"></p>
<p>| You are amazing!</p>
<p>|==========================================                                      |  52%<br>
| If we use total number of downloads as our metric for popularity, then the above output<br>
| shows us the most popular packages downloaded from the RStudio CRAN mirror on July 8,<br>
| 2014. Not surprisingly, ggplot2 leads the pack with 4602 downloads, followed by Rcpp,<br>
| plyr, rJava, ....</p>
<p>...</p>
<p>|===========================================                                     |  54%<br>
| ...And if you keep on going, you'll see swirl at number 43, with 820 total downloads.<br>
| Sweet!</p>
<p>...</p>
<p>|=============================================                                   |  56%<br>
| Perhaps we're more interested in the number of <em>unique</em> downloads on this particular<br>
| day. In other words, if a package is downloaded ten times in one day from the same<br>
| computer, we may wish to count that as only one download. That's what the 'unique'<br>
| column will tell us.</p>
<p>...</p>
<p>|==============================================                                  |  58%<br>
| Like we did with 'count', let's find the 0.99, or 99%, quantile for the 'unique'<br>
| variable with quantile(pack_sum$unique, probs = 0.99).</p>
<blockquote>
<p>quantile(pack_sum$unique,probs = 0.99)<br>
99%<br>
465</p>
</blockquote>
<p>| Nice work!</p>
<p>|================================================                                |  60%<br>
| Apply filter() to pack_sum to select all rows corresponding to values of 'unique' that<br>
| are strictly greater than 465. Assign the result to a object called top_unique.</p>
<blockquote>
<p>top_unique&lt;-filter(pack_sum,unique&gt;465)</p>
</blockquote>
<p>| Keep up the great work!</p>
<p>|=================================================                               |  62%<br>
| Let's View() our top contenders!</p>
<blockquote>
<p>View(top_unique)</p>
</blockquote>
<p><img src="../images/r0040200.png" alt="top_unique" title="top_unique"></p>
<p>| That's a job well done!</p>
<p>|===================================================                             |  63%<br>
| Now arrange() top_unique by the 'unique' column, in descending order, to see which<br>
| packages were downloaded from the greatest number of unique IP addresses. Assign the<br>
| result to top_unique_sorted.</p>
<blockquote>
<p>top_unique_sorted&lt;-arrange(top_unique,desc(unique))</p>
</blockquote>
<p>| You are really on a roll!</p>
<p>|====================================================                            |  65%<br>
| View() the sorted data.</p>
<blockquote>
<p>View(top_unique_sorted)</p>
</blockquote>
<p><img src="../images/r0040210.png" alt="top_unique_sorted" title="top_unique_sorted"></p>
<p>| All that practice is paying off!</p>
<p>|======================================================                          |  67%<br>
| Now Rcpp is in the lead, followed by stringr, digest, plyr, and ggplot2. swirl moved up<br>
| a few spaces to number 40, with 698 unique downloads. Nice!</p>
<p>...</p>
<p>|=======================================================                         |  69%<br>
| Our final metric of popularity is the number of distinct countries from which each<br>
| package was downloaded. We'll approach this one a little differently to introduce you<br>
| to a method called 'chaining' (or 'piping').</p>
<p>...</p>
<p>|=========================================================                       |  71%<br>
| Chaining allows you to string together multiple function calls in a way that is compact<br>
| and readable, while still accomplishing the desired result. To make it more concrete,<br>
| let's compute our last popularity metric from scratch, starting with our original data.</p>
<p>...</p>
<p>|==========================================================                      |  73%<br>
| I've opened up a script that contains code similar to what you've seen so far. Don't<br>
| change anything. Just study it for a minute, make sure you understand everything that's<br>
| there, then submit() when you are ready to move on.</p>

<pre><code>{r}
# Don't change any of the code below. Just type submit()
# when you think you understand it.

# We've already done this part, but we're repeating it
# here for clarity.

by_package &lt;- group_by(cran, package)
pack_sum &lt;- summarize(by_package,
                      count = n(),
                      unique = n_distinct(ip_id),
                      countries = n_distinct(country),
                      avg_bytes = mean(size))

# Here's the new bit, but using the same approach we've
# been using this whole time.

top_countries &lt;- filter(pack_sum, countries &gt; 60)
result1 &lt;- arrange(top_countries, desc(countries), avg_bytes)

# Print the results to the console.
print(result1)</code></pre>
<blockquote>
<p>submit()</p>
</blockquote>
<p>| Sourcing your script...</p>
<p># A tibble: 46 x 5<br>
   package      count unique countries avg_bytes<br><chr><int><int><int><dbl><br>
 1 Rcpp          3195   2044        84  2512100.<br>
 2 digest        2210   1894        83   120549.<br>
 3 stringr       2267   1948        82    65277.<br>
 4 plyr          2908   1754        81   799123.<br>
 5 ggplot2       4602   1680        81  2427716.<br>
 6 colorspace    1683   1433        80   357411.<br>
 7 RColorBrewer  1890   1584        79    22764.<br>
 8 scales        1726   1408        77   126819.<br>
 9 bitops        1549   1408        76    28715.<br>
10 reshape2      2032   1652        76   330128.<br>
# ... with 36 more rows</dbl></int></int></int></chr></p>
<p>| That's a job well done!</p>
<p>|============================================================                    |  75%<br>
| It's worth noting that we sorted primarily by country, but used avg_bytes (in ascending<br>
| order) as a tie breaker. This means that if two packages were downloaded from the same<br>
| number of countries, the package with a smaller average download size received a higher<br>
| ranking.</p>
<p>...</p>
<p>|==============================================================                  |  77%<br>
| We'd like to accomplish the same result as the last script, but avoid saving our<br>
| intermediate results. This requires embedding function calls within one another.</p>
<p>...</p>
<p>|===============================================================                 |  79%<br>
| That's exactly what we've done in this script. The result is equivalent, but the code<br>
| is much less readable and some of the arguments are far away from the function to which<br>
| they belong. Again, just try to understand what is going on here, then submit() when<br>
| you are ready to see a better solution.</p>

<pre><code>{r}
# Don't change any of the code below. Just type submit()
# when you think you understand it. If you find it
# confusing, you're absolutely right!

result2 &lt;-
  arrange(
    filter(
      summarize(
        group_by(cran,
                 package
        ),
        count = n(),
        unique = n_distinct(ip_id),
        countries = n_distinct(country),
        avg_bytes = mean(size)
      ),
      countries &gt; 60
    ),
    desc(countries),
    avg_bytes
  )

print(result2)</code></pre>
<blockquote>
<p>submit()</p>
</blockquote>
<p>| Sourcing your script...</p>
<p># A tibble: 46 x 5<br>
   package      count unique countries avg_bytes<br><chr><int><int><int><dbl><br>
 1 Rcpp          3195   2044        84  2512100.<br>
 2 digest        2210   1894        83   120549.<br>
 3 stringr       2267   1948        82    65277.<br>
 4 plyr          2908   1754        81   799123.<br>
 5 ggplot2       4602   1680        81  2427716.<br>
 6 colorspace    1683   1433        80   357411.<br>
 7 RColorBrewer  1890   1584        79    22764.<br>
 8 scales        1726   1408        77   126819.<br>
 9 bitops        1549   1408        76    28715.<br>
10 reshape2      2032   1652        76   330128.<br>
# ... with 36 more rows</dbl></int></int></int></chr></p>
<p>| That's a job well done!</p>
<p>|=================================================================               |  81%<br>
| In this script, we've used a special chaining operator, %&gt;%, which was originally<br>
| introduced in the magrittr R package and has now become a key component of dplyr. You<br>
| can pull up the related documentation with ?chain. The benefit of %&gt;% is that it allows<br>
| us to chain the function calls in a linear fashion. The code to the right of %&gt;%<br>
| operates on the result from the code to the left of %&gt;%.<br>
|<br>
| Once again, just try to understand the code, then type submit() to continue.</p>

<pre><code>{r}
# Read the code below, but don't change anything. As
# you read it, you can pronounce the %&gt;% operator as
# the word 'then'.
#
# Type submit() when you think you understand
# everything here.

result3 &lt;-
  cran %&gt;%
  group_by(package) %&gt;%
  summarize(count = n(),
            unique = n_distinct(ip_id),
            countries = n_distinct(country),
            avg_bytes = mean(size)
  ) %&gt;%
  filter(countries &gt; 60) %&gt;%
  arrange(desc(countries), avg_bytes)

# Print result to console
print(result3)</code></pre>
<blockquote>
<p>submit()</p>
</blockquote>
<p>| Sourcing your script...</p>
<p># A tibble: 46 x 5<br>
   package      count unique countries avg_bytes<br><chr><int><int><int><dbl><br>
 1 Rcpp          3195   2044        84  2512100.<br>
 2 digest        2210   1894        83   120549.<br>
 3 stringr       2267   1948        82    65277.<br>
 4 plyr          2908   1754        81   799123.<br>
 5 ggplot2       4602   1680        81  2427716.<br>
 6 colorspace    1683   1433        80   357411.<br>
 7 RColorBrewer  1890   1584        79    22764.<br>
 8 scales        1726   1408        77   126819.<br>
 9 bitops        1549   1408        76    28715.<br>
10 reshape2      2032   1652        76   330128.<br>
# ... with 36 more rows</dbl></int></int></int></chr></p>
<p>| You nailed it! Good job!</p>
<p>|==================================================================              |  83%<br>
| So, the results of the last three scripts are all identical. But, the third script<br>
| provides a convenient and concise alternative to the more traditional method that we've<br>
| taken previously, which involves saving results as we go along.</p>
<p>...</p>
<p>|====================================================================            |  85%<br>
| Once again, let's View() the full data, which has been stored in result3.</p>
<blockquote>
<p>View(result3)</p>
</blockquote>
<p><img src="../images/r0040220.png" alt="result3" title="result3"></p>
<p>| That's correct!</p>
<p>|=====================================================================           |  87%<br>
| It looks like Rcpp is on top with downloads from 84 different countries, followed by<br>
| digest, stringr, plyr, and ggplot2. swirl jumped up the rankings again, this time to<br>
| 27th.</p>
<p>...</p>
<p>|=======================================================================         |  88%<br>
| To help drive the point home, let's work through a few more examples of chaining.</p>
<p>...</p>
<p>|========================================================================        |  90%<br>
| Let's build a chain of dplyr commands one step at a time, starting with the script I<br>
| just opened for you.</p>

<pre><code>{r}
# select() the following columns from cran. Keep in mind
# that when you're using the chaining operator, you don't
# need to specify the name of the data tbl in your call to
# select().
#
# 1. ip_id
# 2. country
# 3. package
# 4. size
#
# The call to print() at the end of the chain is optional,
# but necessary if you want your results printed to the
# console. Note that since there are no additional arguments
# to print(), you can leave off the parentheses after
# the function name. This is a convenient feature of the %&gt;%
# operator.

cran %&gt;%
  select(ip_id,country,package,size) %&gt;%
    print</code></pre>
<blockquote>
<p>submit()</p>
</blockquote>
<p>| Sourcing your script...</p>
<p># A tibble: 225,468 x 4<br>
   ip_id country package         size<br><int><chr><chr><int><br>
 1     1 US      htmltools      80589<br>
 2     2 US      tseries       321767<br>
 3     3 US      party         748063<br>
 4     3 US      Hmisc         606104<br>
 5     4 CA      digest         79825<br>
 6     3 US      randomForest   77681<br>
 7     3 US      plyr          393754<br>
 8     5 US      whisker        28216<br>
 9     6 CN      Rcpp            5928<br>
10     7 US      hflights     2206029<br>
# ... with 225,458 more rows</int></chr></chr></int></p>
<p>| All that hard work is paying off!</p>
<p>|==========================================================================      |  92%<br>
| Let's add to the chain.</p>

<pre><code>{r}
# Use mutate() to add a column called size_mb that contains
# the size of each download in megabytes (i.e. size / 2^20).
#
# If you want your results printed to the console, add
# print to the end of your chain.

cran %&gt;%
  select(ip_id, country, package, size) %&gt;%
  mutate(size_mb=size/2^20) %&gt;%
  print</code></pre>
<blockquote>
<p>submit()</p>
</blockquote>
<p>| Sourcing your script...</p>
<p># A tibble: 225,468 x 5<br>
   ip_id country package         size size_mb<br><int><chr><chr><int><dbl><br>
 1     1 US      htmltools      80589 0.0769<br>
 2     2 US      tseries       321767 0.307<br>
 3     3 US      party         748063 0.713<br>
 4     3 US      Hmisc         606104 0.578<br>
 5     4 CA      digest         79825 0.0761<br>
 6     3 US      randomForest   77681 0.0741<br>
 7     3 US      plyr          393754 0.376<br>
 8     5 US      whisker        28216 0.0269<br>
 9     6 CN      Rcpp            5928 0.00565<br>
10     7 US      hflights     2206029 2.10<br>
# ... with 225,458 more rows</dbl></int></chr></chr></int></p>
<p>| All that practice is paying off!</p>
<p>|===========================================================================     |  94%<br>
| A little bit more now.</p>

<pre><code>{r}
# Use filter() to select all rows for which size_mb is
# less than or equal to (&lt;=) 0.5.
#
# If you want your results printed to the console, add
# print to the end of your chain.

cran %&gt;%
  select(ip_id, country, package, size) %&gt;%
  mutate(size_mb = size / 2^20) %&gt;%
  # Your call to filter() goes here
  filter(size_mb&lt;=0.5) %&gt;%
  print</code></pre>
<blockquote>
<p>submit()</p>
</blockquote>
<p>| Sourcing your script...</p>
<p># A tibble: 142,021 x 5<br>
   ip_id country package        size size_mb<br><int><chr><chr><int><dbl><br>
 1     1 US      htmltools     80589 0.0769<br>
 2     2 US      tseries      321767 0.307<br>
 3     4 CA      digest        79825 0.0761<br>
 4     3 US      randomForest  77681 0.0741<br>
 5     3 US      plyr         393754 0.376<br>
 6     5 US      whisker       28216 0.0269<br>
 7     6 CN      Rcpp           5928 0.00565<br>
 8    13 DE      ipred        186685 0.178<br>
 9    14 US      mnormt        36204 0.0345<br>
10    16 US      iterators    289972 0.277<br>
# ... with 142,011 more rows</dbl></int></chr></chr></int></p>
<p>| You got it!</p>
<p>|=============================================================================   |  96%<br>
| And finish it off.</p>

<pre><code>{r}
# arrange() the result by size_mb, in descending order.
#
# If you want your results printed to the console, add
# print to the end of your chain.

cran %&gt;%
  select(ip_id, country, package, size) %&gt;%
  mutate(size_mb = size / 2^20) %&gt;%
  filter(size_mb &lt;= 0.5) %&gt;%
  # Your call to arrange() goes here
  arrange(desc(size_mb)) %&gt;%
  print</code></pre>
<blockquote>
<p>submit()</p>
</blockquote>
<p>| Sourcing your script...</p>
<p># A tibble: 142,021 x 5<br>
   ip_id country package                 size size_mb<br><int><chr><chr><int><dbl><br>
 1 11034 DE      phia                  524232   0.500<br>
 2  9643 US      tis                   524152   0.500<br>
 3  1542 IN      RcppSMC               524060   0.500<br>
 4 12354 US      lessR                 523916   0.500<br>
 5 12072 US      colorspace            523880   0.500<br>
 6  2514 KR      depmixS4              523863   0.500<br>
 7  1111 US      depmixS4              523858   0.500<br>
 8  8865 CR      depmixS4              523858   0.500<br>
 9  5908 CN      RcmdrPlugin.KMggplot2 523852   0.500<br>
10 12354 US      RcmdrPlugin.KMggplot2 523852   0.500<br>
# ... with 142,011 more rows</dbl></int></chr></chr></int></p>
<p>| You got it!</p>
<p>|==============================================================================  |  98%<br>
| In this lesson, you learned about grouping and chaining using dplyr. You combined some<br>
| of the things you learned in the previous lesson with these more advanced ideas to<br>
| produce concise, readable, and highly effective code. Welcome to the wonderful world of<br>
| dplyr!</p>
<p>...</p>
<p>|================================================================================| 100%<br>
| Would you like to receive credit for completing this course on Coursera.org?</p>
<p>1: Yes<br>
2: No</p>
<p>Selection: 1<br>
What is your email address? xxxxxx@xxxxxxxxxxxx<br>
What is your assignment token? xXxXxxXXxXxxXXXx<br>
Grade submission succeeded!</p>
<p>| Perseverance, that's the answer.</p>
<p>| You've reached the end of this lesson! Returning to the main menu...</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Getting and Cleaning Data<br>
2: R Programming<br>
3: Take me to the swirl course repository!</p>
<p>Selection: 0</p>
<p>| Leaving swirl now. Type swirl() to resume.</p>
<blockquote>
<p>ls()<br>
 [1] "by_package"        "cran"              "pack_sum"          "result1"<br>
 [5] "result2"           "result3"           "top_countries"     "top_counts"<br>
 [9] "top_counts_sorted" "top_unique"        "top_unique_sorted"<br>
rm(list=ls())</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Last updated 2020-04-23 21:01:55.271179 IST</em></p>

</div>
</div>
</div>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="00416/" class="u-url">Manipulating Data with dplyr</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Krishnakanth Allika
            </span></p>
            <p class="dateline">
            <a href="00416/" rel="bookmark">
            <time class="published dt-published" datetime="2020-04-23T20:25:23+05:30" itemprop="datePublished" title="2020-04-23 20:25">2020-04-23 20:25</time></a>
            </p>
                <p class="commentline">
        
<a href="%7Blink%7D" onclick="this.href='/posts/00416/'; this.target='_self';"><span class="IDCommentsReplace" style="display:none">cache/posts/00416_Manipulating Data with dplyr.html</span>
<script>
var idcomments_acct = '7fae5836cfdd49cac599cac5b95695d1';
var idcomments_post_id = "cache/posts/00416_Manipulating Data with dplyr.html";
var idcomments_post_url = "/posts/00416/";
</script><script src="https://www.intensedebate.com/js/genericLinkWrapperV2.js"></script></a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote>
<p>setwd("C:/Users/kk/PortableApps/Git/home/k-allika/repos/DataScienceWithR/03_Getting_and_Cleaning_Data/Week03/workspace")<br>
library(swirl)</p>
</blockquote>
<p>| Hi! Type swirl() when you are ready to begin.</p>
<blockquote>
<p>install_course("Getting and Cleaning Data")<br>
  |================================================================================| 100%</p>
</blockquote>
<p>| Course installed successfully!</p>
<blockquote>
<p>swirl()</p>
</blockquote>
<p>| Welcome to swirl! Please sign in. If you've been here before, use the same name as you<br>
| did then. If you are new, call yourself something unique.</p>
<p>What shall I call you? Krishnakanth Allika</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Getting and Cleaning Data<br>
2: R Programming<br>
3: Take me to the swirl course repository!</p>
<p>Selection: 1</p>
<p>| Please choose a lesson, or type 0 to return to course menu.</p>
<p>1: Manipulating Data with dplyr<br>
2: Grouping and Chaining with dplyr<br>
3: Tidying Data with tidyr<br>
4: Dates and Times with lubridate</p>
<p>Selection: 1</p>
<p>| Attempting to load lesson dependencies...</p>
<p>| This lesson requires the â€˜dplyrâ€™ package. Would you like me to install it for you now?</p>
<p>1: Yes<br>
2: No</p>
<p>Selection: 1</p>
<p>| Trying to install package â€˜dplyrâ€™ now...<br>
also installing the dependencies â€˜utf8â€™, â€˜lifecycleâ€™, â€˜pillarâ€™, â€˜vctrsâ€™, â€˜purrrâ€™, â€˜pkgconfigâ€™, â€˜tibbleâ€™, â€˜tidyselectâ€™, â€˜BHâ€™, â€˜plogrâ€™</p>
<p>There is a binary version available but the source version is later:<br>
       binary source needs_compilation<br>
tibble  3.0.0  3.0.1              TRUE</p>
<p>Binaries will be installed<br>
package â€˜utf8â€™ successfully unpacked and MD5 sums checked<br>
package â€˜lifecycleâ€™ successfully unpacked and MD5 sums checked<br>
package â€˜pillarâ€™ successfully unpacked and MD5 sums checked<br>
package â€˜vctrsâ€™ successfully unpacked and MD5 sums checked<br>
package â€˜purrrâ€™ successfully unpacked and MD5 sums checked<br>
package â€˜pkgconfigâ€™ successfully unpacked and MD5 sums checked<br>
package â€˜tibbleâ€™ successfully unpacked and MD5 sums checked<br>
package â€˜tidyselectâ€™ successfully unpacked and MD5 sums checked<br>
package â€˜BHâ€™ successfully unpacked and MD5 sums checked<br>
package â€˜plogrâ€™ successfully unpacked and MD5 sums checked<br>
package â€˜dplyrâ€™ successfully unpacked and MD5 sums checked</p>
<p>| Package â€˜dplyrâ€™ loaded correctly!</p>
<p>|                                                                                |   0%</p>
<p>| In this lesson, you'll learn how to manipulate data using dplyr. dplyr is a fast and<br>
| powerful R package written by Hadley Wickham and Romain Francois that provides a<br>
| consistent and concise grammar for manipulating tabular data.</p>
<p>...</p>
<p>|=                                                                               |   2%<br>
| One unique aspect of dplyr is that the same set of tools allow you to work with tabular<br>
| data from a variety of sources, including data frames, data tables, databases and<br>
| multidimensional arrays. In this lesson, we'll focus on data frames, but everything you<br>
| learn will apply equally to other formats.</p>
<p>...</p>
<p>|===                                                                             |   3%<br>
| As you may know, "CRAN is a network of ftp and web servers around the world that store<br>
| identical, up-to-date, versions of code and documentation for R"<br>
| (<a href="http://cran.rstudio.com/">http://cran.rstudio.com/</a>). RStudio maintains one of these so-called 'CRAN mirrors' and<br>
| they generously make their download logs publicly available<br>
| (<a href="http://cran-logs.rstudio.com/">http://cran-logs.rstudio.com/</a>). We'll be working with the log from July 8, 2014, which<br>
| contains information on roughly 225,000 package downloads.</p>
<p>...</p>
<p>|====                                                                            |   5%<br>
| I've created a variable called path2csv, which contains the full file path to the<br>
| dataset. Call read.csv() with two arguments, path2csv and stringsAsFactors = FALSE, and<br>
| save the result in a new variable called mydf. Check ?read.csv if you need help.</p>
<blockquote>
<p>mydf&lt;-read.csv(path2csv,stringsAsFactors = FALSE)</p>
</blockquote>
<p>| Excellent work!</p>
<p>|=====                                                                           |   7%<br>
| Use dim() to look at the dimensions of mydf.</p>
<blockquote>
<p>dim(mydf)<br>
[1] 225468     11</p>
</blockquote>
<p>| You are doing so well!</p>
<p>|=======                                                                         |   8%<br>
| Now use head() to preview the data.</p>
<blockquote>
<p>head(mydf)<br>
  X       date     time   size r_version r_arch      r_os      package version country<br>
1 1 2014-07-08 00:54:41  80589     3.1.0 x86_64   mingw32    htmltools   0.2.4      US<br>
2 2 2014-07-08 00:59:53 321767     3.1.0 x86_64   mingw32      tseries 0.10-32      US<br>
3 3 2014-07-08 00:47:13 748063     3.1.0 x86_64 linux-gnu        party  1.0-15      US<br>
4 4 2014-07-08 00:48:05 606104     3.1.0 x86_64 linux-gnu        Hmisc  3.14-4      US<br>
5 5 2014-07-08 00:46:50  79825     3.0.2 x86_64 linux-gnu       digest   0.6.4      CA<br>
6 6 2014-07-08 00:48:04  77681     3.1.0 x86_64 linux-gnu randomForest   4.6-7      US<br>
  ip_id<br>
1     1<br>
2     2<br>
3     3<br>
4     3<br>
5     4<br>
6     3</p>
</blockquote>
<p>| Excellent work!</p>
<p>|========                                                                        |  10%<br>
| The dplyr package was automatically installed (if necessary) and loaded at the<br>
| beginning of this lesson. Normally, this is something you would have to do on your own.<br>
| Just to build the habit, type library(dplyr) now to load the package again.</p>
<blockquote>
<p>library(dplyr)</p>
</blockquote>
<p>| Excellent work!</p>
<p>|=========                                                                       |  12%<br>
| It's important that you have dplyr version 0.4.0 or later. To confirm this, type<br>
| packageVersion("dplyr").</p>
<blockquote>
<p>packageVersion("dplyr")<br>
[1] â€˜0.8.5â€™</p>
</blockquote>
<p>| Excellent work!</p>
<p>|===========                                                                     |  13%<br>
| If your dplyr version is not at least 0.4.0, then you should hit the Esc key now,<br>
| reinstall dplyr, then resume this lesson where you left off.</p>
<p>...</p>
<p>|============                                                                    |  15%<br>
| The first step of working with data in dplyr is to load the data into what the package<br>
| authors call a 'data frame tbl' or 'tbl_df'. Use the following code to create a new<br>
| tbl_df called cran:<br>
|<br>
| cran &lt;- tbl_df(mydf).</p>
<blockquote>
<p>cran &lt;- tbl_df(mydf)</p>
</blockquote>
<p>| You are doing so well!</p>
<p>|=============                                                                   |  17%<br>
| To avoid confusion and keep things running smoothly, let's remove the original data<br>
| frame from your workspace with rm("mydf").</p>
<blockquote>
<p>rm("mydf")</p>
</blockquote>
<p>| You are quite good my friend!</p>
<p>|===============                                                                 |  18%<br>
| From ?tbl_df, "The main advantage to using a tbl_df over a regular data frame is the<br>
| printing." Let's see what is meant by this. Type cran to print our tbl_df to the<br>
| console.</p>
<blockquote>
<p>cran<br>
# A tibble: 225,468 x 11<br>
       X date     time       size r_version r_arch r_os    package   version country ip_id<br><int><chr><chr><int><chr><chr><chr><chr><chr><chr><int><br>
 1     1 2014-07~ 00:54:~   80589 3.1.0     x86_64 mingw32 htmltools 0.2.4   US          1<br>
 2     2 2014-07~ 00:59:~  321767 3.1.0     x86_64 mingw32 tseries   0.10-32 US          2<br>
 3     3 2014-07~ 00:47:~  748063 3.1.0     x86_64 linux-~ party     1.0-15  US          3<br>
 4     4 2014-07~ 00:48:~  606104 3.1.0     x86_64 linux-~ Hmisc     3.14-4  US          3<br>
 5     5 2014-07~ 00:46:~   79825 3.0.2     x86_64 linux-~ digest    0.6.4   CA          4<br>
 6     6 2014-07~ 00:48:~   77681 3.1.0     x86_64 linux-~ randomFo~ 4.6-7   US          3<br>
 7     7 2014-07~ 00:48:~  393754 3.1.0     x86_64 linux-~ plyr      1.8.1   US          3<br>
 8     8 2014-07~ 00:47:~   28216 3.0.2     x86_64 linux-~ whisker   0.3-2   US          5<br>
 9     9 2014-07~ 00:54:~    5928 NA        NA     NA      Rcpp      0.10.4  CN          6<br>
10    10 2014-07~ 00:15:~ 2206029 3.0.2     x86_64 linux-~ hflights  0.1     US          7<br>
# ... with 225,458 more rows</int></chr></chr></chr></chr></chr></chr></int></chr></chr></int></p>
</blockquote>
<p>| All that hard work is paying off!</p>
<p>|================                                                                |  20%<br>
| This output is much more informative and compact than what we would get if we printed<br>
| the original data frame (mydf) to the console.</p>
<p>...</p>
<p>|=================                                                               |  22%<br>
| First, we are shown the class and dimensions of the dataset. Just below that, we get a<br>
| preview of the data. Instead of attempting to print the entire dataset, dplyr just<br>
| shows us the first 10 rows of data and only as many columns as fit neatly in our<br>
| console. At the bottom, we see the names and classes for any variables that didn't fit<br>
| on our screen.</p>
<p>...</p>
<p>|===================                                                             |  23%<br>
| According to the "Introduction to dplyr" vignette written by the package authors, "The<br>
| dplyr philosophy is to have small functions that each do one thing well." Specifically,<br>
| dplyr supplies five 'verbs' that cover most fundamental data manipulation tasks:<br>
| select(), filter(), arrange(), mutate(), and summarize().</p>
<p>...</p>
<p>|====================                                                            |  25%<br>
| Use ?select to pull up the documentation for the first of these core functions.</p>
<blockquote>
<p>?select</p>
</blockquote>
<p>| Your dedication is inspiring!</p>
<p>|=====================                                                           |  27%<br>
| Help files for the other functions are accessible in the same way.</p>
<p>...</p>
<p>|=======================                                                         |  28%<br>
| As may often be the case, particularly with larger datasets, we are only interested in<br>
| some of the variables. Use select(cran, ip_id, package, country) to select only the<br>
| ip_id, package, and country variables from the cran dataset.</p>
<blockquote>
<p>select(cran, ip_id, package, country)<br>
# A tibble: 225,468 x 3<br>
   ip_id package      country<br><int><chr><chr><br>
 1     1 htmltools    US<br>
 2     2 tseries      US<br>
 3     3 party        US<br>
 4     3 Hmisc        US<br>
 5     4 digest       CA<br>
 6     3 randomForest US<br>
 7     3 plyr         US<br>
 8     5 whisker      US<br>
 9     6 Rcpp         CN<br>
10     7 hflights     US<br>
# ... with 225,458 more rows</chr></chr></int></p>
</blockquote>
<p>| You are quite good my friend!</p>
<p>|========================                                                        |  30%<br>
| The first thing to notice is that we don't have to type cran$ip_id, cran$package, and<br>
| cran$country, as we normally would when referring to columns of a data frame. The<br>
| select() function knows we are referring to columns of the cran dataset.</p>
<p>...</p>
<p>|=========================                                                       |  32%<br>
| Also, note that the columns are returned to us in the order we specified, even though<br>
| ip_id is the rightmost column in the original dataset.</p>
<p>...</p>
<p>|===========================                                                     |  33%<br>
| Recall that in R, the <code>:</code> operator provides a compact notation for creating a sequence<br>
| of numbers. For example, try 5:20.</p>
<blockquote>
<p>5:20<br>
 [1]  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20</p>
</blockquote>
<p>| All that practice is paying off!</p>
<p>|============================                                                    |  35%<br>
| Normally, this notation is reserved for numbers, but select() allows you to specify a<br>
| sequence of columns this way, which can save a bunch of typing. Use select(cran,<br>
| r_arch:country) to select all columns starting from r_arch and ending with country.</p>
<blockquote>
<p>select(cran,r_arch:country)<br>
# A tibble: 225,468 x 5<br>
   r_arch r_os      package      version country<br><chr><chr><chr><chr><chr><br>
 1 x86_64 mingw32   htmltools    0.2.4   US<br>
 2 x86_64 mingw32   tseries      0.10-32 US<br>
 3 x86_64 linux-gnu party        1.0-15  US<br>
 4 x86_64 linux-gnu Hmisc        3.14-4  US<br>
 5 x86_64 linux-gnu digest       0.6.4   CA<br>
 6 x86_64 linux-gnu randomForest 4.6-7   US<br>
 7 x86_64 linux-gnu plyr         1.8.1   US<br>
 8 x86_64 linux-gnu whisker      0.3-2   US<br>
 9 NA     NA        Rcpp         0.10.4  CN<br>
10 x86_64 linux-gnu hflights     0.1     US<br>
# ... with 225,458 more rows</chr></chr></chr></chr></chr></p>
</blockquote>
<p>| You are quite good my friend!</p>
<p>|=============================                                                   |  37%<br>
| We can also select the same columns in reverse order. Give it a try.</p>
<blockquote>
<p>select(cran,country:r_arch)<br>
# A tibble: 225,468 x 5<br>
   country version package      r_os      r_arch<br><chr><chr><chr><chr><chr><br>
 1 US      0.2.4   htmltools    mingw32   x86_64<br>
 2 US      0.10-32 tseries      mingw32   x86_64<br>
 3 US      1.0-15  party        linux-gnu x86_64<br>
 4 US      3.14-4  Hmisc        linux-gnu x86_64<br>
 5 CA      0.6.4   digest       linux-gnu x86_64<br>
 6 US      4.6-7   randomForest linux-gnu x86_64<br>
 7 US      1.8.1   plyr         linux-gnu x86_64<br>
 8 US      0.3-2   whisker      linux-gnu x86_64<br>
 9 CN      0.10.4  Rcpp         NA        NA<br>
10 US      0.1     hflights     linux-gnu x86_64<br>
# ... with 225,458 more rows</chr></chr></chr></chr></chr></p>
</blockquote>
<p>| You're the best!</p>
<p>|===============================                                                 |  38%<br>
| Print the entire dataset again, just to remind yourself of what it looks like. You can<br>
| do this at anytime during the lesson.</p>
<blockquote>
<p>cran<br>
# A tibble: 225,468 x 11<br>
       X date     time       size r_version r_arch r_os    package   version country ip_id<br><int><chr><chr><int><chr><chr><chr><chr><chr><chr><int><br>
 1     1 2014-07~ 00:54:~   80589 3.1.0     x86_64 mingw32 htmltools 0.2.4   US          1<br>
 2     2 2014-07~ 00:59:~  321767 3.1.0     x86_64 mingw32 tseries   0.10-32 US          2<br>
 3     3 2014-07~ 00:47:~  748063 3.1.0     x86_64 linux-~ party     1.0-15  US          3<br>
 4     4 2014-07~ 00:48:~  606104 3.1.0     x86_64 linux-~ Hmisc     3.14-4  US          3<br>
 5     5 2014-07~ 00:46:~   79825 3.0.2     x86_64 linux-~ digest    0.6.4   CA          4<br>
 6     6 2014-07~ 00:48:~   77681 3.1.0     x86_64 linux-~ randomFo~ 4.6-7   US          3<br>
 7     7 2014-07~ 00:48:~  393754 3.1.0     x86_64 linux-~ plyr      1.8.1   US          3<br>
 8     8 2014-07~ 00:47:~   28216 3.0.2     x86_64 linux-~ whisker   0.3-2   US          5<br>
 9     9 2014-07~ 00:54:~    5928 NA        NA     NA      Rcpp      0.10.4  CN          6<br>
10    10 2014-07~ 00:15:~ 2206029 3.0.2     x86_64 linux-~ hflights  0.1     US          7<br>
# ... with 225,458 more rows</int></chr></chr></chr></chr></chr></chr></int></chr></chr></int></p>
</blockquote>
<p>| Keep working like that and you'll get there!</p>
<p>|================================                                                |  40%<br>
| Instead of specifying the columns we want to keep, we can also specify the columns we<br>
| want to throw away. To see how this works, do select(cran, -time) to omit the time<br>
| column.</p>
<blockquote>
<p>select(cran,-time)<br>
# A tibble: 225,468 x 10<br>
       X date          size r_version r_arch r_os      package      version country ip_id<br><int><chr><int><chr><chr><chr><chr><chr><chr><int><br>
 1     1 2014-07-08   80589 3.1.0     x86_64 mingw32   htmltools    0.2.4   US          1<br>
 2     2 2014-07-08  321767 3.1.0     x86_64 mingw32   tseries      0.10-32 US          2<br>
 3     3 2014-07-08  748063 3.1.0     x86_64 linux-gnu party        1.0-15  US          3<br>
 4     4 2014-07-08  606104 3.1.0     x86_64 linux-gnu Hmisc        3.14-4  US          3<br>
 5     5 2014-07-08   79825 3.0.2     x86_64 linux-gnu digest       0.6.4   CA          4<br>
 6     6 2014-07-08   77681 3.1.0     x86_64 linux-gnu randomForest 4.6-7   US          3<br>
 7     7 2014-07-08  393754 3.1.0     x86_64 linux-gnu plyr         1.8.1   US          3<br>
 8     8 2014-07-08   28216 3.0.2     x86_64 linux-gnu whisker      0.3-2   US          5<br>
 9     9 2014-07-08    5928 NA        NA     NA        Rcpp         0.10.4  CN          6<br>
10    10 2014-07-08 2206029 3.0.2     x86_64 linux-gnu hflights     0.1     US          7<br>
# ... with 225,458 more rows</int></chr></chr></chr></chr></chr></chr></int></chr></int></p>
</blockquote>
<p>| You are doing so well!</p>
<p>|=================================                                               |  42%<br>
| The negative sign in front of time tells select() that we DON'T want the time column.<br>
| Now, let's combine strategies to omit all columns from X through size (X:size). To see<br>
| how this might work, let's look at a numerical example with -5:20.</p>
<blockquote>
<p>-5:20<br>
 [1] -5 -4 -3 -2 -1  0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20</p>
</blockquote>
<p>| Your dedication is inspiring!</p>
<p>|===================================                                             |  43%<br>
| Oops! That gaves us a vector of numbers from -5 through 20, which is not what we want.<br>
| Instead, we want to negate the entire sequence of numbers from 5 through 20, so that we<br>
| get -5, -6, -7, ... , -18, -19, -20. Try the same thing, except surround 5:20 with<br>
| parentheses so that R knows we want it to first come up with the sequence of numbers,<br>
| then apply the negative sign to the whole thing.</p>
<blockquote>
<p>-(5:20)<br>
 [1]  -5  -6  -7  -8  -9 -10 -11 -12 -13 -14 -15 -16 -17 -18 -19 -20</p>
</blockquote>
<p>| You're the best!</p>
<p>|====================================                                            |  45%<br>
| Use this knowledge to omit all columns X:size using select().</p>
<blockquote>
<p>select(cran,-(X:size))<br>
# A tibble: 225,468 x 7<br>
   r_version r_arch r_os      package      version country ip_id<br><chr><chr><chr><chr><chr><chr><int><br>
 1 3.1.0     x86_64 mingw32   htmltools    0.2.4   US          1<br>
 2 3.1.0     x86_64 mingw32   tseries      0.10-32 US          2<br>
 3 3.1.0     x86_64 linux-gnu party        1.0-15  US          3<br>
 4 3.1.0     x86_64 linux-gnu Hmisc        3.14-4  US          3<br>
 5 3.0.2     x86_64 linux-gnu digest       0.6.4   CA          4<br>
 6 3.1.0     x86_64 linux-gnu randomForest 4.6-7   US          3<br>
 7 3.1.0     x86_64 linux-gnu plyr         1.8.1   US          3<br>
 8 3.0.2     x86_64 linux-gnu whisker      0.3-2   US          5<br>
 9 NA        NA     NA        Rcpp         0.10.4  CN          6<br>
10 3.0.2     x86_64 linux-gnu hflights     0.1     US          7<br>
# ... with 225,458 more rows</int></chr></chr></chr></chr></chr></chr></p>
</blockquote>
<p>| You got it right!</p>
<p>|=====================================                                           |  47%<br>
| Now that you know how to select a subset of columns using select(), a natural next<br>
| question is "How do I select a subset of rows?" That's where the filter() function<br>
| comes in.</p>
<p>...</p>
<p>|=======================================                                         |  48%<br>
| Use filter(cran, package == "swirl") to select all rows for which the package variable<br>
| is equal to "swirl". Be sure to use two equals signs side-by-side!</p>
<blockquote>
<p>filter(cran,package=="swirl")<br>
# A tibble: 820 x 11<br>
       X date      time      size r_version r_arch r_os      package version country ip_id<br><int><chr><chr><int><chr><chr><chr><chr><chr><chr><int><br>
 1    27 2014-07-~ 00:17:~ 105350 3.0.2     x86_64 mingw32   swirl   2.2.9   US         20<br>
 2   156 2014-07-~ 00:22:~  41261 3.1.0     x86_64 linux-gnu swirl   2.2.9   US         66<br>
 3   358 2014-07-~ 00:13:~ 105335 2.15.2    x86_64 mingw32   swirl   2.2.9   CA        115<br>
 4   593 2014-07-~ 00:59:~ 105465 3.1.0     x86_64 darwin13~ swirl   2.2.9   MX        162<br>
 5   831 2014-07-~ 00:55:~ 105335 3.0.3     x86_64 mingw32   swirl   2.2.9   US         57<br>
 6   997 2014-07-~ 00:33:~  41261 3.1.0     x86_64 mingw32   swirl   2.2.9   US         70<br>
 7  1023 2014-07-~ 00:35:~ 106393 3.1.0     x86_64 mingw32   swirl   2.2.9   BR        248<br>
 8  1144 2014-07-~ 00:00:~ 106534 3.0.2     x86_64 linux-gnu swirl   2.2.9   US        261<br>
 9  1402 2014-07-~ 00:41:~  41261 3.1.0     i386   mingw32   swirl   2.2.9   US        234<br>
10  1424 2014-07-~ 00:44:~ 106393 3.1.0     x86_64 linux-gnu swirl   2.2.9   US        301<br>
# ... with 810 more rows</int></chr></chr></chr></chr></chr></chr></int></chr></chr></int></p>
</blockquote>
<p>| Great job!</p>
<p>|========================================                                        |  50%<br>
| Again, note that filter() recognizes 'package' as a column of cran, without you having<br>
| to explicitly specify cran$package.</p>
<p>...</p>
<p>|=========================================                                       |  52%<br>
| The == operator asks whether the thing on the left is equal to the thing on the right.<br>
| If yes, then it returns TRUE. If no, then FALSE. In this case, package is an entire<br>
| vector (column) of values, so package == "swirl" returns a vector of TRUEs and FALSEs.<br>
| filter() then returns only the rows of cran corresponding to the TRUEs.</p>
<p>...</p>
<p>|===========================================                                     |  53%<br>
| You can specify as many conditions as you want, separated by commas. For example<br>
| filter(cran, r_version == "3.1.1", country == "US") will return all rows of cran<br>
| corresponding to downloads from users in the US running R version 3.1.1. Try it out.</p>
<blockquote>
<p>filter(cran, r_version == "3.1.1", country == "US")<br>
# A tibble: 1,588 x 11<br>
       X date     time      size r_version r_arch r_os     package   version country ip_id<br><int><chr><chr><int><chr><chr><chr><chr><chr><chr><int><br>
 1  2216 2014-07~ 00:48:~ 3.85e5 3.1.1     x86_64 darwin1~ colorspa~ 1.2-4   US        191<br>
 2 17332 2014-07~ 03:39:~ 1.97e5 3.1.1     x86_64 darwin1~ httr      0.3     US       1704<br>
 3 17465 2014-07~ 03:25:~ 2.33e4 3.1.1     x86_64 darwin1~ snow      0.3-13  US         62<br>
 4 18844 2014-07~ 03:59:~ 1.91e5 3.1.1     x86_64 darwin1~ maxLik    1.2-0   US       1533<br>
 5 30182 2014-07~ 04:13:~ 7.77e4 3.1.1     i386   mingw32  randomFo~ 4.6-7   US        646<br>
 6 30193 2014-07~ 04:06:~ 2.35e6 3.1.1     i386   mingw32  ggplot2   1.0.0   US          8<br>
 7 30195 2014-07~ 04:07:~ 2.99e5 3.1.1     i386   mingw32  fExtremes 3010.81 US       2010<br>
 8 30217 2014-07~ 04:32:~ 5.68e5 3.1.1     i386   mingw32  rJava     0.9-6   US         98<br>
 9 30245 2014-07~ 04:10:~ 5.27e5 3.1.1     i386   mingw32  LPCM      0.44-8  US          8<br>
10 30354 2014-07~ 04:32:~ 1.76e6 3.1.1     i386   mingw32  mgcv      1.8-1   US       2122<br>
# ... with 1,578 more rows</int></chr></chr></chr></chr></chr></chr></int></chr></chr></int></p>
</blockquote>
<p>| That's a job well done!</p>
<p>|============================================                                    |  55%<br>
| The conditions passed to filter() can make use of any of the standard comparison<br>
| operators. Pull up the relevant documentation with ?Comparison (that's an uppercase C).</p>
<blockquote>
<p>?Comparison</p>
</blockquote>
<p>| You are quite good my friend!</p>
<p>|=============================================                                   |  57%<br>
| Edit your previous call to filter() to instead return rows corresponding to users in<br>
| "IN" (India) running an R version that is less than or equal to "3.0.2". The up arrow<br>
| on your keyboard may come in handy here. Don't forget your double quotes!</p>
<blockquote>
<p>filter(cran, r_version &lt;= "3.0.2", country == "IN")<br>
# A tibble: 4,139 x 11<br>
       X date     time       size r_version r_arch r_os    package   version country ip_id<br><int><chr><chr><int><chr><chr><chr><chr><chr><chr><int><br>
 1   348 2014-07~ 00:44:~  1.02e7 3.0.0     x86_64 mingw32 BH        1.54.0~ IN        112<br>
 2  9990 2014-07~ 02:11:~  3.97e5 3.0.2     x86_64 linux-~ equateIRT 1.1     IN       1054<br>
 3  9991 2014-07~ 02:11:~  1.19e5 3.0.2     x86_64 linux-~ ggdendro  0.1-14  IN       1054<br>
 4  9992 2014-07~ 02:11:~  8.18e4 3.0.2     x86_64 linux-~ dfcrm     0.2-2   IN       1054<br>
 5 10022 2014-07~ 02:19:~  1.56e6 2.15.0    x86_64 mingw32 RcppArma~ 0.4.32~ IN       1060<br>
 6 10023 2014-07~ 02:19:~  1.18e6 2.15.1    i686   linux-~ forecast  5.4     IN       1060<br>
 7 10189 2014-07~ 02:38:~  9.09e5 3.0.2     x86_64 linux-~ editrules 2.7.2   IN       1054<br>
 8 10199 2014-07~ 02:38:~  1.78e5 3.0.2     x86_64 linux-~ energy    1.6.1   IN       1054<br>
 9 10200 2014-07~ 02:38:~  5.18e4 3.0.2     x86_64 linux-~ ENmisc    1.2-7   IN       1054<br>
10 10201 2014-07~ 02:38:~  6.52e4 3.0.2     x86_64 linux-~ entropy   1.2.0   IN       1054<br>
# ... with 4,129 more rows</int></chr></chr></chr></chr></chr></chr></int></chr></chr></int></p>
</blockquote>
<p>| Excellent work!</p>
<p>|===============================================                                 |  58%<br>
| Our last two calls to filter() requested all rows for which some condition AND another<br>
| condition were TRUE. We can also request rows for which EITHER one condition OR another<br>
| condition are TRUE. For example, filter(cran, country == "US" | country == "IN") will<br>
| gives us all rows for which the country variable equals either "US" or "IN". Give it a<br>
| go.</p>
<blockquote>
<p>filter(cran, country == "US | country == "IN")<br>
Error: unexpected symbol in "filter(cran, country == "US | country == "IN"<br>
filter(cran, country == "US" | country == "IN")<br>
# A tibble: 95,283 x 11<br>
       X date     time       size r_version r_arch r_os    package   version country ip_id<br><int><chr><chr><int><chr><chr><chr><chr><chr><chr><int><br>
 1     1 2014-07~ 00:54:~   80589 3.1.0     x86_64 mingw32 htmltools 0.2.4   US          1<br>
 2     2 2014-07~ 00:59:~  321767 3.1.0     x86_64 mingw32 tseries   0.10-32 US          2<br>
 3     3 2014-07~ 00:47:~  748063 3.1.0     x86_64 linux-~ party     1.0-15  US          3<br>
 4     4 2014-07~ 00:48:~  606104 3.1.0     x86_64 linux-~ Hmisc     3.14-4  US          3<br>
 5     6 2014-07~ 00:48:~   77681 3.1.0     x86_64 linux-~ randomFo~ 4.6-7   US          3<br>
 6     7 2014-07~ 00:48:~  393754 3.1.0     x86_64 linux-~ plyr      1.8.1   US          3<br>
 7     8 2014-07~ 00:47:~   28216 3.0.2     x86_64 linux-~ whisker   0.3-2   US          5<br>
 8    10 2014-07~ 00:15:~ 2206029 3.0.2     x86_64 linux-~ hflights  0.1     US          7<br>
 9    11 2014-07~ 00:15:~  526858 3.0.2     x86_64 linux-~ LPCM      0.44-8  US          8<br>
10    12 2014-07~ 00:14:~ 2351969 2.14.1    x86_64 linux-~ ggplot2   1.0.0   US          8<br>
# ... with 95,273 more rows</int></chr></chr></chr></chr></chr></chr></int></chr></chr></int></p>
</blockquote>
<p>| Your dedication is inspiring!</p>
<p>|================================================                                |  60%<br>
| Now, use filter() to fetch all rows for which size is strictly greater than (&gt;) 100500<br>
| (no quotes, since size is numeric) AND r_os equals "linux-gnu". Hint: You are passing<br>
| three arguments to filter(): the name of the dataset, the first condition, and the<br>
| second condition.</p>
<blockquote>
<p>filter(cran,size&gt;100500,r_os=="linux-gnu")<br>
# A tibble: 33,683 x 11<br>
       X date      time        size r_version r_arch r_os    package version country ip_id<br><int><chr><chr><int><chr><chr><chr><chr><chr><chr><int><br>
 1     3 2014-07-~ 00:47:13  748063 3.1.0     x86_64 linux-~ party   1.0-15  US          3<br>
 2     4 2014-07-~ 00:48:05  606104 3.1.0     x86_64 linux-~ Hmisc   3.14-4  US          3<br>
 3     7 2014-07-~ 00:48:35  393754 3.1.0     x86_64 linux-~ plyr    1.8.1   US          3<br>
 4    10 2014-07-~ 00:15:35 2206029 3.0.2     x86_64 linux-~ hfligh~ 0.1     US          7<br>
 5    11 2014-07-~ 00:15:25  526858 3.0.2     x86_64 linux-~ LPCM    0.44-8  US          8<br>
 6    12 2014-07-~ 00:14:45 2351969 2.14.1    x86_64 linux-~ ggplot2 1.0.0   US          8<br>
 7    14 2014-07-~ 00:15:35 3097729 3.0.2     x86_64 linux-~ Rcpp    0.9.7   VE         10<br>
 8    15 2014-07-~ 00:14:37  568036 3.1.0     x86_64 linux-~ rJava   0.9-6   US         11<br>
 9    16 2014-07-~ 00:15:50 1600441 3.1.0     x86_64 linux-~ RSQLite 0.11.4  US          7<br>
10    18 2014-07-~ 00:26:59  186685 3.1.0     x86_64 linux-~ ipred   0.9-3   DE         13<br>
# ... with 33,673 more rows</int></chr></chr></chr></chr></chr></chr></int></chr></chr></int></p>
</blockquote>
<p>| You're the best!</p>
<p>|=================================================                               |  62%<br>
| Finally, we want to get only the rows for which the r_version is not missing. R<br>
| represents missing values with NA and these missing values can be detected using the<br>
| is.na() function.</p>
<p>...</p>
<p>|===================================================                             |  63%<br>
| To see how this works, try is.na(c(3, 5, NA, 10)).</p>
<blockquote>
<p>is.na(c(3,5,NA,10))<br>
[1] FALSE FALSE  TRUE FALSE</p>
</blockquote>
<p>| All that hard work is paying off!</p>
<p>|====================================================                            |  65%<br>
| Now, put an exclamation point (!) before is.na() to change all of the TRUEs to FALSEs<br>
| and all of the FALSEs to TRUEs, thus telling us what is NOT NA: !is.na(c(3, 5, NA,<br>
| 10)).</p>
<blockquote>
<p>!is.na(c(3,5,NA,10))<br>
[1]  TRUE  TRUE FALSE  TRUE</p>
</blockquote>
<p>| Keep up the great work!</p>
<p>|=====================================================                           |  67%<br>
| Okay, ready to put all of this together? Use filter() to return all rows of cran for<br>
| which r_version is NOT NA. Hint: You will need to use !is.na() as part of your second<br>
| argument to filter().</p>
<blockquote>
<p>filter(cran,!is.na(r_version))<br>
# A tibble: 207,205 x 11<br>
       X date     time       size r_version r_arch r_os    package   version country ip_id<br><int><chr><chr><int><chr><chr><chr><chr><chr><chr><int><br>
 1     1 2014-07~ 00:54:~   80589 3.1.0     x86_64 mingw32 htmltools 0.2.4   US          1<br>
 2     2 2014-07~ 00:59:~  321767 3.1.0     x86_64 mingw32 tseries   0.10-32 US          2<br>
 3     3 2014-07~ 00:47:~  748063 3.1.0     x86_64 linux-~ party     1.0-15  US          3<br>
 4     4 2014-07~ 00:48:~  606104 3.1.0     x86_64 linux-~ Hmisc     3.14-4  US          3<br>
 5     5 2014-07~ 00:46:~   79825 3.0.2     x86_64 linux-~ digest    0.6.4   CA          4<br>
 6     6 2014-07~ 00:48:~   77681 3.1.0     x86_64 linux-~ randomFo~ 4.6-7   US          3<br>
 7     7 2014-07~ 00:48:~  393754 3.1.0     x86_64 linux-~ plyr      1.8.1   US          3<br>
 8     8 2014-07~ 00:47:~   28216 3.0.2     x86_64 linux-~ whisker   0.3-2   US          5<br>
 9    10 2014-07~ 00:15:~ 2206029 3.0.2     x86_64 linux-~ hflights  0.1     US          7<br>
10    11 2014-07~ 00:15:~  526858 3.0.2     x86_64 linux-~ LPCM      0.44-8  US          8<br>
# ... with 207,195 more rows</int></chr></chr></chr></chr></chr></chr></int></chr></chr></int></p>
</blockquote>
<p>| All that practice is paying off!</p>
<p>|=======================================================                         |  68%<br>
| We've seen how to select a subset of columns and rows from our dataset using select()<br>
| and filter(), respectively. Inherent in select() was also the ability to arrange our<br>
| selected columns in any order we please.</p>
<p>...</p>
<p>|========================================================                        |  70%<br>
| Sometimes we want to order the rows of a dataset according to the values of a<br>
| particular variable. This is the job of arrange().</p>
<p>...</p>
<p>|=========================================================                       |  72%<br>
| To see how arrange() works, let's first take a subset of cran. select() all columns<br>
| from size through ip_id and store the result in cran2.</p>
<blockquote>
<p>cran2&lt;-select(cran,size:ip_id)</p>
</blockquote>
<p>| Excellent work!</p>
<p>|===========================================================                     |  73%<br>
| Now, to order the ROWS of cran2 so that ip_id is in ascending order (from small to<br>
| large), type arrange(cran2, ip_id). You may want to make your console wide enough so<br>
| that you can see ip_id, which is the last column.</p>
<blockquote>
<p>arrange(cran2,ip_id)<br>
# A tibble: 225,468 x 8<br>
     size r_version r_arch r_os         package     version country ip_id<br><int><chr><chr><chr><chr><chr><chr><int><br>
 1  80589 3.1.0     x86_64 mingw32      htmltools   0.2.4   US          1<br>
 2 180562 3.0.2     x86_64 mingw32      yaml        2.1.13  US          1<br>
 3 190120 3.1.0     i386   mingw32      babel       0.2-6   US          1<br>
 4 321767 3.1.0     x86_64 mingw32      tseries     0.10-32 US          2<br>
 5  52281 3.0.3     x86_64 darwin10.8.0 quadprog    1.5-5   US          2<br>
 6 876702 3.1.0     x86_64 linux-gnu    zoo         1.7-11  US          2<br>
 7 321764 3.0.2     x86_64 linux-gnu    tseries     0.10-32 US          2<br>
 8 876702 3.1.0     x86_64 linux-gnu    zoo         1.7-11  US          2<br>
 9 321768 3.1.0     x86_64 mingw32      tseries     0.10-32 US          2<br>
10 784093 3.1.0     x86_64 linux-gnu    strucchange 1.5-0   US          2<br>
# ... with 225,458 more rows</int></chr></chr></chr></chr></chr></chr></int></p>
</blockquote>
<p>| Perseverance, that's the answer.</p>
<p>|============================================================                    |  75%<br>
| To do the same, but in descending order, change the second argument to desc(ip_id),<br>
| where desc() stands for 'descending'. Go ahead.</p>
<blockquote>
<p>arrange(cran2,desc(ip_id))<br>
# A tibble: 225,468 x 8<br>
      size r_version r_arch r_os         package      version country ip_id<br><int><chr><chr><chr><chr><chr><chr><int><br>
 1    5933 NA        NA     NA           CPE          1.4.2   CN      13859<br>
 2  569241 3.1.0     x86_64 mingw32      multcompView 0.1-5   US      13858<br>
 3  228444 3.1.0     x86_64 mingw32      tourr        0.5.3   NZ      13857<br>
 4  308962 3.1.0     x86_64 darwin13.1.0 ctv          0.7-9   CN      13856<br>
 5  950964 3.0.3     i386   mingw32      knitr        1.6     CA      13855<br>
 6   80185 3.0.3     i386   mingw32      htmltools    0.2.4   CA      13855<br>
 7 1431750 3.0.3     i386   mingw32      shiny        0.10.0  CA      13855<br>
 8 2189695 3.1.0     x86_64 mingw32      RMySQL       0.9-3   US      13854<br>
 9 4818024 3.1.0     i386   mingw32      igraph       0.7.1   US      13853<br>
10  197495 3.1.0     x86_64 mingw32      coda         0.16-1  US      13852<br>
# ... with 225,458 more rows</int></chr></chr></chr></chr></chr></chr></int></p>
</blockquote>
<p>| You're the best!</p>
<p>|=============================================================                   |  77%<br>
| We can also arrange the data according to the values of multiple variables. For<br>
| example, arrange(cran2, package, ip_id) will first arrange by package names (ascending<br>
| alphabetically), then by ip_id. This means that if there are multiple rows with the<br>
| same value for package, they will be sorted by ip_id (ascending numerically). Try<br>
| arrange(cran2, package, ip_id) now.</p>
<blockquote>
<p>arrange(cran2,package,ip_id)<br>
# A tibble: 225,468 x 8<br>
    size r_version r_arch r_os         package version country ip_id<br><int><chr><chr><chr><chr><chr><chr><int><br>
 1 71677 3.0.3     x86_64 darwin10.8.0 A3      0.9.2   CN       1003<br>
 2 71672 3.1.0     x86_64 linux-gnu    A3      0.9.2   US       1015<br>
 3 71677 3.1.0     x86_64 mingw32      A3      0.9.2   IN       1054<br>
 4 70438 3.0.1     x86_64 darwin10.8.0 A3      0.9.2   CN       1513<br>
 5 71677 NA        NA     NA           A3      0.9.2   BR       1526<br>
 6 71892 3.0.2     x86_64 linux-gnu    A3      0.9.2   IN       1542<br>
 7 71677 3.1.0     x86_64 linux-gnu    A3      0.9.2   ZA       2925<br>
 8 71672 3.1.0     x86_64 mingw32      A3      0.9.2   IL       3889<br>
 9 71677 3.0.3     x86_64 mingw32      A3      0.9.2   DE       3917<br>
10 71672 3.1.0     x86_64 mingw32      A3      0.9.2   US       4219<br>
# ... with 225,458 more rows</int></chr></chr></chr></chr></chr></chr></int></p>
</blockquote>
<p>| You got it!</p>
<p>|===============================================================                 |  78%<br>
| Arrange cran2 by the following three variables, in this order: country (ascending),<br>
| r_version (descending), and ip_id (ascending).</p>
<blockquote>
<p>arrange(cran2,country,desc(r_version),ip_id)<br>
# A tibble: 225,468 x 8<br>
      size r_version r_arch r_os      package       version   country ip_id<br><int><chr><chr><chr><chr><chr><chr><int><br>
 1 1556858 3.1.1     i386   mingw32   RcppArmadillo 0.4.320.0 A1       2843<br>
 2 1823512 3.1.0     x86_64 linux-gnu mgcv          1.8-1     A1       2843<br>
 3   15732 3.1.0     i686   linux-gnu grnn          0.1.0     A1       3146<br>
 4 3014840 3.1.0     x86_64 mingw32   Rcpp          0.11.2    A1       3146<br>
 5  660087 3.1.0     i386   mingw32   xts           0.9-7     A1       3146<br>
 6  522261 3.1.0     i386   mingw32   FNN           1.1       A1       3146<br>
 7  522263 3.1.0     i386   mingw32   FNN           1.1       A1       3146<br>
 8 1676627 3.1.0     x86_64 linux-gnu rgeos         0.3-5     A1       3146<br>
 9 2118530 3.1.0     x86_64 linux-gnu spacetime     1.1-0     A1       3146<br>
10 2217180 3.1.0     x86_64 mingw32   gstat         1.0-19    A1       3146<br>
# ... with 225,458 more rows</int></chr></chr></chr></chr></chr></chr></int></p>
</blockquote>
<p>| All that practice is paying off!</p>
<p>|================================================================                |  80%<br>
| To illustrate the next major function in dplyr, let's take another subset of our<br>
| original data. Use select() to grab 3 columns from cran -- ip_id, package, and size (in<br>
| that order) -- and store the result in a new variable called cran3.</p>
<blockquote>
<p>cran3&lt;-select(cran,ip_is,package,size)<br>
Error: Can't subset columns that don't exist.<br>
x The column <code>ip_is</code> doesn't exist.<br>
Run <code>rlang::last_error()</code> to see where the error occurred.<br>
cran3&lt;-select(cran,ip_id,package,size)</p>
</blockquote>
<p>| You are really on a roll!</p>
<p>|=================================================================               |  82%<br>
| Take a look at cran3 now.</p>
<blockquote>
<p>cran3<br>
# A tibble: 225,468 x 3<br>
   ip_id package         size<br><int><chr><int><br>
 1     1 htmltools      80589<br>
 2     2 tseries       321767<br>
 3     3 party         748063<br>
 4     3 Hmisc         606104<br>
 5     4 digest         79825<br>
 6     3 randomForest   77681<br>
 7     3 plyr          393754<br>
 8     5 whisker        28216<br>
 9     6 Rcpp            5928<br>
10     7 hflights     2206029<br>
# ... with 225,458 more rows</int></chr></int></p>
</blockquote>
<p>| Your dedication is inspiring!</p>
<p>|===================================================================             |  83%<br>
| It's common to create a new variable based on the value of one or more variables<br>
| already in a dataset. The mutate() function does exactly this.</p>
<p>...</p>
<p>|====================================================================            |  85%<br>
| The size variable represents the download size in bytes, which are units of computer<br>
| memory. These days, megabytes (MB) are a more common unit of measurement. One megabyte<br>
| is equal to 2^20 bytes. That's 2 to the power of 20, which is approximately one million<br>
| bytes!</p>
<p>...</p>
<p>|=====================================================================           |  87%<br>
| We want to add a column called size_mb that contains the download size in megabytes.<br>
| Here's the code to do it:<br>
|<br>
| mutate(cran3, size_mb = size / 2^20)</p>
<blockquote>
<p>mutate(cran3, size_mb = size / 2^20)<br>
# A tibble: 225,468 x 4<br>
   ip_id package         size size_mb<br><int><chr><int><dbl><br>
 1     1 htmltools      80589 0.0769<br>
 2     2 tseries       321767 0.307<br>
 3     3 party         748063 0.713<br>
 4     3 Hmisc         606104 0.578<br>
 5     4 digest         79825 0.0761<br>
 6     3 randomForest   77681 0.0741<br>
 7     3 plyr          393754 0.376<br>
 8     5 whisker        28216 0.0269<br>
 9     6 Rcpp            5928 0.00565<br>
10     7 hflights     2206029 2.10<br>
# ... with 225,458 more rows</dbl></int></chr></int></p>
</blockquote>
<p>| You are really on a roll!</p>
<p>|=======================================================================         |  88%<br>
| An even larger unit of memory is a gigabyte (GB), which equals 2^10 megabytes. We might<br>
| as well add another column for download size in gigabytes!</p>
<p>...</p>
<p>|========================================================================        |  90%<br>
| One very nice feature of mutate() is that you can use the value computed for your<br>
| second column (size_mb) to create a third column, all in the same line of code. To see<br>
| this in action, repeat the exact same command as above, except add a third argument<br>
| creating a column that is named size_gb and equal to size_mb / 2^10.</p>
<blockquote>
<p>mutate(cran3, size_mb = size / 2^20, size_gb = size_mb / 2^10)<br>
# A tibble: 225,468 x 5<br>
   ip_id package         size size_mb    size_gb<br><int><chr><int><dbl><dbl><br>
 1     1 htmltools      80589 0.0769  0.0000751<br>
 2     2 tseries       321767 0.307   0.000300<br>
 3     3 party         748063 0.713   0.000697<br>
 4     3 Hmisc         606104 0.578   0.000564<br>
 5     4 digest         79825 0.0761  0.0000743<br>
 6     3 randomForest   77681 0.0741  0.0000723<br>
 7     3 plyr          393754 0.376   0.000367<br>
 8     5 whisker        28216 0.0269  0.0000263<br>
 9     6 Rcpp            5928 0.00565 0.00000552<br>
10     7 hflights     2206029 2.10    0.00205<br>
# ... with 225,458 more rows</dbl></dbl></int></chr></int></p>
</blockquote>
<p>| That's correct!</p>
<p>|=========================================================================       |  92%<br>
| Let's try one more for practice. Pretend we discovered a glitch in the system that<br>
| provided the original values for the size variable. All of the values in cran3 are 1000<br>
| bytes less than they should be. Using cran3, create just one new column called<br>
| correct_size that contains the correct size.</p>
<blockquote>
<p><br>
mutate(cran3, correct_size=size+1000)<br>
# A tibble: 225,468 x 4<br>
   ip_id package         size correct_size<br><int><chr><int><dbl><br>
 1     1 htmltools      80589        81589<br>
 2     2 tseries       321767       322767<br>
 3     3 party         748063       749063<br>
 4     3 Hmisc         606104       607104<br>
 5     4 digest         79825        80825<br>
 6     3 randomForest   77681        78681<br>
 7     3 plyr          393754       394754<br>
 8     5 whisker        28216        29216<br>
 9     6 Rcpp            5928         6928<br>
10     7 hflights     2206029      2207029<br>
# ... with 225,458 more rows</dbl></int></chr></int></p>
</blockquote>
<p>| You're the best!</p>
<p>|===========================================================================     |  93%<br>
| The last of the five core dplyr verbs, summarize(), collapses the dataset to a single<br>
| row. Let's say we're interested in knowing the average download size. summarize(cran,<br>
| avg_bytes = mean(size)) will yield the mean value of the size variable. Here we've<br>
| chosen to label the result 'avg_bytes', but we could have named it anything. Give it a<br>
| try.</p>
<blockquote>
<p>summarize(cran,avg_bytes=mean(size))<br>
# A tibble: 1 x 1<br>
  avg_bytes<br><dbl><br>
1   844086.</dbl></p>
</blockquote>
<p>| You are doing so well!</p>
<p>|============================================================================    |  95%<br>
| That's not particularly interesting. summarize() is most useful when working with data<br>
| that has been grouped by the values of a particular variable.</p>
<p>...</p>
<p>|=============================================================================   |  97%<br>
| We'll look at grouped data in the next lesson, but the idea is that summarize() can<br>
| give you the requested value FOR EACH group in your dataset.</p>
<p>...</p>
<p>|=============================================================================== |  98%<br>
| In this lesson, you learned how to manipulate data using dplyr's five main functions.<br>
| In the next lesson, we'll look at how to take advantage of some other useful features<br>
| of dplyr to make your life as a data analyst much easier.</p>
<p>...</p>
<p>|================================================================================| 100%<br>
| Would you like to receive credit for completing this course on Coursera.org?</p>
<p>1: No<br>
2: Yes</p>
<p>Selection: 2<br>
What is your email address? xxxxxx@xxxxxxxxxxxx<br>
What is your assignment token? xXxXxxXXxXxxXXXx<br>
Grade submission succeeded!</p>
<p>| You are really on a roll!</p>
<p>| You've reached the end of this lesson! Returning to the main menu...</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: Getting and Cleaning Data<br>
2: R Programming<br>
3: Take me to the swirl course repository!</p>
<p>Selection: 0</p>
<p>| Leaving swirl now. Type swirl() to resume.</p>
<blockquote>
<p>ls()<br>
[1] "cran"     "cran2"    "cran3"    "path2csv"<br>
rm(list=ls())</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Last updated 2020-04-23 20:35:34.926750 IST</em></p>

</div>
</div>
</div>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="00502/" class="u-url">Air Pollution data</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Krishnakanth Allika
            </span></p>
            <p class="dateline">
            <a href="00502/" rel="bookmark">
            <time class="published dt-published" datetime="2020-04-17T18:02:38+05:30" itemprop="datePublished" title="2020-04-17 18:02">2020-04-17 18:02</time></a>
            </p>
                <p class="commentline">
        
<a href="%7Blink%7D" onclick="this.href='/posts/00502/'; this.target='_self';"><span class="IDCommentsReplace" style="display:none">cache/posts/00502_Air_pollution.html</span>
<script>
var idcomments_acct = '7fae5836cfdd49cac599cac5b95695d1';
var idcomments_post_id = "cache/posts/00502_Air_pollution.html";
var idcomments_post_url = "/posts/00502/";
</script><script src="https://www.intensedebate.com/js/genericLinkWrapperV2.js"></script></a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Contents</strong> <a name="contents"></a></p>
<ol>
<li><a href="00502/#intro">Introduction</a></li>
<li><a href="00502/#f1">Function 1: Mean, Median, Mode, Standard Deviation</a></li>
<li><a href="00502/#f2">Function 2: Data Quality</a></li>
<li><a href="00502/#f3">Function 3: Correlation Test</a></li>
</ol>
<hr>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Introduction-">Introduction <a name="intro"></a><a class="anchor-link" href="00502/#Introduction-">Â¶</a>
</h3>
<p><strong>Data</strong><br>
The zip file containing the data can be downloaded here:</p>
<p><a href="http://link.datascience.eu.org/p004d1">AirPollution.zip</a> (2.67MB)</p>
<p>The zip file contains 332 comma-separated-value (CSV) files containing pollution monitoring data for fine particulate matter (PM) air pollution at 332 locations in the United States. Each file contains data from a single monitor and the ID number for each monitor is contained in the file name. For example, data for monitor 200 is contained in the file "200.csv". Each file contains three variables:</p>
<p>Date: the date of the observation in YYYY-MM-DD format (year-month-day)<br>
sulfate: the level of sulfate PM in the air on that date (measured in micrograms per cubic meter)<br>
nitrate: the level of nitrate PM in the air on that date (measured in micrograms per cubic meter)</p>
<p>This data will be used in the following functions. The goal is load data from these files without dowloading or storing them in the hard disk drive, but be available to the functions to woek on them.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># Create an empty file in memory</span>
<span class="n">file</span><span class="o">&lt;-</span><span class="nf">tempfile</span><span class="p">()</span>
<span class="c1"># Download the zip file to this empty file</span>
<span class="nf">download.file</span><span class="p">(</span><span class="s">"http://link.datascience.eu.org/p004d1"</span><span class="p">,</span><span class="n">file</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s">"wb"</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># Check data file format</span>
<span class="nf">head</span><span class="p">(</span><span class="nf">unzip</span><span class="p">(</span><span class="n">file</span><span class="p">,</span><span class="n">list</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr>
<th scope="col">Name</th>
<th scope="col">Length</th>
<th scope="col">Date</th>
</tr></thead>
<tbody>
<tr>
<td>data/              </td>
<td>    0              </td>
<td>2012-09-22 00:27:00</td>
</tr>
<tr>
<td>data/001.csv       </td>
<td>31271              </td>
<td>2012-09-22 01:30:00</td>
</tr>
<tr>
<td>data/002.csv       </td>
<td>81435              </td>
<td>2012-09-22 01:30:00</td>
</tr>
<tr>
<td>data/003.csv       </td>
<td>47185              </td>
<td>2012-09-22 01:30:00</td>
</tr>
<tr>
<td>data/004.csv       </td>
<td>78887              </td>
<td>2012-09-22 01:30:00</td>
</tr>
<tr>
<td>data/005.csv       </td>
<td>63204              </td>
<td>2012-09-22 01:30:00</td>
</tr>
</tbody>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>[<a href="00502/#contents">^top</a>]</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Function-1:-Mean,-Median,-Mode,-Standard-Deviation-">Function 1: Mean, Median, Mode, Standard Deviation <a name="f1"></a><a class="anchor-link" href="00502/#Function-1:-Mean,-Median,-Mode,-Standard-Deviation-">Â¶</a>
</h3>
<p>The function "PollutantStats" will calculate the mean, median, mode and standard deviation of a pollutant (sulfate or nitrate) across a specified list of monitors.</p>
<p><strong>Input</strong><br>
The function "PollutantStats" accepts two arguments:</p>
<ol>
<li>"pollutant" - Pollutant name <em>sulfate</em> or <em>nitrate</em> </li>
<li>"id" - An <strong>optional</strong> Monitor id vector. Default value is 1:332.</li>
</ol>
<p><strong>Output</strong><br>
Mean, median, mode and standard deviation of the pollutant.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [19]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="n">PollutantStats</span><span class="o">&lt;-</span><span class="nf">function</span><span class="p">(</span><span class="n">pollutant</span><span class="p">,</span><span class="n">id</span><span class="o">=</span><span class="m">1</span><span class="o">:</span><span class="m">332</span><span class="p">){</span>
    <span class="c1"># Initialize empty vectors.</span>
    <span class="n">p</span><span class="o">&lt;-</span><span class="nf">c</span><span class="p">()</span>    <span class="c1"># Pollutant vector</span>
    <span class="c1"># Loop through each file number.</span>
    <span class="nf">for </span><span class="p">(</span><span class="n">i</span> <span class="n">in</span> <span class="n">id</span><span class="p">){</span>
        <span class="c1"># We need to have the file path in "data/001.csv" format to use read.csv() function.</span>
        <span class="c1"># Use sprintf to combine directory name and file number in required format.</span>
        <span class="n">df</span><span class="o">&lt;-</span><span class="nf">read.csv</span><span class="p">(</span><span class="nf">unz</span><span class="p">(</span><span class="n">file</span><span class="p">,</span><span class="nf">sprintf</span><span class="p">(</span><span class="s">"data/%03d.csv"</span><span class="p">,</span><span class="n">i</span><span class="p">)))</span>
        <span class="c1"># Using a comma in df[,pollutant] converts it into a numeric vector.</span>
        <span class="c1"># Else it remains a dataframe and pollutant_vector becomes a list.</span>
        <span class="n">p</span><span class="o">&lt;-</span><span class="nf">c</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">df</span><span class="p">[,</span><span class="n">pollutant</span><span class="p">])</span>
    <span class="p">}</span>
    <span class="c1"># Calculate mean, median, mode and SD excluding missing values.</span>
    <span class="n">Mean</span><span class="o">&lt;-</span><span class="nf">mean</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">na.rm</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
    <span class="n">Median</span><span class="o">&lt;-</span><span class="nf">mean</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">na.rm</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
    <span class="n">Mode</span><span class="o">&lt;-</span><span class="nf">names</span><span class="p">(</span><span class="nf">table</span><span class="p">(</span><span class="n">p</span><span class="p">))[</span><span class="nf">table</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">==</span><span class="nf">max</span><span class="p">(</span><span class="nf">table</span><span class="p">(</span><span class="n">p</span><span class="p">))]</span>
    <span class="n">SD</span><span class="o">&lt;-</span><span class="nf">sd</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">na.rm</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
    <span class="nf">data.frame</span><span class="p">(</span><span class="n">Pollutant</span><span class="o">=</span><span class="n">pollutant</span><span class="p">,</span><span class="n">Mean</span><span class="o">=</span><span class="n">Mean</span><span class="p">,</span><span class="n">Median</span><span class="o">=</span><span class="n">Median</span><span class="p">,</span><span class="n">Mode</span><span class="o">=</span><span class="n">Mode</span><span class="p">,</span><span class="n">Std_dev</span><span class="o">=</span><span class="n">SD</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [21]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="nf">PollutantStats</span><span class="p">(</span><span class="s">"sulfate"</span><span class="p">,</span><span class="m">1</span><span class="o">:</span><span class="m">12</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr>
<th scope="col">Pollutant</th>
<th scope="col">Mean</th>
<th scope="col">Median</th>
<th scope="col">Mode</th>
<th scope="col">Std_dev</th>
</tr></thead>
<tbody><tr>
<td>sulfate </td>
<td>3.765641</td>
<td>3.765641</td>
<td>2.84    </td>
<td>2.874151</td>
</tr></tbody>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [22]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="nf">PollutantStats</span><span class="p">(</span><span class="s">"nitrate"</span><span class="p">,</span><span class="m">74</span><span class="o">:</span><span class="m">80</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr>
<th scope="col">Pollutant</th>
<th scope="col">Mean</th>
<th scope="col">Median</th>
<th scope="col">Mode</th>
<th scope="col">Std_dev</th>
</tr></thead>
<tbody><tr>
<td>nitrate </td>
<td>2.611021</td>
<td>2.611021</td>
<td>1.24    </td>
<td>2.802195</td>
</tr></tbody>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [24]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="nf">PollutantStats</span><span class="p">(</span><span class="s">"sulfate"</span><span class="p">,</span><span class="m">10</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr>
<th scope="col">Pollutant</th>
<th scope="col">Mean</th>
<th scope="col">Median</th>
<th scope="col">Mode</th>
<th scope="col">Std_dev</th>
</tr></thead>
<tbody><tr>
<td>sulfate  </td>
<td>0.6243649</td>
<td>0.6243649</td>
<td>0.349    </td>
<td>0.3637092</td>
</tr></tbody>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [25]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="nf">PollutantStats</span><span class="p">(</span><span class="s">"nitrate"</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr>
<th scope="col">Pollutant</th>
<th scope="col">Mean</th>
<th scope="col">Median</th>
<th scope="col">Mode</th>
<th scope="col">Std_dev</th>
</tr></thead>
<tbody><tr>
<td>nitrate </td>
<td>1.702932</td>
<td>1.702932</td>
<td>1.1     </td>
<td>2.52504 </td>
</tr></tbody>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>[<a href="00502/#contents">^top</a>]</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Function-2:-Data-Quality-">Function 2: Data Quality <a name="f2"></a><a class="anchor-link" href="00502/#Function-2:-Data-Quality-">Â¶</a>
</h3>
<p>The function "DataQuality" will report the quality of data for each monitor ID.</p>
<p><strong>Input</strong><br>
The function accepts one argument:</p>
<ol>
<li>"id" - An <strong>optional</strong> Monitor id vector. Default value is 1:332.</li>
</ol>
<p><strong>Output</strong></p>
<ol>
<li>id: Monitor ID</li>
<li>Obs: Total number of valid and invalid observations for the corresponding monitor ID (including missing values)</li>
<li>Sulfate, Nitrate: Number of valid data points of each pollutant.</li>
<li>SulfateQ, NitrateQ: Percentage of valid data points of each pollutant.</li>
<li>PairWise: Number of valid data points of both pollutants together.</li>
<li>PairWiseQ: Percentafe of valid data points of both pollutants together</li>
</ol>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [86]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="n">DataQuality</span><span class="o">&lt;-</span><span class="nf">function</span><span class="p">(</span><span class="n">id</span><span class="o">=</span><span class="m">1</span><span class="o">:</span><span class="m">332</span><span class="p">){</span>
    <span class="n">p</span><span class="o">&lt;-</span><span class="nf">c</span><span class="p">(</span><span class="s">"sulfate"</span><span class="p">,</span><span class="s">"nitrate"</span><span class="p">)</span>
    <span class="c1"># Create an empty data frame</span>
    <span class="n">x</span><span class="o">=</span><span class="nf">integer</span><span class="p">()</span>
    <span class="n">q</span><span class="o">&lt;-</span><span class="nf">data.frame</span><span class="p">(</span><span class="n">id</span><span class="o">=</span><span class="n">x</span><span class="p">,</span><span class="n">Obs</span><span class="o">=</span><span class="n">x</span><span class="p">,</span><span class="n">Sulfate</span><span class="o">=</span><span class="n">x</span><span class="p">,</span><span class="n">Nitrate</span><span class="o">=</span><span class="n">x</span><span class="p">,</span><span class="n">PairWise</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>
    <span class="nf">for </span><span class="p">(</span><span class="n">i</span> <span class="n">in</span> <span class="n">id</span><span class="p">){</span>
        <span class="c1"># Reading each csv file into a dataframe.</span>
        <span class="n">df</span><span class="o">&lt;-</span><span class="nf">read.csv</span><span class="p">(</span><span class="nf">unz</span><span class="p">(</span><span class="n">file</span><span class="p">,</span><span class="nf">sprintf</span><span class="p">(</span><span class="s">"data/%03d.csv"</span><span class="p">,</span><span class="n">i</span><span class="p">)))</span>
        <span class="n">obs</span><span class="o">&lt;-</span><span class="nf">nrow</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
        <span class="n">sulfate</span><span class="o">&lt;-</span><span class="nf">nrow</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="o">!</span><span class="p">(</span><span class="nf">is.na</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="m">1</span><span class="p">]])),])</span>
        <span class="n">nitrate</span><span class="o">&lt;-</span><span class="nf">nrow</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="o">!</span><span class="p">(</span><span class="nf">is.na</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="m">2</span><span class="p">]])),])</span>
        <span class="n">pairwise</span><span class="o">&lt;-</span><span class="nf">nrow</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="o">!</span><span class="p">(</span><span class="nf">is.na</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="m">1</span><span class="p">]])</span><span class="o">|</span><span class="nf">is.na</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="m">2</span><span class="p">]])),])</span>
        <span class="n">q</span><span class="p">[</span><span class="nf">nrow</span><span class="p">(</span><span class="n">q</span><span class="p">)</span><span class="m">+1</span><span class="p">,]</span><span class="o">&lt;-</span><span class="nf">c</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">obs</span><span class="p">,</span><span class="n">sulfate</span><span class="p">,</span><span class="n">nitrate</span><span class="p">,</span><span class="n">pairwise</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="c1"># Add SulfateQ, NitrateQ and PairWiseQ columns.</span>
    <span class="n">q</span><span class="o">$</span><span class="n">SulfateQ</span><span class="o">&lt;-</span><span class="nf">round</span><span class="p">(</span><span class="n">q</span><span class="o">$</span><span class="n">Sulfate</span><span class="o">/</span><span class="n">q</span><span class="o">$</span><span class="n">Obs</span><span class="o">*</span><span class="m">100</span><span class="p">,</span><span class="m">1</span><span class="p">)</span>
    <span class="n">q</span><span class="o">$</span><span class="n">NitrateQ</span><span class="o">&lt;-</span><span class="nf">round</span><span class="p">(</span><span class="n">q</span><span class="o">$</span><span class="n">Nitrate</span><span class="o">/</span><span class="n">q</span><span class="o">$</span><span class="n">Obs</span><span class="o">*</span><span class="m">100</span><span class="p">,</span><span class="m">1</span><span class="p">)</span>
    <span class="n">q</span><span class="o">$</span><span class="n">PairWiseQ</span><span class="o">&lt;-</span><span class="nf">round</span><span class="p">(</span><span class="n">q</span><span class="o">$</span><span class="n">PairWise</span><span class="o">/</span><span class="n">q</span><span class="o">$</span><span class="n">Obs</span><span class="o">*</span><span class="m">100</span><span class="p">,</span><span class="m">1</span><span class="p">)</span>
    <span class="n">q</span>
<span class="p">}</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [87]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="nf">DataQuality</span><span class="p">(</span><span class="m">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr>
<th scope="col">id</th>
<th scope="col">Obs</th>
<th scope="col">Sulfate</th>
<th scope="col">Nitrate</th>
<th scope="col">PairWise</th>
<th scope="col">SulfateQ</th>
<th scope="col">NitrateQ</th>
<th scope="col">PairWiseQ</th>
</tr></thead>
<tbody><tr>
<td>1   </td>
<td>1461</td>
<td>117 </td>
<td>122 </td>
<td>117 </td>
<td>8   </td>
<td>8.4 </td>
<td>8   </td>
</tr></tbody>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [88]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="nf">DataQuality</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">5</span><span class="p">,</span><span class="m">10</span><span class="p">,</span><span class="m">15</span><span class="p">,</span><span class="m">20</span><span class="p">,</span><span class="m">15</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr>
<th scope="col">id</th>
<th scope="col">Obs</th>
<th scope="col">Sulfate</th>
<th scope="col">Nitrate</th>
<th scope="col">PairWise</th>
<th scope="col">SulfateQ</th>
<th scope="col">NitrateQ</th>
<th scope="col">PairWiseQ</th>
</tr></thead>
<tbody>
<tr>
<td> 5  </td>
<td>2922</td>
<td>402 </td>
<td>405 </td>
<td>402 </td>
<td>13.8</td>
<td>13.9</td>
<td>13.8</td>
</tr>
<tr>
<td>10  </td>
<td>1096</td>
<td>148 </td>
<td>183 </td>
<td>148 </td>
<td>13.5</td>
<td>16.7</td>
<td>13.5</td>
</tr>
<tr>
<td>15  </td>
<td> 730</td>
<td> 83 </td>
<td> 85 </td>
<td> 83 </td>
<td>11.4</td>
<td>11.6</td>
<td>11.4</td>
</tr>
<tr>
<td>20  </td>
<td>1461</td>
<td>124 </td>
<td>128 </td>
<td>124 </td>
<td> 8.5</td>
<td> 8.8</td>
<td> 8.5</td>
</tr>
<tr>
<td>15  </td>
<td> 730</td>
<td> 83 </td>
<td> 85 </td>
<td> 83 </td>
<td>11.4</td>
<td>11.6</td>
<td>11.4</td>
</tr>
</tbody>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [89]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="nf">DataQuality</span><span class="p">(</span><span class="m">44</span><span class="o">:</span><span class="m">40</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr>
<th scope="col">id</th>
<th scope="col">Obs</th>
<th scope="col">Sulfate</th>
<th scope="col">Nitrate</th>
<th scope="col">PairWise</th>
<th scope="col">SulfateQ</th>
<th scope="col">NitrateQ</th>
<th scope="col">PairWiseQ</th>
</tr></thead>
<tbody>
<tr>
<td>44  </td>
<td>2557</td>
<td>283 </td>
<td>287 </td>
<td>283 </td>
<td>11.1</td>
<td>11.2</td>
<td>11.1</td>
</tr>
<tr>
<td>43  </td>
<td>1095</td>
<td> 74 </td>
<td> 77 </td>
<td> 74 </td>
<td> 6.8</td>
<td> 7.0</td>
<td> 6.8</td>
</tr>
<tr>
<td>42  </td>
<td>1095</td>
<td> 60 </td>
<td> 68 </td>
<td> 60 </td>
<td> 5.5</td>
<td> 6.2</td>
<td> 5.5</td>
</tr>
<tr>
<td>41  </td>
<td>2556</td>
<td>227 </td>
<td>243 </td>
<td>227 </td>
<td> 8.9</td>
<td> 9.5</td>
<td> 8.9</td>
</tr>
<tr>
<td>40  </td>
<td> 365</td>
<td> 21 </td>
<td> 21 </td>
<td> 21 </td>
<td> 5.8</td>
<td> 5.8</td>
<td> 5.8</td>
</tr>
</tbody>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [90]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="n">dq</span><span class="o">&lt;-</span><span class="nf">DataQuality</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [91]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="nf">summary</span><span class="p">(</span><span class="n">dq</span><span class="o">$</span><span class="n">PairWiseQ</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>




<div class="output_text output_subarea ">
<pre>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   0.00    9.90   12.30   12.98   15.32   41.10 </pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>[<a href="00502/#contents">^top</a>]</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Function-3:-Correlation-Test-">Function 3: Correlation Test <a name="f3"></a><a class="anchor-link" href="00502/#Function-3:-Correlation-Test-">Â¶</a>
</h3>
<p>The "Correlation" function will calculate the correlation coefficient and significance(correlation test) between the pollutants Sulfate and Nitrate for a range of minitor ids that meet required pair wise data quality.</p>
<p><strong>Input</strong></p>
<ol>
<li>pwq - Pair wise data quality in percentage. Default value is 0.</li>
<li>id - An <strong>optional</strong> Monitor id vector. Default value is 1:332.</li>
</ol>
<p><strong>Output</strong></p>
<ol>
<li>Pearson correlation test summary</li>
</ol>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [128]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="n">Correlation</span><span class="o">&lt;-</span><span class="nf">function</span><span class="p">(</span><span class="n">pwq</span><span class="o">=</span><span class="m">0</span><span class="p">,</span><span class="n">id</span><span class="o">=</span><span class="m">1</span><span class="o">:</span><span class="m">332</span><span class="p">){</span>
    <span class="n">p</span><span class="o">&lt;-</span><span class="nf">c</span><span class="p">(</span><span class="s">"sulfate"</span><span class="p">,</span><span class="s">"nitrate"</span><span class="p">)</span>
    <span class="c1"># Init empty data frame</span>
    <span class="n">dfc</span><span class="o">&lt;-</span><span class="nf">as.data.frame</span><span class="p">(</span><span class="nf">setNames</span><span class="p">(</span><span class="nf">replicate</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="nf">numeric</span><span class="p">(</span><span class="m">0</span><span class="p">),</span> <span class="n">simplify</span> <span class="o">=</span> <span class="bp">F</span><span class="p">),</span> <span class="n">p</span><span class="p">))</span>
    <span class="nf">for </span><span class="p">(</span><span class="n">i</span> <span class="n">in</span> <span class="n">id</span><span class="p">){</span>
        <span class="c1"># Reading each csv file into a dataframe.</span>
        <span class="n">df</span><span class="o">&lt;-</span><span class="nf">read.csv</span><span class="p">(</span><span class="nf">unz</span><span class="p">(</span><span class="n">file</span><span class="p">,</span><span class="nf">sprintf</span><span class="p">(</span><span class="s">"data/%03d.csv"</span><span class="p">,</span><span class="n">i</span><span class="p">)))</span>
        <span class="c1"># Pairwise complete obserations</span>
        <span class="n">dfpw</span><span class="o">&lt;-</span><span class="n">df</span><span class="p">[</span><span class="o">!</span><span class="p">(</span><span class="nf">is.na</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="m">1</span><span class="p">]])</span><span class="o">|</span><span class="nf">is.na</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="m">2</span><span class="p">]])),]</span>
        <span class="c1"># Checking if pairwise data quality of a monitor meets required pwq</span>
        <span class="nf">if </span><span class="p">(</span><span class="nf">nrow</span><span class="p">(</span><span class="n">dfpw</span><span class="p">)</span><span class="o">/</span><span class="nf">nrow</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">&gt;=</span><span class="n">pwq</span><span class="o">/</span><span class="m">100</span><span class="p">){</span>
            <span class="n">dfc</span><span class="o">&lt;-</span><span class="nf">rbind</span><span class="p">(</span><span class="n">dfc</span><span class="p">,</span><span class="n">dfpw</span><span class="p">[,</span><span class="n">p</span><span class="p">])</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="c1"># Pearson correlation test</span>
    <span class="nf">cor.test</span><span class="p">(</span><span class="n">dfc</span><span class="p">[,</span><span class="n">p</span><span class="p">[</span><span class="m">1</span><span class="p">]],</span><span class="n">y</span><span class="o">=</span><span class="n">dfc</span><span class="p">[,</span><span class="n">p</span><span class="p">[</span><span class="m">2</span><span class="p">]])</span>
<span class="p">}</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [130]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># Correlation test of monitors with pairwise data quality above the 35%</span>
<span class="nf">Correlation</span><span class="p">(</span><span class="m">35</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>




<div class="output_text output_subarea ">
<pre>
	Pearson's product-moment correlation

data:  dfc[, p[1]] and dfc[, p[2]]
t = -2.0727, df = 148, p-value = 0.03993
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.319614399 -0.007907202
sample estimates:
       cor 
-0.1679559 
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [127]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># Correlation test of monitors with pairwise data quality above the mean</span>
<span class="nf">Correlation</span><span class="p">(</span><span class="m">12.98</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>




<div class="output_text output_subarea ">
<pre>
	Pearson's product-moment correlation

data:  dfc[, p[1]] and dfc[, p[2]]
t = 16.813, df = 73847, p-value &lt; 2.2e-16
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 0.05456375 0.06893346
sample estimates:
      cor 
0.0617518 
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [129]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># Correlation test of all monitors</span>
<span class="nf">Correlation</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>




<div class="output_text output_subarea ">
<pre>
	Pearson's product-moment correlation

data:  dfc[, p[1]] and dfc[, p[2]]
t = 20.916, df = 111800, p-value &lt; 2.2e-16
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 0.05659269 0.06827041
sample estimates:
       cor 
0.06243369 
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [126]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># Maximum pairwise data quality is 41.1%.</span>
<span class="c1"># Passing a value above that should give an eror.</span>
<span class="nf">Correlation</span><span class="p">(</span><span class="m">42</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_text output_error">
<pre>
Error in cor.test.default(dfc[, p[1]], y = dfc[, p[2]]): not enough finite observations
Traceback:

1. Correlation(42)
2. cor.test(dfc[, p[1]], y = dfc[, p[2]])   # at line 16 of file &lt;text&gt;
3. cor.test.default(dfc[, p[1]], y = dfc[, p[2]])
4. stop("not enough finite observations")</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>[<a href="00502/#contents">^top</a>]</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Last updated 2020-04-17 22:16:01.288450 IST</em></p>

</div>
</div>
</div>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="00501/" class="u-url">COVID-19 data</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Krishnakanth Allika
            </span></p>
            <p class="dateline">
            <a href="00501/" rel="bookmark">
            <time class="published dt-published" datetime="2020-04-15T12:45:20+05:30" itemprop="datePublished" title="2020-04-15 12:45">2020-04-15 12:45</time></a>
            </p>
                <p class="commentline">
        
<a href="%7Blink%7D" onclick="this.href='/posts/00501/'; this.target='_self';"><span class="IDCommentsReplace" style="display:none">cache/posts/00501_COVID19.html</span>
<script>
var idcomments_acct = '7fae5836cfdd49cac599cac5b95695d1';
var idcomments_post_id = "cache/posts/00501_COVID19.html";
var idcomments_post_url = "/posts/00501/";
</script><script src="https://www.intensedebate.com/js/genericLinkWrapperV2.js"></script></a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Contents</strong> <a name="contents"></a></p>
<ol>
<li><a href="00501/#jhu">JHU exercise data</a></li>
<li><a href="00501/#jhucsse">COVID data by JHU CSSE</a></li>
<li><a href="00501/#kaggle">COVID data by Kaggle</a></li>
<li><a href="00501/#eu">COVID by EU Open Data Portal</a></li>
</ol>
<hr>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="JHU-exercise-data-">JHU exercise data <a name="jhu"></a><a class="anchor-link" href="00501/#JHU-exercise-data-">Â¶</a>
</h3>
<p><em>Disclaimer: This exercise is to help people understand data sclicing operations in R. I will not be providing solutions to JHU assignments. However, these exercises will help get closer to finding solutions.</em></p>
<p>Data is provided in the form of a URL containing a zip file. There are more than one ways to extract data from zip files.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Data-extraction---Method-1">Data extraction - Method 1<a class="anchor-link" href="00501/#Data-extraction---Method-1">Â¶</a>
</h4>
<ol>
<li>Download zip file into working directory.</li>
<li>Decompress the zip file into working directory.</li>
<li>Check data file format.</li>
<li>Load decompressed file into a dataframe.</li>
</ol>
<p>Disadvantage: Will end up with two files (a zip file and a data file) in the working directory which are unnecessary.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># Download the dataset from the URL to the working directory and name it as "data.zip"</span>
<span class="nf">download.file</span><span class="p">(</span><span class="s">"https://d396qusza40orc.cloudfront.net/rprog/data/quiz1_data.zip"</span><span class="p">,</span><span class="s">"data.zip"</span><span class="p">)</span>
<span class="c1">#unzip the zip file to a directory called "data"</span>
<span class="nf">unzip</span><span class="p">(</span><span class="s">"data.zip"</span><span class="p">,</span><span class="n">exdir</span><span class="o">=</span><span class="s">"data"</span><span class="p">)</span>
<span class="c1"># List file in the "data" directory to check data file format</span>
<span class="nf">list.files</span><span class="p">(</span><span class="s">"data"</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
'hw1_data.csv'
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The data is available in a CSV (comma seperated values) file. We will use <em>read.csv</em> to read data into a dataframe.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># Reading data into a dataframe called "df"</span>
<span class="n">df_data1</span><span class="o">&lt;-</span><span class="nf">read.csv</span><span class="p">(</span><span class="s">"data/hw1_data.csv"</span><span class="p">)</span>
<span class="c1"># View sample data.</span>
<span class="nf">head</span><span class="p">(</span><span class="n">df_data1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr>
<th scope="col">Ozone</th>
<th scope="col">Solar.R</th>
<th scope="col">Wind</th>
<th scope="col">Temp</th>
<th scope="col">Month</th>
<th scope="col">Day</th>
</tr></thead>
<tbody>
<tr>
<td>41  </td>
<td>190 </td>
<td> 7.4</td>
<td>67  </td>
<td>5   </td>
<td>1   </td>
</tr>
<tr>
<td>36  </td>
<td>118 </td>
<td> 8.0</td>
<td>72  </td>
<td>5   </td>
<td>2   </td>
</tr>
<tr>
<td>12  </td>
<td>149 </td>
<td>12.6</td>
<td>74  </td>
<td>5   </td>
<td>3   </td>
</tr>
<tr>
<td>18  </td>
<td>313 </td>
<td>11.5</td>
<td>62  </td>
<td>5   </td>
<td>4   </td>
</tr>
<tr>
<td>NA  </td>
<td> NA </td>
<td>14.3</td>
<td>56  </td>
<td>5   </td>
<td>5   </td>
</tr>
<tr>
<td>28  </td>
<td> NA </td>
<td>14.9</td>
<td>66  </td>
<td>5   </td>
<td>6   </td>
</tr>
</tbody>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Data-extraction---Method-2">Data extraction - Method 2<a class="anchor-link" href="00501/#Data-extraction---Method-2">Â¶</a>
</h4>
<p>Earlier, we ended up with two unnecessary files and a directory in our working directory. Let's try another way to extracting data without downloading anything to our working directory.</p>
<ol>
<li>Download zip file into kernel/memory.</li>
<li>Check data file format.</li>
<li>Load data file into a dataframe.</li>
</ol>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># Create an empty file in memory</span>
<span class="n">file</span><span class="o">&lt;-</span><span class="nf">tempfile</span><span class="p">()</span>
<span class="c1"># Download the zip file to this empty file</span>
<span class="nf">download.file</span><span class="p">(</span><span class="s">"https://d396qusza40orc.cloudfront.net/rprog/data/quiz1_data.zip"</span><span class="p">,</span><span class="n">file</span><span class="p">)</span>
<span class="c1"># Check data file format</span>
<span class="nf">unzip</span><span class="p">(</span><span class="n">file</span><span class="p">,</span><span class="n">list</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr>
<th scope="col">Name</th>
<th scope="col">Length</th>
<th scope="col">Date</th>
</tr></thead>
<tbody><tr>
<td>hw1_data.csv       </td>
<td>2902               </td>
<td>2012-12-26 14:25:00</td>
</tr></tbody>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># Load data file to dataframe</span>
<span class="n">df_data</span><span class="o">&lt;-</span><span class="nf">read.csv</span><span class="p">(</span><span class="nf">unz</span><span class="p">(</span><span class="n">file</span><span class="p">,</span><span class="s">"hw1_data.csv"</span><span class="p">))</span>
<span class="c1"># Delete file from memory</span>
<span class="nf">unlink</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
<span class="c1"># View sample data</span>
<span class="nf">head</span><span class="p">(</span><span class="n">df_data</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr>
<th scope="col">Ozone</th>
<th scope="col">Solar.R</th>
<th scope="col">Wind</th>
<th scope="col">Temp</th>
<th scope="col">Month</th>
<th scope="col">Day</th>
</tr></thead>
<tbody>
<tr>
<td>41  </td>
<td>190 </td>
<td> 7.4</td>
<td>67  </td>
<td>5   </td>
<td>1   </td>
</tr>
<tr>
<td>36  </td>
<td>118 </td>
<td> 8.0</td>
<td>72  </td>
<td>5   </td>
<td>2   </td>
</tr>
<tr>
<td>12  </td>
<td>149 </td>
<td>12.6</td>
<td>74  </td>
<td>5   </td>
<td>3   </td>
</tr>
<tr>
<td>18  </td>
<td>313 </td>
<td>11.5</td>
<td>62  </td>
<td>5   </td>
<td>4   </td>
</tr>
<tr>
<td>NA  </td>
<td> NA </td>
<td>14.3</td>
<td>56  </td>
<td>5   </td>
<td>5   </td>
</tr>
<tr>
<td>28  </td>
<td> NA </td>
<td>14.9</td>
<td>66  </td>
<td>5   </td>
<td>6   </td>
</tr>
</tbody>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Checking if both dataframes are identical</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="nf">identical</span><span class="p">(</span><span class="n">df_data</span><span class="p">,</span><span class="n">df_data1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
TRUE
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># Dimensions of the dataframe</span>
<span class="nf">dim</span><span class="p">(</span><span class="n">df_data</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<ol class="list-inline">
<li>153</li>
	<li>6</li>
</ol>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>df_data</em> has 153 rows and 6 columns.<br>
Let's write the same in data science langauge:<br>
The dataframe contains 153 records of 6 variables or features.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># View the first 3 records of te dataframe to get an idea about the data in it.</span>
<span class="nf">head</span><span class="p">(</span><span class="n">df_data</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="m">3</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr>
<th scope="col">Ozone</th>
<th scope="col">Solar.R</th>
<th scope="col">Wind</th>
<th scope="col">Temp</th>
<th scope="col">Month</th>
<th scope="col">Day</th>
</tr></thead>
<tbody>
<tr>
<td>41  </td>
<td>190 </td>
<td> 7.4</td>
<td>67  </td>
<td>5   </td>
<td>1   </td>
</tr>
<tr>
<td>36  </td>
<td>118 </td>
<td> 8.0</td>
<td>72  </td>
<td>5   </td>
<td>2   </td>
</tr>
<tr>
<td>12  </td>
<td>149 </td>
<td>12.6</td>
<td>74  </td>
<td>5   </td>
<td>3   </td>
</tr>
</tbody>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># View the last four records.</span>
<span class="nf">tail</span><span class="p">(</span><span class="n">df_data</span><span class="p">,</span><span class="n">n</span><span class="o">=</span><span class="m">4</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr>
<th></th>
<th scope="col">Ozone</th>
<th scope="col">Solar.R</th>
<th scope="col">Wind</th>
<th scope="col">Temp</th>
<th scope="col">Month</th>
<th scope="col">Day</th>
</tr></thead>
<tbody>
<tr>
<th scope="row">150</th>
<td>NA  </td>
<td>145 </td>
<td>13.2</td>
<td>77  </td>
<td>9   </td>
<td>27  </td>
</tr>
<tr>
<th scope="row">151</th>
<td>14  </td>
<td>191 </td>
<td>14.3</td>
<td>75  </td>
<td>9   </td>
<td>28  </td>
</tr>
<tr>
<th scope="row">152</th>
<td>18  </td>
<td>131 </td>
<td> 8.0</td>
<td>76  </td>
<td>9   </td>
<td>29  </td>
</tr>
<tr>
<th scope="row">153</th>
<td>20  </td>
<td>223 </td>
<td>11.5</td>
<td>68  </td>
<td>9   </td>
<td>30  </td>
</tr>
</tbody>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can also find the number of records by finding the length of any one of the variables (example, Ozone)</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="nf">length</span><span class="p">(</span><span class="n">df_data</span><span class="o">$</span><span class="n">Ozone</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
153
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Data slicing (also called subsetting in R) is done using the <code>[</code> function. The standard syntax is <code>[rows,columns]</code>. If we need to slice by rows, we can omit columns like <code>[rows,]</code>. Do not forget the trailing comma because without it, R assumes that we are slicing by columns by default or slicing a vector.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># Ozone level of 29th row</span>
<span class="n">df_data</span><span class="p">[</span><span class="m">29</span><span class="p">,</span><span class="s">"Ozone"</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
45
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If the variables of a dataframe are named, then we can also use their names the following way to achieve the same result as above.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># Ozone level of 29th row</span>
<span class="n">df_data</span><span class="o">$</span><span class="n">Ozone</span><span class="p">[</span><span class="m">29</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
45
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>How did this work? When we call a variable of a dataframe, it becomes a vector. Here <em>df</em>_<em>data$Ozone</em> is an integer vector. We viewed the 29th element of the vector.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [18]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="nf">class</span><span class="p">(</span><span class="n">df_data</span><span class="o">$</span><span class="n">Ozone</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
'integer'
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Missing values: <em>is.na()</em> provides a logical vector of missing values - TRUE if NA and FALSE if not NA. In R, TRUE = 1 and FALSE = 0. A <em>sum</em> function will output the sum of all TRUE values (or missing values).</p>
<p><strong>Number of missing values in variable Solar.R:</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [21]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># Number of missing values in variable Solar.R</span>
<span class="nf">sum</span><span class="p">(</span><span class="nf">is.na</span><span class="p">(</span><span class="n">df_data</span><span class="o">$</span><span class="n">Solar.R</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
7
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Mean of the variable Solar.R excluding missing values:</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [23]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># Mean of the variable Solar.R excluding missing values</span>
<span class="nf">mean</span><span class="p">(</span><span class="n">df_data</span><span class="o">$</span><span class="n">Solar.R</span><span class="p">,</span> <span class="n">na.rm</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
185.931506849315
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Mean of Solar.R where Ozone levels are lower than 25 and Temp is below 88:</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [25]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># Mean of Solar.R where Ozone levels are lower than 25 and Temp is below 88.</span>
<span class="nf">mean</span><span class="p">(</span><span class="n">df_data</span><span class="o">$</span><span class="n">Solar.R</span><span class="p">[</span><span class="n">df_data</span><span class="o">$</span><span class="n">Ozone</span><span class="o">&lt;</span><span class="m">25</span><span class="o">&amp;</span><span class="n">df_data</span><span class="o">$</span><span class="n">Temp</span><span class="o">&lt;</span><span class="m">88</span><span class="p">],</span><span class="n">na.rm</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
145.163265306122
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Average Ozone level in the month of May:</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [27]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># Average Ozone level in the month of May</span>
<span class="nf">mean</span><span class="p">(</span><span class="n">df_data</span><span class="o">$</span><span class="n">Ozone</span><span class="p">[</span><span class="n">df_data</span><span class="o">$</span><span class="n">Month</span><span class="o">==</span><span class="m">5</span><span class="p">],</span> <span class="n">na.rm</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
23.6153846153846
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Maximum Solar Radiation in June:</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [29]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># Maximum Solar Radiation in June</span>
<span class="c1"># More info on usage of max() function: http://www.endmemo.com/program/R/max.php</span>
<span class="nf">max</span><span class="p">(</span><span class="n">df_data</span><span class="o">$</span><span class="n">Solar.R</span><span class="p">[</span><span class="n">df_data</span><span class="o">$</span><span class="n">Month</span><span class="o">==</span><span class="m">6</span><span class="p">],</span><span class="n">na.rm</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
332
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>[<a href="00501/#contents">^top</a>]</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="COVID-data-by-JHU-CSSE-">COVID data by JHU CSSE <a name="jhucsse"></a><a class="anchor-link" href="00501/#COVID-data-by-JHU-CSSE-">Â¶</a>
</h3>
<p>Source: <a href="https://github.com/CSSEGISandData/COVID-19">https://github.com/CSSEGISandData/COVID-19</a><br>
Data URL: <a href="http://link.datascience.eu.org/p003d1">http://link.datascience.eu.org/p003d1</a><br>
Data last updated: 2020-04-13</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [33]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># Loading data to dataframe</span>
<span class="n">df_JHU</span><span class="o">&lt;-</span><span class="nf">read.csv</span><span class="p">(</span><span class="s">"http://link.datascience.eu.org/p003d1"</span><span class="p">)</span>
<span class="nf">head</span><span class="p">(</span><span class="n">df_JHU</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="m">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr>
<th scope="col">FIPS</th>
<th scope="col">Admin2</th>
<th scope="col">Province_State</th>
<th scope="col">Country_Region</th>
<th scope="col">Last_Update</th>
<th scope="col">Lat</th>
<th scope="col">Long_</th>
<th scope="col">Confirmed</th>
<th scope="col">Deaths</th>
<th scope="col">Recovered</th>
<th scope="col">Active</th>
<th scope="col">Combined_Key</th>
</tr></thead>
<tbody>
<tr>
<td>45001                        </td>
<td>Abbeville                    </td>
<td>South Carolina               </td>
<td>US                           </td>
<td>2020-04-13 23:07:54          </td>
<td>34.22333                     </td>
<td>-82.46171                    </td>
<td>  9                          </td>
<td>0                            </td>
<td>0                            </td>
<td> 9                           </td>
<td>Abbeville, South Carolina, US</td>
</tr>
<tr>
<td>22001                        </td>
<td>Acadia                       </td>
<td>Louisiana                    </td>
<td>US                           </td>
<td>2020-04-13 23:07:54          </td>
<td>30.29506                     </td>
<td>-92.41420                    </td>
<td>101                          </td>
<td>5                            </td>
<td>0                            </td>
<td>96                           </td>
<td>Acadia, Louisiana, US        </td>
</tr>
</tbody>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Pruning dataframe by stripping away unrequired variables:<br>
We only need Country, State, Confirmed, Deaths, Recovered and Active.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [34]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="n">df_JHU</span><span class="o">&lt;-</span><span class="n">df_JHU</span><span class="p">[,</span><span class="nf">c</span><span class="p">(</span><span class="s">"Country_Region"</span><span class="p">,</span><span class="s">"Province_State"</span><span class="p">,</span><span class="s">"Confirmed"</span><span class="p">,</span><span class="s">"Deaths"</span><span class="p">,</span><span class="s">"Recovered"</span><span class="p">,</span><span class="s">"Active"</span><span class="p">)]</span>
<span class="nf">head</span><span class="p">(</span><span class="n">df_JHU</span><span class="p">,</span><span class="n">n</span><span class="o">=</span><span class="m">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr>
<th scope="col">Country_Region</th>
<th scope="col">Province_State</th>
<th scope="col">Confirmed</th>
<th scope="col">Deaths</th>
<th scope="col">Recovered</th>
<th scope="col">Active</th>
</tr></thead>
<tbody>
<tr>
<td>US            </td>
<td>South Carolina</td>
<td>  9           </td>
<td>0             </td>
<td>0             </td>
<td> 9            </td>
</tr>
<tr>
<td>US            </td>
<td>Louisiana     </td>
<td>101           </td>
<td>5             </td>
<td>0             </td>
<td>96            </td>
</tr>
</tbody>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Confirmed cases, deaths and death rates in US and India vs Global:</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [39]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># Confirmed cases</span>
<span class="n">c_US</span><span class="o">&lt;-</span><span class="nf">sum</span><span class="p">(</span><span class="n">df_JHU</span><span class="p">[</span><span class="n">df_JHU</span><span class="o">$</span><span class="n">Country_Region</span><span class="o">==</span><span class="s">"US"</span><span class="p">,</span><span class="s">"Confirmed"</span><span class="p">])</span>
<span class="n">c_IN</span><span class="o">&lt;-</span><span class="nf">sum</span><span class="p">(</span><span class="n">df_JHU</span><span class="p">[</span><span class="n">df_JHU</span><span class="o">$</span><span class="n">Country_Region</span><span class="o">==</span><span class="s">"India"</span><span class="p">,</span><span class="s">"Confirmed"</span><span class="p">])</span>
<span class="n">c_GL</span><span class="o">&lt;-</span><span class="nf">sum</span><span class="p">(</span><span class="n">df_JHU</span><span class="p">[</span><span class="s">"Confirmed"</span><span class="p">])</span>
<span class="n">c</span><span class="o">&lt;-</span><span class="nf">c</span><span class="p">(</span><span class="n">c_US</span><span class="p">,</span><span class="n">c_IN</span><span class="p">,</span><span class="n">c_GL</span><span class="p">)</span>
<span class="c1"># Deaths</span>
<span class="n">d_US</span><span class="o">&lt;-</span><span class="nf">sum</span><span class="p">(</span><span class="n">df_JHU</span><span class="p">[</span><span class="n">df_JHU</span><span class="o">$</span><span class="n">Country_Region</span><span class="o">==</span><span class="s">"US"</span><span class="p">,</span><span class="s">"Deaths"</span><span class="p">])</span>
<span class="n">d_IN</span><span class="o">&lt;-</span><span class="nf">sum</span><span class="p">(</span><span class="n">df_JHU</span><span class="p">[</span><span class="n">df_JHU</span><span class="o">$</span><span class="n">Country_Region</span><span class="o">==</span><span class="s">"India"</span><span class="p">,</span><span class="s">"Deaths"</span><span class="p">])</span>
<span class="n">d_GL</span><span class="o">&lt;-</span><span class="nf">sum</span><span class="p">(</span><span class="n">df_JHU</span><span class="p">[</span><span class="s">"Deaths"</span><span class="p">])</span>
<span class="n">d</span><span class="o">&lt;-</span><span class="nf">c</span><span class="p">(</span><span class="n">d_US</span><span class="p">,</span><span class="n">d_IN</span><span class="p">,</span><span class="n">d_GL</span><span class="p">)</span>
<span class="c1"># Death rates</span>
<span class="n">dr</span><span class="o">&lt;-</span><span class="n">d</span><span class="o">/</span><span class="n">c</span><span class="o">*</span><span class="m">100</span>
<span class="c1"># Creating a dataframe</span>
<span class="n">df_dr</span><span class="o">&lt;-</span><span class="nf">cbind</span><span class="p">(</span><span class="n">Country</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s">"US"</span><span class="p">,</span><span class="s">"India"</span><span class="p">,</span><span class="s">"Global"</span><span class="p">),</span><span class="n">Confirmed</span><span class="o">=</span><span class="n">c</span><span class="p">,</span><span class="n">Deaths</span><span class="o">=</span><span class="n">d</span><span class="p">,</span><span class="n">Death_Rate</span><span class="o">=</span><span class="n">dr</span><span class="p">)</span>
<span class="n">df_dr</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr>
<th scope="col">Country</th>
<th scope="col">Confirmed</th>
<th scope="col">Deaths</th>
<th scope="col">Death_Rate</th>
</tr></thead>
<tbody>
<tr>
<td>US              </td>
<td>580619          </td>
<td>23529           </td>
<td>4.0523992497662 </td>
</tr>
<tr>
<td>India           </td>
<td>10453           </td>
<td>358             </td>
<td>3.42485410886827</td>
</tr>
<tr>
<td>Global          </td>
<td>1917320         </td>
<td>119483          </td>
<td>6.23177143095571</td>
</tr>
</tbody>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The numbers are close to the reports from <a href="https://www.worldometers.info/coronavirus/">https://www.worldometers.info/coronavirus/</a><br><img src="../images/r0050010.png" alt="Worldometer report" title="Worldometer report"></p>
<p>[<a href="00501/#contents">^top</a>]</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="COVID-data-by-Kaggle-">COVID data by Kaggle <a name="kaggle"></a><a class="anchor-link" href="00501/#COVID-data-by-Kaggle-">Â¶</a>
</h3>
<p>Source: <a href="https://www.kaggle.com/sudalairajkumar/novel-corona-virus-2019-dataset/data">https://www.kaggle.com/sudalairajkumar/novel-corona-virus-2019-dataset/data</a><br>
Data URL: <a href="http://link.datascience.eu.org/p003d2">http://link.datascience.eu.org/p003d2</a><br>
Data last updated: 2020-04-13</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [40]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="n">df_kaggle</span><span class="o">&lt;-</span><span class="nf">read.csv</span><span class="p">(</span><span class="s">"http://link.datascience.eu.org/p003d2"</span><span class="p">)</span>
<span class="nf">head</span><span class="p">(</span><span class="n">df_kaggle</span><span class="p">,</span><span class="n">n</span><span class="o">=</span><span class="m">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr>
<th scope="col">SNo</th>
<th scope="col">ObservationDate</th>
<th scope="col">Province.State</th>
<th scope="col">Country.Region</th>
<th scope="col">Last.Update</th>
<th scope="col">Confirmed</th>
<th scope="col">Deaths</th>
<th scope="col">Recovered</th>
</tr></thead>
<tbody>
<tr>
<td>1              </td>
<td>01/22/2020     </td>
<td>Anhui          </td>
<td>Mainland China </td>
<td>1/22/2020 17:00</td>
<td> 1             </td>
<td>0              </td>
<td>0              </td>
</tr>
<tr>
<td>2              </td>
<td>01/22/2020     </td>
<td>Beijing        </td>
<td>Mainland China </td>
<td>1/22/2020 17:00</td>
<td>14             </td>
<td>0              </td>
<td>0              </td>
</tr>
</tbody>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Pruning dataframe by stripping away unrequired variables:<br>
We only need Country, State, Confirmed, Deaths, Recovered.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [41]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="n">df_kaggle</span><span class="o">&lt;-</span><span class="n">df_kaggle</span><span class="p">[,</span><span class="nf">c</span><span class="p">(</span><span class="s">"Country.Region"</span><span class="p">,</span><span class="s">"Province.State"</span><span class="p">,</span><span class="s">"Confirmed"</span><span class="p">,</span><span class="s">"Deaths"</span><span class="p">,</span><span class="s">"Recovered"</span><span class="p">)]</span>
<span class="nf">head</span><span class="p">(</span><span class="n">df_kaggle</span><span class="p">,</span><span class="n">n</span><span class="o">=</span><span class="m">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr>
<th scope="col">Country.Region</th>
<th scope="col">Province.State</th>
<th scope="col">Confirmed</th>
<th scope="col">Deaths</th>
<th scope="col">Recovered</th>
</tr></thead>
<tbody>
<tr>
<td>Mainland China</td>
<td>Anhui         </td>
<td> 1            </td>
<td>0             </td>
<td>0             </td>
</tr>
<tr>
<td>Mainland China</td>
<td>Beijing       </td>
<td>14            </td>
<td>0             </td>
<td>0             </td>
</tr>
</tbody>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Confirmed cases, deaths and death rates in US and India vs Global:</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [42]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># Confirmed cases</span>
<span class="n">c_US</span><span class="o">&lt;-</span><span class="nf">sum</span><span class="p">(</span><span class="n">df_kaggle</span><span class="p">[</span><span class="n">df_kaggle</span><span class="o">$</span><span class="n">Country.Region</span><span class="o">==</span><span class="s">"US"</span><span class="p">,</span><span class="s">"Confirmed"</span><span class="p">])</span>
<span class="n">c_IN</span><span class="o">&lt;-</span><span class="nf">sum</span><span class="p">(</span><span class="n">df_kaggle</span><span class="p">[</span><span class="n">df_kaggle</span><span class="o">$</span><span class="n">Country.Region</span><span class="o">==</span><span class="s">"India"</span><span class="p">,</span><span class="s">"Confirmed"</span><span class="p">])</span>
<span class="n">c_GL</span><span class="o">&lt;-</span><span class="nf">sum</span><span class="p">(</span><span class="n">df_kaggle</span><span class="p">[</span><span class="s">"Confirmed"</span><span class="p">])</span>
<span class="n">c</span><span class="o">&lt;-</span><span class="nf">c</span><span class="p">(</span><span class="n">c_US</span><span class="p">,</span><span class="n">c_IN</span><span class="p">,</span><span class="n">c_GL</span><span class="p">)</span>
<span class="c1"># Deaths</span>
<span class="n">d_US</span><span class="o">&lt;-</span><span class="nf">sum</span><span class="p">(</span><span class="n">df_kaggle</span><span class="p">[</span><span class="n">df_kaggle</span><span class="o">$</span><span class="n">Country.Region</span><span class="o">==</span><span class="s">"US"</span><span class="p">,</span><span class="s">"Deaths"</span><span class="p">])</span>
<span class="n">d_IN</span><span class="o">&lt;-</span><span class="nf">sum</span><span class="p">(</span><span class="n">df_kaggle</span><span class="p">[</span><span class="n">df_kaggle</span><span class="o">$</span><span class="n">Country.Region</span><span class="o">==</span><span class="s">"India"</span><span class="p">,</span><span class="s">"Deaths"</span><span class="p">])</span>
<span class="n">d_GL</span><span class="o">&lt;-</span><span class="nf">sum</span><span class="p">(</span><span class="n">df_kaggle</span><span class="p">[</span><span class="s">"Deaths"</span><span class="p">])</span>
<span class="n">d</span><span class="o">&lt;-</span><span class="nf">c</span><span class="p">(</span><span class="n">d_US</span><span class="p">,</span><span class="n">d_IN</span><span class="p">,</span><span class="n">d_GL</span><span class="p">)</span>
<span class="c1"># Death rates</span>
<span class="n">dr</span><span class="o">&lt;-</span><span class="n">d</span><span class="o">/</span><span class="n">c</span><span class="o">*</span><span class="m">100</span>
<span class="c1"># Creating a dataframe</span>
<span class="n">df_dr</span><span class="o">&lt;-</span><span class="nf">cbind</span><span class="p">(</span><span class="n">Country</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s">"US"</span><span class="p">,</span><span class="s">"India"</span><span class="p">,</span><span class="s">"Global"</span><span class="p">),</span><span class="n">Confirmed</span><span class="o">=</span><span class="n">c</span><span class="p">,</span><span class="n">Deaths</span><span class="o">=</span><span class="n">d</span><span class="p">,</span><span class="n">Death_Rate</span><span class="o">=</span><span class="n">dr</span><span class="p">)</span>
<span class="n">df_dr</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr>
<th scope="col">Country</th>
<th scope="col">Confirmed</th>
<th scope="col">Deaths</th>
<th scope="col">Death_Rate</th>
</tr></thead>
<tbody>
<tr>
<td>US              </td>
<td>6278333         </td>
<td>193275          </td>
<td>3.07844454889538</td>
</tr>
<tr>
<td>India           </td>
<td>82548           </td>
<td>2526            </td>
<td>3.06003779619131</td>
</tr>
<tr>
<td>Global          </td>
<td>29221460        </td>
<td>1511343         </td>
<td>5.1720311031687 </td>
</tr>
</tbody>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The numbers are way off compared to the reports from <a href="https://www.worldometers.info/coronavirus/">https://www.worldometers.info/coronavirus/</a>. The source data needs to be checked.<br><img src="../images/r0050010.png" alt="Worldometer report" title="Worldometer report"></p>
<p>[<a href="00501/#contents">^top</a>]</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="COVID-by-EU-Open-Data-Portal-">COVID by EU Open Data Portal <a name="eu"></a><a class="anchor-link" href="00501/#COVID-by-EU-Open-Data-Portal-">Â¶</a>
</h3>
<p>Source: <a href="https://opendata.ecdc.europa.eu/covid19/casedistribution/csv">https://opendata.ecdc.europa.eu/covid19/casedistribution/csv</a><br>
Data URL: <a href="http://link.datascience.eu.org/p003d3">http://link.datascience.eu.org/p003d3</a><br>
Data last updated: 2020-04-14</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [43]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="n">df_EU</span><span class="o">&lt;-</span><span class="nf">read.csv</span><span class="p">(</span><span class="s">"http://link.datascience.eu.org/p003d3"</span><span class="p">)</span>
<span class="nf">head</span><span class="p">(</span><span class="n">df_EU</span><span class="p">,</span><span class="n">n</span><span class="o">=</span><span class="m">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr>
<th scope="col">dateRep</th>
<th scope="col">day</th>
<th scope="col">month</th>
<th scope="col">year</th>
<th scope="col">cases</th>
<th scope="col">deaths</th>
<th scope="col">countriesAndTerritories</th>
<th scope="col">geoId</th>
<th scope="col">countryterritoryCode</th>
<th scope="col">popData2018</th>
</tr></thead>
<tbody>
<tr>
<td>14/04/2020 </td>
<td>14         </td>
<td>4          </td>
<td>2020       </td>
<td>58         </td>
<td>3          </td>
<td>Afghanistan</td>
<td>AF         </td>
<td>AFG        </td>
<td>37172386   </td>
</tr>
<tr>
<td>13/04/2020 </td>
<td>13         </td>
<td>4          </td>
<td>2020       </td>
<td>52         </td>
<td>0          </td>
<td>Afghanistan</td>
<td>AF         </td>
<td>AFG        </td>
<td>37172386   </td>
</tr>
</tbody>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Pruning dataframe by stripping away unrequired variables:<br>
We only need Country, cases, deaths, population.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [44]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="n">df_EU</span><span class="o">&lt;-</span><span class="n">df_EU</span><span class="p">[,</span><span class="nf">c</span><span class="p">(</span><span class="s">"countriesAndTerritories"</span><span class="p">,</span><span class="s">"cases"</span><span class="p">,</span><span class="s">"deaths"</span><span class="p">,</span><span class="s">"popData2018"</span><span class="p">)]</span>
<span class="nf">head</span><span class="p">(</span><span class="n">df_EU</span><span class="p">,</span><span class="n">n</span><span class="o">=</span><span class="m">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr>
<th scope="col">countriesAndTerritories</th>
<th scope="col">cases</th>
<th scope="col">deaths</th>
<th scope="col">popData2018</th>
</tr></thead>
<tbody>
<tr>
<td>Afghanistan</td>
<td>58         </td>
<td>3          </td>
<td>37172386   </td>
</tr>
<tr>
<td>Afghanistan</td>
<td>52         </td>
<td>0          </td>
<td>37172386   </td>
</tr>
</tbody>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Confirmed cases, deaths, death rates and cases per million population in US and India vs Global:</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [49]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># cases cases</span>
<span class="n">c_US</span><span class="o">&lt;-</span><span class="nf">sum</span><span class="p">(</span><span class="n">df_EU</span><span class="p">[</span><span class="n">df_EU</span><span class="o">$</span><span class="n">countriesAndTerritories</span><span class="o">==</span><span class="s">"United_States_of_America"</span><span class="p">,</span><span class="s">"cases"</span><span class="p">])</span>
<span class="n">c_IN</span><span class="o">&lt;-</span><span class="nf">sum</span><span class="p">(</span><span class="n">df_EU</span><span class="p">[</span><span class="n">df_EU</span><span class="o">$</span><span class="n">countriesAndTerritories</span><span class="o">==</span><span class="s">"India"</span><span class="p">,</span><span class="s">"cases"</span><span class="p">])</span>
<span class="n">c_GL</span><span class="o">&lt;-</span><span class="nf">sum</span><span class="p">(</span><span class="n">df_EU</span><span class="p">[</span><span class="s">"cases"</span><span class="p">])</span>
<span class="n">c</span><span class="o">&lt;-</span><span class="nf">c</span><span class="p">(</span><span class="n">c_US</span><span class="p">,</span><span class="n">c_IN</span><span class="p">,</span><span class="n">c_GL</span><span class="p">)</span>
<span class="c1"># deaths</span>
<span class="n">d_US</span><span class="o">&lt;-</span><span class="nf">sum</span><span class="p">(</span><span class="n">df_EU</span><span class="p">[</span><span class="n">df_EU</span><span class="o">$</span><span class="n">countriesAndTerritories</span><span class="o">==</span><span class="s">"United_States_of_America"</span><span class="p">,</span><span class="s">"deaths"</span><span class="p">])</span>
<span class="n">d_IN</span><span class="o">&lt;-</span><span class="nf">sum</span><span class="p">(</span><span class="n">df_EU</span><span class="p">[</span><span class="n">df_EU</span><span class="o">$</span><span class="n">countriesAndTerritories</span><span class="o">==</span><span class="s">"India"</span><span class="p">,</span><span class="s">"deaths"</span><span class="p">])</span>
<span class="n">d_GL</span><span class="o">&lt;-</span><span class="nf">sum</span><span class="p">(</span><span class="n">df_EU</span><span class="p">[</span><span class="s">"deaths"</span><span class="p">])</span>
<span class="n">d</span><span class="o">&lt;-</span><span class="nf">c</span><span class="p">(</span><span class="n">d_US</span><span class="p">,</span><span class="n">d_IN</span><span class="p">,</span><span class="n">d_GL</span><span class="p">)</span>
<span class="c1"># Death rates</span>
<span class="n">dr</span><span class="o">&lt;-</span><span class="n">d</span><span class="o">/</span><span class="n">c</span><span class="o">*</span><span class="m">100</span>
<span class="c1"># Population</span>
<span class="n">p_US</span><span class="o">&lt;-</span><span class="n">df_EU</span><span class="p">[</span><span class="n">df_EU</span><span class="o">$</span><span class="n">countriesAndTerritories</span><span class="o">==</span><span class="s">"United_States_of_America"</span><span class="p">,</span><span class="s">"popData2018"</span><span class="p">][</span><span class="m">1</span><span class="p">]</span>
<span class="n">p_IN</span><span class="o">&lt;-</span><span class="n">df_EU</span><span class="p">[</span><span class="n">df_EU</span><span class="o">$</span><span class="n">countriesAndTerritories</span><span class="o">==</span><span class="s">"India"</span><span class="p">,</span><span class="s">"popData2018"</span><span class="p">][</span><span class="m">1</span><span class="p">]</span>
<span class="n">p_GL</span><span class="o">&lt;-</span><span class="m">7631091112</span>     <span class="c1"># World pop in 2018 per https://www.populationpyramid.net/world/2018/</span>
<span class="n">p</span><span class="o">&lt;-</span><span class="nf">c</span><span class="p">(</span><span class="n">p_US</span><span class="p">,</span><span class="n">p_IN</span><span class="p">,</span><span class="n">p_GL</span><span class="p">)</span>
<span class="c1"># Cases per million population</span>
<span class="n">cpm</span><span class="o">&lt;-</span><span class="n">c</span><span class="o">/</span><span class="n">p</span><span class="o">*</span><span class="m">1000000</span>
<span class="c1"># Creating a dataframe</span>
<span class="n">df_dr</span><span class="o">&lt;-</span><span class="nf">cbind</span><span class="p">(</span><span class="n">Country</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s">"United_States_of_America"</span><span class="p">,</span><span class="s">"India"</span><span class="p">,</span><span class="s">"Global"</span><span class="p">),</span><span class="n">cases</span><span class="o">=</span><span class="n">c</span><span class="p">,</span><span class="n">deaths</span><span class="o">=</span><span class="n">d</span><span class="p">,</span><span class="n">Death_Rate</span><span class="o">=</span><span class="n">dr</span><span class="p">,</span> <span class="n">Cases_per_Mil</span><span class="o">=</span><span class="n">cpm</span><span class="p">)</span>
<span class="n">df_dr</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr>
<th scope="col">Country</th>
<th scope="col">cases</th>
<th scope="col">deaths</th>
<th scope="col">Death_Rate</th>
<th scope="col">Cases_per_Mil</th>
</tr></thead>
<tbody>
<tr>
<td>United_States_of_America</td>
<td>582594                  </td>
<td>23649                   </td>
<td>4.05925910668493        </td>
<td>1780.72124378981        </td>
</tr>
<tr>
<td>India                   </td>
<td>10363                   </td>
<td>339                     </td>
<td>3.27125349802181        </td>
<td>7.66144258651698        </td>
</tr>
<tr>
<td>Global                  </td>
<td>1873265                 </td>
<td>118854                  </td>
<td>6.34475100960088        </td>
<td>245.478002097795        </td>
</tr>
</tbody>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The numbers are close to the reports from <a href="https://www.worldometers.info/coronavirus/">https://www.worldometers.info/coronavirus/</a><br><img src="../images/r0050020.png" alt="Worldometer report" title="Worldometer report"></p>
<p>[<a href="00501/#contents">^top</a>]</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Last updated 2020-04-15 11:52:46.054857 IST</em></p>

</div>
</div>
</div>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="00415/" class="u-url">Base Graphics</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Krishnakanth Allika
            </span></p>
            <p class="dateline">
            <a href="00415/" rel="bookmark">
            <time class="published dt-published" datetime="2020-04-15T12:43:20+05:30" itemprop="datePublished" title="2020-04-15 12:43">2020-04-15 12:43</time></a>
            </p>
                <p class="commentline">
        
<a href="%7Blink%7D" onclick="this.href='/posts/00415/'; this.target='_self';"><span class="IDCommentsReplace" style="display:none">cache/posts/00415_Base Graphics.html</span>
<script>
var idcomments_acct = '7fae5836cfdd49cac599cac5b95695d1';
var idcomments_post_id = "cache/posts/00415_Base Graphics.html";
var idcomments_post_url = "/posts/00415/";
</script><script src="https://www.intensedebate.com/js/genericLinkWrapperV2.js"></script></a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote>
<p>swirl()</p>
</blockquote>
<p>| Welcome to swirl! Please sign in. If you've been here before, use the same name as you<br>
| did then. If you are new, call yourself something unique.</p>
<p>What shall I call you? Krishnakanth Allika</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: R Programming<br>
2: Take me to the swirl course repository!</p>
<p>Selection: 1</p>
<p>| Please choose a lesson, or type 0 to return to course menu.</p>
<p>1: Basic Building Blocks      2: Workspace and Files        3: Sequences of Numbers<br>
 4: Vectors                    5: Missing Values             6: Subsetting Vectors<br>
 7: Matrices and Data Frames   8: Logic                      9: Functions<br>
10: lapply and sapply         11: vapply and tapply         12: Looking at Data<br>
13: Simulation                14: Dates and Times           15: Base Graphics</p>
<p>Selection: 15</p>
<p>|                                                                                |   0%</p>
<p>| One of the greatest strengths of R, relative to other programming languages, is the<br>
| ease with which we can create publication-quality graphics. In this lesson, you'll<br>
| learn about base graphics in R.</p>
<p>...</p>
<p>|==                                                                              |   2%<br>
| We do not cover the more advanced portions of graphics in R in this lesson. These<br>
| include lattice, ggplot2 and ggvis.</p>
<p>...</p>
<p>|===                                                                             |   4%<br>
| There is a school of thought that this approach is backwards, that we should teach<br>
| ggplot2 first. See <a href="http://varianceexplained.org/r/teach_ggplot2_to_beginners/">http://varianceexplained.org/r/teach_ggplot2_to_beginners/</a> for an<br>
| outline of this view.</p>
<p>...</p>
<p>|=====                                                                           |   7%<br>
| Load the included data frame cars with data(cars).</p>
<blockquote>
<p>data(cars)</p>
</blockquote>
<p>| Your dedication is inspiring!</p>
<p>|=======                                                                         |   9%<br>
| To fix ideas, we will work with simple data frames. Our main goal is to introduce<br>
| various plotting functions and their arguments. All the output would look more<br>
| interesting with larger, more complex data sets.</p>
<p>...</p>
<p>|=========                                                                       |  11%<br>
| Pull up the help page for cars.</p>
<blockquote>
<p>?cars</p>
</blockquote>
<p>| All that hard work is paying off!</p>
<p>|==========                                                                      |  13%<br>
| As you can see in the help page, the cars data set has only two variables: speed and<br>
| stopping distance. Note that the data is from the 1920s.</p>
<p>...</p>
<p>|============                                                                    |  15%<br>
| Run head() on the cars data.</p>
<blockquote>
<p>head(cars)<br>
  speed dist<br>
1     4    2<br>
2     4   10<br>
3     7    4<br>
4     7   22<br>
5     8   16<br>
6     9   10</p>
</blockquote>
<p>| You got it right!</p>
<p>|==============                                                                  |  17%<br>
| Before plotting, it is always a good idea to get a sense of the data. Key R commands<br>
| for doing so include, dim(), names(), head(), tail() and summary().</p>
<p>...</p>
<p>|================                                                                |  20%<br>
| Run the plot() command on the cars data frame.</p>
<blockquote>
<p>plot(cars)</p>
</blockquote>
<p><img src="../images/r0040050.png" alt="plot(cars)" title="plot(cars)"></p>
<p>| You are amazing!</p>
<p>|=================                                                               |  22%<br>
| As always, R tries very hard to give you something sensible given the information that<br>
| you have provided to it. First, R notes that the data frame you have given it has just<br>
| two columns, so it assumes that you want to plot one column versus the other.</p>
<p>...</p>
<p>|===================                                                             |  24%<br>
| Second, since we do not provide labels for either axis, R uses the names of the<br>
| columns. Third, it creates axis tick marks at nice round numbers and labels them<br>
| accordingly. Fourth, it uses the other defaults supplied in plot().</p>
<p>...</p>
<p>|=====================                                                           |  26%<br>
| We will now spend some time exploring plot, but many of the topics covered here will<br>
| apply to most other R graphics functions. Note that 'plot' is short for scatterplot.</p>
<p>...</p>
<p>|=======================                                                         |  28%<br>
| Look up the help page for plot().</p>
<blockquote>
<p>?plot</p>
</blockquote>
<p>| All that hard work is paying off!</p>
<p>|========================                                                        |  30%<br>
| The help page for plot() highlights the different arguments that the function can take.<br>
| The two most important are x and y, the variables that will be plotted. For the next<br>
| set of questions, include the argument names in your answers. That is, do not type<br>
| plot(cars$speed, cars$dist), although that will work. Instead use plot(x = cars$speed,  
| y = cars$dist).</p>
<p>...</p>
<p>|==========================                                                      |  33%<br>
| Use plot() command to show speed on the x-axis and dist on the y-axis from the cars<br>
| data frame. Use the form of the plot command in which vectors are explicitly passed in<br>
| as arguments for x and y.</p>
<blockquote>
<p>plot(x=cars$speed,y=cars$dist)</p>
</blockquote>
<p><img src="../images/r0040060.png" alt="plot(x=cars$speed,y=cars$dist)" title="plot(x=cars$speed,y=cars$dist)"></p>
<p>| You got it right!</p>
<p>|============================                                                    |  35%<br>
| Note that this produces a slightly different answer than plot(cars). In this case, R is<br>
| not sure what you want to use as the labels on the axes, so it just uses the arguments<br>
| which you pass in, data frame name and dollar signs included.</p>
<p>...</p>
<p>|==============================                                                  |  37%<br>
| Note that there are other ways to call the plot command, i.e., using the "formula"<br>
| interface. For example, we get a similar plot to the above with plot(dist ~ speed,<br>
| cars). However, we will wait till later in the lesson before using the formula<br>
| interface.</p>
<p>...</p>
<p>|===============================                                                 |  39%<br>
| Use plot() command to show dist on the x-axis and speed on the y-axis from the cars<br>
| data frame. This is the opposite of what we did above.</p>
<blockquote>
<p>plot(x=cars$dist,y=cars$speed)</p>
</blockquote>
<p><img src="../images/r0040070.png" alt="plot(x=cars$dist,y=cars$speed)" title="plot(x=cars$dist,y=cars$speed)"></p>
<p>| Nice work!</p>
<p>|=================================                                               |  41%<br>
| It probably makes more sense for speed to go on the x-axis since stopping distance is a<br>
| function of speed more than the other way around. So, for the rest of the questions in<br>
| this portion of the lesson, always assign the arguments accordingly.</p>
<p>...</p>
<p>|===================================                                             |  43%<br>
| In fact, you can assume that the answers to the next few questions are all of the form<br>
| plot(x = cars$speed, y = cars$dist, ...) but with various arguments used in place of<br>
| the ...</p>
<p>...</p>
<p>|=====================================                                           |  46%<br>
| Recreate the plot with the label of the x-axis set to "Speed".</p>
<blockquote>
<p>plot(x=cars$speed,y=cars$dist,xlab="Speed")</p>
</blockquote>
<p><img src="../images/r0040080.png" alt='plot(x=cars$speed,y=cars$dist,xlab="Speed")' title='plot(x=cars$speed,y=cars$dist,xlab="Speed'>')</p>
<p>| Perseverance, that's the answer.</p>
<p>|======================================                                          |  48%<br>
| Recreate the plot with the label of the y-axis set to "Stopping Distance".</p>
<blockquote>
<p>plot(x=cars$speed,y=cars$dist,xlab="Speed",ylab="Stopping Distance")</p>
</blockquote>
<p><img src="../images/r0040090.png" alt='plot(x=cars$speed,y=cars$dist,xlab="Speed",ylab="Stopping Distance")' title='plot(x=cars$speed,y=cars$dist,xlab="Speed",ylab="Stopping Distance'>')</p>
<p>| One more time. You can do it! Or, type info() for more options.</p>
<p>| Type plot(x = cars$speed, y = cars$dist, ylab = "Stopping Distance") to create the<br>
| plot.</p>
<blockquote>
<p>plot(x=cars$speed,y=cars$dist,ylab="Stopping Distance")</p>
</blockquote>
<p><img src="../images/r0040100.png" alt='plot(x=cars$speed,y=cars$dist,ylab="Stopping Distance")' title='plot(x=cars$speed,y=cars$dist,ylab="Stopping Distance'>')</p>
<p>| You are quite good my friend!</p>
<p>|========================================                                        |  50%<br>
| Recreate the plot with "Speed" and "Stopping Distance" as axis labels.</p>
<blockquote>
<p>plot(x=cars$speed,y=cars$dist,xlab="Speed",ylab="Stopping Distance")</p>
</blockquote>
<p><img src="../images/r0040090.png" alt='plot(x=cars$speed,y=cars$dist,xlab="Speed",ylab="Stopping Distance")' title='plot(x=cars$speed,y=cars$dist,xlab="Speed",ylab="Stopping Distance'>')</p>
<p>| Excellent work!</p>
<p>|==========================================                                      |  52%<br>
| The reason that plots(cars) worked at the beginning of the lesson was that R was smart<br>
| enough to know that the first element (i.e., the first column) in cars should be<br>
| assigned to the x argument and the second element to the y argument. To save on typing,<br>
| the next set of answers will all be of the form, plot(cars, ...) with various arguments<br>
| added.</p>
<p>...</p>
<p>|===========================================                                     |  54%<br>
| For each question, we will only want one additional argument at a time. Of course, you<br>
| can pass in more than one argument when doing a real project.</p>
<p>...</p>
<p>|=============================================                                   |  57%<br>
| Plot cars with a main title of "My Plot". Note that the argument for the main title is<br>
| "main" not "title".</p>
<blockquote>
<p>plot(cars,main="My Plot")</p>
</blockquote>
<p><img src="../images/r0040110.png" alt='plot(cars,main="My Plot")' title='plot(cars,main="My Plot'>')</p>
<p>| Excellent work!</p>
<p>|===============================================                                 |  59%<br>
| Plot cars with a sub title of "My Plot Subtitle".</p>
<blockquote>
<p>plot(cars,sub="My Plot Subtitle")</p>
</blockquote>
<p><img src="../images/r0040120.png" alt='plot(cars,sub="My Plot Subtitle")' title='plot(cars,sub="My Plot Subtitle'>')</p>
<p>| You are amazing!</p>
<p>|=================================================                               |  61%<br>
| The plot help page (?plot) only covers a small number of the many arguments that can be<br>
| passed in to plot() and to other graphical functions. To begin to explore the many<br>
| other options, look at ?par. Let's look at some of the more commonly used ones.<br>
| Continue using plot(cars, ...) as the base answer to these questions.</p>
<p>...</p>
<p>|==================================================                              |  63%<br>
| Plot cars so that the plotted points are colored red. (Use col = 2 to achieve this<br>
| effect.)</p>
<blockquote>
<p>?par<br>
plot(cars,col=2)</p>
</blockquote>
<p><img src="../images/r0040130.png" alt="plot(cars,col=2)" title="plot(cars,col=2)"></p>
<p>| You are quite good my friend!</p>
<p>|====================================================                            |  65%<br>
| Plot cars while limiting the x-axis to 10 through 15.  (Use xlim = c(10, 15) to achieve<br>
| this effect.)</p>
<blockquote>
<p>plot(cars,xlim=c(10,15))</p>
</blockquote>
<p><img src="../images/r0040140.png" alt="plot(cars,xlim=c(10,15))" title="plot(cars,xlim=c(10,15))"></p>
<p>| Nice work!</p>
<p>|======================================================                          |  67%<br>
| You can also change the shape of the symbols in the plot. The help page for points<br>
| (?points) provides the details.</p>
<p>...</p>
<p>|========================================================                        |  70%<br>
| Plot cars using triangles.  (Use pch = 2 to achieve this effect.)</p>
<blockquote>
<p>plot(cars,pch=2)</p>
</blockquote>
<p><img src="../images/r0040150.png" alt="plot(cars,pch=2)" title="plot(cars,pch=2)"></p>
<p>| All that hard work is paying off!</p>
<p>|=========================================================                       |  72%<br>
| Arguments like "col" and "pch" may not seem very intuitive. And that is because they<br>
| aren't! So, many/most people use more modern packages, like ggplot2, for creating their<br>
| graphics in R.</p>
<p>...</p>
<p>|===========================================================                     |  74%<br>
| It is, however, useful to have an introduction to base graphics because many of the<br>
| idioms in lattice and ggplot2 are modeled on them.</p>
<p>...</p>
<p>|=============================================================                   |  76%<br>
| Let's now look at some other functions in base graphics that may be useful, starting<br>
| with boxplots.</p>
<p>...</p>
<p>|===============================================================                 |  78%<br>
| Load the mtcars data frame.</p>
<blockquote>
<p>data(mtcars)</p>
</blockquote>
<p>| You are quite good my friend!</p>
<p>|================================================================                |  80%<br>
| Anytime that you load up a new data frame, you should explore it before using it. In<br>
| the middle of a swirl lesson, just type play(). This temporarily suspends the lesson<br>
| (without losing the work you have already done) and allows you to issue commands like<br>
| dim(mtcars) and head(mtcars). Once you are done examining the data, just type nxt() and<br>
| the lesson will pick up where it left off.</p>
<p>...</p>
<p>|==================================================================              |  83%<br>
| Look up the help page for boxplot().</p>
<blockquote>
<p>?boxplot</p>
</blockquote>
<p>| Excellent job!</p>
<p>|====================================================================            |  85%<br>
| Instead of adding data columns directly as input arguments, as we did with plot(), it<br>
| is often handy to pass in the entire data frame. This is what the "data" argument in<br>
| boxplot() allows.</p>
<p>...</p>
<p>|======================================================================          |  87%<br>
| boxplot(), like many R functions, also takes a "formula" argument, generally an<br>
| expression with a tilde ("~") which indicates the relationship between the input<br>
| variables. This allows you to enter something like mpg ~ cyl to plot the relationship<br>
| between cyl (number of cylinders) on the x-axis and mpg (miles per gallon) on the<br>
| y-axis.</p>
<p>...</p>
<p>|=======================================================================         |  89%<br>
| Use boxplot() with formula = mpg ~ cyl and data = mtcars to create a box plot.</p>
<blockquote>
<p>boxplot(formula=mpg~cyl,data=mtcars)</p>
</blockquote>
<p><img src="../images/r0040160.png" alt="boxplot(formula=mpg~cyl,data=mtcars)" title="boxplot(formula=mpg~cyl,data=mtcars)"></p>
<p>| All that practice is paying off!</p>
<p>|=========================================================================       |  91%<br>
| The plot shows that mpg is much lower for cars with more cylinders. Note that we can<br>
| use the same set of arguments that we explored with plot() above to add axis labels,<br>
| titles and so on.</p>
<p>...</p>
<p>|===========================================================================     |  93%<br>
| When looking at a single variable, histograms are a useful tool. hist() is the<br>
| associated R function. Like plot(), hist() is best used by just passing in a single<br>
| vector.</p>
<p>...</p>
<p>|=============================================================================   |  96%<br>
| Use hist() with the vector mtcars$mpg to create a histogram.</p>
<blockquote>
<p>hist(mtcars$mpg)</p>
</blockquote>
<p><img src="../images/r0040170.png" alt="hist(mtcars$mpg)" title="hist(mtcars$mpg)"></p>
<p>| You are doing so well!</p>
<p>|==============================================================================  |  98%<br>
| In this lesson, you learned how to work with base graphics in R. The best place to go<br>
| from here is to study the ggplot2 package. If you want to explore other elements of<br>
| base graphics, then this web page (<a href="http://www.ling.upenn.edu/~joseff/rstudy/week4.html">http://www.ling.upenn.edu/~joseff/rstudy/week4.html</a>)<br>
| provides a useful overview.</p>
<p>...</p>
<p>|================================================================================| 100%<br>
| Would you like to receive credit for completing this course on Coursera.org?</p>
<p>1: No<br>
2: Yes</p>
<p>Selection: 2<br>
What is your email address? xxxxxx@xxxxxxxxxxxx<br>
What is your assignment token? xXxXxxXXxXxxXXXx<br>
Grade submission succeeded!</p>
<p>| You are amazing!</p>
<p>| You've reached the end of this lesson! Returning to the main menu...</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: R Programming<br>
2: Take me to the swirl course repository!</p>
<p>Selection: 0</p>
<p>| Leaving swirl now. Type swirl() to resume.</p>
<blockquote>
<p>ls()<br>
[1] "cars"   "mtcars"<br>
rm(list=ls())</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Last updated 2020-04-20 23:16:24.036922 IST</em></p>

</div>
</div>
</div>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="00414/" class="u-url">Dates and Times</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Krishnakanth Allika
            </span></p>
            <p class="dateline">
            <a href="00414/" rel="bookmark">
            <time class="published dt-published" datetime="2020-04-15T12:42:20+05:30" itemprop="datePublished" title="2020-04-15 12:42">2020-04-15 12:42</time></a>
            </p>
                <p class="commentline">
        
<a href="%7Blink%7D" onclick="this.href='/posts/00414/'; this.target='_self';"><span class="IDCommentsReplace" style="display:none">cache/posts/00414_Dates and Times.html</span>
<script>
var idcomments_acct = '7fae5836cfdd49cac599cac5b95695d1';
var idcomments_post_id = "cache/posts/00414_Dates and Times.html";
var idcomments_post_url = "/posts/00414/";
</script><script src="https://www.intensedebate.com/js/genericLinkWrapperV2.js"></script></a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote>
<p>swirl()</p>
</blockquote>
<p>| Welcome to swirl! Please sign in. If you've been here before, use the same name as you<br>
| did then. If you are new, call yourself something unique.</p>
<p>What shall I call you? Krishnakanth Allika</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: R Programming<br>
2: Take me to the swirl course repository!</p>
<p>Selection: 1</p>
<p>| Please choose a lesson, or type 0 to return to course menu.</p>
<p>1: Basic Building Blocks      2: Workspace and Files        3: Sequences of Numbers<br>
 4: Vectors                    5: Missing Values             6: Subsetting Vectors<br>
 7: Matrices and Data Frames   8: Logic                      9: Functions<br>
10: lapply and sapply         11: vapply and tapply         12: Looking at Data<br>
13: Simulation                14: Dates and Times           15: Base Graphics</p>
<p>Selection: 14</p>
<p>|                                                                                |   0%</p>
<p>| R has a special way of representing dates and times, which can be helpful if you're<br>
| working with data that show how something changes over time (i.e. time-series data) or<br>
| if your data contain some other temporal information, like dates of birth.</p>
<p>...</p>
<p>|==                                                                              |   3%<br>
| Dates are represented by the 'Date' class and times are represented by the 'POSIXct'<br>
| and 'POSIXlt' classes. Internally, dates are stored as the number of days since<br>
| 1970-01-01 and times are stored as either the number of seconds since 1970-01-01 (for<br>
| 'POSIXct') or a list of seconds, minutes, hours, etc. (for 'POSIXlt').</p>
<p>...</p>
<p>|====                                                                            |   6%<br>
| Let's start by using d1 &lt;- Sys.Date() to get the current date and store it in the<br>
| variable d1. (That's the letter 'd' and the number 1.)</p>
<blockquote>
<p>d1&lt;-Sys.Date()</p>
</blockquote>
<p>| That's the answer I was looking for.</p>
<p>|=======                                                                         |   8%<br>
| Use the class() function to confirm d1 is a Date object.</p>
<blockquote>
<p>class(d1)<br>
[1] "Date"</p>
</blockquote>
<p>| Keep working like that and you'll get there!</p>
<p>|=========                                                                       |  11%<br>
| We can use the unclass() function to see what d1 looks like internally. Try it out.</p>
<blockquote>
<p>unclass(d1)<br>
[1] 18367</p>
</blockquote>
<p>| Keep up the great work!</p>
<p>|===========                                                                     |  14%<br>
| That's the exact number of days since 1970-01-01!</p>
<p>...</p>
<p>|=============                                                                   |  17%<br>
| However, if you print d1 to the console, you'll get today's date -- YEAR-MONTH-DAY.<br>
| Give it a try.</p>
<blockquote>
<p>d1<br>
[1] "2020-04-15"</p>
</blockquote>
<p>| You got it!</p>
<p>|================                                                                |  19%<br>
| What if we need to reference a date prior to 1970-01-01? Create a variable d2<br>
| containing as.Date("1969-01-01").</p>
<blockquote>
<p>d2&lt;-as.Date("1969-01-01")</p>
</blockquote>
<p>| You nailed it! Good job!</p>
<p>|==================                                                              |  22%<br>
| Now use unclass() again to see what d2 looks like internally.</p>
<blockquote>
<p>unclass(d2)<br>
[1] -365</p>
</blockquote>
<p>| That's a job well done!</p>
<p>|====================                                                            |  25%<br>
| As you may have anticipated, you get a negative number. In this case, it's -365, since<br>
| 1969-01-01 is exactly one calendar year (i.e. 365 days) BEFORE 1970-01-01.</p>
<p>...</p>
<p>|======================                                                          |  28%<br>
| Now, let's take a look at how R stores times. You can access the current date and time<br>
| using the Sys.time() function with no arguments. Do this and store the result in a<br>
| variable called t1.</p>
<blockquote>
<p>t1&lt;-Sys.time()</p>
</blockquote>
<p>| You're the best!</p>
<p>|========================                                                        |  31%<br>
| View the contents of t1.</p>
<blockquote>
<p>t1<br>
[1] "2020-04-15 17:21:46 IST"</p>
</blockquote>
<p>| You are doing so well!</p>
<p>|===========================                                                     |  33%<br>
| And check the class() of t1.</p>
<blockquote>
<p>class(t1)<br>
[1] "POSIXct" "POSIXt"</p>
</blockquote>
<p>| All that hard work is paying off!</p>
<p>|=============================                                                   |  36%<br>
| As mentioned earlier, POSIXct is just one of two ways that R represents time<br>
| information. (You can ignore the second value above, POSIXt, which just functions as a<br>
| common language between POSIXct and POSIXlt.) Use unclass() to see what t1 looks like<br>
| internally -- the (large) number of seconds since the beginning of 1970.</p>
<blockquote>
<p>unclass(t1)<br>
[1] 1586951506</p>
</blockquote>
<p>| You got it right!</p>
<p>|===============================                                                 |  39%<br>
| By default, Sys.time() returns an object of class POSIXct, but we can coerce the result<br>
| to POSIXlt with as.POSIXlt(Sys.time()). Give it a try and store the result in t2.</p>
<blockquote>
<p>t2&lt;-as.POSIXlt(Sys.time())</p>
</blockquote>
<p>| All that hard work is paying off!</p>
<p>|=================================                                               |  42%<br>
| Check the class of t2.</p>
<blockquote>
<p>class(t2)<br>
[1] "POSIXlt" "POSIXt"</p>
</blockquote>
<p>| All that hard work is paying off!</p>
<p>|====================================                                            |  44%<br>
| Now view its contents.</p>
<blockquote>
<p>t2<br>
[1] "2020-04-15 17:23:09 IST"</p>
</blockquote>
<p>| That's the answer I was looking for.</p>
<p>|======================================                                          |  47%<br>
| The printed format of t2 is identical to that of t1. Now unclass() t2 to see how it is<br>
| different internally.</p>
<blockquote>
<p>unclass(t2)<br>
$sec<br>
[1] 9.964687</p>
</blockquote>
<p>$min<br>
[1] 23</p>
<p>$hour<br>
[1] 17</p>
<p>$mday<br>
[1] 15</p>
<p>$mon<br>
[1] 3</p>
<p>$year<br>
[1] 120</p>
<p>$wday<br>
[1] 3</p>
<p>$yday<br>
[1] 105</p>
<p>$isdst<br>
[1] 0</p>
<p>$zone<br>
[1] "IST"</p>
<p>$gmtoff<br>
[1] 19800</p>
<p>attr(,"tzone")<br>
[1] ""      "IST"   "+0630"</p>
<p>| Keep up the great work!</p>
<p>|========================================                                        |  50%<br>
| t2, like all POSIXlt objects, is just a list of values that make up the date and time.<br>
| Use str(unclass(t2)) to have a more compact view.</p>
<blockquote>
<p>str(unclass(t2))<br>
List of 11<br>
 $ sec   : num 9.96  
 $ min   : int 23<br>
 $ hour  : int 17  
 $ mday  : int 15<br>
 $ mon   : int 3  
 $ year  : int 120<br>
 $ wday  : int 3  
 $ yday  : int 105<br>
 $ isdst : int 0  
 $ zone  : chr "IST"<br>
 $ gmtoff: int 19800</p>
<ul>
<li>attr(*, "tzone")= chr [1:3] "" "IST" "+0630"  </li>
</ul>
</blockquote>
<p>| You are quite good my friend!</p>
<p>|==========================================                                      |  53%<br>
| If, for example, we want just the minutes from the time stored in t2, we can access<br>
| them with t2$min. Give it a try.</p>
<blockquote>
<p>t2$min<br>
[1] 23</p>
</blockquote>
<p>| Nice work!</p>
<p>|============================================                                    |  56%<br>
| Now that we have explored all three types of date and time objects, let's look at a few<br>
| functions that extract useful information from any of these objects -- weekdays(),<br>
| months(), and quarters().</p>
<p>...</p>
<p>|===============================================                                 |  58%<br>
| The weekdays() function will return the day of week from any date or time object. Try<br>
| it out on d1, which is the Date object that contains today's date.</p>
<blockquote>
<p>weekdays(d1)<br>
[1] "Wednesday"</p>
</blockquote>
<p>| Perseverance, that's the answer.</p>
<p>|=================================================                               |  61%<br>
| The months() function also works on any date or time object. Try it on t1, which is the<br>
| POSIXct object that contains the current time (well, it was the current time when you<br>
| created it).</p>
<blockquote>
<p>months(t1)<br>
[1] "April"</p>
</blockquote>
<p>| Excellent job!</p>
<p>|===================================================                             |  64%<br>
| The quarters() function returns the quarter of the year (Q1-Q4) from any date or time<br>
| object. Try it on t2, which is the POSIXlt object that contains the time at which you<br>
| created it.</p>
<blockquote>
<p>quarters(t2)<br>
[1] "Q2"</p>
</blockquote>
<p>| Your dedication is inspiring!</p>
<p>|=====================================================                           |  67%<br>
| Often, the dates and times in a dataset will be in a format that R does not recognize.<br>
| The strptime() function can be helpful in this situation.</p>
<p>...</p>
<p>|========================================================                        |  69%<br>
| strptime() converts character vectors to POSIXlt. In that sense, it is similar to<br>
| as.POSIXlt(), except that the input doesn't have to be in a particular format<br>
| (YYYY-MM-DD).</p>
<p>...</p>
<p>|==========================================================                      |  72%<br>
| To see how it works, store the following character string in a variable called t3:<br>
| "October 17, 1986 08:24" (with the quotes).</p>
<blockquote>
<p>t3&lt;-"October 17, 1986 08:24"</p>
</blockquote>
<p>| Keep working like that and you'll get there!</p>
<p>|============================================================                    |  75%<br>
| Now, use strptime(t3, "%B %d, %Y %H:%M") to help R convert our date/time object to a<br>
| format that it understands. Assign the result to a new variable called t4. (You should<br>
| pull up the documentation for strptime() if you'd like to know more about how it<br>
| works.)</p>
<blockquote>
<p>strptime(t3, "%B %d, %Y %H:%M")<br>
[1] "1986-10-17 08:24:00 IST"</p>
</blockquote>
<p>| Not quite, but you're learning! Try again. Or, type info() for more options.</p>
<p>| t4 &lt;- strptime(t3, "%B %d, %Y %H:%M") will convert our date/time object to a format<br>
| that R understands.</p>
<blockquote>
<p>t4&lt;-strptime(t3, "%B %d, %Y %H:%M")</p>
</blockquote>
<p>| You got it right!</p>
<p>|==============================================================                  |  78%<br>
| Print the contents of t4.</p>
<blockquote>
<p>t4<br>
[1] "1986-10-17 08:24:00 IST"</p>
</blockquote>
<p>| You're the best!</p>
<p>|================================================================                |  81%<br>
| That's the format we've come to expect. Now, let's check its class().</p>
<blockquote>
<p>class(t4)<br>
[1] "POSIXlt" "POSIXt"</p>
</blockquote>
<p>| Great job!</p>
<p>|===================================================================             |  83%<br>
| Finally, there are a number of operations that you can perform on dates and times,<br>
| including arithmetic operations (+ and -) and comparisons (&lt;, ==, etc.)</p>
<p>...</p>
<p>|=====================================================================           |  86%<br>
| The variable t1 contains the time at which you created it (recall you used Sys.time()).<br>
| Confirm that some time has passed since you created t1 by using the 'greater than'<br>
| operator to compare it to the current time: Sys.time() &gt; t1</p>
<blockquote>
<p>Sys.time()&gt;t1<br>
[1] TRUE</p>
</blockquote>
<p>| That's correct!</p>
<p>|=======================================================================         |  89%<br>
| So we know that some time has passed, but how much? Try subtracting t1 from the current<br>
| time using Sys.time() - t1. Don't forget the parentheses at the end of Sys.time(),<br>
| since it is a function.</p>
<blockquote>
<p>Sys.time()-t1<br>
Time difference of 12.21747 mins</p>
</blockquote>
<p>| You are amazing!</p>
<p>|=========================================================================       |  92%<br>
| The same line of thinking applies to addition and the other comparison operators. If<br>
| you want more control over the units when finding the above difference in times, you<br>
| can use difftime(), which allows you to specify a 'units' parameter.</p>
<p>...</p>
<p>|============================================================================    |  94%<br>
| Use difftime(Sys.time(), t1, units = 'days') to find the amount of time in DAYS that<br>
| has passed since you created t1.</p>
<blockquote>
<p>difftime(Sys.time(), t1, units = 'days')<br>
Time difference of 0.01950932 days</p>
</blockquote>
<p>| That's the answer I was looking for.</p>
<p>|==============================================================================  |  97%<br>
| In this lesson, you learned how to work with dates and times in R. While it is<br>
| important to understand the basics, if you find yourself working with dates and times<br>
| often, you may want to check out the lubridate package by Hadley Wickham.</p>
<p>...</p>
<p>|================================================================================| 100%<br>
| Would you like to receive credit for completing this course on Coursera.org?</p>
<p>1: No<br>
2: Yes</p>
<p>Selection: 2<br>
What is your email address? xxxxxx@xxxxxxxxxxxx<br>
What is your assignment token? xXxXxxXXxXxxXXXx<br>
Grade submission succeeded!</p>
<p>| Perseverance, that's the answer.</p>
<p>| You've reached the end of this lesson! Returning to the main menu...</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: R Programming<br>
2: Take me to the swirl course repository!</p>
<p>Selection: 0</p>
<p>| Leaving swirl now. Type swirl() to resume.</p>
<blockquote>
<p>ls()<br>
[1] "d1" "d2" "dl" "t1" "t2" "t3" "t4"<br>
rm(list=ls())</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Last updated 2020-04-20 23:37:33.781884 IST</em></p>

</div>
</div>
</div>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="00413/" class="u-url">Simulation</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Krishnakanth Allika
            </span></p>
            <p class="dateline">
            <a href="00413/" rel="bookmark">
            <time class="published dt-published" datetime="2020-04-15T12:41:56+05:30" itemprop="datePublished" title="2020-04-15 12:41">2020-04-15 12:41</time></a>
            </p>
                <p class="commentline">
        
<a href="%7Blink%7D" onclick="this.href='/posts/00413/'; this.target='_self';"><span class="IDCommentsReplace" style="display:none">cache/posts/00413_Simulation.html</span>
<script>
var idcomments_acct = '7fae5836cfdd49cac599cac5b95695d1';
var idcomments_post_id = "cache/posts/00413_Simulation.html";
var idcomments_post_url = "/posts/00413/";
</script><script src="https://www.intensedebate.com/js/genericLinkWrapperV2.js"></script></a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote>
<p>swirl()</p>
</blockquote>
<p>| Welcome to swirl! Please sign in. If you've been here before, use the same name as you<br>
| did then. If you are new, call yourself something unique.</p>
<p>What shall I call you? Krishnakanth Allika</p>
<p>| Please choose a course, or type 0 to exit swirl.<br>
| Please choose a course, or type 0 to exit swirl.</p>
<p>1: R Programming<br>
2: Take me to the swirl course repository!</p>
<p>Selection: 1</p>
<p>| Please choose a lesson, or type 0 to return to course menu.</p>
<p>1: Basic Building Blocks      2: Workspace and Files        3: Sequences of Numbers<br>
 4: Vectors                    5: Missing Values             6: Subsetting Vectors<br>
 7: Matrices and Data Frames   8: Logic                      9: Functions<br>
10: lapply and sapply         11: vapply and tapply         12: Looking at Data<br>
13: Simulation                14: Dates and Times           15: Base Graphics</p>
<p>Selection: 13</p>
<p>|                                                                                |   0%</p>
<p>| One of the great advantages of using a statistical programming language like R is its<br>
| vast collection of tools for simulating random numbers.</p>
<p>...</p>
<p>|==                                                                              |   3%<br>
| This lesson assumes familiarity with a few common probability distributions, but these<br>
| topics will only be discussed with respect to random number generation. Even if you<br>
| have no prior experience with these concepts, you should be able to complete the lesson<br>
| and understand the main ideas.</p>
<p>...</p>
<p>|=====                                                                           |   6%<br>
| The first function we'll use to generate random numbers is sample(). Use ?sample to<br>
| pull up the documentation.</p>
<blockquote>
<p>?sample</p>
</blockquote>
<p>| Nice work!</p>
<p>|=======                                                                         |   9%<br>
| Let's simulate rolling four six-sided dice: sample(1:6, 4, replace = TRUE).</p>
<blockquote>
<p>sample(1:6,4,replace=TRUE)<br>
[1] 3 5 5 3</p>
</blockquote>
<p>| Keep up the great work!</p>
<p>|==========                                                                      |  12%<br>
| Now repeat the command to see how your result differs. (The probability of rolling the<br>
| exact same result is (1/6)^4 = 0.00077, which is pretty small!)</p>
<blockquote>
<p>sample(1:6,4,replace=TRUE)<br>
[1] 2 6 6 3</p>
</blockquote>
<p>| Keep working like that and you'll get there!</p>
<p>|============                                                                    |  15%<br>
| sample(1:6, 4, replace = TRUE) instructs R to randomly select four numbers between 1<br>
| and 6, WITH replacement. Sampling with replacement simply means that each number is<br>
| "replaced" after it is selected, so that the same number can show up more than once.<br>
| This is what we want here, since what you roll on one die shouldn't affect what you<br>
| roll on any of the others.</p>
<p>...</p>
<p>|===============                                                                 |  18%<br>
| Now sample 10 numbers between 1 and 20, WITHOUT replacement. To sample without<br>
| replacement, simply leave off the 'replace' argument.</p>
<blockquote>
<p>sample(1:20,10)<br>
 [1] 11  1 12 10  9 20 17  8  7  5</p>
</blockquote>
<p>| Keep working like that and you'll get there!</p>
<p>|=================                                                               |  21%<br>
| Since the last command sampled without replacement, no number appears more than once in<br>
| the output.</p>
<p>...</p>
<p>|===================                                                             |  24%<br>
| LETTERS is a predefined variable in R containing a vector of all 26 letters of the<br>
| English alphabet. Take a look at it now.</p>
<blockquote>
<p>LETTERS<br>
 [1] "A" "B" "C" "D" "E" "F" "G" "H" "I" "J" "K" "L" "M" "N" "O" "P" "Q" "R" "S" "T" "U"<br>
[22] "V" "W" "X" "Y" "Z"</p>
</blockquote>
<p>| You got it!</p>
<p>|======================                                                          |  27%<br>
| The sample() function can also be used to permute, or rearrange, the elements of a<br>
| vector. For example, try sample(LETTERS) to permute all 26 letters of the English<br>
| alphabet.</p>
<blockquote>
<p>sample(LETTERS)<br>
 [1] "A" "G" "K" "S" "B" "C" "U" "D" "P" "I" "Z" "V" "M" "R" "E" "Q" "Y" "N" "F" "T" "L"<br>
[22] "J" "X" "O" "H" "W"</p>
</blockquote>
<p>| You are amazing!</p>
<p>|========================                                                        |  30%<br>
| This is identical to taking a sample of size 26 from LETTERS, without replacement. When<br>
| the 'size' argument to sample() is not specified, R takes a sample equal in size to the<br>
| vector from which you are sampling.</p>
<p>...</p>
<p>|===========================                                                     |  33%<br>
| Now, suppose we want to simulate 100 flips of an unfair two-sided coin. This particular<br>
| coin has a 0.3 probability of landing 'tails' and a 0.7 probability of landing 'heads'.</p>
<p>...</p>
<p>|=============================                                                   |  36%<br>
| Let the value 0 represent tails and the value 1 represent heads. Use sample() to draw a<br>
| sample of size 100 from the vector c(0,1), with replacement. Since the coin is unfair,<br>
| we must attach specific probabilities to the values 0 (tails) and 1 (heads) with a<br>
| fourth argument, prob = c(0.3, 0.7). Assign the result to a new variable called flips.</p>
<blockquote>
<p>flips&lt;-sample(c(0,1),100,prob=c(0.3,0.7))<br>
Error in sample.int(length(x), size, replace, prob) :<br>
  cannot take a sample larger than the population when 'replace = FALSE'<br>
flips&lt;-sample(c(0,1),100,prob=c(0.3,0.7),replace = TRUE)</p>
</blockquote>
<p>| Keep working like that and you'll get there!</p>
<p>|================================                                                |  39%<br>
| View the contents of the flips variable.</p>
<blockquote>
<p>flips<br>
  [1] 1 0 1 1 1 0 1 1 1 0 1 1 1 1 0 1 1 0 1 1 1 1 1 1 1 1 1 1 0 0 0 1 0 0 1 1 1 1 0 1 1 0<br>
 [43] 1 0 1 0 1 1 0 1 1 1 1 1 0 0 1 0 1 1 0 0 0 1 1 1 1 0 0 1 0 1 1 1 1 1 1 0 0 1 0 1 1 1<br>
 [85] 0 1 1 0 1 1 1 0 1 1 1 0 1 0 0 1</p>
</blockquote>
<p>| All that hard work is paying off!</p>
<p>|==================================                                              |  42%<br>
| Since we set the probability of landing heads on any given flip to be 0.7, we'd expect<br>
| approximately 70 of our coin flips to have the value 1. Count the actual number of 1s<br>
| contained in flips using the sum() function.</p>
<blockquote>
<p>sum(flips)<br>
[1] 67</p>
</blockquote>
<p>| You are quite good my friend!</p>
<p>|====================================                                            |  45%<br>
| A coin flip is a binary outcome (0 or 1) and we are performing 100 independent trials<br>
| (coin flips), so we can use rbinom() to simulate a binomial random variable. Pull up<br>
| the documentation for rbinom() using ?rbinom.</p>
<blockquote>
<p>?rbinom</p>
</blockquote>
<p>| You nailed it! Good job!</p>
<p>|=======================================                                         |  48%<br>
| Each probability distribution in R has an r<strong><em> function (for "random"), a d</em></strong> function<br>
| (for "density"), a p<strong><em> (for "probability"), and q</em></strong> (for "quantile"). We are most<br>
| interested in the r*** functions in this lesson, but I encourage you to explore the<br>
| others on your own.</p>
<p>...</p>
<p>|=========================================                                       |  52%<br>
| A binomial random variable represents the number of 'successes' (heads) in a given<br>
| number of independent 'trials' (coin flips). Therefore, we can generate a single random<br>
| variable that represents the number of heads in 100 flips of our unfair coin using<br>
| rbinom(1, size = 100, prob = 0.7). Note that you only specify the probability of<br>
| 'success' (heads) and NOT the probability of 'failure' (tails). Try it now.</p>
<blockquote>
<p>rbinom(1,size=100,prob=0.7)<br>
[1] 64</p>
</blockquote>
<p>| Perseverance, that's the answer.</p>
<p>|============================================                                    |  55%<br>
| Equivalently, if we want to see all of the 0s and 1s, we can request 100 observations,<br>
| each of size 1, with success probability of 0.7. Give it a try, assigning the result to<br>
| a new variable called flips2.</p>
<blockquote>
<p>flips2&lt;-rbinom(100,size=100,prob=0.7)</p>
</blockquote>
<p>| Not quite, but you're learning! Try again. Or, type info() for more options.</p>
<p>| Call rbinom() with n = 100, size = 1, and prob = 0.7 and assign the result to flips2.</p>
<blockquote>
<p>flips2&lt;-rbinom(100,size=1,prob=0.7)</p>
</blockquote>
<p>| You're the best!</p>
<p>|==============================================                                  |  58%<br>
| View the contents of flips2.</p>
<blockquote>
<p>flips2<br>
  [1] 1 1 1 1 1 0 1 0 1 1 0 1 1 1 0 1 1 1 0 0 1 0 1 1 1 1 1 0 0 1 0 0 1 1 1 1 1 1 1 0 1 1<br>
 [43] 1 0 1 0 1 1 1 1 1 1 0 1 0 1 1 1 0 1 1 1 1 1 1 0 0 0 1 1 1 1 0 1 1 1 1 1 0 0 0 1 1 1<br>
 [85] 1 0 1 1 1 0 0 1 1 1 1 1 1 1 1 1</p>
</blockquote>
<p>| You are really on a roll!</p>
<p>|================================================                                |  61%<br>
| Now use sum() to count the number of 1s (heads) in flips2. It should be close to 70!</p>
<blockquote>
<p>sum(flips2)<br>
[1] 73</p>
</blockquote>
<p>| Great job!</p>
<p>|===================================================                             |  64%<br>
| Similar to rbinom(), we can use R to simulate random numbers from many other<br>
| probability distributions. Pull up the documentation for rnorm() now.</p>
<blockquote>
<p>?rnorm</p>
</blockquote>
<p>| You got it right!</p>
<p>|=====================================================                           |  67%<br>
| The standard normal distribution has mean 0 and standard deviation 1. As you can see<br>
| under the 'Usage' section in the documentation, the default values for the 'mean' and<br>
| 'sd' arguments to rnorm() are 0 and 1, respectively. Thus, rnorm(10) will generate 10<br>
| random numbers from a standard normal distribution. Give it a try.</p>
<blockquote>
<p>rnorm(10)<br>
 [1]  0.3573471  0.7579807 -2.3097147 -0.1032675 -1.9347451 -0.2738356 -0.3452365<br>
 [8]  0.7985894  0.9606335  0.7152267</p>
</blockquote>
<p>| Your dedication is inspiring!</p>
<p>|========================================================                        |  70%<br>
| Now do the same, except with a mean of 100 and a standard deviation of 25.</p>
<blockquote>
<p>rnorm(10,mean=100,sd=25)<br>
 [1]  94.27487 100.14298 100.07092  93.08279  61.79063 102.18774 108.74859 103.19485<br>
 [9] 123.83857 143.24210</p>
</blockquote>
<p>| Nice work!</p>
<p>|==========================================================                      |  73%<br>
| Finally, what if we want to simulate 100 <em>groups</em> of random numbers, each containing 5<br>
| values generated from a Poisson distribution with mean 10? Let's start with one group<br>
| of 5 numbers, then I'll show you how to repeat the operation 100 times in a convenient<br>
| and compact way.</p>
<p>...</p>
<p>|=============================================================                   |  76%<br>
| Generate 5 random values from a Poisson distribution with mean 10. Check out the<br>
| documentation for rpois() if you need help.</p>
<blockquote>
<p>?rpois<br>
rpois(5,10)<br>
[1] 14 12 13  8  8</p>
</blockquote>
<p>| Your dedication is inspiring!</p>
<p>|===============================================================                 |  79%<br>
| Now use replicate(100, rpois(5, 10)) to perform this operation 100 times. Store the<br>
| result in a new variable called my_pois.</p>
<blockquote>
<p>my_pois&lt;-replicate(100,rpois(5,10))</p>
</blockquote>
<p>| You got it right!</p>
<p>|=================================================================               |  82%<br>
| Take a look at the contents of my_pois.</p>
<blockquote>
<p>my_pois<br>
     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14] [,15]<br>
[1,]    7    8    7   12   16   10   11    8   16    11     8     6    13     7     9<br>
[2,]    8    8    7   12   13   11   15   12   14    14     8    12     8    11    10<br>
[3,]   12    7   12    7    9    9   16    4   11    13    16    19    13     8     8<br>
[4,]    8    7   11    4    5   10   10   11    9    12     8    10    10     8     6<br>
[5,]   13    8   15   11    8    8    7   13    8     4    14     8    11     5    14<br>
     [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25] [,26] [,27] [,28] [,29]<br>
[1,]     9     7    10     6     8     9     9    12     6     9     1    13     8    10<br>
[2,]    12    11     8    11     9     5     2     6    11     9    16    12    10    12<br>
[3,]    13    14     6     8     7     8     9     7    16    12    15    11     5    11<br>
[4,]    17    11    12     9    16    11     8    10     4     8    15     9     6    10<br>
[5,]     8    10    10     8    12    15     8     8    12     7     9     8    14    11<br>
     [,30] [,31] [,32] [,33] [,34] [,35] [,36] [,37] [,38] [,39] [,40] [,41] [,42] [,43]<br>
[1,]    10     8     5     5     5     6    13     7    11     8    15    10    12     5<br>
[2,]    17     9     8    11    11    11     7    15    10     9     6    10     8     8<br>
[3,]    13    17    14     8    12    10     8    13     9     4    10    14    13     8<br>
[4,]     6    17    12    11    13    10    16     3     9     8     4    12    11    15<br>
[5,]     8     4    10    11    17     7    13     8     5     9     8    10     8     8<br>
     [,44] [,45] [,46] [,47] [,48] [,49] [,50] [,51] [,52] [,53] [,54] [,55] [,56] [,57]<br>
[1,]    16    11    15     9    10    14    13    11     8     6    11    11    14     9<br>
[2,]    11    12    10     7     7     7     2    11     8     9    12     6    10    10<br>
[3,]     8     9     9     9    10    12     4    17     9     7    17     8    11    10<br>
[4,]    14    10    13    11     5     5     8     9     5    14     9    15     9    16<br>
[5,]    13     9     9     6     6     8     6     9    11    16    13     7     6    14<br>
     [,58] [,59] [,60] [,61] [,62] [,63] [,64] [,65] [,66] [,67] [,68] [,69] [,70] [,71]<br>
[1,]     9     9     9    10     9     7     9     8    12    13     9     7     9     9<br>
[2,]     8     8    13    15    10     7    16     5    13     8    12    10    10    10<br>
[3,]     5     4     6    10    11    11    17     8    12     5     6     9     6    13<br>
[4,]    10    12     9    11     9    15    10     6     9    14     7    11    14    11<br>
[5,]    13    11    11     8    13    14     4     4    13     9     7     9    12    10<br>
     [,72] [,73] [,74] [,75] [,76] [,77] [,78] [,79] [,80] [,81] [,82] [,83] [,84] [,85]<br>
[1,]     9     9    11     9    14     9    12    15     5     3     6     4    12     8<br>
[2,]    16     8     6     9    10     8     9     3    12     7    11    10    10    12<br>
[3,]     9    14    11    16    11    18     7    13     8    11    10    16    10    12<br>
[4,]    11    11    11    11     9    14     6     5     8    14    14     8    16    14<br>
[5,]    15    11     9    18    13    10     9     6     8    11     7     6    11    15<br>
     [,86] [,87] [,88] [,89] [,90] [,91] [,92] [,93] [,94] [,95] [,96] [,97] [,98] [,99]<br>
[1,]     9    10    11    14     9    12    16     7     4     7    13     6    12    10<br>
[2,]    14    15     9    12    13    11    10     5    10    15    12    10     9     7<br>
[3,]     7    15    13     7    12     7     8    13     9    15     8    11     6    15<br>
[4,]    10    10    10     6    11    16    12     9     6    10    10    13    10     9<br>
[5,]     6     7     5    12    11     9    13     9    13     4    12    11     8    11<br>
     [,100]<br>
[1,]     10<br>
[2,]      8<br>
[3,]     11<br>
[4,]     10<br>
[5,]     19</p>
</blockquote>
<p>| You got it!</p>
<p>|====================================================================            |  85%<br>
| replicate() created a matrix, each column of which contains 5 random numbers generated<br>
| from a Poisson distribution with mean 10. Now we can find the mean of each column in<br>
| my_pois using the colMeans() function. Store the result in a variable called cm.</p>
<blockquote>
<p>cm&lt;-colMeans(my_pois)</p>
</blockquote>
<p>| You're the best!</p>
<p>|======================================================================          |  88%<br>
| And let's take a look at the distribution of our column means by plotting a histogram<br>
| with hist(cm).</p>
<blockquote>
<p>hist(cm)</p>
</blockquote>
<p><img src="../images/r0040040.png" alt="hist(cm)" title="hist(cm)"></p>
<p>| That's the answer I was looking for.</p>
<p>|=========================================================================       |  91%<br>
| Looks like our column means are almost normally distributed, right? That's the Central<br>
| Limit Theorem at work, but that's a lesson for another day!</p>
<p>...</p>
<p>|===========================================================================     |  94%<br>
| All of the standard probability distributions are built into R, including exponential<br>
| (rexp()), chi-squared (rchisq()), gamma (rgamma()), .... Well, you see the pattern.</p>
<p>...</p>
<p>|==============================================================================  |  97%<br>
| Simulation is practically a field of its own and we've only skimmed the surface of<br>
| what's possible. I encourage you to explore these and other functions further on your<br>
| own.</p>
<p>...</p>
<p>|================================================================================| 100%<br>
| Would you like to receive credit for completing this course on Coursera.org?</p>
<p>1: Yes<br>
2: No</p>
<p>Selection: 1<br>
What is your email address? xxxxxx@xxxxxxxxxxxx<br>
What is your assignment token? xXxXxxXXxXxxXXXx<br>
Grade submission succeeded!</p>
<p>| You are amazing!</p>
<p>| You've reached the end of this lesson! Returning to the main menu...</p>
<p>| Please choose a course, or type 0 to exit swirl.</p>
<p>1: R Programming<br>
2: Take me to the swirl course repository!</p>
<p>Selection: 0</p>
<p>| Leaving swirl now. Type swirl() to resume.</p>
<blockquote>
<p>ls()<br>
[1] "cm"      "flips"   "flips2"  "my_pois"<br>
rm(list=ls())</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Last updated 2020-04-20 22:36:53.783177 IST</em></p>

</div>
</div>
</div>
</div>
    </div>
    </article>
</div>

        <ul class="pager postindexpager clearfix">
<li class="next"><a href="index-2.html" rel="next">Older posts</a></li>
        </ul>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha384-3lJUsx1TJHt7BA4udB5KPnDrlkO8T6J6v/op7ui0BbCjvZ9WqV4Xm6DTP6kQ/iBH" crossorigin="anonymous"></script><script type="text/x-mathjax-config">
        MathJax.Hub.Config({tex2jax: {inlineMath: [['$latex ','$'], ['\\(','\\)']]}});
        </script><!--End of body content--><footer id="footer">
            Contents Â© 2020 Krishnakanth Allika 
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
<img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png"></a><br>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.
            
            
        </footer>
</div>
</div>


        <script src="../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-163231811-1"></script><script>  window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-163231811-1'); gtag('set', {'user_id': 'USER_ID'});</script>
</body>
</html>
